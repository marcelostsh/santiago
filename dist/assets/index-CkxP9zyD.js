(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function fm(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const lt={},qo=[],Ir=()=>{},yC=()=>!1,Pd=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),hm=n=>n.startsWith("onUpdate:"),vn=Object.assign,pm=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},vC=Object.prototype.hasOwnProperty,st=(n,e)=>vC.call(n,e),De=Array.isArray,Wo=n=>Rd(n)==="[object Map]",Fw=n=>Rd(n)==="[object Set]",Fe=n=>typeof n=="function",_t=n=>typeof n=="string",ys=n=>typeof n=="symbol",yt=n=>n!==null&&typeof n=="object",zw=n=>(yt(n)||Fe(n))&&Fe(n.then)&&Fe(n.catch),jw=Object.prototype.toString,Rd=n=>jw.call(n),bC=n=>Rd(n).slice(8,-1),Hw=n=>Rd(n)==="[object Object]",mm=n=>_t(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,sl=fm(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Od=n=>{const e=Object.create(null);return t=>e[t]||(e[t]=n(t))},wC=/-(\w)/g,sr=Od(n=>n.replace(wC,(e,t)=>t?t.toUpperCase():"")),TC=/\B([A-Z])/g,di=Od(n=>n.replace(TC,"-$1").toLowerCase()),Dd=Od(n=>n.charAt(0).toUpperCase()+n.slice(1)),Uf=Od(n=>n?`on${Dd(n)}`:""),js=(n,e)=>!Object.is(n,e),Ku=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},Uw=(n,e,t,r=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:r,value:t})},Jh=n=>{const e=parseFloat(n);return isNaN(e)?n:e};let Ky;const Nd=()=>Ky||(Ky=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ld(n){if(De(n)){const e={};for(let t=0;t<n.length;t++){const r=n[t],s=_t(r)?xC(r):Ld(r);if(s)for(const i in s)e[i]=s[i]}return e}else if(_t(n)||yt(n))return n}const EC=/;(?![^(]*\))/g,SC=/:([^]+)/,_C=/\/\*[^]*?\*\//g;function xC(n){const e={};return n.replace(_C,"").split(EC).forEach(t=>{if(t){const r=t.split(SC);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function ye(n){let e="";if(_t(n))e=n;else if(De(n))for(let t=0;t<n.length;t++){const r=ye(n[t]);r&&(e+=r+" ")}else if(yt(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}const CC="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",AC=fm(CC);function qw(n){return!!n||n===""}const Ww=n=>!!(n&&n.__v_isRef===!0),Ce=n=>_t(n)?n:n==null?"":De(n)||yt(n)&&(n.toString===jw||!Fe(n.toString))?Ww(n)?Ce(n.value):JSON.stringify(n,Gw,2):String(n),Gw=(n,e)=>Ww(e)?Gw(n,e.value):Wo(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[r,s],i)=>(t[qf(r,i)+" =>"]=s,t),{})}:Fw(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>qf(t))}:ys(e)?qf(e):yt(e)&&!De(e)&&!Hw(e)?String(e):e,qf=(n,e="")=>{var t;return ys(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let $n;class kC{constructor(e=!1){this.detached=e,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=$n,!e&&$n&&(this.index=($n.scopes||($n.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=$n;try{return $n=this,e()}finally{$n=t}}}on(){$n=this}off(){$n=this.parent}stop(e){if(this._active){this._active=!1;let t,r;for(t=0,r=this.effects.length;t<r;t++)this.effects[t].stop();for(this.effects.length=0,t=0,r=this.cleanups.length;t<r;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,r=this.scopes.length;t<r;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function IC(){return $n}let dt;const Wf=new WeakSet;class Kw{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,$n&&$n.active&&$n.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Wf.has(this)&&(Wf.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Qw(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Jy(this),Yw(this);const e=dt,t=ur;dt=this,ur=!0;try{return this.fn()}finally{Xw(this),dt=e,ur=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)vm(e);this.deps=this.depsTail=void 0,Jy(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Wf.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Qh(this)&&this.run()}get dirty(){return Qh(this)}}let Jw=0,il,ol;function Qw(n,e=!1){if(n.flags|=8,e){n.next=ol,ol=n;return}n.next=il,il=n}function gm(){Jw++}function ym(){if(--Jw>0)return;if(ol){let e=ol;for(ol=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;il;){let e=il;for(il=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){n||(n=r)}e=t}}if(n)throw n}function Yw(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Xw(n){let e,t=n.depsTail,r=t;for(;r;){const s=r.prevDep;r.version===-1?(r===t&&(t=s),vm(r),MC(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}n.deps=e,n.depsTail=t}function Qh(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Zw(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function Zw(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Al))return;n.globalVersion=Al;const e=n.dep;if(n.flags|=2,e.version>0&&!n.isSSR&&n.deps&&!Qh(n)){n.flags&=-3;return}const t=dt,r=ur;dt=n,ur=!0;try{Yw(n);const s=n.fn(n._value);(e.version===0||js(s,n._value))&&(n._value=s,e.version++)}catch(s){throw e.version++,s}finally{dt=t,ur=r,Xw(n),n.flags&=-3}}function vm(n,e=!1){const{dep:t,prevSub:r,nextSub:s}=n;if(r&&(r.nextSub=s,n.prevSub=void 0),s&&(s.prevSub=r,n.nextSub=void 0),t.subs===n&&(t.subs=r,!r&&t.computed)){t.computed.flags&=-5;for(let i=t.computed.deps;i;i=i.nextDep)vm(i,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function MC(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}let ur=!0;const e1=[];function fi(){e1.push(ur),ur=!1}function hi(){const n=e1.pop();ur=n===void 0?!0:n}function Jy(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=dt;dt=void 0;try{e()}finally{dt=t}}}let Al=0,PC=class{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class Vd{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(e){if(!dt||!ur||dt===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==dt)t=this.activeLink=new PC(dt,this),dt.deps?(t.prevDep=dt.depsTail,dt.depsTail.nextDep=t,dt.depsTail=t):dt.deps=dt.depsTail=t,t1(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const r=t.nextDep;r.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=r),t.prevDep=dt.depsTail,t.nextDep=void 0,dt.depsTail.nextDep=t,dt.depsTail=t,dt.deps===t&&(dt.deps=r)}return t}trigger(e){this.version++,Al++,this.notify(e)}notify(e){gm();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{ym()}}}function t1(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)t1(r)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const mc=new WeakMap,Hi=Symbol(""),Yh=Symbol(""),kl=Symbol("");function pn(n,e,t){if(ur&&dt){let r=mc.get(n);r||mc.set(n,r=new Map);let s=r.get(t);s||(r.set(t,s=new Vd),s.map=r,s.key=t),s.track()}}function rs(n,e,t,r,s,i){const o=mc.get(n);if(!o){Al++;return}const a=l=>{l&&l.trigger()};if(gm(),e==="clear")o.forEach(a);else{const l=De(n),c=l&&mm(t);if(l&&t==="length"){const u=Number(r);o.forEach((d,h)=>{(h==="length"||h===kl||!ys(h)&&h>=u)&&a(d)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),c&&a(o.get(kl)),e){case"add":l?c&&a(o.get("length")):(a(o.get(Hi)),Wo(n)&&a(o.get(Yh)));break;case"delete":l||(a(o.get(Hi)),Wo(n)&&a(o.get(Yh)));break;case"set":Wo(n)&&a(o.get(Hi));break}}ym()}function RC(n,e){const t=mc.get(n);return t&&t.get(e)}function Mo(n){const e=tt(n);return e===n?e:(pn(e,"iterate",kl),tr(n)?e:e.map(mn))}function $d(n){return pn(n=tt(n),"iterate",kl),n}const OC={__proto__:null,[Symbol.iterator](){return Gf(this,Symbol.iterator,mn)},concat(...n){return Mo(this).concat(...n.map(e=>De(e)?Mo(e):e))},entries(){return Gf(this,"entries",n=>(n[1]=mn(n[1]),n))},every(n,e){return Kr(this,"every",n,e,void 0,arguments)},filter(n,e){return Kr(this,"filter",n,e,t=>t.map(mn),arguments)},find(n,e){return Kr(this,"find",n,e,mn,arguments)},findIndex(n,e){return Kr(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return Kr(this,"findLast",n,e,mn,arguments)},findLastIndex(n,e){return Kr(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return Kr(this,"forEach",n,e,void 0,arguments)},includes(...n){return Kf(this,"includes",n)},indexOf(...n){return Kf(this,"indexOf",n)},join(n){return Mo(this).join(n)},lastIndexOf(...n){return Kf(this,"lastIndexOf",n)},map(n,e){return Kr(this,"map",n,e,void 0,arguments)},pop(){return Fa(this,"pop")},push(...n){return Fa(this,"push",n)},reduce(n,...e){return Qy(this,"reduce",n,e)},reduceRight(n,...e){return Qy(this,"reduceRight",n,e)},shift(){return Fa(this,"shift")},some(n,e){return Kr(this,"some",n,e,void 0,arguments)},splice(...n){return Fa(this,"splice",n)},toReversed(){return Mo(this).toReversed()},toSorted(n){return Mo(this).toSorted(n)},toSpliced(...n){return Mo(this).toSpliced(...n)},unshift(...n){return Fa(this,"unshift",n)},values(){return Gf(this,"values",mn)}};function Gf(n,e,t){const r=$d(n),s=r[e]();return r!==n&&!tr(n)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=t(i.value)),i}),s}const DC=Array.prototype;function Kr(n,e,t,r,s,i){const o=$d(n),a=o!==n&&!tr(n),l=o[e];if(l!==DC[e]){const d=l.apply(n,i);return a?mn(d):d}let c=t;o!==n&&(a?c=function(d,h){return t.call(this,mn(d),h,n)}:t.length>2&&(c=function(d,h){return t.call(this,d,h,n)}));const u=l.call(o,c,r);return a&&s?s(u):u}function Qy(n,e,t,r){const s=$d(n);let i=t;return s!==n&&(tr(n)?t.length>3&&(i=function(o,a,l){return t.call(this,o,a,l,n)}):i=function(o,a,l){return t.call(this,o,mn(a),l,n)}),s[e](i,...r)}function Kf(n,e,t){const r=tt(n);pn(r,"iterate",kl);const s=r[e](...t);return(s===-1||s===!1)&&Tm(t[0])?(t[0]=tt(t[0]),r[e](...t)):s}function Fa(n,e,t=[]){fi(),gm();const r=tt(n)[e].apply(n,t);return ym(),hi(),r}const NC=fm("__proto__,__v_isRef,__isVue"),n1=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(ys));function LC(n){ys(n)||(n=String(n));const e=tt(this);return pn(e,"has",n),e.hasOwnProperty(n)}class r1{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,r){if(t==="__v_skip")return e.__v_skip;const s=this._isReadonly,i=this._isShallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return i;if(t==="__v_raw")return r===(s?i?WC:a1:i?o1:i1).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const o=De(e);if(!s){let l;if(o&&(l=OC[t]))return l;if(t==="hasOwnProperty")return LC}const a=Reflect.get(e,t,rn(e)?e:r);return(ys(t)?n1.has(t):NC(t))||(s||pn(e,"get",t),i)?a:rn(a)?o&&mm(t)?a:a.value:yt(a)?s?u1(a):tu(a):a}}class s1 extends r1{constructor(e=!1){super(!1,e)}set(e,t,r,s){let i=e[t];if(!this._isShallow){const l=Qi(i);if(!tr(r)&&!Qi(r)&&(i=tt(i),r=tt(r)),!De(e)&&rn(i)&&!rn(r))return l?!1:(i.value=r,!0)}const o=De(e)&&mm(t)?Number(t)<e.length:st(e,t),a=Reflect.set(e,t,r,rn(e)?e:s);return e===tt(s)&&(o?js(r,i)&&rs(e,"set",t,r):rs(e,"add",t,r)),a}deleteProperty(e,t){const r=st(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&r&&rs(e,"delete",t,void 0),s}has(e,t){const r=Reflect.has(e,t);return(!ys(t)||!n1.has(t))&&pn(e,"has",t),r}ownKeys(e){return pn(e,"iterate",De(e)?"length":Hi),Reflect.ownKeys(e)}}class VC extends r1{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const $C=new s1,BC=new VC,FC=new s1(!0);const Xh=n=>n,Cu=n=>Reflect.getPrototypeOf(n);function zC(n,e,t){return function(...r){const s=this.__v_raw,i=tt(s),o=Wo(i),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,c=s[n](...r),u=t?Xh:e?Zh:mn;return!e&&pn(i,"iterate",l?Yh:Hi),{next(){const{value:d,done:h}=c.next();return h?{value:d,done:h}:{value:a?[u(d[0]),u(d[1])]:u(d),done:h}},[Symbol.iterator](){return this}}}}function Au(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function jC(n,e){const t={get(s){const i=this.__v_raw,o=tt(i),a=tt(s);n||(js(s,a)&&pn(o,"get",s),pn(o,"get",a));const{has:l}=Cu(o),c=e?Xh:n?Zh:mn;if(l.call(o,s))return c(i.get(s));if(l.call(o,a))return c(i.get(a));i!==o&&i.get(s)},get size(){const s=this.__v_raw;return!n&&pn(tt(s),"iterate",Hi),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,o=tt(i),a=tt(s);return n||(js(s,a)&&pn(o,"has",s),pn(o,"has",a)),s===a?i.has(s):i.has(s)||i.has(a)},forEach(s,i){const o=this,a=o.__v_raw,l=tt(a),c=e?Xh:n?Zh:mn;return!n&&pn(l,"iterate",Hi),a.forEach((u,d)=>s.call(i,c(u),c(d),o))}};return vn(t,n?{add:Au("add"),set:Au("set"),delete:Au("delete"),clear:Au("clear")}:{add(s){!e&&!tr(s)&&!Qi(s)&&(s=tt(s));const i=tt(this);return Cu(i).has.call(i,s)||(i.add(s),rs(i,"add",s,s)),this},set(s,i){!e&&!tr(i)&&!Qi(i)&&(i=tt(i));const o=tt(this),{has:a,get:l}=Cu(o);let c=a.call(o,s);c||(s=tt(s),c=a.call(o,s));const u=l.call(o,s);return o.set(s,i),c?js(i,u)&&rs(o,"set",s,i):rs(o,"add",s,i),this},delete(s){const i=tt(this),{has:o,get:a}=Cu(i);let l=o.call(i,s);l||(s=tt(s),l=o.call(i,s)),a&&a.call(i,s);const c=i.delete(s);return l&&rs(i,"delete",s,void 0),c},clear(){const s=tt(this),i=s.size!==0,o=s.clear();return i&&rs(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=zC(s,n,e)}),t}function bm(n,e){const t=jC(n,e);return(r,s,i)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?r:Reflect.get(st(t,s)&&s in r?t:r,s,i)}const HC={get:bm(!1,!1)},UC={get:bm(!1,!0)},qC={get:bm(!0,!1)};const i1=new WeakMap,o1=new WeakMap,a1=new WeakMap,WC=new WeakMap;function GC(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function KC(n){return n.__v_skip||!Object.isExtensible(n)?0:GC(bC(n))}function tu(n){return Qi(n)?n:wm(n,!1,$C,HC,i1)}function l1(n){return wm(n,!1,FC,UC,o1)}function u1(n){return wm(n,!0,BC,qC,a1)}function wm(n,e,t,r,s){if(!yt(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const i=s.get(n);if(i)return i;const o=KC(n);if(o===0)return n;const a=new Proxy(n,o===2?r:t);return s.set(n,a),a}function Go(n){return Qi(n)?Go(n.__v_raw):!!(n&&n.__v_isReactive)}function Qi(n){return!!(n&&n.__v_isReadonly)}function tr(n){return!!(n&&n.__v_isShallow)}function Tm(n){return n?!!n.__v_raw:!1}function tt(n){const e=n&&n.__v_raw;return e?tt(e):n}function c1(n){return!st(n,"__v_skip")&&Object.isExtensible(n)&&Uw(n,"__v_skip",!0),n}const mn=n=>yt(n)?tu(n):n,Zh=n=>yt(n)?u1(n):n;function rn(n){return n?n.__v_isRef===!0:!1}function fe(n){return d1(n,!1)}function Di(n){return d1(n,!0)}function d1(n,e){return rn(n)?n:new JC(n,e)}class JC{constructor(e,t){this.dep=new Vd,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:tt(e),this._value=t?e:mn(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,r=this.__v_isShallow||tr(e)||Qi(e);e=r?e:tt(e),js(e,t)&&(this._rawValue=e,this._value=r?e:mn(e),this.dep.trigger())}}function _n(n){return rn(n)?n.value:n}const QC={get:(n,e,t)=>e==="__v_raw"?n:_n(Reflect.get(n,e,t)),set:(n,e,t,r)=>{const s=n[e];return rn(s)&&!rn(t)?(s.value=t,!0):Reflect.set(n,e,t,r)}};function f1(n){return Go(n)?n:new Proxy(n,QC)}class YC{constructor(e){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new Vd,{get:r,set:s}=e(t.track.bind(t),t.trigger.bind(t));this._get=r,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function h1(n){return new YC(n)}function Gn(n){const e=De(n)?new Array(n.length):{};for(const t in n)e[t]=ZC(n,t);return e}class XC{constructor(e,t,r){this._object=e,this._key=t,this._defaultValue=r,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return RC(tt(this._object),this._key)}}function ZC(n,e,t){const r=n[e];return rn(r)?r:new XC(n,e,t)}class eA{constructor(e,t,r){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Vd(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Al-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&dt!==this)return Qw(this,!0),!0}get value(){const e=this.dep.track();return Zw(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function tA(n,e,t=!1){let r,s;return Fe(n)?r=n:(r=n.get,s=n.set),new eA(r,s,t)}const ku={},gc=new WeakMap;let Ri;function nA(n,e=!1,t=Ri){if(t){let r=gc.get(t);r||gc.set(t,r=[]),r.push(n)}}function rA(n,e,t=lt){const{immediate:r,deep:s,once:i,scheduler:o,augmentJob:a,call:l}=t,c=C=>s?C:tr(C)||s===!1||s===0?ss(C,1):ss(C);let u,d,h,p,m=!1,y=!1;if(rn(n)?(d=()=>n.value,m=tr(n)):Go(n)?(d=()=>c(n),m=!0):De(n)?(y=!0,m=n.some(C=>Go(C)||tr(C)),d=()=>n.map(C=>{if(rn(C))return C.value;if(Go(C))return c(C);if(Fe(C))return l?l(C,2):C()})):Fe(n)?e?d=l?()=>l(n,2):n:d=()=>{if(h){fi();try{h()}finally{hi()}}const C=Ri;Ri=u;try{return l?l(n,3,[p]):n(p)}finally{Ri=C}}:d=Ir,e&&s){const C=d,O=s===!0?1/0:s;d=()=>ss(C(),O)}const v=IC(),S=()=>{u.stop(),v&&v.active&&pm(v.effects,u)};if(i&&e){const C=e;e=(...O)=>{C(...O),S()}}let T=y?new Array(n.length).fill(ku):ku;const b=C=>{if(!(!(u.flags&1)||!u.dirty&&!C))if(e){const O=u.run();if(s||m||(y?O.some((N,A)=>js(N,T[A])):js(O,T))){h&&h();const N=Ri;Ri=u;try{const A=[O,T===ku?void 0:y&&T[0]===ku?[]:T,p];l?l(e,3,A):e(...A),T=O}finally{Ri=N}}}else u.run()};return a&&a(b),u=new Kw(d),u.scheduler=o?()=>o(b,!1):b,p=C=>nA(C,!1,u),h=u.onStop=()=>{const C=gc.get(u);if(C){if(l)l(C,4);else for(const O of C)O();gc.delete(u)}},e?r?b(!0):T=u.run():o?o(b.bind(null,!0),!0):u.run(),S.pause=u.pause.bind(u),S.resume=u.resume.bind(u),S.stop=S,S}function ss(n,e=1/0,t){if(e<=0||!yt(n)||n.__v_skip||(t=t||new Set,t.has(n)))return n;if(t.add(n),e--,rn(n))ss(n.value,e,t);else if(De(n))for(let r=0;r<n.length;r++)ss(n[r],e,t);else if(Fw(n)||Wo(n))n.forEach(r=>{ss(r,e,t)});else if(Hw(n)){for(const r in n)ss(n[r],e,t);for(const r of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,r)&&ss(n[r],e,t)}return n}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function nu(n,e,t,r){try{return r?n(...r):n()}catch(s){Bd(s,e,t)}}function Or(n,e,t,r){if(Fe(n)){const s=nu(n,e,t,r);return s&&zw(s)&&s.catch(i=>{Bd(i,e,t)}),s}if(De(n)){const s=[];for(let i=0;i<n.length;i++)s.push(Or(n[i],e,t,r));return s}}function Bd(n,e,t,r=!0){const s=e?e.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||lt;if(e){let a=e.parent;const l=e.proxy,c=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const u=a.ec;if(u){for(let d=0;d<u.length;d++)if(u[d](n,l,c)===!1)return}a=a.parent}if(i){fi(),nu(i,null,10,[n,l,c]),hi();return}}sA(n,t,s,r,o)}function sA(n,e,t,r=!0,s=!1){if(s)throw n;console.error(n)}const En=[];let wr=-1;const Ko=[];let Is=null,Oo=0;const p1=Promise.resolve();let yc=null;function as(n){const e=yc||p1;return n?e.then(this?n.bind(this):n):e}function iA(n){let e=wr+1,t=En.length;for(;e<t;){const r=e+t>>>1,s=En[r],i=Il(s);i<n||i===n&&s.flags&2?e=r+1:t=r}return e}function Em(n){if(!(n.flags&1)){const e=Il(n),t=En[En.length-1];!t||!(n.flags&2)&&e>=Il(t)?En.push(n):En.splice(iA(e),0,n),n.flags|=1,m1()}}function m1(){yc||(yc=p1.then(y1))}function oA(n){De(n)?Ko.push(...n):Is&&n.id===-1?Is.splice(Oo+1,0,n):n.flags&1||(Ko.push(n),n.flags|=1),m1()}function Yy(n,e,t=wr+1){for(;t<En.length;t++){const r=En[t];if(r&&r.flags&2){if(n&&r.id!==n.uid)continue;En.splice(t,1),t--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function g1(n){if(Ko.length){const e=[...new Set(Ko)].sort((t,r)=>Il(t)-Il(r));if(Ko.length=0,Is){Is.push(...e);return}for(Is=e,Oo=0;Oo<Is.length;Oo++){const t=Is[Oo];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}Is=null,Oo=0}}const Il=n=>n.id==null?n.flags&2?-1:1/0:n.id;function y1(n){try{for(wr=0;wr<En.length;wr++){const e=En[wr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),nu(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;wr<En.length;wr++){const e=En[wr];e&&(e.flags&=-2)}wr=-1,En.length=0,g1(),yc=null,(En.length||Ko.length)&&y1()}}let Ut=null,v1=null;function vc(n){const e=Ut;return Ut=n,v1=n&&n.type.__scopeId||null,e}function nt(n,e=Ut,t){if(!e||n._n)return n;const r=(...s)=>{r._d&&cv(-1);const i=vc(e);let o;try{o=n(...s)}finally{vc(i),r._d&&cv(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function Dt(n,e){if(Ut===null)return n;const t=Hd(Ut),r=n.dirs||(n.dirs=[]);for(let s=0;s<e.length;s++){let[i,o,a,l=lt]=e[s];i&&(Fe(i)&&(i={mounted:i,updated:i}),i.deep&&ss(o),r.push({dir:i,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function Ii(n,e,t,r){const s=n.dirs,i=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(fi(),Or(l,t,8,[n.el,a,n,e]),hi())}}const b1=Symbol("_vte"),aA=n=>n.__isTeleport,al=n=>n&&(n.disabled||n.disabled===""),Xy=n=>n&&(n.defer||n.defer===""),Zy=n=>typeof SVGElement<"u"&&n instanceof SVGElement,ev=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,ep=(n,e)=>{const t=n&&n.to;return _t(t)?e?e(t):null:t},w1={name:"Teleport",__isTeleport:!0,process(n,e,t,r,s,i,o,a,l,c){const{mc:u,pc:d,pbc:h,o:{insert:p,querySelector:m,createText:y,createComment:v}}=c,S=al(e.props);let{shapeFlag:T,children:b,dynamicChildren:C}=e;if(n==null){const O=e.el=y(""),N=e.anchor=y("");p(O,t,r),p(N,t,r);const A=(_,M)=>{T&16&&(s&&s.isCE&&(s.ce._teleportTarget=_),u(b,_,M,s,i,o,a,l))},x=()=>{const _=e.target=ep(e.props,m),M=E1(_,e,y,p);_&&(o!=="svg"&&Zy(_)?o="svg":o!=="mathml"&&ev(_)&&(o="mathml"),S||(A(_,M),Ju(e,!1)))};S&&(A(t,N),Ju(e,!0)),Xy(e.props)?Tn(()=>{x(),e.el.__isMounted=!0},i):x()}else{if(Xy(e.props)&&!n.el.__isMounted){Tn(()=>{w1.process(n,e,t,r,s,i,o,a,l,c),delete n.el.__isMounted},i);return}e.el=n.el,e.targetStart=n.targetStart;const O=e.anchor=n.anchor,N=e.target=n.target,A=e.targetAnchor=n.targetAnchor,x=al(n.props),_=x?t:N,M=x?O:A;if(o==="svg"||Zy(N)?o="svg":(o==="mathml"||ev(N))&&(o="mathml"),C?(h(n.dynamicChildren,C,_,s,i,o,a),Am(n,e,!0)):l||d(n,e,_,M,s,i,o,a,!1),S)x?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):Iu(e,t,O,c,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const I=e.target=ep(e.props,m);I&&Iu(e,I,null,c,0)}else x&&Iu(e,N,A,c,1);Ju(e,S)}},remove(n,e,t,{um:r,o:{remove:s}},i){const{shapeFlag:o,children:a,anchor:l,targetStart:c,targetAnchor:u,target:d,props:h}=n;if(d&&(s(c),s(u)),i&&s(l),o&16){const p=i||!al(h);for(let m=0;m<a.length;m++){const y=a[m];r(y,e,t,p,!!y.dynamicChildren)}}},move:Iu,hydrate:lA};function Iu(n,e,t,{o:{insert:r},m:s},i=2){i===0&&r(n.targetAnchor,e,t);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=n,d=i===2;if(d&&r(o,e,t),(!d||al(u))&&l&16)for(let h=0;h<c.length;h++)s(c[h],e,t,2);d&&r(a,e,t)}function lA(n,e,t,r,s,i,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:c,createText:u}},d){const h=e.target=ep(e.props,l);if(h){const p=al(e.props),m=h._lpa||h.firstChild;if(e.shapeFlag&16)if(p)e.anchor=d(o(n),e,a(n),t,r,s,i),e.targetStart=m,e.targetAnchor=m&&o(m);else{e.anchor=o(n);let y=m;for(;y;){if(y&&y.nodeType===8){if(y.data==="teleport start anchor")e.targetStart=y;else if(y.data==="teleport anchor"){e.targetAnchor=y,h._lpa=e.targetAnchor&&o(e.targetAnchor);break}}y=o(y)}e.targetAnchor||E1(h,e,u,c),d(m&&o(m),e,h,t,r,s,i)}Ju(e,p)}return e.anchor&&o(e.anchor)}const T1=w1;function Ju(n,e){const t=n.ctx;if(t&&t.ut){let r,s;for(e?(r=n.el,s=n.anchor):(r=n.targetStart,s=n.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",t.uid),r=r.nextSibling;t.ut()}}function E1(n,e,t,r){const s=e.targetStart=t(""),i=e.targetAnchor=t("");return s[b1]=i,n&&(r(s,n),r(i,n)),i}function Sm(n,e){n.shapeFlag&6&&n.component?(n.transition=e,Sm(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}/*! #__NO_SIDE_EFFECTS__ */function _m(n,e){return Fe(n)?vn({name:n.name},e,{setup:n}):n}function S1(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function bc(n,e,t,r,s=!1){if(De(n)){n.forEach((m,y)=>bc(m,e&&(De(e)?e[y]:e),t,r,s));return}if(Jo(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&bc(n,e,t,r.component.subTree);return}const i=r.shapeFlag&4?Hd(r.component):r.el,o=s?null:i,{i:a,r:l}=n,c=e&&e.r,u=a.refs===lt?a.refs={}:a.refs,d=a.setupState,h=tt(d),p=d===lt?()=>!1:m=>st(h,m);if(c!=null&&c!==l&&(_t(c)?(u[c]=null,p(c)&&(d[c]=null)):rn(c)&&(c.value=null)),Fe(l))nu(l,a,12,[o,u]);else{const m=_t(l),y=rn(l);if(m||y){const v=()=>{if(n.f){const S=m?p(l)?d[l]:u[l]:l.value;s?De(S)&&pm(S,i):De(S)?S.includes(i)||S.push(i):m?(u[l]=[i],p(l)&&(d[l]=u[l])):(l.value=[i],n.k&&(u[n.k]=l.value))}else m?(u[l]=o,p(l)&&(d[l]=o)):y&&(l.value=o,n.k&&(u[n.k]=o))};o?(v.id=-1,Tn(v,t)):v()}}}Nd().requestIdleCallback;Nd().cancelIdleCallback;const Jo=n=>!!n.type.__asyncLoader,_1=n=>n.type.__isKeepAlive;function uA(n,e){x1(n,"a",e)}function cA(n,e){x1(n,"da",e)}function x1(n,e,t=tn){const r=n.__wdc||(n.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(Fd(e,r,t),t){let s=t.parent;for(;s&&s.parent;)_1(s.parent.vnode)&&dA(r,e,t,s),s=s.parent}}function dA(n,e,t,r){const s=Fd(e,n,r,!0);A1(()=>{pm(r[e],s)},t)}function Fd(n,e,t=tn,r=!1){if(t){const s=t[n]||(t[n]=[]),i=e.__weh||(e.__weh=(...o)=>{fi();const a=ru(t),l=Or(e,t,n,o);return a(),hi(),l});return r?s.unshift(i):s.push(i),i}}const vs=n=>(e,t=tn)=>{(!Rl||n==="sp")&&Fd(n,(...r)=>e(...r),t)},fA=vs("bm"),kt=vs("m"),C1=vs("bu"),xm=vs("u"),lo=vs("bum"),A1=vs("um"),hA=vs("sp"),pA=vs("rtg"),mA=vs("rtc");function gA(n,e=tn){Fd("ec",n,e)}const k1="components";function Ta(n,e){return M1(k1,n,!0,e)||n}const I1=Symbol.for("v-ndc");function yA(n){return _t(n)?M1(k1,n,!1)||n:n||I1}function M1(n,e,t=!0,r=!1){const s=Ut||tn;if(s){const i=s.type;{const a=sk(i,!1);if(a&&(a===e||a===sr(e)||a===Dd(sr(e))))return i}const o=tv(s[n]||i[n],e)||tv(s.appContext[n],e);return!o&&r?i:o}}function tv(n,e){return n&&(n[e]||n[sr(e)]||n[Dd(sr(e))])}function ot(n,e,t,r){let s;const i=t,o=De(n);if(o||_t(n)){const a=o&&Go(n);let l=!1;a&&(l=!tr(n),n=$d(n)),s=new Array(n.length);for(let c=0,u=n.length;c<u;c++)s[c]=e(l?mn(n[c]):n[c],c,void 0,i)}else if(typeof n=="number"){s=new Array(n);for(let a=0;a<n;a++)s[a]=e(a+1,a,void 0,i)}else if(yt(n))if(n[Symbol.iterator])s=Array.from(n,(a,l)=>e(a,l,void 0,i));else{const a=Object.keys(n);s=new Array(a.length);for(let l=0,c=a.length;l<c;l++){const u=a[l];s[l]=e(n[u],u,l,i)}}else s=[];return s}function dn(n,e,t={},r,s){if(Ut.ce||Ut.parent&&Jo(Ut.parent)&&Ut.parent.ce)return e!=="default"&&(t.name=e),z(),mt(Be,null,[Ee("slot",t,r&&r())],64);let i=n[e];i&&i._c&&(i._d=!1),z();const o=i&&P1(i(t)),a=t.key||o&&o.key,l=mt(Be,{key:(a&&!ys(a)?a:`_${e}`)+(!o&&r?"_fb":"")},o||(r?r():[]),o&&n._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),i&&i._c&&(i._d=!0),l}function P1(n){return n.some(e=>Pl(e)?!(e.type===ei||e.type===Be&&!P1(e.children)):!0)?n:null}const tp=n=>n?Q1(n)?Hd(n):tp(n.parent):null,ll=vn(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>tp(n.parent),$root:n=>tp(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>O1(n),$forceUpdate:n=>n.f||(n.f=()=>{Em(n.update)}),$nextTick:n=>n.n||(n.n=as.bind(n.proxy)),$watch:n=>BA.bind(n)}),Jf=(n,e)=>n!==lt&&!n.__isScriptSetup&&st(n,e),vA={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:r,data:s,props:i,accessCache:o,type:a,appContext:l}=n;let c;if(e[0]!=="$"){const p=o[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return s[e];case 4:return t[e];case 3:return i[e]}else{if(Jf(r,e))return o[e]=1,r[e];if(s!==lt&&st(s,e))return o[e]=2,s[e];if((c=n.propsOptions[0])&&st(c,e))return o[e]=3,i[e];if(t!==lt&&st(t,e))return o[e]=4,t[e];np&&(o[e]=0)}}const u=ll[e];let d,h;if(u)return e==="$attrs"&&pn(n.attrs,"get",""),u(n);if((d=a.__cssModules)&&(d=d[e]))return d;if(t!==lt&&st(t,e))return o[e]=4,t[e];if(h=l.config.globalProperties,st(h,e))return h[e]},set({_:n},e,t){const{data:r,setupState:s,ctx:i}=n;return Jf(s,e)?(s[e]=t,!0):r!==lt&&st(r,e)?(r[e]=t,!0):st(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(i[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:r,appContext:s,propsOptions:i}},o){let a;return!!t[o]||n!==lt&&st(n,o)||Jf(e,o)||(a=i[0])&&st(a,o)||st(r,o)||st(ll,o)||st(s.config.globalProperties,o)},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:st(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}};function nv(n){return De(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}let np=!0;function bA(n){const e=O1(n),t=n.proxy,r=n.ctx;np=!1,e.beforeCreate&&rv(e.beforeCreate,n,"bc");const{data:s,computed:i,methods:o,watch:a,provide:l,inject:c,created:u,beforeMount:d,mounted:h,beforeUpdate:p,updated:m,activated:y,deactivated:v,beforeDestroy:S,beforeUnmount:T,destroyed:b,unmounted:C,render:O,renderTracked:N,renderTriggered:A,errorCaptured:x,serverPrefetch:_,expose:M,inheritAttrs:I,components:P,directives:k,filters:K}=e;if(c&&wA(c,r,null),o)for(const ee in o){const ue=o[ee];Fe(ue)&&(r[ee]=ue.bind(t))}if(s){const ee=s.call(t,t);yt(ee)&&(n.data=tu(ee))}if(np=!0,i)for(const ee in i){const ue=i[ee],be=Fe(ue)?ue.bind(t,t):Fe(ue.get)?ue.get.bind(t,t):Ir,He=!Fe(ue)&&Fe(ue.set)?ue.set.bind(t):Ir,Pe=Oe({get:be,set:He});Object.defineProperty(r,ee,{enumerable:!0,configurable:!0,get:()=>Pe.value,set:$e=>Pe.value=$e})}if(a)for(const ee in a)R1(a[ee],r,t,ee);if(l){const ee=Fe(l)?l.call(t):l;Reflect.ownKeys(ee).forEach(ue=>{Yo(ue,ee[ue])})}u&&rv(u,n,"c");function J(ee,ue){De(ue)?ue.forEach(be=>ee(be.bind(t))):ue&&ee(ue.bind(t))}if(J(fA,d),J(kt,h),J(C1,p),J(xm,m),J(uA,y),J(cA,v),J(gA,x),J(mA,N),J(pA,A),J(lo,T),J(A1,C),J(hA,_),De(M))if(M.length){const ee=n.exposed||(n.exposed={});M.forEach(ue=>{Object.defineProperty(ee,ue,{get:()=>t[ue],set:be=>t[ue]=be})})}else n.exposed||(n.exposed={});O&&n.render===Ir&&(n.render=O),I!=null&&(n.inheritAttrs=I),P&&(n.components=P),k&&(n.directives=k),_&&S1(n)}function wA(n,e,t=Ir){De(n)&&(n=rp(n));for(const r in n){const s=n[r];let i;yt(s)?"default"in s?i=cr(s.from||r,s.default,!0):i=cr(s.from||r):i=cr(s),rn(i)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):e[r]=i}}function rv(n,e,t){Or(De(n)?n.map(r=>r.bind(e.proxy)):n.bind(e.proxy),e,t)}function R1(n,e,t,r){let s=r.includes(".")?q1(t,r):()=>t[r];if(_t(n)){const i=e[n];Fe(i)&&At(s,i)}else if(Fe(n))At(s,n.bind(t));else if(yt(n))if(De(n))n.forEach(i=>R1(i,e,t,r));else{const i=Fe(n.handler)?n.handler.bind(t):e[n.handler];Fe(i)&&At(s,i,n)}}function O1(n){const e=n.type,{mixins:t,extends:r}=e,{mixins:s,optionsCache:i,config:{optionMergeStrategies:o}}=n.appContext,a=i.get(e);let l;return a?l=a:!s.length&&!t&&!r?l=e:(l={},s.length&&s.forEach(c=>wc(l,c,o,!0)),wc(l,e,o)),yt(e)&&i.set(e,l),l}function wc(n,e,t,r=!1){const{mixins:s,extends:i}=e;i&&wc(n,i,t,!0),s&&s.forEach(o=>wc(n,o,t,!0));for(const o in e)if(!(r&&o==="expose")){const a=TA[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const TA={data:sv,props:iv,emits:iv,methods:Ja,computed:Ja,beforeCreate:wn,created:wn,beforeMount:wn,mounted:wn,beforeUpdate:wn,updated:wn,beforeDestroy:wn,beforeUnmount:wn,destroyed:wn,unmounted:wn,activated:wn,deactivated:wn,errorCaptured:wn,serverPrefetch:wn,components:Ja,directives:Ja,watch:SA,provide:sv,inject:EA};function sv(n,e){return e?n?function(){return vn(Fe(n)?n.call(this,this):n,Fe(e)?e.call(this,this):e)}:e:n}function EA(n,e){return Ja(rp(n),rp(e))}function rp(n){if(De(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function wn(n,e){return n?[...new Set([].concat(n,e))]:e}function Ja(n,e){return n?vn(Object.create(null),n,e):e}function iv(n,e){return n?De(n)&&De(e)?[...new Set([...n,...e])]:vn(Object.create(null),nv(n),nv(e??{})):e}function SA(n,e){if(!n)return e;if(!e)return n;const t=vn(Object.create(null),n);for(const r in e)t[r]=wn(n[r],e[r]);return t}function D1(){return{app:null,config:{isNativeTag:yC,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _A=0;function xA(n,e){return function(r,s=null){Fe(r)||(r=vn({},r)),s!=null&&!yt(s)&&(s=null);const i=D1(),o=new WeakSet,a=[];let l=!1;const c=i.app={_uid:_A++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:ok,get config(){return i.config},set config(u){},use(u,...d){return o.has(u)||(u&&Fe(u.install)?(o.add(u),u.install(c,...d)):Fe(u)&&(o.add(u),u(c,...d))),c},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),c},component(u,d){return d?(i.components[u]=d,c):i.components[u]},directive(u,d){return d?(i.directives[u]=d,c):i.directives[u]},mount(u,d,h){if(!l){const p=c._ceVNode||Ee(r,s);return p.appContext=i,h===!0?h="svg":h===!1&&(h=void 0),n(p,u,h),l=!0,c._container=u,u.__vue_app__=c,Hd(p.component)}},onUnmount(u){a.push(u)},unmount(){l&&(Or(a,c._instance,16),n(null,c._container),delete c._container.__vue_app__)},provide(u,d){return i.provides[u]=d,c},runWithContext(u){const d=Qo;Qo=c;try{return u()}finally{Qo=d}}};return c}}let Qo=null;function Yo(n,e){if(tn){let t=tn.provides;const r=tn.parent&&tn.parent.provides;r===t&&(t=tn.provides=Object.create(r)),t[n]=e}}function cr(n,e,t=!1){const r=tn||Ut;if(r||Qo){const s=Qo?Qo._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&n in s)return s[n];if(arguments.length>1)return t&&Fe(e)?e.call(r&&r.proxy):e}}const N1={},L1=()=>Object.create(N1),V1=n=>Object.getPrototypeOf(n)===N1;function CA(n,e,t,r=!1){const s={},i=L1();n.propsDefaults=Object.create(null),$1(n,e,s,i);for(const o in n.propsOptions[0])o in s||(s[o]=void 0);t?n.props=r?s:l1(s):n.type.props?n.props=s:n.props=i,n.attrs=i}function AA(n,e,t,r){const{props:s,attrs:i,vnode:{patchFlag:o}}=n,a=tt(s),[l]=n.propsOptions;let c=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let d=0;d<u.length;d++){let h=u[d];if(zd(n.emitsOptions,h))continue;const p=e[h];if(l)if(st(i,h))p!==i[h]&&(i[h]=p,c=!0);else{const m=sr(h);s[m]=sp(l,a,m,p,n,!1)}else p!==i[h]&&(i[h]=p,c=!0)}}}else{$1(n,e,s,i)&&(c=!0);let u;for(const d in a)(!e||!st(e,d)&&((u=di(d))===d||!st(e,u)))&&(l?t&&(t[d]!==void 0||t[u]!==void 0)&&(s[d]=sp(l,a,d,void 0,n,!0)):delete s[d]);if(i!==a)for(const d in i)(!e||!st(e,d))&&(delete i[d],c=!0)}c&&rs(n.attrs,"set","")}function $1(n,e,t,r){const[s,i]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(sl(l))continue;const c=e[l];let u;s&&st(s,u=sr(l))?!i||!i.includes(u)?t[u]=c:(a||(a={}))[u]=c:zd(n.emitsOptions,l)||(!(l in r)||c!==r[l])&&(r[l]=c,o=!0)}if(i){const l=tt(t),c=a||lt;for(let u=0;u<i.length;u++){const d=i[u];t[d]=sp(s,l,d,c[d],n,!st(c,d))}}return o}function sp(n,e,t,r,s,i){const o=n[t];if(o!=null){const a=st(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&Fe(l)){const{propsDefaults:c}=s;if(t in c)r=c[t];else{const u=ru(s);r=c[t]=l.call(null,e),u()}}else r=l;s.ce&&s.ce._setProp(t,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===di(t))&&(r=!0))}return r}const kA=new WeakMap;function B1(n,e,t=!1){const r=t?kA:e.propsCache,s=r.get(n);if(s)return s;const i=n.props,o={},a=[];let l=!1;if(!Fe(n)){const u=d=>{l=!0;const[h,p]=B1(d,e,!0);vn(o,h),p&&a.push(...p)};!t&&e.mixins.length&&e.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!i&&!l)return yt(n)&&r.set(n,qo),qo;if(De(i))for(let u=0;u<i.length;u++){const d=sr(i[u]);ov(d)&&(o[d]=lt)}else if(i)for(const u in i){const d=sr(u);if(ov(d)){const h=i[u],p=o[d]=De(h)||Fe(h)?{type:h}:vn({},h),m=p.type;let y=!1,v=!0;if(De(m))for(let S=0;S<m.length;++S){const T=m[S],b=Fe(T)&&T.name;if(b==="Boolean"){y=!0;break}else b==="String"&&(v=!1)}else y=Fe(m)&&m.name==="Boolean";p[0]=y,p[1]=v,(y||st(p,"default"))&&a.push(d)}}const c=[o,a];return yt(n)&&r.set(n,c),c}function ov(n){return n[0]!=="$"&&!sl(n)}const F1=n=>n[0]==="_"||n==="$stable",Cm=n=>De(n)?n.map(Cr):[Cr(n)],IA=(n,e,t)=>{if(e._n)return e;const r=nt((...s)=>Cm(e(...s)),t);return r._c=!1,r},z1=(n,e,t)=>{const r=n._ctx;for(const s in n){if(F1(s))continue;const i=n[s];if(Fe(i))e[s]=IA(s,i,r);else if(i!=null){const o=Cm(i);e[s]=()=>o}}},j1=(n,e)=>{const t=Cm(e);n.slots.default=()=>t},H1=(n,e,t)=>{for(const r in e)(t||r!=="_")&&(n[r]=e[r])},MA=(n,e,t)=>{const r=n.slots=L1();if(n.vnode.shapeFlag&32){const s=e._;s?(H1(r,e,t),t&&Uw(r,"_",s,!0)):z1(e,r)}else e&&j1(n,e)},PA=(n,e,t)=>{const{vnode:r,slots:s}=n;let i=!0,o=lt;if(r.shapeFlag&32){const a=e._;a?t&&a===1?i=!1:H1(s,e,t):(i=!e.$stable,z1(e,s)),o=e}else e&&(j1(n,e),o={default:1});if(i)for(const a in s)!F1(a)&&o[a]==null&&delete s[a]},Tn=WA;function RA(n){return OA(n)}function OA(n,e){const t=Nd();t.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:o,createText:a,createComment:l,setText:c,setElementText:u,parentNode:d,nextSibling:h,setScopeId:p=Ir,insertStaticContent:m}=n,y=(D,L,$,U=null,W=null,q=null,ae=void 0,ne=null,te=!!L.dynamicChildren)=>{if(D===L)return;D&&!za(D,L)&&(U=B(D),$e(D,W,q,!0),D=null),L.patchFlag===-2&&(te=!1,L.dynamicChildren=null);const{type:Q,ref:xe,shapeFlag:de}=L;switch(Q){case jd:v(D,L,$,U);break;case ei:S(D,L,$,U);break;case Qu:D==null&&T(L,$,U,ae);break;case Be:P(D,L,$,U,W,q,ae,ne,te);break;default:de&1?O(D,L,$,U,W,q,ae,ne,te):de&6?k(D,L,$,U,W,q,ae,ne,te):(de&64||de&128)&&Q.process(D,L,$,U,W,q,ae,ne,te,me)}xe!=null&&W&&bc(xe,D&&D.ref,q,L||D,!L)},v=(D,L,$,U)=>{if(D==null)r(L.el=a(L.children),$,U);else{const W=L.el=D.el;L.children!==D.children&&c(W,L.children)}},S=(D,L,$,U)=>{D==null?r(L.el=l(L.children||""),$,U):L.el=D.el},T=(D,L,$,U)=>{[D.el,D.anchor]=m(D.children,L,$,U,D.el,D.anchor)},b=({el:D,anchor:L},$,U)=>{let W;for(;D&&D!==L;)W=h(D),r(D,$,U),D=W;r(L,$,U)},C=({el:D,anchor:L})=>{let $;for(;D&&D!==L;)$=h(D),s(D),D=$;s(L)},O=(D,L,$,U,W,q,ae,ne,te)=>{L.type==="svg"?ae="svg":L.type==="math"&&(ae="mathml"),D==null?N(L,$,U,W,q,ae,ne,te):_(D,L,W,q,ae,ne,te)},N=(D,L,$,U,W,q,ae,ne)=>{let te,Q;const{props:xe,shapeFlag:de,transition:we,dirs:Te}=D;if(te=D.el=o(D.type,q,xe&&xe.is,xe),de&8?u(te,D.children):de&16&&x(D.children,te,null,U,W,Qf(D,q),ae,ne),Te&&Ii(D,null,U,"created"),A(te,D,D.scopeId,ae,U),xe){for(const Me in xe)Me!=="value"&&!sl(Me)&&i(te,Me,null,xe[Me],q,U);"value"in xe&&i(te,"value",null,xe.value,q),(Q=xe.onVnodeBeforeMount)&&br(Q,U,D)}Te&&Ii(D,null,U,"beforeMount");const Se=DA(W,we);Se&&we.beforeEnter(te),r(te,L,$),((Q=xe&&xe.onVnodeMounted)||Se||Te)&&Tn(()=>{Q&&br(Q,U,D),Se&&we.enter(te),Te&&Ii(D,null,U,"mounted")},W)},A=(D,L,$,U,W)=>{if($&&p(D,$),U)for(let q=0;q<U.length;q++)p(D,U[q]);if(W){let q=W.subTree;if(L===q||G1(q.type)&&(q.ssContent===L||q.ssFallback===L)){const ae=W.vnode;A(D,ae,ae.scopeId,ae.slotScopeIds,W.parent)}}},x=(D,L,$,U,W,q,ae,ne,te=0)=>{for(let Q=te;Q<D.length;Q++){const xe=D[Q]=ne?Ms(D[Q]):Cr(D[Q]);y(null,xe,L,$,U,W,q,ae,ne)}},_=(D,L,$,U,W,q,ae)=>{const ne=L.el=D.el;let{patchFlag:te,dynamicChildren:Q,dirs:xe}=L;te|=D.patchFlag&16;const de=D.props||lt,we=L.props||lt;let Te;if($&&Mi($,!1),(Te=we.onVnodeBeforeUpdate)&&br(Te,$,L,D),xe&&Ii(L,D,$,"beforeUpdate"),$&&Mi($,!0),(de.innerHTML&&we.innerHTML==null||de.textContent&&we.textContent==null)&&u(ne,""),Q?M(D.dynamicChildren,Q,ne,$,U,Qf(L,W),q):ae||ue(D,L,ne,null,$,U,Qf(L,W),q,!1),te>0){if(te&16)I(ne,de,we,$,W);else if(te&2&&de.class!==we.class&&i(ne,"class",null,we.class,W),te&4&&i(ne,"style",de.style,we.style,W),te&8){const Se=L.dynamicProps;for(let Me=0;Me<Se.length;Me++){const ze=Se[Me],$t=de[ze],xt=we[ze];(xt!==$t||ze==="value")&&i(ne,ze,$t,xt,W,$)}}te&1&&D.children!==L.children&&u(ne,L.children)}else!ae&&Q==null&&I(ne,de,we,$,W);((Te=we.onVnodeUpdated)||xe)&&Tn(()=>{Te&&br(Te,$,L,D),xe&&Ii(L,D,$,"updated")},U)},M=(D,L,$,U,W,q,ae)=>{for(let ne=0;ne<L.length;ne++){const te=D[ne],Q=L[ne],xe=te.el&&(te.type===Be||!za(te,Q)||te.shapeFlag&70)?d(te.el):$;y(te,Q,xe,null,U,W,q,ae,!0)}},I=(D,L,$,U,W)=>{if(L!==$){if(L!==lt)for(const q in L)!sl(q)&&!(q in $)&&i(D,q,L[q],null,W,U);for(const q in $){if(sl(q))continue;const ae=$[q],ne=L[q];ae!==ne&&q!=="value"&&i(D,q,ne,ae,W,U)}"value"in $&&i(D,"value",L.value,$.value,W)}},P=(D,L,$,U,W,q,ae,ne,te)=>{const Q=L.el=D?D.el:a(""),xe=L.anchor=D?D.anchor:a("");let{patchFlag:de,dynamicChildren:we,slotScopeIds:Te}=L;Te&&(ne=ne?ne.concat(Te):Te),D==null?(r(Q,$,U),r(xe,$,U),x(L.children||[],$,xe,W,q,ae,ne,te)):de>0&&de&64&&we&&D.dynamicChildren?(M(D.dynamicChildren,we,$,W,q,ae,ne),(L.key!=null||W&&L===W.subTree)&&Am(D,L,!0)):ue(D,L,$,xe,W,q,ae,ne,te)},k=(D,L,$,U,W,q,ae,ne,te)=>{L.slotScopeIds=ne,D==null?L.shapeFlag&512?W.ctx.activate(L,$,U,ae,te):K(L,$,U,W,q,ae,te):le(D,L,te)},K=(D,L,$,U,W,q,ae)=>{const ne=D.component=ZA(D,U,W);if(_1(D)&&(ne.ctx.renderer=me),ek(ne,!1,ae),ne.asyncDep){if(W&&W.registerDep(ne,J,ae),!D.el){const te=ne.subTree=Ee(ei);S(null,te,L,$)}}else J(ne,D,L,$,W,q,ae)},le=(D,L,$)=>{const U=L.component=D.component;if(UA(D,L,$))if(U.asyncDep&&!U.asyncResolved){ee(U,L,$);return}else U.next=L,U.update();else L.el=D.el,U.vnode=L},J=(D,L,$,U,W,q,ae)=>{const ne=()=>{if(D.isMounted){let{next:de,bu:we,u:Te,parent:Se,vnode:Me}=D;{const Bt=U1(D);if(Bt){de&&(de.el=Me.el,ee(D,de,ae)),Bt.asyncDep.then(()=>{D.isUnmounted||ne()});return}}let ze=de,$t;Mi(D,!1),de?(de.el=Me.el,ee(D,de,ae)):de=Me,we&&Ku(we),($t=de.props&&de.props.onVnodeBeforeUpdate)&&br($t,Se,de,Me),Mi(D,!0);const xt=lv(D),an=D.subTree;D.subTree=xt,y(an,xt,d(an.el),B(an),D,W,q),de.el=xt.el,ze===null&&qA(D,xt.el),Te&&Tn(Te,W),($t=de.props&&de.props.onVnodeUpdated)&&Tn(()=>br($t,Se,de,Me),W)}else{let de;const{el:we,props:Te}=L,{bm:Se,m:Me,parent:ze,root:$t,type:xt}=D,an=Jo(L);Mi(D,!1),Se&&Ku(Se),!an&&(de=Te&&Te.onVnodeBeforeMount)&&br(de,ze,L),Mi(D,!0);{$t.ce&&$t.ce._injectChildStyle(xt);const Bt=D.subTree=lv(D);y(null,Bt,$,U,D,W,q),L.el=Bt.el}if(Me&&Tn(Me,W),!an&&(de=Te&&Te.onVnodeMounted)){const Bt=L;Tn(()=>br(de,ze,Bt),W)}(L.shapeFlag&256||ze&&Jo(ze.vnode)&&ze.vnode.shapeFlag&256)&&D.a&&Tn(D.a,W),D.isMounted=!0,L=$=U=null}};D.scope.on();const te=D.effect=new Kw(ne);D.scope.off();const Q=D.update=te.run.bind(te),xe=D.job=te.runIfDirty.bind(te);xe.i=D,xe.id=D.uid,te.scheduler=()=>Em(xe),Mi(D,!0),Q()},ee=(D,L,$)=>{L.component=D;const U=D.vnode.props;D.vnode=L,D.next=null,AA(D,L.props,U,$),PA(D,L.children,$),fi(),Yy(D),hi()},ue=(D,L,$,U,W,q,ae,ne,te=!1)=>{const Q=D&&D.children,xe=D?D.shapeFlag:0,de=L.children,{patchFlag:we,shapeFlag:Te}=L;if(we>0){if(we&128){He(Q,de,$,U,W,q,ae,ne,te);return}else if(we&256){be(Q,de,$,U,W,q,ae,ne,te);return}}Te&8?(xe&16&&X(Q,W,q),de!==Q&&u($,de)):xe&16?Te&16?He(Q,de,$,U,W,q,ae,ne,te):X(Q,W,q,!0):(xe&8&&u($,""),Te&16&&x(de,$,U,W,q,ae,ne,te))},be=(D,L,$,U,W,q,ae,ne,te)=>{D=D||qo,L=L||qo;const Q=D.length,xe=L.length,de=Math.min(Q,xe);let we;for(we=0;we<de;we++){const Te=L[we]=te?Ms(L[we]):Cr(L[we]);y(D[we],Te,$,null,W,q,ae,ne,te)}Q>xe?X(D,W,q,!0,!1,de):x(L,$,U,W,q,ae,ne,te,de)},He=(D,L,$,U,W,q,ae,ne,te)=>{let Q=0;const xe=L.length;let de=D.length-1,we=xe-1;for(;Q<=de&&Q<=we;){const Te=D[Q],Se=L[Q]=te?Ms(L[Q]):Cr(L[Q]);if(za(Te,Se))y(Te,Se,$,null,W,q,ae,ne,te);else break;Q++}for(;Q<=de&&Q<=we;){const Te=D[de],Se=L[we]=te?Ms(L[we]):Cr(L[we]);if(za(Te,Se))y(Te,Se,$,null,W,q,ae,ne,te);else break;de--,we--}if(Q>de){if(Q<=we){const Te=we+1,Se=Te<xe?L[Te].el:U;for(;Q<=we;)y(null,L[Q]=te?Ms(L[Q]):Cr(L[Q]),$,Se,W,q,ae,ne,te),Q++}}else if(Q>we)for(;Q<=de;)$e(D[Q],W,q,!0),Q++;else{const Te=Q,Se=Q,Me=new Map;for(Q=Se;Q<=we;Q++){const pt=L[Q]=te?Ms(L[Q]):Cr(L[Q]);pt.key!=null&&Me.set(pt.key,Q)}let ze,$t=0;const xt=we-Se+1;let an=!1,Bt=0;const gr=new Array(xt);for(Q=0;Q<xt;Q++)gr[Q]=0;for(Q=Te;Q<=de;Q++){const pt=D[Q];if($t>=xt){$e(pt,W,q,!0);continue}let It;if(pt.key!=null)It=Me.get(pt.key);else for(ze=Se;ze<=we;ze++)if(gr[ze-Se]===0&&za(pt,L[ze])){It=ze;break}It===void 0?$e(pt,W,q,!0):(gr[It-Se]=Q+1,It>=Bt?Bt=It:an=!0,y(pt,L[It],$,null,W,q,ae,ne,te),$t++)}const Ei=an?NA(gr):qo;for(ze=Ei.length-1,Q=xt-1;Q>=0;Q--){const pt=Se+Q,It=L[pt],go=pt+1<xe?L[pt+1].el:U;gr[Q]===0?y(null,It,$,go,W,q,ae,ne,te):an&&(ze<0||Q!==Ei[ze]?Pe(It,$,go,2):ze--)}}},Pe=(D,L,$,U,W=null)=>{const{el:q,type:ae,transition:ne,children:te,shapeFlag:Q}=D;if(Q&6){Pe(D.component.subTree,L,$,U);return}if(Q&128){D.suspense.move(L,$,U);return}if(Q&64){ae.move(D,L,$,me);return}if(ae===Be){r(q,L,$);for(let de=0;de<te.length;de++)Pe(te[de],L,$,U);r(D.anchor,L,$);return}if(ae===Qu){b(D,L,$);return}if(U!==2&&Q&1&&ne)if(U===0)ne.beforeEnter(q),r(q,L,$),Tn(()=>ne.enter(q),W);else{const{leave:de,delayLeave:we,afterLeave:Te}=ne,Se=()=>r(q,L,$),Me=()=>{de(q,()=>{Se(),Te&&Te()})};we?we(q,Se,Me):Me()}else r(q,L,$)},$e=(D,L,$,U=!1,W=!1)=>{const{type:q,props:ae,ref:ne,children:te,dynamicChildren:Q,shapeFlag:xe,patchFlag:de,dirs:we,cacheIndex:Te}=D;if(de===-2&&(W=!1),ne!=null&&bc(ne,null,$,D,!0),Te!=null&&(L.renderCache[Te]=void 0),xe&256){L.ctx.deactivate(D);return}const Se=xe&1&&we,Me=!Jo(D);let ze;if(Me&&(ze=ae&&ae.onVnodeBeforeUnmount)&&br(ze,L,D),xe&6)ke(D.component,$,U);else{if(xe&128){D.suspense.unmount($,U);return}Se&&Ii(D,null,L,"beforeUnmount"),xe&64?D.type.remove(D,L,$,me,U):Q&&!Q.hasOnce&&(q!==Be||de>0&&de&64)?X(Q,L,$,!1,!0):(q===Be&&de&384||!W&&xe&16)&&X(te,L,$),U&&Je(D)}(Me&&(ze=ae&&ae.onVnodeUnmounted)||Se)&&Tn(()=>{ze&&br(ze,L,D),Se&&Ii(D,null,L,"unmounted")},$)},Je=D=>{const{type:L,el:$,anchor:U,transition:W}=D;if(L===Be){Qe($,U);return}if(L===Qu){C(D);return}const q=()=>{s($),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(D.shapeFlag&1&&W&&!W.persisted){const{leave:ae,delayLeave:ne}=W,te=()=>ae($,q);ne?ne(D.el,q,te):te()}else q()},Qe=(D,L)=>{let $;for(;D!==L;)$=h(D),s(D),D=$;s(L)},ke=(D,L,$)=>{const{bum:U,scope:W,job:q,subTree:ae,um:ne,m:te,a:Q}=D;av(te),av(Q),U&&Ku(U),W.stop(),q&&(q.flags|=8,$e(ae,D,L,$)),ne&&Tn(ne,L),Tn(()=>{D.isUnmounted=!0},L),L&&L.pendingBranch&&!L.isUnmounted&&D.asyncDep&&!D.asyncResolved&&D.suspenseId===L.pendingId&&(L.deps--,L.deps===0&&L.resolve())},X=(D,L,$,U=!1,W=!1,q=0)=>{for(let ae=q;ae<D.length;ae++)$e(D[ae],L,$,U,W)},B=D=>{if(D.shapeFlag&6)return B(D.component.subTree);if(D.shapeFlag&128)return D.suspense.next();const L=h(D.anchor||D.el),$=L&&L[b1];return $?h($):L};let ie=!1;const oe=(D,L,$)=>{D==null?L._vnode&&$e(L._vnode,null,null,!0):y(L._vnode||null,D,L,null,null,null,$),L._vnode=D,ie||(ie=!0,Yy(),g1(),ie=!1)},me={p:y,um:$e,m:Pe,r:Je,mt:K,mc:x,pc:ue,pbc:M,n:B,o:n};return{render:oe,hydrate:void 0,createApp:xA(oe)}}function Qf({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Mi({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function DA(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function Am(n,e,t=!1){const r=n.children,s=e.children;if(De(r)&&De(s))for(let i=0;i<r.length;i++){const o=r[i];let a=s[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[i]=Ms(s[i]),a.el=o.el),!t&&a.patchFlag!==-2&&Am(o,a)),a.type===jd&&(a.el=o.el)}}function NA(n){const e=n.slice(),t=[0];let r,s,i,o,a;const l=n.length;for(r=0;r<l;r++){const c=n[r];if(c!==0){if(s=t[t.length-1],n[s]<c){e[r]=s,t.push(r);continue}for(i=0,o=t.length-1;i<o;)a=i+o>>1,n[t[a]]<c?i=a+1:o=a;c<n[t[i]]&&(i>0&&(e[r]=t[i-1]),t[i]=r)}}for(i=t.length,o=t[i-1];i-- >0;)t[i]=o,o=e[o];return t}function U1(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:U1(e)}function av(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const LA=Symbol.for("v-scx"),VA=()=>cr(LA);function $A(n,e){return km(n,null,e)}function At(n,e,t){return km(n,e,t)}function km(n,e,t=lt){const{immediate:r,deep:s,flush:i,once:o}=t,a=vn({},t),l=e&&r||!e&&i!=="post";let c;if(Rl){if(i==="sync"){const p=VA();c=p.__watcherHandles||(p.__watcherHandles=[])}else if(!l){const p=()=>{};return p.stop=Ir,p.resume=Ir,p.pause=Ir,p}}const u=tn;a.call=(p,m,y)=>Or(p,u,m,y);let d=!1;i==="post"?a.scheduler=p=>{Tn(p,u&&u.suspense)}:i!=="sync"&&(d=!0,a.scheduler=(p,m)=>{m?p():Em(p)}),a.augmentJob=p=>{e&&(p.flags|=4),d&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const h=rA(n,e,a);return Rl&&(c?c.push(h):l&&h()),h}function BA(n,e,t){const r=this.proxy,s=_t(n)?n.includes(".")?q1(r,n):()=>r[n]:n.bind(r,r);let i;Fe(e)?i=e:(i=e.handler,t=e);const o=ru(this),a=km(s,i.bind(r),t);return o(),a}function q1(n,e){const t=e.split(".");return()=>{let r=n;for(let s=0;s<t.length&&r;s++)r=r[t[s]];return r}}const FA=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${sr(e)}Modifiers`]||n[`${di(e)}Modifiers`];function zA(n,e,...t){if(n.isUnmounted)return;const r=n.vnode.props||lt;let s=t;const i=e.startsWith("update:"),o=i&&FA(r,e.slice(7));o&&(o.trim&&(s=t.map(u=>_t(u)?u.trim():u)),o.number&&(s=t.map(Jh)));let a,l=r[a=Uf(e)]||r[a=Uf(sr(e))];!l&&i&&(l=r[a=Uf(di(e))]),l&&Or(l,n,6,s);const c=r[a+"Once"];if(c){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Or(c,n,6,s)}}function W1(n,e,t=!1){const r=e.emitsCache,s=r.get(n);if(s!==void 0)return s;const i=n.emits;let o={},a=!1;if(!Fe(n)){const l=c=>{const u=W1(c,e,!0);u&&(a=!0,vn(o,u))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!i&&!a?(yt(n)&&r.set(n,null),null):(De(i)?i.forEach(l=>o[l]=null):vn(o,i),yt(n)&&r.set(n,o),o)}function zd(n,e){return!n||!Pd(e)?!1:(e=e.slice(2).replace(/Once$/,""),st(n,e[0].toLowerCase()+e.slice(1))||st(n,di(e))||st(n,e))}function lv(n){const{type:e,vnode:t,proxy:r,withProxy:s,propsOptions:[i],slots:o,attrs:a,emit:l,render:c,renderCache:u,props:d,data:h,setupState:p,ctx:m,inheritAttrs:y}=n,v=vc(n);let S,T;try{if(t.shapeFlag&4){const C=s||r,O=C;S=Cr(c.call(O,C,u,d,p,h,m)),T=a}else{const C=e;S=Cr(C.length>1?C(d,{attrs:a,slots:o,emit:l}):C(d,null)),T=e.props?a:jA(a)}}catch(C){ul.length=0,Bd(C,n,1),S=Ee(ei)}let b=S;if(T&&y!==!1){const C=Object.keys(T),{shapeFlag:O}=b;C.length&&O&7&&(i&&C.some(hm)&&(T=HA(T,i)),b=na(b,T,!1,!0))}return t.dirs&&(b=na(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(t.dirs):t.dirs),t.transition&&Sm(b,t.transition),S=b,vc(v),S}const jA=n=>{let e;for(const t in n)(t==="class"||t==="style"||Pd(t))&&((e||(e={}))[t]=n[t]);return e},HA=(n,e)=>{const t={};for(const r in n)(!hm(r)||!(r.slice(9)in e))&&(t[r]=n[r]);return t};function UA(n,e,t){const{props:r,children:s,component:i}=n,{props:o,children:a,patchFlag:l}=e,c=i.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return r?uv(r,o,c):!!o;if(l&8){const u=e.dynamicProps;for(let d=0;d<u.length;d++){const h=u[d];if(o[h]!==r[h]&&!zd(c,h))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?uv(r,o,c):!0:!!o;return!1}function uv(n,e,t){const r=Object.keys(e);if(r.length!==Object.keys(n).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(e[i]!==n[i]&&!zd(t,i))return!0}return!1}function qA({vnode:n,parent:e},t){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===n&&(r.el=n.el),r===n)(n=e.vnode).el=t,e=e.parent;else break}}const G1=n=>n.__isSuspense;function WA(n,e){e&&e.pendingBranch?De(n)?e.effects.push(...n):e.effects.push(n):oA(n)}const Be=Symbol.for("v-fgt"),jd=Symbol.for("v-txt"),ei=Symbol.for("v-cmt"),Qu=Symbol.for("v-stc"),ul=[];let jn=null;function z(n=!1){ul.push(jn=n?null:[])}function GA(){ul.pop(),jn=ul[ul.length-1]||null}let Ml=1;function cv(n,e=!1){Ml+=n,n<0&&jn&&e&&(jn.hasOnce=!0)}function K1(n){return n.dynamicChildren=Ml>0?jn||qo:null,GA(),Ml>0&&jn&&jn.push(n),n}function j(n,e,t,r,s,i){return K1(w(n,e,t,r,s,i,!0))}function mt(n,e,t,r,s){return K1(Ee(n,e,t,r,s,!0))}function Pl(n){return n?n.__v_isVNode===!0:!1}function za(n,e){return n.type===e.type&&n.key===e.key}const J1=({key:n})=>n??null,Yu=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?_t(n)||rn(n)||Fe(n)?{i:Ut,r:n,k:e,f:!!t}:n:null);function w(n,e=null,t=null,r=0,s=null,i=n===Be?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&J1(e),ref:e&&Yu(e),scopeId:v1,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ut};return a?(Im(l,t),i&128&&n.normalize(l)):t&&(l.shapeFlag|=_t(t)?8:16),Ml>0&&!o&&jn&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&jn.push(l),l}const Ee=KA;function KA(n,e=null,t=null,r=0,s=null,i=!1){if((!n||n===I1)&&(n=ei),Pl(n)){const a=na(n,e,!0);return t&&Im(a,t),Ml>0&&!i&&jn&&(a.shapeFlag&6?jn[jn.indexOf(n)]=a:jn.push(a)),a.patchFlag=-2,a}if(ik(n)&&(n=n.__vccOpts),e){e=JA(e);let{class:a,style:l}=e;a&&!_t(a)&&(e.class=ye(a)),yt(l)&&(Tm(l)&&!De(l)&&(l=vn({},l)),e.style=Ld(l))}const o=_t(n)?1:G1(n)?128:aA(n)?64:yt(n)?4:Fe(n)?2:0;return w(n,e,t,r,s,o,i,!0)}function JA(n){return n?Tm(n)||V1(n)?vn({},n):n:null}function na(n,e,t=!1,r=!1){const{props:s,ref:i,patchFlag:o,children:a,transition:l}=n,c=e?Xu(s||{},e):s,u={__v_isVNode:!0,__v_skip:!0,type:n.type,props:c,key:c&&J1(c),ref:e&&e.ref?t&&i?De(i)?i.concat(Yu(e)):[i,Yu(e)]:Yu(e):i,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Be?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&na(n.ssContent),ssFallback:n.ssFallback&&na(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&r&&Sm(u,l.clone(u)),u}function St(n=" ",e=0){return Ee(jd,null,n,e)}function QA(n,e){const t=Ee(Qu,null,n);return t.staticCount=e,t}function he(n="",e=!1){return e?(z(),mt(ei,null,n)):Ee(ei,null,n)}function Cr(n){return n==null||typeof n=="boolean"?Ee(ei):De(n)?Ee(Be,null,n.slice()):Pl(n)?Ms(n):Ee(jd,null,String(n))}function Ms(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:na(n)}function Im(n,e){let t=0;const{shapeFlag:r}=n;if(e==null)e=null;else if(De(e))t=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),Im(n,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!V1(e)?e._ctx=Ut:s===3&&Ut&&(Ut.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else Fe(e)?(e={default:e,_ctx:Ut},t=32):(e=String(e),r&64?(t=16,e=[St(e)]):t=8);n.children=e,n.shapeFlag|=t}function Xu(...n){const e={};for(let t=0;t<n.length;t++){const r=n[t];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=ye([e.class,r.class]));else if(s==="style")e.style=Ld([e.style,r.style]);else if(Pd(s)){const i=e[s],o=r[s];o&&i!==o&&!(De(i)&&i.includes(o))&&(e[s]=i?[].concat(i,o):o)}else s!==""&&(e[s]=r[s])}return e}function br(n,e,t,r=null){Or(n,e,7,[t,r])}const YA=D1();let XA=0;function ZA(n,e,t){const r=n.type,s=(e?e.appContext:n.appContext)||YA,i={uid:XA++,vnode:n,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new kC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:B1(r,s),emitsOptions:W1(r,s),emit:null,emitted:null,propsDefaults:lt,inheritAttrs:r.inheritAttrs,ctx:lt,data:lt,props:lt,attrs:lt,slots:lt,refs:lt,setupState:lt,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=e?e.root:i,i.emit=zA.bind(null,i),n.ce&&n.ce(i),i}let tn=null;const Ea=()=>tn||Ut;let Tc,ip;{const n=Nd(),e=(t,r)=>{let s;return(s=n[t])||(s=n[t]=[]),s.push(r),i=>{s.length>1?s.forEach(o=>o(i)):s[0](i)}};Tc=e("__VUE_INSTANCE_SETTERS__",t=>tn=t),ip=e("__VUE_SSR_SETTERS__",t=>Rl=t)}const ru=n=>{const e=tn;return Tc(n),n.scope.on(),()=>{n.scope.off(),Tc(e)}},dv=()=>{tn&&tn.scope.off(),Tc(null)};function Q1(n){return n.vnode.shapeFlag&4}let Rl=!1;function ek(n,e=!1,t=!1){e&&ip(e);const{props:r,children:s}=n.vnode,i=Q1(n);CA(n,r,i,e),MA(n,s,t);const o=i?tk(n,e):void 0;return e&&ip(!1),o}function tk(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,vA);const{setup:r}=t;if(r){fi();const s=n.setupContext=r.length>1?rk(n):null,i=ru(n),o=nu(r,n,0,[n.props,s]),a=zw(o);if(hi(),i(),(a||n.sp)&&!Jo(n)&&S1(n),a){if(o.then(dv,dv),e)return o.then(l=>{fv(n,l)}).catch(l=>{Bd(l,n,0)});n.asyncDep=o}else fv(n,o)}else Y1(n)}function fv(n,e,t){Fe(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:yt(e)&&(n.setupState=f1(e)),Y1(n)}function Y1(n,e,t){const r=n.type;n.render||(n.render=r.render||Ir);{const s=ru(n);fi();try{bA(n)}finally{hi(),s()}}}const nk={get(n,e){return pn(n,"get",""),n[e]}};function rk(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,nk),slots:n.slots,emit:n.emit,expose:e}}function Hd(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(f1(c1(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in ll)return ll[t](n)},has(e,t){return t in e||t in ll}})):n.proxy}function sk(n,e=!0){return Fe(n)?n.displayName||n.name:n.name||e&&n.__name}function ik(n){return Fe(n)&&"__vccOpts"in n}const Oe=(n,e)=>tA(n,e,Rl);function Sn(n,e,t){const r=arguments.length;return r===2?yt(e)&&!De(e)?Pl(e)?Ee(n,null,[e]):Ee(n,e):Ee(n,null,e):(r>3?t=Array.prototype.slice.call(arguments,2):r===3&&Pl(t)&&(t=[t]),Ee(n,e,t))}const ok="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let op;const hv=typeof window<"u"&&window.trustedTypes;if(hv)try{op=hv.createPolicy("vue",{createHTML:n=>n})}catch{}const X1=op?n=>op.createHTML(n):n=>n,ak="http://www.w3.org/2000/svg",lk="http://www.w3.org/1998/Math/MathML",ts=typeof document<"u"?document:null,pv=ts&&ts.createElement("template"),uk={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,r)=>{const s=e==="svg"?ts.createElementNS(ak,n):e==="mathml"?ts.createElementNS(lk,n):t?ts.createElement(n,{is:t}):ts.createElement(n);return n==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:n=>ts.createTextNode(n),createComment:n=>ts.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>ts.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,r,s,i){const o=t?t.previousSibling:e.lastChild;if(s&&(s===i||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===i||!(s=s.nextSibling)););else{pv.innerHTML=X1(r==="svg"?`<svg>${n}</svg>`:r==="mathml"?`<math>${n}</math>`:n);const a=pv.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},ck=Symbol("_vtc");function dk(n,e,t){const r=n[ck];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const Ec=Symbol("_vod"),Z1=Symbol("_vsh"),fk={beforeMount(n,{value:e},{transition:t}){n[Ec]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):ja(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:r}){!e!=!t&&(r?e?(r.beforeEnter(n),ja(n,!0),r.enter(n)):r.leave(n,()=>{ja(n,!1)}):ja(n,e))},beforeUnmount(n,{value:e}){ja(n,e)}};function ja(n,e){n.style.display=e?n[Ec]:"none",n[Z1]=!e}const hk=Symbol(""),pk=/(^|;)\s*display\s*:/;function mk(n,e,t){const r=n.style,s=_t(t);let i=!1;if(t&&!s){if(e)if(_t(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&Zu(r,a,"")}else for(const o in e)t[o]==null&&Zu(r,o,"");for(const o in t)o==="display"&&(i=!0),Zu(r,o,t[o])}else if(s){if(e!==t){const o=r[hk];o&&(t+=";"+o),r.cssText=t,i=pk.test(t)}}else e&&n.removeAttribute("style");Ec in n&&(n[Ec]=i?r.display:"",n[Z1]&&(r.display="none"))}const mv=/\s*!important$/;function Zu(n,e,t){if(De(t))t.forEach(r=>Zu(n,e,r));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const r=gk(n,e);mv.test(t)?n.setProperty(di(r),t.replace(mv,""),"important"):n[r]=t}}const gv=["Webkit","Moz","ms"],Yf={};function gk(n,e){const t=Yf[e];if(t)return t;let r=sr(e);if(r!=="filter"&&r in n)return Yf[e]=r;r=Dd(r);for(let s=0;s<gv.length;s++){const i=gv[s]+r;if(i in n)return Yf[e]=i}return e}const yv="http://www.w3.org/1999/xlink";function vv(n,e,t,r,s,i=AC(e)){r&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(yv,e.slice(6,e.length)):n.setAttributeNS(yv,e,t):t==null||i&&!qw(t)?n.removeAttribute(e):n.setAttribute(e,i?"":ys(t)?String(t):t)}function bv(n,e,t,r,s){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?X1(t):t);return}const i=n.tagName;if(e==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=qw(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(s||e)}function Do(n,e,t,r){n.addEventListener(e,t,r)}function yk(n,e,t,r){n.removeEventListener(e,t,r)}const wv=Symbol("_vei");function vk(n,e,t,r,s=null){const i=n[wv]||(n[wv]={}),o=i[e];if(r&&o)o.value=r;else{const[a,l]=bk(e);if(r){const c=i[e]=Ek(r,s);Do(n,a,c,l)}else o&&(yk(n,a,o,l),i[e]=void 0)}}const Tv=/(?:Once|Passive|Capture)$/;function bk(n){let e;if(Tv.test(n)){e={};let r;for(;r=n.match(Tv);)n=n.slice(0,n.length-r[0].length),e[r[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):di(n.slice(2)),e]}let Xf=0;const wk=Promise.resolve(),Tk=()=>Xf||(wk.then(()=>Xf=0),Xf=Date.now());function Ek(n,e){const t=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=t.attached)return;Or(Sk(r,t.value),e,5,[r])};return t.value=n,t.attached=Tk(),t}function Sk(n,e){if(De(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Ev=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,_k=(n,e,t,r,s,i)=>{const o=s==="svg";e==="class"?dk(n,r,o):e==="style"?mk(n,t,r):Pd(e)?hm(e)||vk(n,e,t,r,i):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):xk(n,e,r,o))?(bv(n,e,r),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&vv(n,e,r,o,i,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!_t(r))?bv(n,sr(e),r,i,e):(e==="true-value"?n._trueValue=r:e==="false-value"&&(n._falseValue=r),vv(n,e,r,o))};function xk(n,e,t,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in n&&Ev(e)&&Fe(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Ev(e)&&_t(t)?!1:e in n}const Sv=n=>{const e=n.props["onUpdate:modelValue"]||!1;return De(e)?t=>Ku(e,t):e};function Ck(n){n.target.composing=!0}function _v(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Zf=Symbol("_assign"),jt={created(n,{modifiers:{lazy:e,trim:t,number:r}},s){n[Zf]=Sv(s);const i=r||s.props&&s.props.type==="number";Do(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),i&&(a=Jh(a)),n[Zf](a)}),t&&Do(n,"change",()=>{n.value=n.value.trim()}),e||(Do(n,"compositionstart",Ck),Do(n,"compositionend",_v),Do(n,"change",_v))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:r,trim:s,number:i}},o){if(n[Zf]=Sv(o),n.composing)return;const a=(i||n.type==="number")&&!/^0\d/.test(n.value)?Jh(n.value):n.value,l=e??"";a!==l&&(document.activeElement===n&&n.type!=="range"&&(r&&e===t||s&&n.value.trim()===l)||(n.value=l))}},Ak=["ctrl","shift","alt","meta"],kk={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>Ak.some(t=>n[`${t}Key`]&&!e.includes(t))},Hs=(n,e)=>{const t=n._withMods||(n._withMods={}),r=e.join(".");return t[r]||(t[r]=(s,...i)=>{for(let o=0;o<e.length;o++){const a=kk[e[o]];if(a&&a(s,e))return}return n(s,...i)})},Ik={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},xv=(n,e)=>{const t=n._withKeys||(n._withKeys={}),r=e.join(".");return t[r]||(t[r]=s=>{if(!("key"in s))return;const i=di(s.key);if(e.some(o=>o===i||Ik[o]===i))return n(s)})},Mk=vn({patchProp:_k},uk);let Cv;function Pk(){return Cv||(Cv=RA(Mk))}const Rk=(...n)=>{const e=Pk().createApp(...n),{mount:t}=e;return e.mount=r=>{const s=Dk(r);if(!s)return;const i=e._component;!Fe(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=t(s,!1,Ok(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e};function Ok(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function Dk(n){return _t(n)?document.querySelector(n):n}const uo={site:"site",trips:"trips"},Nk=()=>{};var Av={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eT=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},Lk=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=n[t++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=n[t++],o=n[t++],a=n[t++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{const i=n[t++],o=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},tT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const i=n[s],o=s+1<n.length,a=o?n[s+1]:0,l=s+2<n.length,c=l?n[s+2]:0,u=i>>2,d=(i&3)<<4|a>>4;let h=(a&15)<<2|c>>6,p=c&63;l||(p=64,o||(h=64)),r.push(t[u],t[d],t[h],t[p])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(eT(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Lk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const i=t[n.charAt(s++)],a=s<n.length?t[n.charAt(s)]:0;++s;const c=s<n.length?t[n.charAt(s)]:64;++s;const d=s<n.length?t[n.charAt(s)]:64;if(++s,i==null||a==null||c==null||d==null)throw new Vk;const h=i<<2|a>>4;if(r.push(h),c!==64){const p=a<<4&240|c>>2;if(r.push(p),d!==64){const m=c<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Vk extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $k=function(n){const e=eT(n);return tT.encodeByteArray(e,!0)},Sc=function(n){return $k(n).replace(/\./g,"")},Bk=function(n){try{return tT.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=()=>Fk().__FIREBASE_DEFAULTS__,jk=()=>{if(typeof process>"u"||typeof Av>"u")return;const n=Av.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Hk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Bk(n[1]);return e&&JSON.parse(e)},Mm=()=>{try{return Nk()||zk()||jk()||Hk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Uk=n=>{var e,t;return(t=(e=Mm())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},qk=n=>{const e=Uk(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},nT=()=>{var n;return(n=Mm())===null||n===void 0?void 0:n.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,i=n.sub||n.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Sc(JSON.stringify(t)),Sc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kk(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Jk(){var n;const e=(n=Mm())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Qk(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Yk(){return!Jk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rT(){try{return typeof indexedDB=="object"}catch{return!1}}function sT(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(t){e(t)}})}function Xk(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="FirebaseError";class pi extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=Zk,Object.setPrototypeOf(this,pi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ud.prototype.create)}}class Ud{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?eI(i,r):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new pi(s,a,r)}}function eI(n,e){return n.replace(tI,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const tI=/\{\$([^}]+)}/g;function Ol(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const i=n[s],o=e[s];if(kv(i)&&kv(o)){if(!Ol(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function kv(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nI=1e3,rI=2,sI=4*60*60*1e3,iI=.5;function Iv(n,e=nI,t=rI){const r=e*Math.pow(t,n),s=Math.round(iI*r*(Math.random()-.5)*2);return Math.min(sI,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dr(n){return n&&n._delegate?n._delegate:n}class fs{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oI{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new Wk;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lI(e))try{this.getOrInitializeService({instanceIdentifier:Oi})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Oi){return this.instances.has(e)}getOptions(e=Oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);r===a&&o.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aI(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Oi){return this.component?this.component.multipleInstances?e:Oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function aI(n){return n===Oi?void 0:n}function lI(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new oI(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Ze||(Ze={}));const cI={debug:Ze.DEBUG,verbose:Ze.VERBOSE,info:Ze.INFO,warn:Ze.WARN,error:Ze.ERROR,silent:Ze.SILENT},dI=Ze.INFO,fI={[Ze.DEBUG]:"log",[Ze.VERBOSE]:"log",[Ze.INFO]:"info",[Ze.WARN]:"warn",[Ze.ERROR]:"error"},hI=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=fI[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Pm{constructor(e){this.name=e,this._logLevel=dI,this._logHandler=hI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?cI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ze.DEBUG,...e),this._logHandler(this,Ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ze.VERBOSE,...e),this._logHandler(this,Ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ze.INFO,...e),this._logHandler(this,Ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ze.WARN,...e),this._logHandler(this,Ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ze.ERROR,...e),this._logHandler(this,Ze.ERROR,...e)}}const pI=(n,e)=>e.some(t=>n instanceof t);let Mv,Pv;function mI(){return Mv||(Mv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gI(){return Pv||(Pv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const iT=new WeakMap,ap=new WeakMap,oT=new WeakMap,eh=new WeakMap,Rm=new WeakMap;function yI(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",i),n.removeEventListener("error",o)},i=()=>{t(Us(n.result)),s()},o=()=>{r(n.error),s()};n.addEventListener("success",i),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&iT.set(t,n)}).catch(()=>{}),Rm.set(e,n),e}function vI(n){if(ap.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",i),n.removeEventListener("error",o),n.removeEventListener("abort",o)},i=()=>{t(),s()},o=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",i),n.addEventListener("error",o),n.addEventListener("abort",o)});ap.set(n,e)}let lp={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ap.get(n);if(e==="objectStoreNames")return n.objectStoreNames||oT.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Us(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function bI(n){lp=n(lp)}function wI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(th(this),e,...t);return oT.set(r,e.sort?e.sort():[e]),Us(r)}:gI().includes(n)?function(...e){return n.apply(th(this),e),Us(iT.get(this))}:function(...e){return Us(n.apply(th(this),e))}}function TI(n){return typeof n=="function"?wI(n):(n instanceof IDBTransaction&&vI(n),pI(n,mI())?new Proxy(n,lp):n)}function Us(n){if(n instanceof IDBRequest)return yI(n);if(eh.has(n))return eh.get(n);const e=TI(n);return e!==n&&(eh.set(n,e),Rm.set(e,n)),e}const th=n=>Rm.get(n);function aT(n,e,{blocked:t,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(n,e),a=Us(o);return r&&o.addEventListener("upgradeneeded",l=>{r(Us(o.result),l.oldVersion,l.newVersion,Us(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const EI=["get","getKey","getAll","getAllKeys","count"],SI=["put","add","delete","clear"],nh=new Map;function Rv(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(nh.get(e))return nh.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=SI.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||EI.includes(t)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let c=l.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),s&&l.done]))[0]};return nh.set(e,i),i}bI(n=>({...n,get:(e,t,r)=>Rv(e,t)||n.get(e,t,r),has:(e,t)=>!!Rv(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(xI(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function xI(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const up="@firebase/app",Ov="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=new Pm("@firebase/app"),CI="@firebase/app-compat",AI="@firebase/analytics-compat",kI="@firebase/analytics",II="@firebase/app-check-compat",MI="@firebase/app-check",PI="@firebase/auth",RI="@firebase/auth-compat",OI="@firebase/database",DI="@firebase/data-connect",NI="@firebase/database-compat",LI="@firebase/functions",VI="@firebase/functions-compat",$I="@firebase/installations",BI="@firebase/installations-compat",FI="@firebase/messaging",zI="@firebase/messaging-compat",jI="@firebase/performance",HI="@firebase/performance-compat",UI="@firebase/remote-config",qI="@firebase/remote-config-compat",WI="@firebase/storage",GI="@firebase/storage-compat",KI="@firebase/firestore",JI="@firebase/vertexai",QI="@firebase/firestore-compat",YI="firebase",XI="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cp="[DEFAULT]",ZI={[up]:"fire-core",[CI]:"fire-core-compat",[kI]:"fire-analytics",[AI]:"fire-analytics-compat",[MI]:"fire-app-check",[II]:"fire-app-check-compat",[PI]:"fire-auth",[RI]:"fire-auth-compat",[OI]:"fire-rtdb",[DI]:"fire-data-connect",[NI]:"fire-rtdb-compat",[LI]:"fire-fn",[VI]:"fire-fn-compat",[$I]:"fire-iid",[BI]:"fire-iid-compat",[FI]:"fire-fcm",[zI]:"fire-fcm-compat",[jI]:"fire-perf",[HI]:"fire-perf-compat",[UI]:"fire-rc",[qI]:"fire-rc-compat",[WI]:"fire-gcs",[GI]:"fire-gcs-compat",[KI]:"fire-fst",[QI]:"fire-fst-compat",[JI]:"fire-vertex","fire-js":"fire-js",[YI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c=new Map,eM=new Map,dp=new Map;function Dv(n,e){try{n.container.addComponent(e)}catch(t){hs.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ti(n){const e=n.name;if(dp.has(e))return hs.debug(`There were multiple attempts to register component ${e}.`),!1;dp.set(e,n);for(const t of _c.values())Dv(t,n);for(const t of eM.values())Dv(t,n);return!0}function su(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function tM(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qs=new Ud("app","Firebase",nM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new fs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=XI;function lT(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:cp,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw qs.create("bad-app-name",{appName:String(s)});if(t||(t=nT()),!t)throw qs.create("no-options");const i=_c.get(s);if(i){if(Ol(t,i.options)&&Ol(r,i.config))return i;throw qs.create("duplicate-app",{appName:s})}const o=new uI(s);for(const l of dp.values())o.addComponent(l);const a=new rM(t,r,o);return _c.set(s,a),a}function uT(n=cp){const e=_c.get(n);if(!e&&n===cp&&nT())return lT();if(!e)throw qs.create("no-app",{appName:n});return e}function Mr(n,e,t){var r;let s=(r=ZI[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),hs.warn(a.join(" "));return}ti(new fs(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iM="firebase-heartbeat-database",oM=1,Dl="firebase-heartbeat-store";let rh=null;function cT(){return rh||(rh=aT(iM,oM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Dl)}catch(t){console.warn(t)}}}}).catch(n=>{throw qs.create("idb-open",{originalErrorMessage:n.message})})),rh}async function aM(n){try{const t=(await cT()).transaction(Dl),r=await t.objectStore(Dl).get(dT(n));return await t.done,r}catch(e){if(e instanceof pi)hs.warn(e.message);else{const t=qs.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});hs.warn(t.message)}}}async function Nv(n,e){try{const r=(await cT()).transaction(Dl,"readwrite");await r.objectStore(Dl).put(e,dT(n)),await r.done}catch(t){if(t instanceof pi)hs.warn(t.message);else{const r=qs.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});hs.warn(r.message)}}}function dT(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lM=1024,uM=30;class cM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new fM(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Lv();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>uM){const o=hM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){hs.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Lv(),{heartbeatsToSend:r,unsentEntries:s}=dM(this._heartbeatsCache.heartbeats),i=Sc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return hs.warn(t),""}}}function Lv(){return new Date().toISOString().substring(0,10)}function dM(n,e=lM){const t=[];let r=n.slice();for(const s of n){const i=t.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Vv(t)>e){i.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),Vv(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class fM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rT()?sT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await aM(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Nv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return Nv(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Vv(n){return Sc(JSON.stringify({version:2,heartbeats:n})).length}function hM(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pM(n){ti(new fs("platform-logger",e=>new _I(e),"PRIVATE")),ti(new fs("heartbeat",e=>new cM(e),"PRIVATE")),Mr(up,Ov,n),Mr(up,Ov,"esm2017"),Mr("fire-js","")}pM("");var mM="firebase",gM="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mr(mM,gM,"app");var $v=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ws,fT;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(A,x){function _(){}_.prototype=x.prototype,A.D=x.prototype,A.prototype=new _,A.prototype.constructor=A,A.C=function(M,I,P){for(var k=Array(arguments.length-2),K=2;K<arguments.length;K++)k[K-2]=arguments[K];return x.prototype[I].apply(M,k)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(A,x,_){_||(_=0);var M=Array(16);if(typeof x=="string")for(var I=0;16>I;++I)M[I]=x.charCodeAt(_++)|x.charCodeAt(_++)<<8|x.charCodeAt(_++)<<16|x.charCodeAt(_++)<<24;else for(I=0;16>I;++I)M[I]=x[_++]|x[_++]<<8|x[_++]<<16|x[_++]<<24;x=A.g[0],_=A.g[1],I=A.g[2];var P=A.g[3],k=x+(P^_&(I^P))+M[0]+3614090360&4294967295;x=_+(k<<7&4294967295|k>>>25),k=P+(I^x&(_^I))+M[1]+3905402710&4294967295,P=x+(k<<12&4294967295|k>>>20),k=I+(_^P&(x^_))+M[2]+606105819&4294967295,I=P+(k<<17&4294967295|k>>>15),k=_+(x^I&(P^x))+M[3]+3250441966&4294967295,_=I+(k<<22&4294967295|k>>>10),k=x+(P^_&(I^P))+M[4]+4118548399&4294967295,x=_+(k<<7&4294967295|k>>>25),k=P+(I^x&(_^I))+M[5]+1200080426&4294967295,P=x+(k<<12&4294967295|k>>>20),k=I+(_^P&(x^_))+M[6]+2821735955&4294967295,I=P+(k<<17&4294967295|k>>>15),k=_+(x^I&(P^x))+M[7]+4249261313&4294967295,_=I+(k<<22&4294967295|k>>>10),k=x+(P^_&(I^P))+M[8]+1770035416&4294967295,x=_+(k<<7&4294967295|k>>>25),k=P+(I^x&(_^I))+M[9]+2336552879&4294967295,P=x+(k<<12&4294967295|k>>>20),k=I+(_^P&(x^_))+M[10]+4294925233&4294967295,I=P+(k<<17&4294967295|k>>>15),k=_+(x^I&(P^x))+M[11]+2304563134&4294967295,_=I+(k<<22&4294967295|k>>>10),k=x+(P^_&(I^P))+M[12]+1804603682&4294967295,x=_+(k<<7&4294967295|k>>>25),k=P+(I^x&(_^I))+M[13]+4254626195&4294967295,P=x+(k<<12&4294967295|k>>>20),k=I+(_^P&(x^_))+M[14]+2792965006&4294967295,I=P+(k<<17&4294967295|k>>>15),k=_+(x^I&(P^x))+M[15]+1236535329&4294967295,_=I+(k<<22&4294967295|k>>>10),k=x+(I^P&(_^I))+M[1]+4129170786&4294967295,x=_+(k<<5&4294967295|k>>>27),k=P+(_^I&(x^_))+M[6]+3225465664&4294967295,P=x+(k<<9&4294967295|k>>>23),k=I+(x^_&(P^x))+M[11]+643717713&4294967295,I=P+(k<<14&4294967295|k>>>18),k=_+(P^x&(I^P))+M[0]+3921069994&4294967295,_=I+(k<<20&4294967295|k>>>12),k=x+(I^P&(_^I))+M[5]+3593408605&4294967295,x=_+(k<<5&4294967295|k>>>27),k=P+(_^I&(x^_))+M[10]+38016083&4294967295,P=x+(k<<9&4294967295|k>>>23),k=I+(x^_&(P^x))+M[15]+3634488961&4294967295,I=P+(k<<14&4294967295|k>>>18),k=_+(P^x&(I^P))+M[4]+3889429448&4294967295,_=I+(k<<20&4294967295|k>>>12),k=x+(I^P&(_^I))+M[9]+568446438&4294967295,x=_+(k<<5&4294967295|k>>>27),k=P+(_^I&(x^_))+M[14]+3275163606&4294967295,P=x+(k<<9&4294967295|k>>>23),k=I+(x^_&(P^x))+M[3]+4107603335&4294967295,I=P+(k<<14&4294967295|k>>>18),k=_+(P^x&(I^P))+M[8]+1163531501&4294967295,_=I+(k<<20&4294967295|k>>>12),k=x+(I^P&(_^I))+M[13]+2850285829&4294967295,x=_+(k<<5&4294967295|k>>>27),k=P+(_^I&(x^_))+M[2]+4243563512&4294967295,P=x+(k<<9&4294967295|k>>>23),k=I+(x^_&(P^x))+M[7]+1735328473&4294967295,I=P+(k<<14&4294967295|k>>>18),k=_+(P^x&(I^P))+M[12]+2368359562&4294967295,_=I+(k<<20&4294967295|k>>>12),k=x+(_^I^P)+M[5]+4294588738&4294967295,x=_+(k<<4&4294967295|k>>>28),k=P+(x^_^I)+M[8]+2272392833&4294967295,P=x+(k<<11&4294967295|k>>>21),k=I+(P^x^_)+M[11]+1839030562&4294967295,I=P+(k<<16&4294967295|k>>>16),k=_+(I^P^x)+M[14]+4259657740&4294967295,_=I+(k<<23&4294967295|k>>>9),k=x+(_^I^P)+M[1]+2763975236&4294967295,x=_+(k<<4&4294967295|k>>>28),k=P+(x^_^I)+M[4]+1272893353&4294967295,P=x+(k<<11&4294967295|k>>>21),k=I+(P^x^_)+M[7]+4139469664&4294967295,I=P+(k<<16&4294967295|k>>>16),k=_+(I^P^x)+M[10]+3200236656&4294967295,_=I+(k<<23&4294967295|k>>>9),k=x+(_^I^P)+M[13]+681279174&4294967295,x=_+(k<<4&4294967295|k>>>28),k=P+(x^_^I)+M[0]+3936430074&4294967295,P=x+(k<<11&4294967295|k>>>21),k=I+(P^x^_)+M[3]+3572445317&4294967295,I=P+(k<<16&4294967295|k>>>16),k=_+(I^P^x)+M[6]+76029189&4294967295,_=I+(k<<23&4294967295|k>>>9),k=x+(_^I^P)+M[9]+3654602809&4294967295,x=_+(k<<4&4294967295|k>>>28),k=P+(x^_^I)+M[12]+3873151461&4294967295,P=x+(k<<11&4294967295|k>>>21),k=I+(P^x^_)+M[15]+530742520&4294967295,I=P+(k<<16&4294967295|k>>>16),k=_+(I^P^x)+M[2]+3299628645&4294967295,_=I+(k<<23&4294967295|k>>>9),k=x+(I^(_|~P))+M[0]+4096336452&4294967295,x=_+(k<<6&4294967295|k>>>26),k=P+(_^(x|~I))+M[7]+1126891415&4294967295,P=x+(k<<10&4294967295|k>>>22),k=I+(x^(P|~_))+M[14]+2878612391&4294967295,I=P+(k<<15&4294967295|k>>>17),k=_+(P^(I|~x))+M[5]+4237533241&4294967295,_=I+(k<<21&4294967295|k>>>11),k=x+(I^(_|~P))+M[12]+1700485571&4294967295,x=_+(k<<6&4294967295|k>>>26),k=P+(_^(x|~I))+M[3]+2399980690&4294967295,P=x+(k<<10&4294967295|k>>>22),k=I+(x^(P|~_))+M[10]+4293915773&4294967295,I=P+(k<<15&4294967295|k>>>17),k=_+(P^(I|~x))+M[1]+2240044497&4294967295,_=I+(k<<21&4294967295|k>>>11),k=x+(I^(_|~P))+M[8]+1873313359&4294967295,x=_+(k<<6&4294967295|k>>>26),k=P+(_^(x|~I))+M[15]+4264355552&4294967295,P=x+(k<<10&4294967295|k>>>22),k=I+(x^(P|~_))+M[6]+2734768916&4294967295,I=P+(k<<15&4294967295|k>>>17),k=_+(P^(I|~x))+M[13]+1309151649&4294967295,_=I+(k<<21&4294967295|k>>>11),k=x+(I^(_|~P))+M[4]+4149444226&4294967295,x=_+(k<<6&4294967295|k>>>26),k=P+(_^(x|~I))+M[11]+3174756917&4294967295,P=x+(k<<10&4294967295|k>>>22),k=I+(x^(P|~_))+M[2]+718787259&4294967295,I=P+(k<<15&4294967295|k>>>17),k=_+(P^(I|~x))+M[9]+3951481745&4294967295,A.g[0]=A.g[0]+x&4294967295,A.g[1]=A.g[1]+(I+(k<<21&4294967295|k>>>11))&4294967295,A.g[2]=A.g[2]+I&4294967295,A.g[3]=A.g[3]+P&4294967295}r.prototype.u=function(A,x){x===void 0&&(x=A.length);for(var _=x-this.blockSize,M=this.B,I=this.h,P=0;P<x;){if(I==0)for(;P<=_;)s(this,A,P),P+=this.blockSize;if(typeof A=="string"){for(;P<x;)if(M[I++]=A.charCodeAt(P++),I==this.blockSize){s(this,M),I=0;break}}else for(;P<x;)if(M[I++]=A[P++],I==this.blockSize){s(this,M),I=0;break}}this.h=I,this.o+=x},r.prototype.v=function(){var A=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);A[0]=128;for(var x=1;x<A.length-8;++x)A[x]=0;var _=8*this.o;for(x=A.length-8;x<A.length;++x)A[x]=_&255,_/=256;for(this.u(A),A=Array(16),x=_=0;4>x;++x)for(var M=0;32>M;M+=8)A[_++]=this.g[x]>>>M&255;return A};function i(A,x){var _=a;return Object.prototype.hasOwnProperty.call(_,A)?_[A]:_[A]=x(A)}function o(A,x){this.h=x;for(var _=[],M=!0,I=A.length-1;0<=I;I--){var P=A[I]|0;M&&P==x||(_[I]=P,M=!1)}this.g=_}var a={};function l(A){return-128<=A&&128>A?i(A,function(x){return new o([x|0],0>x?-1:0)}):new o([A|0],0>A?-1:0)}function c(A){if(isNaN(A)||!isFinite(A))return d;if(0>A)return v(c(-A));for(var x=[],_=1,M=0;A>=_;M++)x[M]=A/_|0,_*=4294967296;return new o(x,0)}function u(A,x){if(A.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(A.charAt(0)=="-")return v(u(A.substring(1),x));if(0<=A.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=c(Math.pow(x,8)),M=d,I=0;I<A.length;I+=8){var P=Math.min(8,A.length-I),k=parseInt(A.substring(I,I+P),x);8>P?(P=c(Math.pow(x,P)),M=M.j(P).add(c(k))):(M=M.j(_),M=M.add(c(k)))}return M}var d=l(0),h=l(1),p=l(16777216);n=o.prototype,n.m=function(){if(y(this))return-v(this).m();for(var A=0,x=1,_=0;_<this.g.length;_++){var M=this.i(_);A+=(0<=M?M:4294967296+M)*x,x*=4294967296}return A},n.toString=function(A){if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(m(this))return"0";if(y(this))return"-"+v(this).toString(A);for(var x=c(Math.pow(A,6)),_=this,M="";;){var I=C(_,x).g;_=S(_,I.j(x));var P=((0<_.g.length?_.g[0]:_.h)>>>0).toString(A);if(_=I,m(_))return P+M;for(;6>P.length;)P="0"+P;M=P+M}},n.i=function(A){return 0>A?0:A<this.g.length?this.g[A]:this.h};function m(A){if(A.h!=0)return!1;for(var x=0;x<A.g.length;x++)if(A.g[x]!=0)return!1;return!0}function y(A){return A.h==-1}n.l=function(A){return A=S(this,A),y(A)?-1:m(A)?0:1};function v(A){for(var x=A.g.length,_=[],M=0;M<x;M++)_[M]=~A.g[M];return new o(_,~A.h).add(h)}n.abs=function(){return y(this)?v(this):this},n.add=function(A){for(var x=Math.max(this.g.length,A.g.length),_=[],M=0,I=0;I<=x;I++){var P=M+(this.i(I)&65535)+(A.i(I)&65535),k=(P>>>16)+(this.i(I)>>>16)+(A.i(I)>>>16);M=k>>>16,P&=65535,k&=65535,_[I]=k<<16|P}return new o(_,_[_.length-1]&-2147483648?-1:0)};function S(A,x){return A.add(v(x))}n.j=function(A){if(m(this)||m(A))return d;if(y(this))return y(A)?v(this).j(v(A)):v(v(this).j(A));if(y(A))return v(this.j(v(A)));if(0>this.l(p)&&0>A.l(p))return c(this.m()*A.m());for(var x=this.g.length+A.g.length,_=[],M=0;M<2*x;M++)_[M]=0;for(M=0;M<this.g.length;M++)for(var I=0;I<A.g.length;I++){var P=this.i(M)>>>16,k=this.i(M)&65535,K=A.i(I)>>>16,le=A.i(I)&65535;_[2*M+2*I]+=k*le,T(_,2*M+2*I),_[2*M+2*I+1]+=P*le,T(_,2*M+2*I+1),_[2*M+2*I+1]+=k*K,T(_,2*M+2*I+1),_[2*M+2*I+2]+=P*K,T(_,2*M+2*I+2)}for(M=0;M<x;M++)_[M]=_[2*M+1]<<16|_[2*M];for(M=x;M<2*x;M++)_[M]=0;return new o(_,0)};function T(A,x){for(;(A[x]&65535)!=A[x];)A[x+1]+=A[x]>>>16,A[x]&=65535,x++}function b(A,x){this.g=A,this.h=x}function C(A,x){if(m(x))throw Error("division by zero");if(m(A))return new b(d,d);if(y(A))return x=C(v(A),x),new b(v(x.g),v(x.h));if(y(x))return x=C(A,v(x)),new b(v(x.g),x.h);if(30<A.g.length){if(y(A)||y(x))throw Error("slowDivide_ only works with positive integers.");for(var _=h,M=x;0>=M.l(A);)_=O(_),M=O(M);var I=N(_,1),P=N(M,1);for(M=N(M,2),_=N(_,2);!m(M);){var k=P.add(M);0>=k.l(A)&&(I=I.add(_),P=k),M=N(M,1),_=N(_,1)}return x=S(A,I.j(x)),new b(I,x)}for(I=d;0<=A.l(x);){for(_=Math.max(1,Math.floor(A.m()/x.m())),M=Math.ceil(Math.log(_)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),P=c(_),k=P.j(x);y(k)||0<k.l(A);)_-=M,P=c(_),k=P.j(x);m(P)&&(P=h),I=I.add(P),A=S(A,k)}return new b(I,A)}n.A=function(A){return C(this,A).h},n.and=function(A){for(var x=Math.max(this.g.length,A.g.length),_=[],M=0;M<x;M++)_[M]=this.i(M)&A.i(M);return new o(_,this.h&A.h)},n.or=function(A){for(var x=Math.max(this.g.length,A.g.length),_=[],M=0;M<x;M++)_[M]=this.i(M)|A.i(M);return new o(_,this.h|A.h)},n.xor=function(A){for(var x=Math.max(this.g.length,A.g.length),_=[],M=0;M<x;M++)_[M]=this.i(M)^A.i(M);return new o(_,this.h^A.h)};function O(A){for(var x=A.g.length+1,_=[],M=0;M<x;M++)_[M]=A.i(M)<<1|A.i(M-1)>>>31;return new o(_,A.h)}function N(A,x){var _=x>>5;x%=32;for(var M=A.g.length-_,I=[],P=0;P<M;P++)I[P]=0<x?A.i(P+_)>>>x|A.i(P+_+1)<<32-x:A.i(P+_);return new o(I,A.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,fT=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Ws=o}).apply(typeof $v<"u"?$v:typeof self<"u"?self:typeof window<"u"?window:{});var Mu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hT,Qa,pT,ec,fp,mT,gT,yT;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(f,g,E){return f==Array.prototype||f==Object.prototype||(f[g]=E.value),f};function t(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof Mu=="object"&&Mu];for(var g=0;g<f.length;++g){var E=f[g];if(E&&E.Math==Math)return E}throw Error("Cannot find global object")}var r=t(this);function s(f,g){if(g)e:{var E=r;f=f.split(".");for(var R=0;R<f.length-1;R++){var F=f[R];if(!(F in E))break e;E=E[F]}f=f[f.length-1],R=E[f],g=g(R),g!=R&&g!=null&&e(E,f,{configurable:!0,writable:!0,value:g})}}function i(f,g){f instanceof String&&(f+="");var E=0,R=!1,F={next:function(){if(!R&&E<f.length){var H=E++;return{value:g(H,f[H]),done:!1}}return R=!0,{done:!0,value:void 0}}};return F[Symbol.iterator]=function(){return F},F}s("Array.prototype.values",function(f){return f||function(){return i(this,function(g,E){return E})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(f){var g=typeof f;return g=g!="object"?g:f?Array.isArray(f)?"array":g:"null",g=="array"||g=="object"&&typeof f.length=="number"}function c(f){var g=typeof f;return g=="object"&&f!=null||g=="function"}function u(f,g,E){return f.call.apply(f.bind,arguments)}function d(f,g,E){if(!f)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var F=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(F,R),f.apply(g,F)}}return function(){return f.apply(g,arguments)}}function h(f,g,E){return h=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:d,h.apply(null,arguments)}function p(f,g){var E=Array.prototype.slice.call(arguments,1);return function(){var R=E.slice();return R.push.apply(R,arguments),f.apply(this,R)}}function m(f,g){function E(){}E.prototype=g.prototype,f.aa=g.prototype,f.prototype=new E,f.prototype.constructor=f,f.Qb=function(R,F,H){for(var ce=Array(arguments.length-2),at=2;at<arguments.length;at++)ce[at-2]=arguments[at];return g.prototype[F].apply(R,ce)}}function y(f){const g=f.length;if(0<g){const E=Array(g);for(let R=0;R<g;R++)E[R]=f[R];return E}return[]}function v(f,g){for(let E=1;E<arguments.length;E++){const R=arguments[E];if(l(R)){const F=f.length||0,H=R.length||0;f.length=F+H;for(let ce=0;ce<H;ce++)f[F+ce]=R[ce]}else f.push(R)}}class S{constructor(g,E){this.i=g,this.j=E,this.h=0,this.g=null}get(){let g;return 0<this.h?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function T(f){return/^[\s\xa0]*$/.test(f)}function b(){var f=a.navigator;return f&&(f=f.userAgent)?f:""}function C(f){return C[" "](f),f}C[" "]=function(){};var O=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function N(f,g,E){for(const R in f)g.call(E,f[R],R,f)}function A(f,g){for(const E in f)g.call(void 0,f[E],E,f)}function x(f){const g={};for(const E in f)g[E]=f[E];return g}const _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(f,g){let E,R;for(let F=1;F<arguments.length;F++){R=arguments[F];for(E in R)f[E]=R[E];for(let H=0;H<_.length;H++)E=_[H],Object.prototype.hasOwnProperty.call(R,E)&&(f[E]=R[E])}}function I(f){var g=1;f=f.split(":");const E=[];for(;0<g&&f.length;)E.push(f.shift()),g--;return f.length&&E.push(f.join(":")),E}function P(f){a.setTimeout(()=>{throw f},0)}function k(){var f=be;let g=null;return f.g&&(g=f.g,f.g=f.g.next,f.g||(f.h=null),g.next=null),g}class K{constructor(){this.h=this.g=null}add(g,E){const R=le.get();R.set(g,E),this.h?this.h.next=R:this.g=R,this.h=R}}var le=new S(()=>new J,f=>f.reset());class J{constructor(){this.next=this.g=this.h=null}set(g,E){this.h=g,this.g=E,this.next=null}reset(){this.next=this.g=this.h=null}}let ee,ue=!1,be=new K,He=()=>{const f=a.Promise.resolve(void 0);ee=()=>{f.then(Pe)}};var Pe=()=>{for(var f;f=k();){try{f.h.call(f.g)}catch(E){P(E)}var g=le;g.j(f),100>g.h&&(g.h++,f.next=g.g,g.g=f)}ue=!1};function $e(){this.s=this.s,this.C=this.C}$e.prototype.s=!1,$e.prototype.ma=function(){this.s||(this.s=!0,this.N())},$e.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Je(f,g){this.type=f,this.g=this.target=g,this.defaultPrevented=!1}Je.prototype.h=function(){this.defaultPrevented=!0};var Qe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,g=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const E=()=>{};a.addEventListener("test",E,g),a.removeEventListener("test",E,g)}catch{}return f}();function ke(f,g){if(Je.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f){var E=this.type=f.type,R=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;if(this.target=f.target||f.srcElement,this.g=g,g=f.relatedTarget){if(O){e:{try{C(g.nodeName);var F=!0;break e}catch{}F=!1}F||(g=null)}}else E=="mouseover"?g=f.fromElement:E=="mouseout"&&(g=f.toElement);this.relatedTarget=g,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=typeof f.pointerType=="string"?f.pointerType:X[f.pointerType]||"",this.state=f.state,this.i=f,f.defaultPrevented&&ke.aa.h.call(this)}}m(ke,Je);var X={2:"touch",3:"pen",4:"mouse"};ke.prototype.h=function(){ke.aa.h.call(this);var f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var B="closure_listenable_"+(1e6*Math.random()|0),ie=0;function oe(f,g,E,R,F){this.listener=f,this.proxy=null,this.src=g,this.type=E,this.capture=!!R,this.ha=F,this.key=++ie,this.da=this.fa=!1}function me(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function Ge(f){this.src=f,this.g={},this.h=0}Ge.prototype.add=function(f,g,E,R,F){var H=f.toString();f=this.g[H],f||(f=this.g[H]=[],this.h++);var ce=L(f,g,R,F);return-1<ce?(g=f[ce],E||(g.fa=!1)):(g=new oe(g,this.src,H,!!R,F),g.fa=E,f.push(g)),g};function D(f,g){var E=g.type;if(E in f.g){var R=f.g[E],F=Array.prototype.indexOf.call(R,g,void 0),H;(H=0<=F)&&Array.prototype.splice.call(R,F,1),H&&(me(g),f.g[E].length==0&&(delete f.g[E],f.h--))}}function L(f,g,E,R){for(var F=0;F<f.length;++F){var H=f[F];if(!H.da&&H.listener==g&&H.capture==!!E&&H.ha==R)return F}return-1}var $="closure_lm_"+(1e6*Math.random()|0),U={};function W(f,g,E,R,F){if(Array.isArray(g)){for(var H=0;H<g.length;H++)W(f,g[H],E,R,F);return null}return E=Te(E),f&&f[B]?f.K(g,E,c(R)?!!R.capture:!1,F):q(f,g,E,!1,R,F)}function q(f,g,E,R,F,H){if(!g)throw Error("Invalid event type");var ce=c(F)?!!F.capture:!!F,at=de(f);if(at||(f[$]=at=new Ge(f)),E=at.add(g,E,R,ce,H),E.proxy)return E;if(R=ae(),E.proxy=R,R.src=f,R.listener=E,f.addEventListener)Qe||(F=ce),F===void 0&&(F=!1),f.addEventListener(g.toString(),R,F);else if(f.attachEvent)f.attachEvent(Q(g.toString()),R);else if(f.addListener&&f.removeListener)f.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return E}function ae(){function f(E){return g.call(f.src,f.listener,E)}const g=xe;return f}function ne(f,g,E,R,F){if(Array.isArray(g))for(var H=0;H<g.length;H++)ne(f,g[H],E,R,F);else R=c(R)?!!R.capture:!!R,E=Te(E),f&&f[B]?(f=f.i,g=String(g).toString(),g in f.g&&(H=f.g[g],E=L(H,E,R,F),-1<E&&(me(H[E]),Array.prototype.splice.call(H,E,1),H.length==0&&(delete f.g[g],f.h--)))):f&&(f=de(f))&&(g=f.g[g.toString()],f=-1,g&&(f=L(g,E,R,F)),(E=-1<f?g[f]:null)&&te(E))}function te(f){if(typeof f!="number"&&f&&!f.da){var g=f.src;if(g&&g[B])D(g.i,f);else{var E=f.type,R=f.proxy;g.removeEventListener?g.removeEventListener(E,R,f.capture):g.detachEvent?g.detachEvent(Q(E),R):g.addListener&&g.removeListener&&g.removeListener(R),(E=de(g))?(D(E,f),E.h==0&&(E.src=null,g[$]=null)):me(f)}}}function Q(f){return f in U?U[f]:U[f]="on"+f}function xe(f,g){if(f.da)f=!0;else{g=new ke(g,this);var E=f.listener,R=f.ha||f.src;f.fa&&te(f),f=E.call(R,g)}return f}function de(f){return f=f[$],f instanceof Ge?f:null}var we="__closure_events_fn_"+(1e9*Math.random()>>>0);function Te(f){return typeof f=="function"?f:(f[we]||(f[we]=function(g){return f.handleEvent(g)}),f[we])}function Se(){$e.call(this),this.i=new Ge(this),this.M=this,this.F=null}m(Se,$e),Se.prototype[B]=!0,Se.prototype.removeEventListener=function(f,g,E,R){ne(this,f,g,E,R)};function Me(f,g){var E,R=f.F;if(R)for(E=[];R;R=R.F)E.push(R);if(f=f.M,R=g.type||g,typeof g=="string")g=new Je(g,f);else if(g instanceof Je)g.target=g.target||f;else{var F=g;g=new Je(R,f),M(g,F)}if(F=!0,E)for(var H=E.length-1;0<=H;H--){var ce=g.g=E[H];F=ze(ce,R,!0,g)&&F}if(ce=g.g=f,F=ze(ce,R,!0,g)&&F,F=ze(ce,R,!1,g)&&F,E)for(H=0;H<E.length;H++)ce=g.g=E[H],F=ze(ce,R,!1,g)&&F}Se.prototype.N=function(){if(Se.aa.N.call(this),this.i){var f=this.i,g;for(g in f.g){for(var E=f.g[g],R=0;R<E.length;R++)me(E[R]);delete f.g[g],f.h--}}this.F=null},Se.prototype.K=function(f,g,E,R){return this.i.add(String(f),g,!1,E,R)},Se.prototype.L=function(f,g,E,R){return this.i.add(String(f),g,!0,E,R)};function ze(f,g,E,R){if(g=f.i.g[String(g)],!g)return!0;g=g.concat();for(var F=!0,H=0;H<g.length;++H){var ce=g[H];if(ce&&!ce.da&&ce.capture==E){var at=ce.listener,Qt=ce.ha||ce.src;ce.fa&&D(f.i,ce),F=at.call(Qt,R)!==!1&&F}}return F&&!R.defaultPrevented}function $t(f,g,E){if(typeof f=="function")E&&(f=h(f,E));else if(f&&typeof f.handleEvent=="function")f=h(f.handleEvent,f);else throw Error("Invalid listener argument");return 2147483647<Number(g)?-1:a.setTimeout(f,g||0)}function xt(f){f.g=$t(()=>{f.g=null,f.i&&(f.i=!1,xt(f))},f.l);const g=f.h;f.h=null,f.m.apply(null,g)}class an extends $e{constructor(g,E){super(),this.m=g,this.l=E,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:xt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bt(f){$e.call(this),this.h=f,this.g={}}m(Bt,$e);var gr=[];function Ei(f){N(f.g,function(g,E){this.g.hasOwnProperty(E)&&te(g)},f),f.g={}}Bt.prototype.N=function(){Bt.aa.N.call(this),Ei(this)},Bt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var pt=a.JSON.stringify,It=a.JSON.parse,go=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Ma(){}Ma.prototype.h=null;function jr(f){return f.h||(f.h=f.i())}function Hr(){}var ws={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yo(){Je.call(this,"d")}m(yo,Je);function Pa(){Je.call(this,"c")}m(Pa,Je);var yr={},Jn=null;function Ts(){return Jn=Jn||new Se}yr.La="serverreachability";function vo(f){Je.call(this,yr.La,f)}m(vo,Je);function Si(f){const g=Ts();Me(g,new vo(g))}yr.STAT_EVENT="statevent";function Ra(f,g){Je.call(this,yr.STAT_EVENT,f),this.stat=g}m(Ra,Je);function Jt(f){const g=Ts();Me(g,new Ra(g,f))}yr.Ma="timingevent";function bo(f,g){Je.call(this,yr.Ma,f),this.size=g}m(bo,Je);function _i(f,g){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},g)}function xi(){this.g=!0}xi.prototype.xa=function(){this.g=!1};function Df(f,g,E,R,F,H){f.info(function(){if(f.g)if(H)for(var ce="",at=H.split("&"),Qt=0;Qt<at.length;Qt++){var et=at[Qt].split("=");if(1<et.length){var ln=et[0];et=et[1];var un=ln.split("_");ce=2<=un.length&&un[1]=="type"?ce+(ln+"="+et+"&"):ce+(ln+"=redacted&")}}else ce=null;else ce=H;return"XMLHTTP REQ ("+R+") [attempt "+F+"]: "+g+`
`+E+`
`+ce})}function or(f,g,E,R,F,H,ce){f.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+F+"]: "+g+`
`+E+`
`+H+" "+ce})}function Es(f,g,E,R){f.info(function(){return"XMLHTTP TEXT ("+g+"): "+Lf(f,E)+(R?" "+R:"")})}function Nf(f,g){f.info(function(){return"TIMEOUT: "+g})}xi.prototype.info=function(){};function Lf(f,g){if(!f.g)return g;if(!g)return null;try{var E=JSON.parse(g);if(E){for(f=0;f<E.length;f++)if(Array.isArray(E[f])){var R=E[f];if(!(2>R.length)){var F=R[1];if(Array.isArray(F)&&!(1>F.length)){var H=F[0];if(H!="noop"&&H!="stop"&&H!="close")for(var ce=1;ce<F.length;ce++)F[ce]=""}}}}return pt(E)}catch{return g}}var wo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},To={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ci;function Ur(){}m(Ur,Ma),Ur.prototype.g=function(){return new XMLHttpRequest},Ur.prototype.i=function(){return{}},Ci=new Ur;function Ln(f,g,E,R){this.j=f,this.i=g,this.l=E,this.R=R||1,this.U=new Bt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Eo}function Eo(){this.i=null,this.g="",this.h=!1}var pu={},Ss={};function So(f,g,E){f.L=1,f.v=yu(Wr(g)),f.m=E,f.P=!0,V(f,null)}function V(f,g){f.F=Date.now(),ct(f),f.A=Wr(f.v);var E=f.A,R=f.R;Array.isArray(R)||(R=[String(R)]),Cy(E.i,"t",R),f.C=0,E=f.j.J,f.h=new Eo,f.g=Uy(f.j,E?g:null,!f.m),0<f.O&&(f.M=new an(h(f.Y,f,f.g),f.O)),g=f.U,E=f.g,R=f.ca;var F="readystatechange";Array.isArray(F)||(F&&(gr[0]=F.toString()),F=gr);for(var H=0;H<F.length;H++){var ce=W(E,F[H],R||g.handleEvent,!1,g.h||g);if(!ce)break;g.g[ce.key]=ce}g=f.H?x(f.H):{},f.m?(f.u||(f.u="POST"),g["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.A,f.u,f.m,g)):(f.u="GET",f.g.ea(f.A,f.u,null,g)),Si(),Df(f.i,f.u,f.A,f.l,f.R,f.m)}Ln.prototype.ca=function(f){f=f.target;const g=this.M;g&&Gr(f)==3?g.j():this.Y(f)},Ln.prototype.Y=function(f){try{if(f==this.g)e:{const un=Gr(this.g);var g=this.g.Ba();const Io=this.g.Z();if(!(3>un)&&(un!=3||this.g&&(this.h.h||this.g.oa()||Oy(this.g)))){this.J||un!=4||g==7||(g==8||0>=Io?Si(3):Si(2)),_o(this);var E=this.g.Z();this.X=E;t:if(se(this)){var R=Oy(this.g);f="";var F=R.length,H=Gr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qr(this),xo(this);var ce="";break t}this.h.i=new a.TextDecoder}for(g=0;g<F;g++)this.h.h=!0,f+=this.h.i.decode(R[g],{stream:!(H&&g==F-1)});R.length=0,this.h.g+=f,this.C=0,ce=this.h.g}else ce=this.g.oa();if(this.o=E==200,or(this.i,this.u,this.A,this.l,this.R,un,E),this.o){if(this.T&&!this.K){t:{if(this.g){var at,Qt=this.g;if((at=Qt.g?Qt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(at)){var et=at;break t}}et=null}if(E=et)Es(this.i,this.l,E,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Co(this,E);else{this.o=!1,this.s=3,Jt(12),qr(this),xo(this);break e}}if(this.P){E=!0;let ar;for(;!this.J&&this.C<ce.length;)if(ar=Ke(this,ce),ar==Ss){un==4&&(this.s=4,Jt(14),E=!1),Es(this.i,this.l,null,"[Incomplete Response]");break}else if(ar==pu){this.s=4,Jt(15),Es(this.i,this.l,ce,"[Invalid Chunk]"),E=!1;break}else Es(this.i,this.l,ar,null),Co(this,ar);if(se(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),un!=4||ce.length!=0||this.h.h||(this.s=1,Jt(16),E=!1),this.o=this.o&&E,!E)Es(this.i,this.l,ce,"[Invalid Chunked Response]"),qr(this),xo(this);else if(0<ce.length&&!this.W){this.W=!0;var ln=this.j;ln.g==this&&ln.ba&&!ln.M&&(ln.j.info("Great, no buffering proxy detected. Bytes received: "+ce.length),jf(ln),ln.M=!0,Jt(11))}}else Es(this.i,this.l,ce,null),Co(this,ce);un==4&&qr(this),this.o&&!this.J&&(un==4?Fy(this.j,this):(this.o=!1,ct(this)))}else mC(this.g),E==400&&0<ce.indexOf("Unknown SID")?(this.s=3,Jt(12)):(this.s=0,Jt(13)),qr(this),xo(this)}}}catch{}finally{}};function se(f){return f.g?f.u=="GET"&&f.L!=2&&f.j.Ca:!1}function Ke(f,g){var E=f.C,R=g.indexOf(`
`,E);return R==-1?Ss:(E=Number(g.substring(E,R)),isNaN(E)?pu:(R+=1,R+E>g.length?Ss:(g=g.slice(R,R+E),f.C=R+E,g)))}Ln.prototype.cancel=function(){this.J=!0,qr(this)};function ct(f){f.S=Date.now()+f.I,vr(f,f.I)}function vr(f,g){if(f.B!=null)throw Error("WatchDog timer not null");f.B=_i(h(f.ba,f),g)}function _o(f){f.B&&(a.clearTimeout(f.B),f.B=null)}Ln.prototype.ba=function(){this.B=null;const f=Date.now();0<=f-this.S?(Nf(this.i,this.A),this.L!=2&&(Si(),Jt(17)),qr(this),this.s=2,xo(this)):vr(this,this.S-f)};function xo(f){f.j.G==0||f.J||Fy(f.j,f)}function qr(f){_o(f);var g=f.M;g&&typeof g.ma=="function"&&g.ma(),f.M=null,Ei(f.U),f.g&&(g=f.g,f.g=null,g.abort(),g.ma())}function Co(f,g){try{var E=f.j;if(E.G!=0&&(E.g==f||Vf(E.h,f))){if(!f.K&&Vf(E.h,f)&&E.G==3){try{var R=E.Da.g.parse(g)}catch{R=null}if(Array.isArray(R)&&R.length==3){var F=R;if(F[0]==0){e:if(!E.u){if(E.g)if(E.g.F+3e3<f.F)Su(E),Tu(E);else break e;zf(E),Jt(18)}}else E.za=F[1],0<E.za-E.T&&37500>F[2]&&E.F&&E.v==0&&!E.C&&(E.C=_i(h(E.Za,E),6e3));if(1>=yy(E.h)&&E.ca){try{E.ca()}catch{}E.ca=void 0}}else ki(E,11)}else if((f.K||E.g==f)&&Su(E),!T(g))for(F=E.Da.g.parse(g),g=0;g<F.length;g++){let et=F[g];if(E.T=et[0],et=et[1],E.G==2)if(et[0]=="c"){E.K=et[1],E.ia=et[2];const ln=et[3];ln!=null&&(E.la=ln,E.j.info("VER="+E.la));const un=et[4];un!=null&&(E.Aa=un,E.j.info("SVER="+E.Aa));const Io=et[5];Io!=null&&typeof Io=="number"&&0<Io&&(R=1.5*Io,E.L=R,E.j.info("backChannelRequestTimeoutMs_="+R)),R=E;const ar=f.g;if(ar){const xu=ar.g?ar.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(xu){var H=R.h;H.g||xu.indexOf("spdy")==-1&&xu.indexOf("quic")==-1&&xu.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&($f(H,H.h),H.h=null))}if(R.D){const Hf=ar.g?ar.g.getResponseHeader("X-HTTP-Session-Id"):null;Hf&&(R.ya=Hf,ft(R.I,R.D,Hf))}}E.G=3,E.l&&E.l.ua(),E.ba&&(E.R=Date.now()-f.F,E.j.info("Handshake RTT: "+E.R+"ms")),R=E;var ce=f;if(R.qa=Hy(R,R.J?R.ia:null,R.W),ce.K){vy(R.h,ce);var at=ce,Qt=R.L;Qt&&(at.I=Qt),at.B&&(_o(at),ct(at)),R.g=ce}else $y(R);0<E.i.length&&Eu(E)}else et[0]!="stop"&&et[0]!="close"||ki(E,7);else E.G==3&&(et[0]=="stop"||et[0]=="close"?et[0]=="stop"?ki(E,7):Ff(E):et[0]!="noop"&&E.l&&E.l.ta(et),E.v=0)}}Si(4)}catch{}}var Zx=class{constructor(f,g){this.g=f,this.map=g}};function my(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=0<f.length&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gy(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function yy(f){return f.h?1:f.g?f.g.size:0}function Vf(f,g){return f.h?f.h==g:f.g?f.g.has(g):!1}function $f(f,g){f.g?f.g.add(g):f.h=g}function vy(f,g){f.h&&f.h==g?f.h=null:f.g&&f.g.has(g)&&f.g.delete(g)}my.prototype.cancel=function(){if(this.i=by(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function by(f){if(f.h!=null)return f.i.concat(f.h.D);if(f.g!=null&&f.g.size!==0){let g=f.i;for(const E of f.g.values())g=g.concat(E.D);return g}return y(f.i)}function eC(f){if(f.V&&typeof f.V=="function")return f.V();if(typeof Map<"u"&&f instanceof Map||typeof Set<"u"&&f instanceof Set)return Array.from(f.values());if(typeof f=="string")return f.split("");if(l(f)){for(var g=[],E=f.length,R=0;R<E;R++)g.push(f[R]);return g}g=[],E=0;for(R in f)g[E++]=f[R];return g}function tC(f){if(f.na&&typeof f.na=="function")return f.na();if(!f.V||typeof f.V!="function"){if(typeof Map<"u"&&f instanceof Map)return Array.from(f.keys());if(!(typeof Set<"u"&&f instanceof Set)){if(l(f)||typeof f=="string"){var g=[];f=f.length;for(var E=0;E<f;E++)g.push(E);return g}g=[],E=0;for(const R in f)g[E++]=R;return g}}}function wy(f,g){if(f.forEach&&typeof f.forEach=="function")f.forEach(g,void 0);else if(l(f)||typeof f=="string")Array.prototype.forEach.call(f,g,void 0);else for(var E=tC(f),R=eC(f),F=R.length,H=0;H<F;H++)g.call(void 0,R[H],E&&E[H],f)}var Ty=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function nC(f,g){if(f){f=f.split("&");for(var E=0;E<f.length;E++){var R=f[E].indexOf("="),F=null;if(0<=R){var H=f[E].substring(0,R);F=f[E].substring(R+1)}else H=f[E];g(H,F?decodeURIComponent(F.replace(/\+/g," ")):"")}}}function Ai(f){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,f instanceof Ai){this.h=f.h,mu(this,f.j),this.o=f.o,this.g=f.g,gu(this,f.s),this.l=f.l;var g=f.i,E=new Na;E.i=g.i,g.g&&(E.g=new Map(g.g),E.h=g.h),Ey(this,E),this.m=f.m}else f&&(g=String(f).match(Ty))?(this.h=!1,mu(this,g[1]||"",!0),this.o=Oa(g[2]||""),this.g=Oa(g[3]||"",!0),gu(this,g[4]),this.l=Oa(g[5]||"",!0),Ey(this,g[6]||"",!0),this.m=Oa(g[7]||"")):(this.h=!1,this.i=new Na(null,this.h))}Ai.prototype.toString=function(){var f=[],g=this.j;g&&f.push(Da(g,Sy,!0),":");var E=this.g;return(E||g=="file")&&(f.push("//"),(g=this.o)&&f.push(Da(g,Sy,!0),"@"),f.push(encodeURIComponent(String(E)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),E=this.s,E!=null&&f.push(":",String(E))),(E=this.l)&&(this.g&&E.charAt(0)!="/"&&f.push("/"),f.push(Da(E,E.charAt(0)=="/"?iC:sC,!0))),(E=this.i.toString())&&f.push("?",E),(E=this.m)&&f.push("#",Da(E,aC)),f.join("")};function Wr(f){return new Ai(f)}function mu(f,g,E){f.j=E?Oa(g,!0):g,f.j&&(f.j=f.j.replace(/:$/,""))}function gu(f,g){if(g){if(g=Number(g),isNaN(g)||0>g)throw Error("Bad port number "+g);f.s=g}else f.s=null}function Ey(f,g,E){g instanceof Na?(f.i=g,lC(f.i,f.h)):(E||(g=Da(g,oC)),f.i=new Na(g,f.h))}function ft(f,g,E){f.i.set(g,E)}function yu(f){return ft(f,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),f}function Oa(f,g){return f?g?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function Da(f,g,E){return typeof f=="string"?(f=encodeURI(f).replace(g,rC),E&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function rC(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var Sy=/[#\/\?@]/g,sC=/[#\?:]/g,iC=/[#\?]/g,oC=/[#\?@]/g,aC=/#/g;function Na(f,g){this.h=this.g=null,this.i=f||null,this.j=!!g}function _s(f){f.g||(f.g=new Map,f.h=0,f.i&&nC(f.i,function(g,E){f.add(decodeURIComponent(g.replace(/\+/g," ")),E)}))}n=Na.prototype,n.add=function(f,g){_s(this),this.i=null,f=Ao(this,f);var E=this.g.get(f);return E||this.g.set(f,E=[]),E.push(g),this.h+=1,this};function _y(f,g){_s(f),g=Ao(f,g),f.g.has(g)&&(f.i=null,f.h-=f.g.get(g).length,f.g.delete(g))}function xy(f,g){return _s(f),g=Ao(f,g),f.g.has(g)}n.forEach=function(f,g){_s(this),this.g.forEach(function(E,R){E.forEach(function(F){f.call(g,F,R,this)},this)},this)},n.na=function(){_s(this);const f=Array.from(this.g.values()),g=Array.from(this.g.keys()),E=[];for(let R=0;R<g.length;R++){const F=f[R];for(let H=0;H<F.length;H++)E.push(g[R])}return E},n.V=function(f){_s(this);let g=[];if(typeof f=="string")xy(this,f)&&(g=g.concat(this.g.get(Ao(this,f))));else{f=Array.from(this.g.values());for(let E=0;E<f.length;E++)g=g.concat(f[E])}return g},n.set=function(f,g){return _s(this),this.i=null,f=Ao(this,f),xy(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[g]),this.h+=1,this},n.get=function(f,g){return f?(f=this.V(f),0<f.length?String(f[0]):g):g};function Cy(f,g,E){_y(f,g),0<E.length&&(f.i=null,f.g.set(Ao(f,g),y(E)),f.h+=E.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],g=Array.from(this.g.keys());for(var E=0;E<g.length;E++){var R=g[E];const H=encodeURIComponent(String(R)),ce=this.V(R);for(R=0;R<ce.length;R++){var F=H;ce[R]!==""&&(F+="="+encodeURIComponent(String(ce[R]))),f.push(F)}}return this.i=f.join("&")};function Ao(f,g){return g=String(g),f.j&&(g=g.toLowerCase()),g}function lC(f,g){g&&!f.j&&(_s(f),f.i=null,f.g.forEach(function(E,R){var F=R.toLowerCase();R!=F&&(_y(this,R),Cy(this,F,E))},f)),f.j=g}function uC(f,g){const E=new xi;if(a.Image){const R=new Image;R.onload=p(xs,E,"TestLoadImage: loaded",!0,g,R),R.onerror=p(xs,E,"TestLoadImage: error",!1,g,R),R.onabort=p(xs,E,"TestLoadImage: abort",!1,g,R),R.ontimeout=p(xs,E,"TestLoadImage: timeout",!1,g,R),a.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=f}else g(!1)}function cC(f,g){const E=new xi,R=new AbortController,F=setTimeout(()=>{R.abort(),xs(E,"TestPingServer: timeout",!1,g)},1e4);fetch(f,{signal:R.signal}).then(H=>{clearTimeout(F),H.ok?xs(E,"TestPingServer: ok",!0,g):xs(E,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(F),xs(E,"TestPingServer: error",!1,g)})}function xs(f,g,E,R,F){try{F&&(F.onload=null,F.onerror=null,F.onabort=null,F.ontimeout=null),R(E)}catch{}}function dC(){this.g=new go}function fC(f,g,E){const R=E||"";try{wy(f,function(F,H){let ce=F;c(F)&&(ce=pt(F)),g.push(R+H+"="+encodeURIComponent(ce))})}catch(F){throw g.push(R+"type="+encodeURIComponent("_badmap")),F}}function vu(f){this.l=f.Ub||null,this.j=f.eb||!1}m(vu,Ma),vu.prototype.g=function(){return new bu(this.l,this.j)},vu.prototype.i=function(f){return function(){return f}}({});function bu(f,g){Se.call(this),this.D=f,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}m(bu,Se),n=bu.prototype,n.open=function(f,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=f,this.A=g,this.readyState=1,Va(this)},n.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const g={headers:this.u,method:this.B,credentials:this.m,cache:void 0};f&&(g.body=f),(this.D||a).fetch(new Request(this.A,g)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,La(this)),this.readyState=0},n.Sa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,Va(this)),this.g&&(this.readyState=3,Va(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Ay(this)}else f.text().then(this.Ra.bind(this),this.ga.bind(this))};function Ay(f){f.j.read().then(f.Pa.bind(f)).catch(f.ga.bind(f))}n.Pa=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var g=f.value?f.value:new Uint8Array(0);(g=this.v.decode(g,{stream:!f.done}))&&(this.response=this.responseText+=g)}f.done?La(this):Va(this),this.readyState==3&&Ay(this)}},n.Ra=function(f){this.g&&(this.response=this.responseText=f,La(this))},n.Qa=function(f){this.g&&(this.response=f,La(this))},n.ga=function(){this.g&&La(this)};function La(f){f.readyState=4,f.l=null,f.j=null,f.v=null,Va(f)}n.setRequestHeader=function(f,g){this.u.append(f,g)},n.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],g=this.h.entries();for(var E=g.next();!E.done;)E=E.value,f.push(E[0]+": "+E[1]),E=g.next();return f.join(`\r
`)};function Va(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(bu.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function ky(f){let g="";return N(f,function(E,R){g+=R,g+=":",g+=E,g+=`\r
`}),g}function Bf(f,g,E){e:{for(R in E){var R=!1;break e}R=!0}R||(E=ky(E),typeof f=="string"?E!=null&&encodeURIComponent(String(E)):ft(f,g,E))}function wt(f){Se.call(this),this.headers=new Map,this.o=f||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}m(wt,Se);var hC=/^https?$/i,pC=["POST","PUT"];n=wt.prototype,n.Ha=function(f){this.J=f},n.ea=function(f,g,E,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);g=g?g.toUpperCase():"GET",this.D=f,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ci.g(),this.v=this.o?jr(this.o):jr(Ci),this.g.onreadystatechange=h(this.Ea,this);try{this.B=!0,this.g.open(g,String(f),!0),this.B=!1}catch(H){Iy(this,H);return}if(f=E||"",E=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var F in R)E.set(F,R[F]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const H of R.keys())E.set(H,R.get(H));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(E.keys()).find(H=>H.toLowerCase()=="content-type"),F=a.FormData&&f instanceof a.FormData,!(0<=Array.prototype.indexOf.call(pC,g,void 0))||R||F||E.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,ce]of E)this.g.setRequestHeader(H,ce);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ry(this),this.u=!0,this.g.send(f),this.u=!1}catch(H){Iy(this,H)}};function Iy(f,g){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=g,f.m=5,My(f),wu(f)}function My(f){f.A||(f.A=!0,Me(f,"complete"),Me(f,"error"))}n.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=f||7,Me(this,"complete"),Me(this,"abort"),wu(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wu(this,!0)),wt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Py(this):this.bb())},n.bb=function(){Py(this)};function Py(f){if(f.h&&typeof o<"u"&&(!f.v[1]||Gr(f)!=4||f.Z()!=2)){if(f.u&&Gr(f)==4)$t(f.Ea,0,f);else if(Me(f,"readystatechange"),Gr(f)==4){f.h=!1;try{const ce=f.Z();e:switch(ce){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var E;if(!(E=g)){var R;if(R=ce===0){var F=String(f.D).match(Ty)[1]||null;!F&&a.self&&a.self.location&&(F=a.self.location.protocol.slice(0,-1)),R=!hC.test(F?F.toLowerCase():"")}E=R}if(E)Me(f,"complete"),Me(f,"success");else{f.m=6;try{var H=2<Gr(f)?f.g.statusText:""}catch{H=""}f.l=H+" ["+f.Z()+"]",My(f)}}finally{wu(f)}}}}function wu(f,g){if(f.g){Ry(f);const E=f.g,R=f.v[0]?()=>{}:null;f.g=null,f.v=null,g||Me(f,"ready");try{E.onreadystatechange=R}catch{}}}function Ry(f){f.I&&(a.clearTimeout(f.I),f.I=null)}n.isActive=function(){return!!this.g};function Gr(f){return f.g?f.g.readyState:0}n.Z=function(){try{return 2<Gr(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(f){if(this.g){var g=this.g.responseText;return f&&g.indexOf(f)==0&&(g=g.substring(f.length)),It(g)}};function Oy(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.H){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function mC(f){const g={};f=(f.g&&2<=Gr(f)&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<f.length;R++){if(T(f[R]))continue;var E=I(f[R]);const F=E[0];if(E=E[1],typeof E!="string")continue;E=E.trim();const H=g[F]||[];g[F]=H,H.push(E)}A(g,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function $a(f,g,E){return E&&E.internalChannelParams&&E.internalChannelParams[f]||g}function Dy(f){this.Aa=0,this.i=[],this.j=new xi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=$a("failFast",!1,f),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=$a("baseRetryDelayMs",5e3,f),this.cb=$a("retryDelaySeedMs",1e4,f),this.Wa=$a("forwardChannelMaxRetries",2,f),this.wa=$a("forwardChannelRequestTimeoutMs",2e4,f),this.pa=f&&f.xmlHttpFactory||void 0,this.Xa=f&&f.Tb||void 0,this.Ca=f&&f.useFetchStreams||!1,this.L=void 0,this.J=f&&f.supportsCrossDomainXhr||!1,this.K="",this.h=new my(f&&f.concurrentRequestLimit),this.Da=new dC,this.P=f&&f.fastHandshake||!1,this.O=f&&f.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=f&&f.Rb||!1,f&&f.xa&&this.j.xa(),f&&f.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&f&&f.detectBufferingProxy||!1,this.ja=void 0,f&&f.longPollingTimeout&&0<f.longPollingTimeout&&(this.ja=f.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Dy.prototype,n.la=8,n.G=1,n.connect=function(f,g,E,R){Jt(0),this.W=f,this.H=g||{},E&&R!==void 0&&(this.H.OSID=E,this.H.OAID=R),this.F=this.X,this.I=Hy(this,null,this.W),Eu(this)};function Ff(f){if(Ny(f),f.G==3){var g=f.U++,E=Wr(f.I);if(ft(E,"SID",f.K),ft(E,"RID",g),ft(E,"TYPE","terminate"),Ba(f,E),g=new Ln(f,f.j,g),g.L=2,g.v=yu(Wr(E)),E=!1,a.navigator&&a.navigator.sendBeacon)try{E=a.navigator.sendBeacon(g.v.toString(),"")}catch{}!E&&a.Image&&(new Image().src=g.v,E=!0),E||(g.g=Uy(g.j,null),g.g.ea(g.v)),g.F=Date.now(),ct(g)}jy(f)}function Tu(f){f.g&&(jf(f),f.g.cancel(),f.g=null)}function Ny(f){Tu(f),f.u&&(a.clearTimeout(f.u),f.u=null),Su(f),f.h.cancel(),f.s&&(typeof f.s=="number"&&a.clearTimeout(f.s),f.s=null)}function Eu(f){if(!gy(f.h)&&!f.s){f.s=!0;var g=f.Ga;ee||He(),ue||(ee(),ue=!0),be.add(g,f),f.B=0}}function gC(f,g){return yy(f.h)>=f.h.j-(f.s?1:0)?!1:f.s?(f.i=g.D.concat(f.i),!0):f.G==1||f.G==2||f.B>=(f.Va?0:f.Wa)?!1:(f.s=_i(h(f.Ga,f,g),zy(f,f.B)),f.B++,!0)}n.Ga=function(f){if(this.s)if(this.s=null,this.G==1){if(!f){this.U=Math.floor(1e5*Math.random()),f=this.U++;const F=new Ln(this,this.j,f);let H=this.o;if(this.S&&(H?(H=x(H),M(H,this.S)):H=this.S),this.m!==null||this.O||(F.H=H,H=null),this.P)e:{for(var g=0,E=0;E<this.i.length;E++){t:{var R=this.i[E];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(g+=R,4096<g){g=E;break e}if(g===4096||E===this.i.length-1){g=E+1;break e}}g=1e3}else g=1e3;g=Vy(this,F,g),E=Wr(this.I),ft(E,"RID",f),ft(E,"CVER",22),this.D&&ft(E,"X-HTTP-Session-Id",this.D),Ba(this,E),H&&(this.O?g="headers="+encodeURIComponent(String(ky(H)))+"&"+g:this.m&&Bf(E,this.m,H)),$f(this.h,F),this.Ua&&ft(E,"TYPE","init"),this.P?(ft(E,"$req",g),ft(E,"SID","null"),F.T=!0,So(F,E,null)):So(F,E,g),this.G=2}}else this.G==3&&(f?Ly(this,f):this.i.length==0||gy(this.h)||Ly(this))};function Ly(f,g){var E;g?E=g.l:E=f.U++;const R=Wr(f.I);ft(R,"SID",f.K),ft(R,"RID",E),ft(R,"AID",f.T),Ba(f,R),f.m&&f.o&&Bf(R,f.m,f.o),E=new Ln(f,f.j,E,f.B+1),f.m===null&&(E.H=f.o),g&&(f.i=g.D.concat(f.i)),g=Vy(f,E,1e3),E.I=Math.round(.5*f.wa)+Math.round(.5*f.wa*Math.random()),$f(f.h,E),So(E,R,g)}function Ba(f,g){f.H&&N(f.H,function(E,R){ft(g,R,E)}),f.l&&wy({},function(E,R){ft(g,R,E)})}function Vy(f,g,E){E=Math.min(f.i.length,E);var R=f.l?h(f.l.Na,f.l,f):null;e:{var F=f.i;let H=-1;for(;;){const ce=["count="+E];H==-1?0<E?(H=F[0].g,ce.push("ofs="+H)):H=0:ce.push("ofs="+H);let at=!0;for(let Qt=0;Qt<E;Qt++){let et=F[Qt].g;const ln=F[Qt].map;if(et-=H,0>et)H=Math.max(0,F[Qt].g-100),at=!1;else try{fC(ln,ce,"req"+et+"_")}catch{R&&R(ln)}}if(at){R=ce.join("&");break e}}}return f=f.i.splice(0,E),g.D=f,R}function $y(f){if(!f.g&&!f.u){f.Y=1;var g=f.Fa;ee||He(),ue||(ee(),ue=!0),be.add(g,f),f.v=0}}function zf(f){return f.g||f.u||3<=f.v?!1:(f.Y++,f.u=_i(h(f.Fa,f),zy(f,f.v)),f.v++,!0)}n.Fa=function(){if(this.u=null,By(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var f=2*this.R;this.j.info("BP detection timer enabled: "+f),this.A=_i(h(this.ab,this),f)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Jt(10),Tu(this),By(this))};function jf(f){f.A!=null&&(a.clearTimeout(f.A),f.A=null)}function By(f){f.g=new Ln(f,f.j,"rpc",f.Y),f.m===null&&(f.g.H=f.o),f.g.O=0;var g=Wr(f.qa);ft(g,"RID","rpc"),ft(g,"SID",f.K),ft(g,"AID",f.T),ft(g,"CI",f.F?"0":"1"),!f.F&&f.ja&&ft(g,"TO",f.ja),ft(g,"TYPE","xmlhttp"),Ba(f,g),f.m&&f.o&&Bf(g,f.m,f.o),f.L&&(f.g.I=f.L);var E=f.g;f=f.ia,E.L=1,E.v=yu(Wr(g)),E.m=null,E.P=!0,V(E,f)}n.Za=function(){this.C!=null&&(this.C=null,Tu(this),zf(this),Jt(19))};function Su(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function Fy(f,g){var E=null;if(f.g==g){Su(f),jf(f),f.g=null;var R=2}else if(Vf(f.h,g))E=g.D,vy(f.h,g),R=1;else return;if(f.G!=0){if(g.o)if(R==1){E=g.m?g.m.length:0,g=Date.now()-g.F;var F=f.B;R=Ts(),Me(R,new bo(R,E)),Eu(f)}else $y(f);else if(F=g.s,F==3||F==0&&0<g.X||!(R==1&&gC(f,g)||R==2&&zf(f)))switch(E&&0<E.length&&(g=f.h,g.i=g.i.concat(E)),F){case 1:ki(f,5);break;case 4:ki(f,10);break;case 3:ki(f,6);break;default:ki(f,2)}}}function zy(f,g){let E=f.Ta+Math.floor(Math.random()*f.cb);return f.isActive()||(E*=2),E*g}function ki(f,g){if(f.j.info("Error code "+g),g==2){var E=h(f.fb,f),R=f.Xa;const F=!R;R=new Ai(R||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||mu(R,"https"),yu(R),F?uC(R.toString(),E):cC(R.toString(),E)}else Jt(2);f.G=0,f.l&&f.l.sa(g),jy(f),Ny(f)}n.fb=function(f){f?(this.j.info("Successfully pinged google.com"),Jt(2)):(this.j.info("Failed to ping google.com"),Jt(1))};function jy(f){if(f.G=0,f.ka=[],f.l){const g=by(f.h);(g.length!=0||f.i.length!=0)&&(v(f.ka,g),v(f.ka,f.i),f.h.i.length=0,y(f.i),f.i.length=0),f.l.ra()}}function Hy(f,g,E){var R=E instanceof Ai?Wr(E):new Ai(E);if(R.g!="")g&&(R.g=g+"."+R.g),gu(R,R.s);else{var F=a.location;R=F.protocol,g=g?g+"."+F.hostname:F.hostname,F=+F.port;var H=new Ai(null);R&&mu(H,R),g&&(H.g=g),F&&gu(H,F),E&&(H.l=E),R=H}return E=f.D,g=f.ya,E&&g&&ft(R,E,g),ft(R,"VER",f.la),Ba(f,R),R}function Uy(f,g,E){if(g&&!f.J)throw Error("Can't create secondary domain capable XhrIo object.");return g=f.Ca&&!f.pa?new wt(new vu({eb:E})):new wt(f.pa),g.Ha(f.J),g}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qy(){}n=qy.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function _u(){}_u.prototype.g=function(f,g){return new Vn(f,g)};function Vn(f,g){Se.call(this),this.g=new Dy(g),this.l=f,this.h=g&&g.messageUrlParams||null,f=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(f?f["X-WebChannel-Content-Type"]=g.messageContentType:f={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.va&&(f?f["X-WebChannel-Client-Profile"]=g.va:f={"X-WebChannel-Client-Profile":g.va}),this.g.S=f,(f=g&&g.Sb)&&!T(f)&&(this.g.m=f),this.v=g&&g.supportsCrossDomainXhr||!1,this.u=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!T(g)&&(this.g.D=g,f=this.h,f!==null&&g in f&&(f=this.h,g in f&&delete f[g])),this.j=new ko(this)}m(Vn,Se),Vn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vn.prototype.close=function(){Ff(this.g)},Vn.prototype.o=function(f){var g=this.g;if(typeof f=="string"){var E={};E.__data__=f,f=E}else this.u&&(E={},E.__data__=pt(f),f=E);g.i.push(new Zx(g.Ya++,f)),g.G==3&&Eu(g)},Vn.prototype.N=function(){this.g.l=null,delete this.j,Ff(this.g),delete this.g,Vn.aa.N.call(this)};function Wy(f){yo.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var g=f.__sm__;if(g){e:{for(const E in g){f=E;break e}f=void 0}(this.i=f)&&(f=this.i,g=g!==null&&f in g?g[f]:void 0),this.data=g}else this.data=f}m(Wy,yo);function Gy(){Pa.call(this),this.status=1}m(Gy,Pa);function ko(f){this.g=f}m(ko,qy),ko.prototype.ua=function(){Me(this.g,"a")},ko.prototype.ta=function(f){Me(this.g,new Wy(f))},ko.prototype.sa=function(f){Me(this.g,new Gy)},ko.prototype.ra=function(){Me(this.g,"b")},_u.prototype.createWebChannel=_u.prototype.g,Vn.prototype.send=Vn.prototype.o,Vn.prototype.open=Vn.prototype.m,Vn.prototype.close=Vn.prototype.close,yT=function(){return new _u},gT=function(){return Ts()},mT=yr,fp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},wo.NO_ERROR=0,wo.TIMEOUT=8,wo.HTTP_ERROR=6,ec=wo,To.COMPLETE="complete",pT=To,Hr.EventType=ws,ws.OPEN="a",ws.CLOSE="b",ws.ERROR="c",ws.MESSAGE="d",Se.prototype.listen=Se.prototype.K,Qa=Hr,wt.prototype.listenOnce=wt.prototype.L,wt.prototype.getLastError=wt.prototype.Ka,wt.prototype.getLastErrorCode=wt.prototype.Ba,wt.prototype.getStatus=wt.prototype.Z,wt.prototype.getResponseJson=wt.prototype.Oa,wt.prototype.getResponseText=wt.prototype.oa,wt.prototype.send=wt.prototype.ea,wt.prototype.setWithCredentials=wt.prototype.Ha,hT=wt}).apply(typeof Mu<"u"?Mu:typeof self<"u"?self:typeof window<"u"?window:{});const Bv="@firebase/firestore",Fv="4.7.11";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hn.UNAUTHENTICATED=new hn(null),hn.GOOGLE_CREDENTIALS=new hn("google-credentials-uid"),hn.FIRST_PARTY=new hn("first-party-uid"),hn.MOCK_USER=new hn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sa="11.6.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yi=new Pm("@firebase/firestore");function No(){return Yi.logLevel}function ge(n,...e){if(Yi.logLevel<=Ze.DEBUG){const t=e.map(Om);Yi.debug(`Firestore (${Sa}): ${n}`,...t)}}function ps(n,...e){if(Yi.logLevel<=Ze.ERROR){const t=e.map(Om);Yi.error(`Firestore (${Sa}): ${n}`,...t)}}function ra(n,...e){if(Yi.logLevel<=Ze.WARN){const t=e.map(Om);Yi.warn(`Firestore (${Sa}): ${n}`,...t)}}function Om(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Re(n,e,t){let r="Unexpected state";typeof e=="string"?r=e:t=e,vT(n,r,t)}function vT(n,e,t){let r=`FIRESTORE (${Sa}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{r+=" CONTEXT: "+JSON.stringify(t)}catch{r+=" CONTEXT: "+t}throw ps(r),new Error(r)}function it(n,e,t,r){let s="Unexpected state";typeof t=="string"?s=t:r=t,n||vT(e,s,r)}function Ve(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class _e extends pi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class yM{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hn.UNAUTHENTICATED))}shutdown(){}}class vM{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class bM{constructor(e){this.t=e,this.currentUser=hn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){it(this.o===void 0,42304);let r=this.i;const s=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve();let i=new ls;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ls,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ls)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(it(typeof r.accessToken=="string",31837,{l:r}),new bT(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return it(e===null||typeof e=="string",2055,{h:e}),new hn(e)}}class wM{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=hn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class TM{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new wM(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(hn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class EM{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,tM(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){it(this.o===void 0,3512);const r=i=>{i.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,ge("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new zv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(it(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new zv(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SM(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wT(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=SM(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<t&&(r+=e.charAt(s[i]%62))}return r}}function We(n,e){return n<e?-1:n>e?1:0}function hp(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return We(r,s);{const i=wT(),o=_M(i.encode(jv(n,t)),i.encode(jv(e,t)));return o!==0?o:We(r,s)}}t+=r>65535?2:1}return We(n.length,e.length)}function jv(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function _M(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return We(n[t],e[t]);return We(n.length,e.length)}function sa(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=-62135596800,Uv=1e6;class Lt{static now(){return Lt.fromMillis(Date.now())}static fromDate(e){return Lt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Uv);return new Lt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new _e(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new _e(Y.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Hv)throw new _e(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new _e(Y.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Uv}_compareTo(e){return this.seconds===e.seconds?We(this.nanoseconds,e.nanoseconds):We(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Hv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{static fromTimestamp(e){return new Ne(e)}static min(){return new Ne(new Lt(0,0))}static max(){return new Ne(new Lt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv="__name__";class xr{constructor(e,t,r){t===void 0?t=0:t>e.length&&Re(637,{offset:t,range:e.length}),r===void 0?r=e.length-t:r>e.length-t&&Re(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return xr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof xr?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const i=xr.compareSegments(e.get(s),t.get(s));if(i!==0)return i}return We(e.length,t.length)}static compareSegments(e,t){const r=xr.isNumericId(e),s=xr.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?xr.extractNumericId(e).compare(xr.extractNumericId(t)):hp(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Ws.fromString(e.substring(4,e.length-2))}}class gt extends xr{construct(e,t,r){return new gt(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new _e(Y.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new gt(t)}static emptyPath(){return new gt([])}}const xM=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class nn extends xr{construct(e,t,r){return new nn(e,t,r)}static isValidIdentifier(e){return xM.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),nn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===qv}static keyField(){return new nn([qv])}static fromServerFormat(e){const t=[];let r="",s=0;const i=()=>{if(r.length===0)throw new _e(Y.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new _e(Y.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new _e(Y.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(r+=a,s++):(i(),s++)}if(i(),o)throw new _e(Y.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new nn(t)}static emptyPath(){return new nn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.path=e}static fromPath(e){return new Ie(gt.fromString(e))}static fromName(e){return new Ie(gt.fromString(e).popFirst(5))}static empty(){return new Ie(gt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&gt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return gt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ie(new gt(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl=-1;function CM(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ne.fromTimestamp(r===1e9?new Lt(t+1,0):new Lt(t,r));return new ni(s,Ie.empty(),e)}function AM(n){return new ni(n.readTime,n.key,Nl)}class ni{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new ni(Ne.min(),Ie.empty(),Nl)}static max(){return new ni(Ne.max(),Ie.empty(),Nl)}}function kM(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ie.comparator(n.documentKey,e.documentKey),t!==0?t:We(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IM="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class MM{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _a(n){if(n.code!==Y.FAILED_PRECONDITION||n.message!==IM)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Re(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new G((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(t,i).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof G?t:G.resolve(t)}catch(t){return G.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):G.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):G.reject(t)}static resolve(e){return new G((t,r)=>{t(e)})}static reject(e){return new G((t,r)=>{r(e)})}static waitFor(e){return new G((t,r)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&t()},l=>r(l))}),o=!0,i===s&&t()})}static or(e){let t=G.resolve(!1);for(const r of e)t=t.next(s=>s?G.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,i)=>{r.push(t.call(this,s,i))}),this.waitFor(r)}static mapArray(e,t){return new G((r,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===i&&r(o)},u=>s(u))}})}static doWhile(e,t){return new G((r,s)=>{const i=()=>{e()===!0?t().next(()=>{i()},s):r()};i()})}}function PM(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function xa(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>t.writeSequenceNumber(r))}ue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ce&&this.ce(e),e}}qd.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm=-1;function Wd(n){return n==null}function xc(n){return n===0&&1/n==-1/0}function RM(n){return typeof n=="number"&&Number.isInteger(n)&&!xc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ET="";function OM(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Wv(e)),e=DM(n.get(t),e);return Wv(e)}function DM(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const i=n.charAt(s);switch(i){case"\0":t+="";break;case ET:t+="";break;default:t+=i}}return t}function Wv(n){return n+ET+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gv(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function mi(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function ST(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bt{constructor(e,t){this.comparator=e,this.root=t||Xt.EMPTY}insert(e,t){return new bt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Xt.BLACK,null,null))}remove(e){return new bt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pu(this.root,e,this.comparator,!0)}}class Pu{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xt{constructor(e,t,r,s,i){this.key=e,this.value=t,this.color=r??Xt.RED,this.left=s??Xt.EMPTY,this.right=i??Xt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,i){return new Xt(e??this.key,t??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,t,r),null):i===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Xt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Re(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Re(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Re(27949);return e+(this.isRed()?0:1)}}Xt.EMPTY=null,Xt.RED=!0,Xt.BLACK=!1;Xt.EMPTY=new class{constructor(){this.size=0}get key(){throw Re(57766)}get value(){throw Re(16141)}get color(){throw Re(16727)}get left(){throw Re(29726)}get right(){throw Re(36894)}copy(e,t,r,s,i){return this}insert(e,t,r){return new Xt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.comparator=e,this.data=new bt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Kv(this.data.getIterator())}getIteratorFrom(e){return new Kv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Vt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Vt(this.comparator);return t.data=e,t}}class Kv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e){this.fields=e,e.sort(nn.comparator)}static empty(){return new Hn([])}unionWith(e){let t=new Vt(nn.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Hn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return sa(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _T extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new _T("Invalid base64 string: "+i):i}}(e);return new sn(t)}static fromUint8Array(e){const t=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new sn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return We(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}sn.EMPTY_BYTE_STRING=new sn("");const NM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ri(n){if(it(!!n,39018),typeof n=="string"){let e=0;const t=NM.exec(n);if(it(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ct(n.seconds),nanos:Ct(n.nanos)}}function Ct(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function si(n){return typeof n=="string"?sn.fromBase64String(n):sn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xT="server_timestamp",CT="__type__",AT="__previous_value__",kT="__local_write_time__";function Nm(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[CT])===null||t===void 0?void 0:t.stringValue)===xT}function Gd(n){const e=n.mapValue.fields[AT];return Nm(e)?Gd(e):e}function Ll(n){const e=ri(n.mapValue.fields[kT].timestampValue);return new Lt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e,t,r,s,i,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}const Cc="(default)";class Vl{constructor(e,t){this.projectId=e,this.database=t||Cc}static empty(){return new Vl("","")}get isDefaultDatabase(){return this.database===Cc}isEqual(e){return e instanceof Vl&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IT="__type__",VM="__max__",Ru={mapValue:{}},MT="__vector__",Ac="value";function ii(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Nm(n)?4:BM(n)?9007199254740991:$M(n)?10:11:Re(28295,{value:n})}function Nr(n,e){if(n===e)return!0;const t=ii(n);if(t!==ii(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ll(n).isEqual(Ll(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ri(s.timestampValue),a=ri(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,i){return si(s.bytesValue).isEqual(si(i.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,i){return Ct(s.geoPointValue.latitude)===Ct(i.geoPointValue.latitude)&&Ct(s.geoPointValue.longitude)===Ct(i.geoPointValue.longitude)}(n,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ct(s.integerValue)===Ct(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ct(s.doubleValue),a=Ct(i.doubleValue);return o===a?xc(o)===xc(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return sa(n.arrayValue.values||[],e.arrayValue.values||[],Nr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(Gv(o)!==Gv(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Nr(o[l],a[l])))return!1;return!0}(n,e);default:return Re(52216,{left:n})}}function $l(n,e){return(n.values||[]).find(t=>Nr(t,e))!==void 0}function ia(n,e){if(n===e)return 0;const t=ii(n),r=ii(e);if(t!==r)return We(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return We(n.booleanValue,e.booleanValue);case 2:return function(i,o){const a=Ct(i.integerValue||i.doubleValue),l=Ct(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return Jv(n.timestampValue,e.timestampValue);case 4:return Jv(Ll(n),Ll(e));case 5:return hp(n.stringValue,e.stringValue);case 6:return function(i,o){const a=si(i),l=si(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=We(a[c],l[c]);if(u!==0)return u}return We(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,o){const a=We(Ct(i.latitude),Ct(o.latitude));return a!==0?a:We(Ct(i.longitude),Ct(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Qv(n.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,c,u;const d=i.fields||{},h=o.fields||{},p=(a=d[Ac])===null||a===void 0?void 0:a.arrayValue,m=(l=h[Ac])===null||l===void 0?void 0:l.arrayValue,y=We(((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0,((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0);return y!==0?y:Qv(p,m)}(n.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ru.mapValue&&o===Ru.mapValue)return 0;if(i===Ru.mapValue)return 1;if(o===Ru.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let d=0;d<l.length&&d<u.length;++d){const h=hp(l[d],u[d]);if(h!==0)return h;const p=ia(a[l[d]],c[u[d]]);if(p!==0)return p}return We(l.length,u.length)}(n.mapValue,e.mapValue);default:throw Re(23264,{Pe:t})}}function Jv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return We(n,e);const t=ri(n),r=ri(e),s=We(t.seconds,r.seconds);return s!==0?s:We(t.nanos,r.nanos)}function Qv(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const i=ia(t[s],r[s]);if(i)return i}return We(t.length,r.length)}function oa(n){return pp(n)}function pp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=ri(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return si(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Ie.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const i of t.values||[])s?s=!1:r+=",",r+=pp(i);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${pp(t.fields[o])}`;return s+"}"}(n.mapValue):Re(61005,{value:n})}function tc(n){switch(ii(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Gd(n);return e?16+tc(e):16;case 5:return 2*n.stringValue.length;case 6:return si(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+tc(i),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return mi(r.fields,(i,o)=>{s+=i.length+tc(o)}),s}(n.mapValue);default:throw Re(13486,{value:n})}}function mp(n){return!!n&&"integerValue"in n}function Lm(n){return!!n&&"arrayValue"in n}function Yv(n){return!!n&&"nullValue"in n}function Xv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function nc(n){return!!n&&"mapValue"in n}function $M(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[IT])===null||t===void 0?void 0:t.stringValue)===MT}function cl(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return mi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=cl(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=cl(n.arrayValue.values[t]);return e}return Object.assign({},n)}function BM(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===VM}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.value=e}static empty(){return new Pn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!nc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=cl(t)}setAll(e){let t=nn.emptyPath(),r={},s=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,r,s),r={},s=[],t=a.popLast()}o?r[a.lastSegment()]=cl(o):s.push(a.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,r,s)}delete(e){const t=this.field(e.popLast());nc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Nr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];nc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){mi(t,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Pn(cl(this.value))}}function PT(n){const e=[];return mi(n.fields,(t,r)=>{const s=new nn([t]);if(nc(r)){const i=PT(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e,t,r,s,i,o,a){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new gn(e,0,Ne.min(),Ne.min(),Ne.min(),Pn.empty(),0)}static newFoundDocument(e,t,r,s){return new gn(e,1,t,Ne.min(),r,s,0)}static newNoDocument(e,t){return new gn(e,2,t,Ne.min(),Ne.min(),Pn.empty(),0)}static newUnknownDocument(e,t){return new gn(e,3,t,Ne.min(),Ne.min(),Pn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Pn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Pn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e,t){this.position=e,this.inclusive=t}}function Zv(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const i=e[s],o=n.position[s];if(i.field.isKeyField()?r=Ie.comparator(Ie.fromName(o.referenceValue),t.key):r=ia(o,t.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function e0(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Nr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(e,t="asc"){this.field=e,this.dir=t}}function FM(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{}class Nt extends RT{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new jM(e,t,r):t==="array-contains"?new qM(e,r):t==="in"?new WM(e,r):t==="not-in"?new GM(e,r):t==="array-contains-any"?new KM(e,r):new Nt(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new HM(e,r):new UM(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ia(t,this.value)):t!==null&&ii(this.value)===ii(t)&&this.matchesComparison(ia(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Re(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Lr extends RT{constructor(e,t){super(),this.filters=e,this.op=t,this.Te=null}static create(e,t){return new Lr(e,t)}matches(e){return OT(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function OT(n){return n.op==="and"}function DT(n){return zM(n)&&OT(n)}function zM(n){for(const e of n.filters)if(e instanceof Lr)return!1;return!0}function gp(n){if(n instanceof Nt)return n.field.canonicalString()+n.op.toString()+oa(n.value);if(DT(n))return n.filters.map(e=>gp(e)).join(",");{const e=n.filters.map(t=>gp(t)).join(",");return`${n.op}(${e})`}}function NT(n,e){return n instanceof Nt?function(r,s){return s instanceof Nt&&r.op===s.op&&r.field.isEqual(s.field)&&Nr(r.value,s.value)}(n,e):n instanceof Lr?function(r,s){return s instanceof Lr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,a)=>i&&NT(o,s.filters[a]),!0):!1}(n,e):void Re(19439)}function LT(n){return n instanceof Nt?function(t){return`${t.field.canonicalString()} ${t.op} ${oa(t.value)}`}(n):n instanceof Lr?function(t){return t.op.toString()+" {"+t.getFilters().map(LT).join(" ,")+"}"}(n):"Filter"}class jM extends Nt{constructor(e,t,r){super(e,t,r),this.key=Ie.fromName(r.referenceValue)}matches(e){const t=Ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class HM extends Nt{constructor(e,t){super(e,"in",t),this.keys=VT("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class UM extends Nt{constructor(e,t){super(e,"not-in",t),this.keys=VT("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function VT(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Ie.fromName(r.referenceValue))}class qM extends Nt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Lm(t)&&$l(t.arrayValue,this.value)}}class WM extends Nt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&$l(this.value.arrayValue,t)}}class GM extends Nt{constructor(e,t){super(e,"not-in",t)}matches(e){if($l(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!$l(this.value.arrayValue,t)}}class KM extends Nt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Lm(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>$l(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JM{constructor(e,t=null,r=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.Ie=null}}function t0(n,e=null,t=[],r=[],s=null,i=null,o=null){return new JM(n,e,t,r,s,i,o)}function Vm(n){const e=Ve(n);if(e.Ie===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>gp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Wd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>oa(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>oa(r)).join(",")),e.Ie=t}return e.Ie}function $m(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!FM(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!NT(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!e0(n.startAt,e.startAt)&&e0(n.endAt,e.endAt)}function yp(n){return Ie.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(e,t=null,r=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function QM(n,e,t,r,s,i,o,a){return new Kd(n,e,t,r,s,i,o,a)}function Bm(n){return new Kd(n)}function n0(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function YM(n){return n.collectionGroup!==null}function dl(n){const e=Ve(n);if(e.Ee===null){e.Ee=[];const t=new Set;for(const i of e.explicitOrderBy)e.Ee.push(i),t.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Vt(nn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(i=>{t.has(i.canonicalString())||i.isKeyField()||e.Ee.push(new Ic(i,r))}),t.has(nn.keyField().canonicalString())||e.Ee.push(new Ic(nn.keyField(),r))}return e.Ee}function Pr(n){const e=Ve(n);return e.de||(e.de=XM(e,dl(n))),e.de}function XM(n,e){if(n.limitType==="F")return t0(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Ic(s.field,i)});const t=n.endAt?new kc(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new kc(n.startAt.position,n.startAt.inclusive):null;return t0(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function vp(n,e,t){return new Kd(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Jd(n,e){return $m(Pr(n),Pr(e))&&n.limitType===e.limitType}function $T(n){return`${Vm(Pr(n))}|lt:${n.limitType}`}function Lo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>LT(s)).join(", ")}]`),Wd(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>oa(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>oa(s)).join(",")),`Target(${r})`}(Pr(n))}; limitType=${n.limitType})`}function Qd(n,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Ie.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(n,e)&&function(r,s){for(const i of dl(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(o,a,l){const c=Zv(o,a,l);return o.inclusive?c<=0:c<0}(r.startAt,dl(r),s)||r.endAt&&!function(o,a,l){const c=Zv(o,a,l);return o.inclusive?c>=0:c>0}(r.endAt,dl(r),s))}(n,e)}function ZM(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function BT(n){return(e,t)=>{let r=!1;for(const s of dl(n)){const i=eP(s,e,t);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function eP(n,e,t){const r=n.field.isKeyField()?Ie.comparator(e.key,t.key):function(i,o,a){const l=o.data.field(i),c=a.data.field(i);return l!==null&&c!==null?ia(l,c):Re(42886)}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Re(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class co{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){mi(this.inner,(t,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return ST(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tP=new bt(Ie.comparator);function ms(){return tP}const FT=new bt(Ie.comparator);function Ya(...n){let e=FT;for(const t of n)e=e.insert(t.key,t);return e}function zT(n){let e=FT;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Vi(){return fl()}function jT(){return fl()}function fl(){return new co(n=>n.toString(),(n,e)=>n.isEqual(e))}const nP=new bt(Ie.comparator),rP=new Vt(Ie.comparator);function Ye(...n){let e=rP;for(const t of n)e=e.add(t);return e}const sP=new Vt(We);function iP(){return sP}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:xc(e)?"-0":e}}function HT(n){return{integerValue:""+n}}function oP(n,e){return RM(e)?HT(e):Fm(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(){this._=void 0}}function aP(n,e,t){return n instanceof Mc?function(s,i){const o={fields:{[CT]:{stringValue:xT},[kT]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Nm(i)&&(i=Gd(i)),i&&(o.fields[AT]=i),{mapValue:o}}(t,e):n instanceof Bl?qT(n,e):n instanceof Fl?WT(n,e):function(s,i){const o=UT(s,i),a=r0(o)+r0(s.Re);return mp(o)&&mp(s.Re)?HT(a):Fm(s.serializer,a)}(n,e)}function lP(n,e,t){return n instanceof Bl?qT(n,e):n instanceof Fl?WT(n,e):t}function UT(n,e){return n instanceof Pc?function(r){return mp(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Mc extends Yd{}class Bl extends Yd{constructor(e){super(),this.elements=e}}function qT(n,e){const t=GT(e);for(const r of n.elements)t.some(s=>Nr(s,r))||t.push(r);return{arrayValue:{values:t}}}class Fl extends Yd{constructor(e){super(),this.elements=e}}function WT(n,e){let t=GT(e);for(const r of n.elements)t=t.filter(s=>!Nr(s,r));return{arrayValue:{values:t}}}class Pc extends Yd{constructor(e,t){super(),this.serializer=e,this.Re=t}}function r0(n){return Ct(n.integerValue||n.doubleValue)}function GT(n){return Lm(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function uP(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Bl&&s instanceof Bl||r instanceof Fl&&s instanceof Fl?sa(r.elements,s.elements,Nr):r instanceof Pc&&s instanceof Pc?Nr(r.Re,s.Re):r instanceof Mc&&s instanceof Mc}(n.transform,e.transform)}class cP{constructor(e,t){this.version=e,this.transformResults=t}}class dr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new dr}static exists(e){return new dr(void 0,e)}static updateTime(e){return new dr(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function rc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Xd{}function KT(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new zm(n.key,dr.none()):new iu(n.key,n.data,dr.none());{const t=n.data,r=Pn.empty();let s=new Vt(nn.comparator);for(let i of e.fields)if(!s.has(i)){let o=t.field(i);o===null&&i.length>1&&(i=i.popLast(),o=t.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new gi(n.key,r,new Hn(s.toArray()),dr.none())}}function dP(n,e,t){n instanceof iu?function(s,i,o){const a=s.value.clone(),l=i0(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof gi?function(s,i,o){if(!rc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=i0(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(JT(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function hl(n,e,t,r){return n instanceof iu?function(i,o,a,l){if(!rc(i.precondition,o))return a;const c=i.value.clone(),u=o0(i.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,r):n instanceof gi?function(i,o,a,l){if(!rc(i.precondition,o))return a;const c=o0(i.fieldTransforms,l,o),u=o.data;return u.setAll(JT(i)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(d=>d.field))}(n,e,t,r):function(i,o,a){return rc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function fP(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),i=UT(r.transform,s||null);i!=null&&(t===null&&(t=Pn.empty()),t.set(r.field,i))}return t||null}function s0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&sa(r,s,(i,o)=>uP(i,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class iu extends Xd{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class gi extends Xd{constructor(e,t,r,s,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function JT(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function i0(n,e,t){const r=new Map;it(n.length===t.length,32656,{Ve:t.length,me:n.length});for(let s=0;s<t.length;s++){const i=n[s],o=i.transform,a=e.data.field(i.field);r.set(i.field,lP(o,a,t[s]))}return r}function o0(n,e,t){const r=new Map;for(const s of n){const i=s.transform,o=t.data.field(s.field);r.set(s.field,aP(i,o,e))}return r}class zm extends Xd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hP extends Xd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&dP(i,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=hl(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=hl(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=jT();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(s.key)?null:a;const l=KT(o,a);l!==null&&r.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Ne.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ye())}isEqual(e){return this.batchId===e.batchId&&sa(this.mutations,e.mutations,(t,r)=>s0(t,r))&&sa(this.baseMutations,e.baseMutations,(t,r)=>s0(t,r))}}class jm{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){it(e.mutations.length===r.length,58842,{fe:e.mutations.length,ge:r.length});let s=function(){return nP}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new jm(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Mt,Xe;function yP(n){switch(n){case Y.OK:return Re(64938);case Y.CANCELLED:case Y.UNKNOWN:case Y.DEADLINE_EXCEEDED:case Y.RESOURCE_EXHAUSTED:case Y.INTERNAL:case Y.UNAVAILABLE:case Y.UNAUTHENTICATED:return!1;case Y.INVALID_ARGUMENT:case Y.NOT_FOUND:case Y.ALREADY_EXISTS:case Y.PERMISSION_DENIED:case Y.FAILED_PRECONDITION:case Y.ABORTED:case Y.OUT_OF_RANGE:case Y.UNIMPLEMENTED:case Y.DATA_LOSS:return!0;default:return Re(15467,{code:n})}}function QT(n){if(n===void 0)return ps("GRPC error has no .code"),Y.UNKNOWN;switch(n){case Mt.OK:return Y.OK;case Mt.CANCELLED:return Y.CANCELLED;case Mt.UNKNOWN:return Y.UNKNOWN;case Mt.DEADLINE_EXCEEDED:return Y.DEADLINE_EXCEEDED;case Mt.RESOURCE_EXHAUSTED:return Y.RESOURCE_EXHAUSTED;case Mt.INTERNAL:return Y.INTERNAL;case Mt.UNAVAILABLE:return Y.UNAVAILABLE;case Mt.UNAUTHENTICATED:return Y.UNAUTHENTICATED;case Mt.INVALID_ARGUMENT:return Y.INVALID_ARGUMENT;case Mt.NOT_FOUND:return Y.NOT_FOUND;case Mt.ALREADY_EXISTS:return Y.ALREADY_EXISTS;case Mt.PERMISSION_DENIED:return Y.PERMISSION_DENIED;case Mt.FAILED_PRECONDITION:return Y.FAILED_PRECONDITION;case Mt.ABORTED:return Y.ABORTED;case Mt.OUT_OF_RANGE:return Y.OUT_OF_RANGE;case Mt.UNIMPLEMENTED:return Y.UNIMPLEMENTED;case Mt.DATA_LOSS:return Y.DATA_LOSS;default:return Re(39323,{code:n})}}(Xe=Mt||(Mt={}))[Xe.OK=0]="OK",Xe[Xe.CANCELLED=1]="CANCELLED",Xe[Xe.UNKNOWN=2]="UNKNOWN",Xe[Xe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Xe[Xe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Xe[Xe.NOT_FOUND=5]="NOT_FOUND",Xe[Xe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Xe[Xe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Xe[Xe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Xe[Xe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Xe[Xe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Xe[Xe.ABORTED=10]="ABORTED",Xe[Xe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Xe[Xe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Xe[Xe.INTERNAL=13]="INTERNAL",Xe[Xe.UNAVAILABLE=14]="UNAVAILABLE",Xe[Xe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=new Ws([4294967295,4294967295],0);function a0(n){const e=wT().encode(n),t=new fT;return t.update(e),new Uint8Array(t.digest())}function l0(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new Ws([t,r],0),new Ws([s,i],0)]}class Hm{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Xa(`Invalid padding: ${t}`);if(r<0)throw new Xa(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xa(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Xa(`Invalid padding when bitmap length is 0: ${t}`);this.pe=8*e.length-t,this.ye=Ws.fromNumber(this.pe)}we(e,t,r){let s=e.add(t.multiply(Ws.fromNumber(r)));return s.compare(vP)===1&&(s=new Ws([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.pe===0)return!1;const t=a0(e),[r,s]=l0(t);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);if(!this.be(o))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Hm(i,s,t);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.pe===0)return;const t=a0(e),[r,s]=l0(t);for(let i=0;i<this.hashCount;i++){const o=this.we(r,s,i);this.Se(o)}}Se(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Xa extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,t,r,s,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,ou.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Zd(Ne.min(),s,new bt(We),ms(),Ye())}}class ou{constructor(e,t,r,s,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ou(r,t,Ye(),Ye(),Ye())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(e,t,r,s){this.De=e,this.removedTargetIds=t,this.key=r,this.ve=s}}class YT{constructor(e,t){this.targetId=e,this.Ce=t}}class XT{constructor(e,t,r=sn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class u0{constructor(){this.Fe=0,this.Me=c0(),this.xe=sn.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(e){e.approximateByteSize()>0&&(this.Ne=!0,this.xe=e)}qe(){let e=Ye(),t=Ye(),r=Ye();return this.Me.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Re(38017,{changeType:i})}}),new ou(this.xe,this.Oe,e,t,r)}Qe(){this.Ne=!1,this.Me=c0()}$e(e,t){this.Ne=!0,this.Me=this.Me.insert(e,t)}Ue(e){this.Ne=!0,this.Me=this.Me.remove(e)}Ke(){this.Fe+=1}We(){this.Fe-=1,it(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class bP{constructor(e){this.ze=e,this.je=new Map,this.He=ms(),this.Je=Ou(),this.Ye=Ou(),this.Ze=new bt(We)}Xe(e){for(const t of e.De)e.ve&&e.ve.isFoundDocument()?this.et(t,e.ve):this.tt(t,e.key,e.ve);for(const t of e.removedTargetIds)this.tt(t,e.key,e.ve)}nt(e){this.forEachTarget(e,t=>{const r=this.rt(t);switch(e.state){case 0:this.it(t)&&r.ke(e.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(e.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(t);break;case 3:this.it(t)&&(r.Ge(),r.ke(e.resumeToken));break;case 4:this.it(t)&&(this.st(t),r.ke(e.resumeToken));break;default:Re(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.je.forEach((r,s)=>{this.it(s)&&t(s)})}ot(e){const t=e.targetId,r=e.Ce.count,s=this._t(t);if(s){const i=s.target;if(yp(i))if(r===0){const o=new Ie(i.path);this.tt(t,o,gn.newNoDocument(o,Ne.min()))}else it(r===1,20013,{expectedCount:r});else{const o=this.ut(t);if(o!==r){const a=this.ct(e),l=a?this.lt(a,e,o):1;if(l!==0){this.st(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(t,c)}}}}}ct(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=t;let o,a;try{o=si(r).toUint8Array()}catch(l){if(l instanceof _T)return ra("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Hm(o,s,i)}catch(l){return ra(l instanceof Xa?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.pe===0?null:a}lt(e,t,r){return t.Ce.count===r-this.Tt(e,t.targetId)?0:2}Tt(e,t){const r=this.ze.getRemoteKeysForTarget(t);let s=0;return r.forEach(i=>{const o=this.ze.Pt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.tt(t,i,null),s++)}),s}It(e){const t=new Map;this.je.forEach((i,o)=>{const a=this._t(o);if(a){if(i.current&&yp(a.target)){const l=new Ie(a.target.path);this.Et(l).has(o)||this.dt(o,l)||this.tt(o,l,gn.newNoDocument(l,e))}i.Le&&(t.set(o,i.qe()),i.Qe())}});let r=Ye();this.Ye.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const c=this._t(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(i))}),this.He.forEach((i,o)=>o.setReadTime(e));const s=new Zd(e,t,this.Ze,this.He,r);return this.He=ms(),this.Je=Ou(),this.Ye=Ou(),this.Ze=new bt(We),s}et(e,t){if(!this.it(e))return;const r=this.dt(e,t.key)?2:0;this.rt(e).$e(t.key,r),this.He=this.He.insert(t.key,t),this.Je=this.Je.insert(t.key,this.Et(t.key).add(e)),this.Ye=this.Ye.insert(t.key,this.At(t.key).add(e))}tt(e,t,r){if(!this.it(e))return;const s=this.rt(e);this.dt(e,t)?s.$e(t,1):s.Ue(t),this.Ye=this.Ye.insert(t,this.At(t).delete(e)),this.Ye=this.Ye.insert(t,this.At(t).add(e)),r&&(this.He=this.He.insert(t,r))}removeTarget(e){this.je.delete(e)}ut(e){const t=this.rt(e).qe();return this.ze.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ke(e){this.rt(e).Ke()}rt(e){let t=this.je.get(e);return t||(t=new u0,this.je.set(e,t)),t}At(e){let t=this.Ye.get(e);return t||(t=new Vt(We),this.Ye=this.Ye.insert(e,t)),t}Et(e){let t=this.Je.get(e);return t||(t=new Vt(We),this.Je=this.Je.insert(e,t)),t}it(e){const t=this._t(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}_t(e){const t=this.je.get(e);return t&&t.Be?null:this.ze.Rt(e)}st(e){this.je.set(e,new u0),this.ze.getRemoteKeysForTarget(e).forEach(t=>{this.tt(e,t,null)})}dt(e,t){return this.ze.getRemoteKeysForTarget(e).has(t)}}function Ou(){return new bt(Ie.comparator)}function c0(){return new bt(Ie.comparator)}const wP={asc:"ASCENDING",desc:"DESCENDING"},TP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},EP={and:"AND",or:"OR"};class SP{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function bp(n,e){return n.useProto3Json||Wd(e)?e:{value:e}}function Rc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function ZT(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function _P(n,e){return Rc(n,e.toTimestamp())}function Rr(n){return it(!!n,49232),Ne.fromTimestamp(function(t){const r=ri(t);return new Lt(r.seconds,r.nanos)}(n))}function Um(n,e){return wp(n,e).canonicalString()}function wp(n,e){const t=function(s){return new gt(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function eE(n){const e=gt.fromString(n);return it(iE(e),10190,{key:e.toString()}),e}function Tp(n,e){return Um(n.databaseId,e.path)}function sh(n,e){const t=eE(e);if(t.get(1)!==n.databaseId.projectId)throw new _e(Y.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new _e(Y.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ie(nE(t))}function tE(n,e){return Um(n.databaseId,e)}function xP(n){const e=eE(n);return e.length===4?gt.emptyPath():nE(e)}function Ep(n){return new gt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function nE(n){return it(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function d0(n,e,t){return{name:Tp(n,e),fields:t.value.mapValue.fields}}function CP(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Re(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,u){return c.useProto3Json?(it(u===void 0||typeof u=="string",58123),sn.fromBase64String(u||"")):(it(u===void 0||u instanceof Buffer||u instanceof Uint8Array,16193),sn.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?Y.UNKNOWN:QT(c.code);return new _e(u,c.message||"")}(o);t=new XT(r,s,i,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=sh(n,r.document.name),i=Rr(r.document.updateTime),o=r.document.createTime?Rr(r.document.createTime):Ne.min(),a=new Pn({mapValue:{fields:r.document.fields}}),l=gn.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];t=new sc(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=sh(n,r.document),i=r.readTime?Rr(r.readTime):Ne.min(),o=gn.newNoDocument(s,i),a=r.removedTargetIds||[];t=new sc([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=sh(n,r.document),i=r.removedTargetIds||[];t=new sc([],i,s,null)}else{if(!("filter"in e))return Re(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new gP(s,i),a=r.targetId;t=new YT(a,o)}}return t}function AP(n,e){let t;if(e instanceof iu)t={update:d0(n,e.key,e.value)};else if(e instanceof zm)t={delete:Tp(n,e.key)};else if(e instanceof gi)t={update:d0(n,e.key,e.data),updateMask:LP(e.fieldMask)};else{if(!(e instanceof hP))return Re(16599,{ft:e.type});t={verify:Tp(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const a=o.transform;if(a instanceof Mc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Bl)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Fl)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Pc)return{fieldPath:o.field.canonicalString(),increment:a.Re};throw Re(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:_P(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Re(27497)}(n,e.precondition)),t}function kP(n,e){return n&&n.length>0?(it(e!==void 0,14353),n.map(t=>function(s,i){let o=s.updateTime?Rr(s.updateTime):Rr(i);return o.isEqual(Ne.min())&&(o=Rr(i)),new cP(o,s.transformResults||[])}(t,e))):[]}function IP(n,e){return{documents:[tE(n,e.path)]}}function MP(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=tE(n,s);const i=function(c){if(c.length!==0)return sE(Lr.create(c,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(u=>function(h){return{field:Vo(h.field),direction:OP(h.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=bp(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{gt:t,parent:s}}function PP(n){let e=xP(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){it(r===1,65062);const u=t.from[0];u.allDescendants?s=u.collectionId:e=e.child(u.collectionId)}let i=[];t.where&&(i=function(d){const h=rE(d);return h instanceof Lr&&DT(h)?h.getFilters():[h]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(h=>function(m){return new Ic($o(m.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(t.orderBy));let a=null;t.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Wd(h)?null:h}(t.limit));let l=null;t.startAt&&(l=function(d){const h=!!d.before,p=d.values||[];return new kc(p,h)}(t.startAt));let c=null;return t.endAt&&(c=function(d){const h=!d.before,p=d.values||[];return new kc(p,h)}(t.endAt)),QM(e,s,o,i,a,"F",l,c)}function RP(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Re(28987,{purpose:s})}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function rE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=$o(t.unaryFilter.field);return Nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=$o(t.unaryFilter.field);return Nt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=$o(t.unaryFilter.field);return Nt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=$o(t.unaryFilter.field);return Nt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Re(61313);default:return Re(60726)}}(n):n.fieldFilter!==void 0?function(t){return Nt.create($o(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Re(58110);default:return Re(50506)}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Lr.create(t.compositeFilter.filters.map(r=>rE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Re(1026)}}(t.compositeFilter.op))}(n):Re(30097,{filter:n})}function OP(n){return wP[n]}function DP(n){return TP[n]}function NP(n){return EP[n]}function Vo(n){return{fieldPath:n.canonicalString()}}function $o(n){return nn.fromServerFormat(n.fieldPath)}function sE(n){return n instanceof Nt?function(t){if(t.op==="=="){if(Xv(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NAN"}};if(Yv(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Xv(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NOT_NAN"}};if(Yv(t.value))return{unaryFilter:{field:Vo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Vo(t.field),op:DP(t.op),value:t.value}}}(n):n instanceof Lr?function(t){const r=t.getFilters().map(s=>sE(s));return r.length===1?r[0]:{compositeFilter:{op:NP(t.op),filters:r}}}(n):Re(54877,{filter:n})}function LP(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function iE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vs{constructor(e,t,r,s,i=Ne.min(),o=Ne.min(),a=sn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Vs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Vs(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Vs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VP{constructor(e){this.wt=e}}function $P(n){const e=PP({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?vp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BP{constructor(){this.yn=new FP}addToCollectionParentIndex(e,t){return this.yn.add(t),G.resolve()}getCollectionParents(e,t){return G.resolve(this.yn.getEntries(t))}addFieldIndex(e,t){return G.resolve()}deleteFieldIndex(e,t){return G.resolve()}deleteAllFieldIndexes(e){return G.resolve()}createTargetIndexes(e,t){return G.resolve()}getDocumentsMatchingTarget(e,t){return G.resolve(null)}getIndexType(e,t){return G.resolve(0)}getFieldIndexes(e,t){return G.resolve([])}getNextCollectionGroupToUpdate(e){return G.resolve(null)}getMinOffset(e,t){return G.resolve(ni.min())}getMinOffsetFromCollectionGroup(e,t){return G.resolve(ni.min())}updateCollectionGroup(e,t,r){return G.resolve()}updateIndexEntries(e,t){return G.resolve()}}class FP{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Vt(gt.comparator),i=!s.has(r);return this.index[t]=s.add(r),i}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Vt(gt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},oE=41943040;class In{static withCacheSize(e){return new In(e,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */In.DEFAULT_COLLECTION_PERCENTILE=10,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,In.DEFAULT=new In(oE,In.DEFAULT_COLLECTION_PERCENTILE,In.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),In.DISABLED=new In(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aa{constructor(e){this.nr=e}next(){return this.nr+=2,this.nr}static rr(){return new aa(0)}static ir(){return new aa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="LruGarbageCollector",zP=1048576;function p0([n,e],[t,r]){const s=We(n,t);return s===0?We(e,r):s}class jP{constructor(e){this.cr=e,this.buffer=new Vt(p0),this.lr=0}hr(){return++this.lr}Pr(e){const t=[e,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();p0(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class HP{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(e){ge(h0,`Garbage collection scheduled in ${e}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xa(t)?ge(h0,"Ignoring IndexedDB error during garbage collection: ",t):await _a(t)}await this.Ir(3e5)})}}class UP{constructor(e,t){this.Er=e,this.params=t}calculateTargetCount(e,t){return this.Er.dr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return G.resolve(qd.le);const r=new jP(t);return this.Er.forEachTarget(e,s=>r.Pr(s.sequenceNumber)).next(()=>this.Er.Ar(e,s=>r.Pr(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Er.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Er.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),G.resolve(f0)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),f0):this.Rr(e,t))}getCacheSize(e){return this.Er.getCacheSize(e)}Rr(e,t){let r,s,i,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,o=Date.now(),this.nthSequenceNumber(e,s))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,t))).next(d=>(i=d,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(c=Date.now(),No()<=Ze.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${i} targets in `+(l-a)+`ms
	Removed ${d} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),G.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:d})))}}function qP(n,e){return new UP(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(){this.changes=new co(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?G.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KP{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&hl(r.mutation,s,Hn.empty(),Lt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ye()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ye()){const s=Vi();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(i=>{let o=Ya();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const r=Vi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ye()))}populateOverlays(e,t,r){const s=[];return r.forEach(i=>{t.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,r,s){let i=ms();const o=fl(),a=function(){return fl()}();return t.forEach((l,c)=>{const u=r.get(c.key);s.has(c.key)&&(u===void 0||u.mutation instanceof gi)?i=i.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),hl(u.mutation,c,u.mutation.getFieldMask(),Lt.now())):o.set(c.key,Hn.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var d;return a.set(c,new GP(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){const r=fl();let s=new bt((o,a)=>o-a),i=Ye();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=r.get(l)||Hn.empty();u=a.applyToLocalView(c,u),r.set(l,u);const d=(s.get(a.batchId)||Ye()).add(l);s=s.insert(a.batchId,d)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,d=jT();u.forEach(h=>{if(!i.has(h)){const p=KT(t.get(h),r.get(h));p!==null&&d.set(h,p),i=i.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return G.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(o){return Ie.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):YM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-i.size):G.resolve(Vi());let a=Nl,l=i;return o.next(c=>G.forEach(c,(u,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),i.get(u)?G.resolve():this.remoteDocumentCache.getEntry(e,u).next(h=>{l=l.insert(u,h)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,l,c,Ye())).next(u=>({batchId:a,changes:zT(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ie(t)).next(r=>{let s=Ya();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const i=t.collectionGroup;let o=Ya();return this.indexManager.getCollectionParents(e,i).next(a=>G.forEach(a,l=>{const c=function(d,h){return new Kd(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(u=>{u.forEach((d,h)=>{o=o.insert(d,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,s))).next(o=>{i.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,gn.newInvalidDocument(u)))});let a=Ya();return o.forEach((l,c)=>{const u=i.get(l);u!==void 0&&hl(u.mutation,c,Hn.empty(),Lt.now()),Qd(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JP{constructor(e){this.serializer=e,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(e,t){return G.resolve(this.Fr.get(t))}saveBundleMetadata(e,t){return this.Fr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Rr(s.createTime)}}(t)),G.resolve()}getNamedQuery(e,t){return G.resolve(this.Mr.get(t))}saveNamedQuery(e,t){return this.Mr.set(t.name,function(s){return{name:s.name,query:$P(s.bundledQuery),readTime:Rr(s.readTime)}}(t)),G.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(){this.overlays=new bt(Ie.comparator),this.Or=new Map}getOverlay(e,t){return G.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Vi();return G.forEach(t,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,i)=>{this.St(e,t,i)}),G.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Or.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Or.delete(r)),G.resolve()}getOverlaysForCollection(e,t,r){const s=Vi(),i=t.length+1,o=new Ie(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===i&&l.largestBatchId>r&&s.set(l.getKey(),l)}return G.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let i=new bt((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>r){let u=i.get(c.largestBatchId);u===null&&(u=Vi(),i=i.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Vi(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=s)););return G.resolve(a)}St(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Or.get(s.largestBatchId).delete(r.key);this.Or.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new mP(t,r));let i=this.Or.get(t);i===void 0&&(i=Ye(),this.Or.set(t,i)),this.Or.set(t,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YP{constructor(){this.sessionToken=sn.EMPTY_BYTE_STRING}getSessionToken(e){return G.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,G.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm{constructor(){this.Nr=new Vt(Ft.Br),this.Lr=new Vt(Ft.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(e,t){const r=new Ft(e,t);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Qr(new Ft(e,t))}$r(e,t){e.forEach(r=>this.removeReference(r,t))}Ur(e){const t=new Ie(new gt([])),r=new Ft(t,e),s=new Ft(t,e+1),i=[];return this.Lr.forEachInRange([r,s],o=>{this.Qr(o),i.push(o.key)}),i}Kr(){this.Nr.forEach(e=>this.Qr(e))}Qr(e){this.Nr=this.Nr.delete(e),this.Lr=this.Lr.delete(e)}Wr(e){const t=new Ie(new gt([])),r=new Ft(t,e),s=new Ft(t,e+1);let i=Ye();return this.Lr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const t=new Ft(e,0),r=this.Nr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Ft{constructor(e,t){this.key=e,this.Gr=t}static Br(e,t){return Ie.comparator(e.key,t.key)||We(e.Gr,t.Gr)}static kr(e,t){return We(e.Gr,t.Gr)||Ie.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Jn=1,this.zr=new Vt(Ft.Br)}checkEmpty(e){return G.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const i=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new pP(i,t,r,s);this.mutationQueue.push(o);for(const a of s)this.zr=this.zr.add(new Ft(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return G.resolve(o)}lookupMutationBatch(e,t){return G.resolve(this.jr(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Hr(r),i=s<0?0:s;return G.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return G.resolve(this.mutationQueue.length===0?Dm:this.Jn-1)}getAllMutationBatches(e){return G.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Ft(t,0),s=new Ft(t,Number.POSITIVE_INFINITY),i=[];return this.zr.forEachInRange([r,s],o=>{const a=this.jr(o.Gr);i.push(a)}),G.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Vt(We);return t.forEach(s=>{const i=new Ft(s,0),o=new Ft(s,Number.POSITIVE_INFINITY);this.zr.forEachInRange([i,o],a=>{r=r.add(a.Gr)})}),G.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let i=r;Ie.isDocumentKey(i)||(i=i.child(""));const o=new Ft(new Ie(i),0);let a=new Vt(We);return this.zr.forEachWhile(l=>{const c=l.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(a=a.add(l.Gr)),!0)},o),G.resolve(this.Jr(a))}Jr(e){const t=[];return e.forEach(r=>{const s=this.jr(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){it(this.Yr(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return G.forEach(t.mutations,s=>{const i=new Ft(s.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.zr=r})}Xn(e){}containsKey(e,t){const r=new Ft(t,0),s=this.zr.firstAfterOrEqual(r);return G.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,G.resolve()}Yr(e,t){return this.Hr(e)}Hr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}jr(e){const t=this.Hr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e){this.Zr=e,this.docs=function(){return new bt(Ie.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),i=s?s.size:0,o=this.Zr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return G.resolve(r?r.document.mutableCopy():gn.newInvalidDocument(t))}getEntries(e,t){let r=ms();return t.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():gn.newInvalidDocument(s))}),G.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let i=ms();const o=t.path,a=new Ie(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||kM(AM(u),r)<=0||(s.has(u.key)||Qd(t,u))&&(i=i.insert(u.key,u.mutableCopy()))}return G.resolve(i)}getAllFromCollectionGroup(e,t,r,s){Re(9500)}Xr(e,t){return G.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new eR(this)}getSize(e){return G.resolve(this.size)}}class eR extends WP{constructor(e){super(),this.vr=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.vr.addEntry(e,s)):this.vr.removeEntry(r)}),G.waitFor(t)}getFromCache(e,t){return this.vr.getEntry(e,t)}getAllFromCache(e,t){return this.vr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.persistence=e,this.ei=new co(t=>Vm(t),$m),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.ti=0,this.ni=new qm,this.targetCount=0,this.ri=aa.rr()}forEachTarget(e,t){return this.ei.forEach((r,s)=>t(s)),G.resolve()}getLastRemoteSnapshotVersion(e){return G.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return G.resolve(this.ti)}allocateTargetId(e){return this.highestTargetId=this.ri.next(),G.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ti&&(this.ti=t),G.resolve()}ar(e){this.ei.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ri=new aa(t),this.highestTargetId=t),e.sequenceNumber>this.ti&&(this.ti=e.sequenceNumber)}addTargetData(e,t){return this.ar(t),this.targetCount+=1,G.resolve()}updateTargetData(e,t){return this.ar(t),G.resolve()}removeTargetData(e,t){return this.ei.delete(t.target),this.ni.Ur(t.targetId),this.targetCount-=1,G.resolve()}removeTargets(e,t,r){let s=0;const i=[];return this.ei.forEach((o,a)=>{a.sequenceNumber<=t&&r.get(a.targetId)===null&&(this.ei.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),G.waitFor(i).next(()=>s)}getTargetCount(e){return G.resolve(this.targetCount)}getTargetData(e,t){const r=this.ei.get(t)||null;return G.resolve(r)}addMatchingKeys(e,t,r){return this.ni.qr(t,r),G.resolve()}removeMatchingKeys(e,t,r){this.ni.$r(t,r);const s=this.persistence.referenceDelegate,i=[];return s&&t.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),G.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.ni.Ur(t),G.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ni.Wr(t);return G.resolve(r)}containsKey(e,t){return G.resolve(this.ni.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(e,t){this.ii={},this.overlays={},this.si=new qd(0),this.oi=!1,this.oi=!0,this._i=new YP,this.referenceDelegate=e(this),this.ai=new tR(this),this.indexManager=new BP,this.remoteDocumentCache=function(s){return new ZP(s)}(r=>this.referenceDelegate.ui(r)),this.serializer=new VP(t),this.ci=new JP(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new QP,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.ii[e.toKey()];return r||(r=new XP(t,this.referenceDelegate),this.ii[e.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(e,t,r){ge("MemoryPersistence","Starting transaction:",e);const s=new nR(this.si.next());return this.referenceDelegate.li(),r(s).next(i=>this.referenceDelegate.hi(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Pi(e,t){return G.or(Object.values(this.ii).map(r=>()=>r.containsKey(e,t)))}}class nR extends MM{constructor(e){super(),this.currentSequenceNumber=e}}class Wm{constructor(e){this.persistence=e,this.Ti=new qm,this.Ii=null}static Ei(e){return new Wm(e)}get di(){if(this.Ii)return this.Ii;throw Re(60996)}addReference(e,t,r){return this.Ti.addReference(r,t),this.di.delete(r.toString()),G.resolve()}removeReference(e,t,r){return this.Ti.removeReference(r,t),this.di.add(r.toString()),G.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),G.resolve()}removeTarget(e,t){this.Ti.Ur(t.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,t))}li(){this.Ii=new Set}hi(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return G.forEach(this.di,r=>{const s=Ie.fromPath(r);return this.Ai(e,s).next(i=>{i||t.removeEntry(s,Ne.min())})}).next(()=>(this.Ii=null,t.apply(e)))}updateLimboDocument(e,t){return this.Ai(e,t).next(r=>{r?this.di.delete(t.toString()):this.di.add(t.toString())})}ui(e){return 0}Ai(e,t){return G.or([()=>G.resolve(this.Ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Pi(e,t)])}}class Oc{constructor(e,t){this.persistence=e,this.Ri=new co(r=>OM(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=qP(this,t)}static Ei(e,t){return new Oc(e,t)}li(){}hi(e){return G.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){const t=this.Vr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}Vr(e){let t=0;return this.Ar(e,r=>{t++}).next(()=>t)}Ar(e,t){return G.forEach(this.Ri,(r,s)=>this.gr(e,r,s).next(i=>i?G.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Xr(e,o=>this.gr(e,o,t).next(a=>{a||(r++,i.removeEntry(o,Ne.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.Ri.set(t,e.currentSequenceNumber),G.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),G.resolve()}removeReference(e,t,r){return this.Ri.set(r,e.currentSequenceNumber),G.resolve()}updateLimboDocument(e,t){return this.Ri.set(t,e.currentSequenceNumber),G.resolve()}ui(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=tc(e.data.value)),t}gr(e,t,r){return G.or([()=>this.persistence.Pi(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.Ri.get(t);return G.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.ls=r,this.hs=s}static Ps(e,t){let r=Ye(),s=Ye();for(const i of t.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Gm(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return Yk()?8:PM(Kk())>0?6:4}()}initialize(e,t){this.As=e,this.indexManager=t,this.Ts=!0}getDocumentsMatchingQuery(e,t,r,s){const i={result:null};return this.Rs(e,t).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Vs(e,t,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new rR;return this.fs(e,t,o).next(a=>{if(i.result=a,this.Is)return this.gs(e,t,o,a.size)})}).next(()=>i.result)}gs(e,t,r,s){return r.documentReadCount<this.Es?(No()<=Ze.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Lo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),G.resolve()):(No()<=Ze.DEBUG&&ge("QueryEngine","Query:",Lo(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(No()<=Ze.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Lo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pr(t))):G.resolve())}Rs(e,t){if(n0(t))return G.resolve(null);let r=Pr(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=vp(t,null,"F"),r=Pr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ye(...i);return this.As.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(l=>{const c=this.ps(t,a);return this.ys(t,c,o,l.readTime)?this.Rs(e,vp(t,null,"F")):this.ws(e,c,t,l)}))})))}Vs(e,t,r,s){return n0(t)||s.isEqual(Ne.min())?G.resolve(null):this.As.getDocuments(e,r).next(i=>{const o=this.ps(t,i);return this.ys(t,o,r,s)?G.resolve(null):(No()<=Ze.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Lo(t)),this.ws(e,o,t,CM(s,Nl)).next(a=>a))})}ps(e,t){let r=new Vt(BT(e));return t.forEach((s,i)=>{Qd(e,i)&&(r=r.add(i))}),r}ys(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const i=e.limitType==="F"?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}fs(e,t,r){return No()<=Ze.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Lo(t)),this.As.getDocumentsMatchingQuery(e,t,ni.min(),r)}ws(e,t,r,s){return this.As.getDocumentsMatchingQuery(e,r,s).next(i=>(t.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Km="LocalStore",iR=3e8;class oR{constructor(e,t,r,s){this.persistence=e,this.bs=t,this.serializer=s,this.Ss=new bt(We),this.Ds=new co(i=>Vm(i),$m),this.vs=new Map,this.Cs=e.getRemoteDocumentCache(),this.ai=e.getTargetCache(),this.ci=e.getBundleCache(),this.Fs(r)}Fs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new KP(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ss))}}function aR(n,e,t,r){return new oR(n,e,t,r)}async function lE(n,e){const t=Ve(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,t.Fs(e),t.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],a=[];let l=Ye();for(const c of s){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of i){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(r,l).next(c=>({Ms:c,removedBatchIds:o,addedBatchIds:a}))})})}function lR(n,e){const t=Ve(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=t.Cs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const d=c.batch,h=d.keys();let p=G.resolve();return h.forEach(m=>{p=p.next(()=>u.getEntry(l,m)).next(y=>{const v=c.docVersions.get(m);it(v!==null,48541),y.version.compareTo(v)<0&&(d.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,d))}(t,r,e,i).next(()=>i.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let l=Ye();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function uE(n){const e=Ve(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.ai.getLastRemoteSnapshotVersion(t))}function uR(n,e){const t=Ve(n),r=e.snapshotVersion;let s=t.Ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=t.Cs.newChangeBuffer({trackRemovals:!0});s=t.Ss;const a=[];e.targetChanges.forEach((u,d)=>{const h=s.get(d);if(!h)return;a.push(t.ai.removeMatchingKeys(i,u.removedDocuments,d).next(()=>t.ai.addMatchingKeys(i,u.addedDocuments,d)));let p=h.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(sn.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),s=s.insert(d,p),function(y,v,S){return y.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=iR?!0:S.addedDocuments.size+S.modifiedDocuments.size+S.removedDocuments.size>0}(h,p,u)&&a.push(t.ai.updateTargetData(i,p))});let l=ms(),c=Ye();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(i,u))}),a.push(cR(i,o,e.documentUpdates).next(u=>{l=u.xs,c=u.Os})),!r.isEqual(Ne.min())){const u=t.ai.getLastRemoteSnapshotVersion(i).next(d=>t.ai.setTargetsMetadata(i,i.currentSequenceNumber,r));a.push(u)}return G.waitFor(a).next(()=>o.apply(i)).next(()=>t.localDocuments.getLocalViewOfDocuments(i,l,c)).next(()=>l)}).then(i=>(t.Ss=s,i))}function cR(n,e,t){let r=Ye(),s=Ye();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let o=ms();return t.forEach((a,l)=>{const c=i.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Ne.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):ge(Km,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{xs:o,Os:s}})}function dR(n,e){const t=Ve(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Dm),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fR(n,e){const t=Ve(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.ai.getTargetData(r,e).next(i=>i?(s=i,G.resolve(s)):t.ai.allocateTargetId(r).next(o=>(s=new Vs(e,o,"TargetPurposeListen",r.currentSequenceNumber),t.ai.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ss.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ss=t.Ss.insert(r.targetId,r),t.Ds.set(e,r.targetId)),r})}async function Sp(n,e,t){const r=Ve(n),s=r.Ss.get(e),i=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!xa(o))throw o;ge(Km,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ss=r.Ss.remove(e),r.Ds.delete(s.target)}function m0(n,e,t){const r=Ve(n);let s=Ne.min(),i=Ye();return r.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const d=Ve(l),h=d.Ds.get(u);return h!==void 0?G.resolve(d.Ss.get(h)):d.ai.getTargetData(c,u)}(r,o,Pr(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>r.bs.getDocumentsMatchingQuery(o,e,t?s:Ne.min(),t?i:Ye())).next(a=>(hR(r,ZM(e),a),{documents:a,Ns:i})))}function hR(n,e,t){let r=n.vs.get(e)||Ne.min();t.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),n.vs.set(e,r)}class g0{constructor(){this.activeTargetIds=iP()}$s(e){this.activeTargetIds=this.activeTargetIds.add(e)}Us(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Qs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class pR{constructor(){this.So=new g0,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.So.$s(e),this.Do[e]||"not-current"}updateQueryState(e,t,r){this.Do[e]=t}removeLocalQueryTarget(e){this.So.Us(e)}isLocalQueryTarget(e){return this.So.activeTargetIds.has(e)}clearQueryState(e){delete this.Do[e]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(e){return this.So.activeTargetIds.has(e)}start(){return this.So=new g0,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{vo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y0="ConnectivityMonitor";class v0{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(e){this.Oo.push(e)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){ge(y0,"Network connectivity changed: AVAILABLE");for(const e of this.Oo)e(0)}xo(){ge(y0,"Network connectivity changed: UNAVAILABLE");for(const e of this.Oo)e(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Du=null;function _p(){return Du===null?Du=function(){return 268435456+Math.round(2147483648*Math.random())}():Du++,"0x"+Du.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih="RestConnection",gR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class yR{get Bo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Lo=t+"://"+e.host,this.ko=`projects/${r}/databases/${s}`,this.qo=this.databaseId.database===Cc?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Qo(e,t,r,s,i){const o=_p(),a=this.$o(e,t.toUriEncodedString());ge(ih,`Sending RPC '${e}' ${o}:`,a,r);const l={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};return this.Uo(l,s,i),this.Ko(e,a,l,r).then(c=>(ge(ih,`Received RPC '${e}' ${o}: `,c),c),c=>{throw ra(ih,`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",r),c})}Wo(e,t,r,s,i,o){return this.Qo(e,t,r,s,i)}Uo(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sa}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}$o(e,t){const r=gR[e];return`${this.Lo}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.Go=e.Go,this.zo=e.zo}jo(e){this.Ho=e}Jo(e){this.Yo=e}Zo(e){this.Xo=e}onMessage(e){this.e_=e}close(){this.zo()}send(e){this.Go(e)}t_(){this.Ho()}n_(){this.Yo()}r_(e){this.Xo(e)}i_(e){this.e_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn="WebChannelConnection";class bR extends yR{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ko(e,t,r,s){const i=_p();return new Promise((o,a)=>{const l=new hT;l.setWithCredentials(!0),l.listenOnce(pT.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ec.NO_ERROR:const u=l.getResponseJson();ge(cn,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(u)),o(u);break;case ec.TIMEOUT:ge(cn,`RPC '${e}' ${i} timed out`),a(new _e(Y.DEADLINE_EXCEEDED,"Request time out"));break;case ec.HTTP_ERROR:const d=l.getStatus();if(ge(cn,`RPC '${e}' ${i} failed with status:`,d,"response text:",l.getResponseText()),d>0){let h=l.getResponseJson();Array.isArray(h)&&(h=h[0]);const p=h==null?void 0:h.error;if(p&&p.status&&p.message){const m=function(v){const S=v.toLowerCase().replace(/_/g,"-");return Object.values(Y).indexOf(S)>=0?S:Y.UNKNOWN}(p.status);a(new _e(m,p.message))}else a(new _e(Y.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new _e(Y.UNAVAILABLE,"Connection failed."));break;default:Re(9055,{s_:e,streamId:i,o_:l.getLastErrorCode(),__:l.getLastError()})}}finally{ge(cn,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);ge(cn,`RPC '${e}' ${i} sending request:`,s),l.send(t,"POST",c,r,15)})}a_(e,t,r){const s=_p(),i=[this.Lo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=yT(),a=gT(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Uo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;const u=i.join("");ge(cn,`Creating RPC '${e}' stream ${s}: ${u}`,l);const d=o.createWebChannel(u,l);let h=!1,p=!1;const m=new vR({Go:v=>{p?ge(cn,`Not sending because RPC '${e}' stream ${s} is closed:`,v):(h||(ge(cn,`Opening RPC '${e}' stream ${s} transport.`),d.open(),h=!0),ge(cn,`RPC '${e}' stream ${s} sending:`,v),d.send(v))},zo:()=>d.close()}),y=(v,S,T)=>{v.listen(S,b=>{try{T(b)}catch(C){setTimeout(()=>{throw C},0)}})};return y(d,Qa.EventType.OPEN,()=>{p||(ge(cn,`RPC '${e}' stream ${s} transport opened.`),m.t_())}),y(d,Qa.EventType.CLOSE,()=>{p||(p=!0,ge(cn,`RPC '${e}' stream ${s} transport closed`),m.r_())}),y(d,Qa.EventType.ERROR,v=>{p||(p=!0,ra(cn,`RPC '${e}' stream ${s} transport errored. Name:`,v.name,"Message:",v.message),m.r_(new _e(Y.UNAVAILABLE,"The operation could not be completed")))}),y(d,Qa.EventType.MESSAGE,v=>{var S;if(!p){const T=v.data[0];it(!!T,16349);const b=T,C=(b==null?void 0:b.error)||((S=b[0])===null||S===void 0?void 0:S.error);if(C){ge(cn,`RPC '${e}' stream ${s} received error:`,C);const O=C.status;let N=function(_){const M=Mt[_];if(M!==void 0)return QT(M)}(O),A=C.message;N===void 0&&(N=Y.INTERNAL,A="Unknown error status: "+O+" with message "+C.message),p=!0,m.r_(new _e(N,A)),d.close()}else ge(cn,`RPC '${e}' stream ${s} received:`,T),m.i_(T)}}),y(a,mT.STAT_EVENT,v=>{v.stat===fp.PROXY?ge(cn,`RPC '${e}' stream ${s} detected buffering proxy`):v.stat===fp.NOPROXY&&ge(cn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{m.n_()},0),m}}function oh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ef(n){return new SP(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,t,r=1e3,s=1.5,i=6e4){this.bi=e,this.timerId=t,this.u_=r,this.c_=s,this.l_=i,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(e){this.cancel();const t=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),s=Math.max(0,t-r);s>0&&ge("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.h_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,s,()=>(this.T_=Date.now(),e())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0="PersistentStream";class dE{constructor(e,t,r,s,i,o,a,l){this.bi=e,this.R_=r,this.V_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new cE(e,t)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(e){this.M_(),this.stream.send(e)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(e,t){this.M_(),this.x_(),this.y_.cancel(),this.m_++,e!==4?this.y_.reset():t&&t.code===Y.RESOURCE_EXHAUSTED?(ps(t.toString()),ps("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):t&&t.code===Y.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Zo(t)}O_(){}auth(){this.state=1;const e=this.N_(this.m_),t=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.m_===t&&this.B_(r,s)},r=>{e(()=>{const s=new _e(Y.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(s)})})}B_(e,t){const r=this.N_(this.m_);this.stream=this.k_(e,t),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(s=>{r(()=>this.L_(s))}),this.stream.onMessage(s=>{r(()=>++this.p_==1?this.q_(s):this.onNext(s))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(e){return ge(b0,`close with error: ${e}`),this.stream=null,this.close(4,e)}N_(e){return t=>{this.bi.enqueueAndForget(()=>this.m_===e?t():(ge(b0,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class wR extends dE{constructor(e,t,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}k_(e,t){return this.connection.a_("Listen",e,t)}q_(e){return this.onNext(e)}onNext(e){this.y_.reset();const t=CP(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ne.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Ne.min():o.readTime?Rr(o.readTime):Ne.min()}(e);return this.listener.Q_(t,r)}U_(e){const t={};t.database=Ep(this.serializer),t.addTarget=function(i,o){let a;const l=o.target;if(a=yp(l)?{documents:IP(i,l)}:{query:MP(i,l).gt},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=ZT(i,o.resumeToken);const c=bp(i,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Ne.min())>0){a.readTime=Rc(i,o.snapshotVersion.toTimestamp());const c=bp(i,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=RP(this.serializer,e);r&&(t.labels=r),this.F_(t)}K_(e){const t={};t.database=Ep(this.serializer),t.removeTarget=e,this.F_(t)}}class TR extends dE{constructor(e,t,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,o),this.serializer=i}get W_(){return this.p_>0}start(){this.lastStreamToken=void 0,super.start()}O_(){this.W_&&this.G_([])}k_(e,t){return this.connection.a_("Write",e,t)}q_(e){return it(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,it(!e.writeResults||e.writeResults.length===0,55816),this.listener.z_()}onNext(e){it(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.y_.reset();const t=kP(e.writeResults,e.commitTime),r=Rr(e.commitTime);return this.listener.j_(r,t)}H_(){const e={};e.database=Ep(this.serializer),this.F_(e)}G_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>AP(this.serializer,r))};this.F_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{}class SR extends ER{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.J_=!1}Y_(){if(this.J_)throw new _e(Y.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(e,t,r,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Qo(e,wp(t,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new _e(Y.UNKNOWN,i.toString())})}Wo(e,t,r,s,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Wo(e,wp(t,r),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Y.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new _e(Y.UNKNOWN,o.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class _R{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(e){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.na("Offline")))}set(e){this.sa(),this.Z_=0,e==="Online"&&(this.ea=!1),this.na(e)}na(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ra(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(ps(t),this.ea=!1):ge("OnlineStateTracker",t)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi="RemoteStore";class xR{constructor(e,t,r,s,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=i,this.ca.vo(o=>{r.enqueueAndForget(async()=>{fo(this)&&(ge(Xi,"Restarting streams for network reachability change."),await async function(l){const c=Ve(l);c.aa.add(4),await au(c),c.la.set("Unknown"),c.aa.delete(4),await tf(c)}(this))})}),this.la=new _R(r,s)}}async function tf(n){if(fo(n))for(const e of n.ua)await e(!0)}async function au(n){for(const e of n.ua)await e(!1)}function fE(n,e){const t=Ve(n);t._a.has(e.targetId)||(t._a.set(e.targetId,e),Xm(t)?Ym(t):Ca(t).b_()&&Qm(t,e))}function Jm(n,e){const t=Ve(n),r=Ca(t);t._a.delete(e),r.b_()&&hE(t,e),t._a.size===0&&(r.b_()?r.v_():fo(t)&&t.la.set("Unknown"))}function Qm(n,e){if(n.ha.Ke(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ne.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ca(n).U_(e)}function hE(n,e){n.ha.Ke(e),Ca(n).K_(e)}function Ym(n){n.ha=new bP({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Rt:e=>n._a.get(e)||null,Pt:()=>n.datastore.serializer.databaseId}),Ca(n).start(),n.la.ta()}function Xm(n){return fo(n)&&!Ca(n).w_()&&n._a.size>0}function fo(n){return Ve(n).aa.size===0}function pE(n){n.ha=void 0}async function CR(n){n.la.set("Online")}async function AR(n){n._a.forEach((e,t)=>{Qm(n,e)})}async function kR(n,e){pE(n),Xm(n)?(n.la.ia(e),Ym(n)):n.la.set("Unknown")}async function IR(n,e,t){if(n.la.set("Online"),e instanceof XT&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s._a.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s._a.delete(a),s.ha.removeTarget(a))}(n,e)}catch(r){ge(Xi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Dc(n,r)}else if(e instanceof sc?n.ha.Xe(e):e instanceof YT?n.ha.ot(e):n.ha.nt(e),!t.isEqual(Ne.min()))try{const r=await uE(n.localStore);t.compareTo(r)>=0&&await function(i,o){const a=i.ha.It(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=i._a.get(c);u&&i._a.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=i._a.get(l);if(!u)return;i._a.set(l,u.withResumeToken(sn.EMPTY_BYTE_STRING,u.snapshotVersion)),hE(i,l);const d=new Vs(u.target,l,c,u.sequenceNumber);Qm(i,d)}),i.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(r){ge(Xi,"Failed to raise snapshot:",r),await Dc(n,r)}}async function Dc(n,e,t){if(!xa(e))throw e;n.aa.add(1),await au(n),n.la.set("Offline"),t||(t=()=>uE(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ge(Xi,"Retrying IndexedDB access"),await t(),n.aa.delete(1),await tf(n)})}function mE(n,e){return e().catch(t=>Dc(n,t,e))}async function nf(n){const e=Ve(n),t=oi(e);let r=e.oa.length>0?e.oa[e.oa.length-1].batchId:Dm;for(;MR(e);)try{const s=await dR(e.localStore,r);if(s===null){e.oa.length===0&&t.v_();break}r=s.batchId,PR(e,s)}catch(s){await Dc(e,s)}gE(e)&&yE(e)}function MR(n){return fo(n)&&n.oa.length<10}function PR(n,e){n.oa.push(e);const t=oi(n);t.b_()&&t.W_&&t.G_(e.mutations)}function gE(n){return fo(n)&&!oi(n).w_()&&n.oa.length>0}function yE(n){oi(n).start()}async function RR(n){oi(n).H_()}async function OR(n){const e=oi(n);for(const t of n.oa)e.G_(t.mutations)}async function DR(n,e,t){const r=n.oa.shift(),s=jm.from(r,e,t);await mE(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await nf(n)}async function NR(n,e){e&&oi(n).W_&&await async function(r,s){if(function(o){return yP(o)&&o!==Y.ABORTED}(s.code)){const i=r.oa.shift();oi(r).D_(),await mE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await nf(r)}}(n,e),gE(n)&&yE(n)}async function w0(n,e){const t=Ve(n);t.asyncQueue.verifyOperationInProgress(),ge(Xi,"RemoteStore received new credentials");const r=fo(t);t.aa.add(3),await au(t),r&&t.la.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.aa.delete(3),await tf(t)}async function LR(n,e){const t=Ve(n);e?(t.aa.delete(2),await tf(t)):e||(t.aa.add(2),await au(t),t.la.set("Unknown"))}function Ca(n){return n.Pa||(n.Pa=function(t,r,s){const i=Ve(t);return i.Y_(),new wR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{jo:CR.bind(null,n),Jo:AR.bind(null,n),Zo:kR.bind(null,n),Q_:IR.bind(null,n)}),n.ua.push(async e=>{e?(n.Pa.D_(),Xm(n)?Ym(n):n.la.set("Unknown")):(await n.Pa.stop(),pE(n))})),n.Pa}function oi(n){return n.Ta||(n.Ta=function(t,r,s){const i=Ve(t);return i.Y_(),new TR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(n.datastore,n.asyncQueue,{jo:()=>Promise.resolve(),Jo:RR.bind(null,n),Zo:NR.bind(null,n),z_:OR.bind(null,n),j_:DR.bind(null,n)}),n.ua.push(async e=>{e?(n.Ta.D_(),await nf(n)):(await n.Ta.stop(),n.oa.length>0&&(ge(Xi,`Stopping write stream with ${n.oa.length} pending writes`),n.oa=[]))})),n.Ta}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zm{constructor(e,t,r,s,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new ls,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,i){const o=Date.now()+r,a=new Zm(e,t,o,s,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new _e(Y.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eg(n,e){if(ps("AsyncQueue",`${e}: ${n}`),xa(n))return new _e(Y.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{static emptySet(e){return new Xo(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ie.comparator(t.key,r.key):(t,r)=>Ie.comparator(t.key,r.key),this.keyedMap=Ya(),this.sortedSet=new bt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xo)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Xo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T0{constructor(){this.Ia=new bt(Ie.comparator)}track(e){const t=e.doc.key,r=this.Ia.get(t);r?e.type!==0&&r.type===3?this.Ia=this.Ia.insert(t,e):e.type===3&&r.type!==1?this.Ia=this.Ia.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Ia=this.Ia.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Ia=this.Ia.remove(t):e.type===1&&r.type===2?this.Ia=this.Ia.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Ia=this.Ia.insert(t,{type:2,doc:e.doc}):Re(63341,{Vt:e,Ea:r}):this.Ia=this.Ia.insert(t,e)}da(){const e=[];return this.Ia.inorderTraversal((t,r)=>{e.push(r)}),e}}class la{constructor(e,t,r,s,i,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,r,s,i){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new la(e,t,Xo.emptySet(t),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Jd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VR{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(e=>e.ma())}}class $R{constructor(){this.queries=E0(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(t,r){const s=Ve(t),i=s.queries;s.queries=E0(),i.forEach((o,a)=>{for(const l of a.Ra)l.onError(r)})})(this,new _e(Y.ABORTED,"Firestore shutting down"))}}function E0(){return new co(n=>$T(n),Jd)}async function vE(n,e){const t=Ve(n);let r=3;const s=e.query;let i=t.queries.get(s);i?!i.Va()&&e.ma()&&(r=2):(i=new VR,r=e.ma()?0:1);try{switch(r){case 0:i.Aa=await t.onListen(s,!0);break;case 1:i.Aa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(o){const a=eg(o,`Initialization of query '${Lo(e.query)}' failed`);return void e.onError(a)}t.queries.set(s,i),i.Ra.push(e),e.ga(t.onlineState),i.Aa&&e.pa(i.Aa)&&tg(t)}async function bE(n,e){const t=Ve(n),r=e.query;let s=3;const i=t.queries.get(r);if(i){const o=i.Ra.indexOf(e);o>=0&&(i.Ra.splice(o,1),i.Ra.length===0?s=e.ma()?0:1:!i.Va()&&e.ma()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function BR(n,e){const t=Ve(n);let r=!1;for(const s of e){const i=s.query,o=t.queries.get(i);if(o){for(const a of o.Ra)a.pa(s)&&(r=!0);o.Aa=s}}r&&tg(t)}function FR(n,e,t){const r=Ve(n),s=r.queries.get(e);if(s)for(const i of s.Ra)i.onError(t);r.queries.delete(e)}function tg(n){n.fa.forEach(e=>{e.next()})}var xp,S0;(S0=xp||(xp={})).ya="default",S0.Cache="cache";class wE{constructor(e,t,r){this.query=e,this.wa=t,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new la(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ba?this.Da(e)&&(this.wa.next(e),t=!0):this.va(e,this.onlineState)&&(this.Ca(e),t=!0),this.Sa=e,t}onError(e){this.wa.error(e)}ga(e){this.onlineState=e;let t=!1;return this.Sa&&!this.ba&&this.va(this.Sa,e)&&(this.Ca(this.Sa),t=!0),t}va(e,t){if(!e.fromCache||!this.ma())return!0;const r=t!=="Offline";return(!this.options.Fa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Da(e){if(e.docChanges.length>0)return!0;const t=this.Sa&&this.Sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Ca(e){e=la.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ba=!0,this.wa.next(e)}ma(){return this.options.source!==xp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{constructor(e){this.key=e}}class EE{constructor(e){this.key=e}}class zR{constructor(e,t){this.query=e,this.qa=t,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=Ye(),this.mutatedKeys=Ye(),this.Ua=BT(e),this.Ka=new Xo(this.Ua)}get Wa(){return this.qa}Ga(e,t){const r=t?t.za:new T0,s=t?t.Ka:this.Ka;let i=t?t.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((u,d)=>{const h=s.get(u),p=Qd(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),y=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let v=!1;h&&p?h.data.isEqual(p.data)?m!==y&&(r.track({type:3,doc:p}),v=!0):this.ja(h,p)||(r.track({type:2,doc:p}),v=!0,(l&&this.Ua(p,l)>0||c&&this.Ua(p,c)<0)&&(a=!0)):!h&&p?(r.track({type:0,doc:p}),v=!0):h&&!p&&(r.track({type:1,doc:h}),v=!0,(l||c)&&(a=!0)),v&&(p?(o=o.add(p),i=y?i.add(u):i.delete(u)):(o=o.delete(u),i=i.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),i=i.delete(u.key),r.track({type:1,doc:u})}return{Ka:o,za:r,ys:a,mutatedKeys:i}}ja(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const i=this.Ka;this.Ka=e.Ka,this.mutatedKeys=e.mutatedKeys;const o=e.za.da();o.sort((u,d)=>function(p,m){const y=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Re(20277,{Vt:v})}};return y(p)-y(m)}(u.type,d.type)||this.Ua(u.doc,d.doc)),this.Ha(r),s=s!=null&&s;const a=t&&!s?this.Ja():[],l=this.$a.size===0&&this.current&&!s?1:0,c=l!==this.Qa;return this.Qa=l,o.length!==0||c?{snapshot:new la(this.query,e.Ka,i,o,e.mutatedKeys,l===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:a}:{Ya:a}}ga(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new T0,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(e){return!this.qa.has(e)&&!!this.Ka.has(e)&&!this.Ka.get(e).hasLocalMutations}Ha(e){e&&(e.addedDocuments.forEach(t=>this.qa=this.qa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qa=this.qa.delete(t)),this.current=e.current)}Ja(){if(!this.current)return[];const e=this.$a;this.$a=Ye(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const t=[];return e.forEach(r=>{this.$a.has(r)||t.push(new EE(r))}),this.$a.forEach(r=>{e.has(r)||t.push(new TE(r))}),t}Xa(e){this.qa=e.Ns,this.$a=Ye();const t=this.Ga(e.documents);return this.applyChanges(t,!0)}eu(){return la.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const ng="SyncEngine";class jR{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class HR{constructor(e){this.key=e,this.tu=!1}}class UR{constructor(e,t,r,s,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.nu={},this.ru=new co(a=>$T(a),Jd),this.iu=new Map,this.su=new Set,this.ou=new bt(Ie.comparator),this._u=new Map,this.au=new qm,this.uu={},this.cu=new Map,this.lu=aa.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function qR(n,e,t=!0){const r=kE(n);let s;const i=r.ru.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.eu()):s=await SE(r,e,t,!0),s}async function WR(n,e){const t=kE(n);await SE(t,e,!0,!1)}async function SE(n,e,t,r){const s=await fR(n.localStore,Pr(e)),i=s.targetId,o=n.sharedClientState.addLocalQueryTarget(i,t);let a;return r&&(a=await GR(n,e,i,o==="current",s.resumeToken)),n.isPrimaryClient&&t&&fE(n.remoteStore,s),a}async function GR(n,e,t,r,s){n.Pu=(d,h,p)=>async function(y,v,S,T){let b=v.view.Ga(S);b.ys&&(b=await m0(y.localStore,v.query,!1).then(({documents:A})=>v.view.Ga(A,b)));const C=T&&T.targetChanges.get(v.targetId),O=T&&T.targetMismatches.get(v.targetId)!=null,N=v.view.applyChanges(b,y.isPrimaryClient,C,O);return x0(y,v.targetId,N.Ya),N.snapshot}(n,d,h,p);const i=await m0(n.localStore,e,!0),o=new zR(e,i.Ns),a=o.Ga(i.documents),l=ou.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),c=o.applyChanges(a,n.isPrimaryClient,l);x0(n,t,c.Ya);const u=new jR(e,t,o);return n.ru.set(e,u),n.iu.has(t)?n.iu.get(t).push(e):n.iu.set(t,[e]),c.snapshot}async function KR(n,e,t){const r=Ve(n),s=r.ru.get(e),i=r.iu.get(s.targetId);if(i.length>1)return r.iu.set(s.targetId,i.filter(o=>!Jd(o,e))),void r.ru.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Sp(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Jm(r.remoteStore,s.targetId),Cp(r,s.targetId)}).catch(_a)):(Cp(r,s.targetId),await Sp(r.localStore,s.targetId,!0))}async function JR(n,e){const t=Ve(n),r=t.ru.get(e),s=t.iu.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Jm(t.remoteStore,r.targetId))}async function QR(n,e,t){const r=rO(n);try{const s=await function(o,a){const l=Ve(o),c=Lt.now(),u=a.reduce((p,m)=>p.add(m.key),Ye());let d,h;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let m=ms(),y=Ye();return l.Cs.getEntries(p,u).next(v=>{m=v,m.forEach((S,T)=>{T.isValidDocument()||(y=y.add(S))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,m)).next(v=>{d=v;const S=[];for(const T of a){const b=fP(T,d.get(T.key).overlayedDocument);b!=null&&S.push(new gi(T.key,b,PT(b.value.mapValue),dr.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,S,a)}).next(v=>{h=v;const S=v.applyToLocalDocumentSet(d,y);return l.documentOverlayCache.saveOverlays(p,v.batchId,S)})}).then(()=>({batchId:h.batchId,changes:zT(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let c=o.uu[o.currentUser.toKey()];c||(c=new bt(We)),c=c.insert(a,l),o.uu[o.currentUser.toKey()]=c}(r,s.batchId,t),await lu(r,s.changes),await nf(r.remoteStore)}catch(s){const i=eg(s,"Failed to persist write");t.reject(i)}}async function _E(n,e){const t=Ve(n);try{const r=await uR(t.localStore,e);e.targetChanges.forEach((s,i)=>{const o=t._u.get(i);o&&(it(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.tu=!0:s.modifiedDocuments.size>0?it(o.tu,14607):s.removedDocuments.size>0&&(it(o.tu,42227),o.tu=!1))}),await lu(t,r,e)}catch(r){await _a(r)}}function _0(n,e,t){const r=Ve(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.ru.forEach((i,o)=>{const a=o.view.ga(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Ve(o);l.onlineState=a;let c=!1;l.queries.forEach((u,d)=>{for(const h of d.Ra)h.ga(a)&&(c=!0)}),c&&tg(l)}(r.eventManager,e),s.length&&r.nu.Q_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function YR(n,e,t){const r=Ve(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r._u.get(e),i=s&&s.key;if(i){let o=new bt(Ie.comparator);o=o.insert(i,gn.newNoDocument(i,Ne.min()));const a=Ye().add(i),l=new Zd(Ne.min(),new Map,new bt(We),o,a);await _E(r,l),r.ou=r.ou.remove(i),r._u.delete(e),rg(r)}else await Sp(r.localStore,e,!1).then(()=>Cp(r,e,t)).catch(_a)}async function XR(n,e){const t=Ve(n),r=e.batch.batchId;try{const s=await lR(t.localStore,e);CE(t,r,null),xE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await lu(t,s)}catch(s){await _a(s)}}async function ZR(n,e,t){const r=Ve(n);try{const s=await function(o,a){const l=Ve(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(d=>(it(d!==null,37113),u=d.keys(),l.mutationQueue.removeMutationBatch(c,d))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(r.localStore,e);CE(r,e,t),xE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await lu(r,s)}catch(s){await _a(s)}}function xE(n,e){(n.cu.get(e)||[]).forEach(t=>{t.resolve()}),n.cu.delete(e)}function CE(n,e,t){const r=Ve(n);let s=r.uu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(t?i.reject(t):i.resolve(),s=s.remove(e)),r.uu[r.currentUser.toKey()]=s}}function Cp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.iu.get(e))n.ru.delete(r),t&&n.nu.Tu(r,t);n.iu.delete(e),n.isPrimaryClient&&n.au.Ur(e).forEach(r=>{n.au.containsKey(r)||AE(n,r)})}function AE(n,e){n.su.delete(e.path.canonicalString());const t=n.ou.get(e);t!==null&&(Jm(n.remoteStore,t),n.ou=n.ou.remove(e),n._u.delete(t),rg(n))}function x0(n,e,t){for(const r of t)r instanceof TE?(n.au.addReference(r.key,e),eO(n,r)):r instanceof EE?(ge(ng,"Document no longer in limbo: "+r.key),n.au.removeReference(r.key,e),n.au.containsKey(r.key)||AE(n,r.key)):Re(19791,{Iu:r})}function eO(n,e){const t=e.key,r=t.path.canonicalString();n.ou.get(t)||n.su.has(r)||(ge(ng,"New document in limbo: "+t),n.su.add(r),rg(n))}function rg(n){for(;n.su.size>0&&n.ou.size<n.maxConcurrentLimboResolutions;){const e=n.su.values().next().value;n.su.delete(e);const t=new Ie(gt.fromString(e)),r=n.lu.next();n._u.set(r,new HR(t)),n.ou=n.ou.insert(t,r),fE(n.remoteStore,new Vs(Pr(Bm(t.path)),r,"TargetPurposeLimboResolution",qd.le))}}async function lu(n,e,t){const r=Ve(n),s=[],i=[],o=[];r.ru.isEmpty()||(r.ru.forEach((a,l)=>{o.push(r.Pu(l,e,t).then(c=>{var u;if((c||t)&&r.isPrimaryClient){const d=c?!c.fromCache:(u=t==null?void 0:t.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;r.sharedClientState.updateQueryState(l.targetId,d?"current":"not-current")}if(c){s.push(c);const d=Gm.Ps(l.targetId,c);i.push(d)}}))}),await Promise.all(o),r.nu.Q_(s),await async function(l,c){const u=Ve(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>G.forEach(c,h=>G.forEach(h.ls,p=>u.persistence.referenceDelegate.addReference(d,h.targetId,p)).next(()=>G.forEach(h.hs,p=>u.persistence.referenceDelegate.removeReference(d,h.targetId,p)))))}catch(d){if(!xa(d))throw d;ge(Km,"Failed to update sequence numbers: "+d)}for(const d of c){const h=d.targetId;if(!d.fromCache){const p=u.Ss.get(h),m=p.snapshotVersion,y=p.withLastLimboFreeSnapshotVersion(m);u.Ss=u.Ss.insert(h,y)}}}(r.localStore,i))}async function tO(n,e){const t=Ve(n);if(!t.currentUser.isEqual(e)){ge(ng,"User change. New user:",e.toKey());const r=await lE(t.localStore,e);t.currentUser=e,function(i,o){i.cu.forEach(a=>{a.forEach(l=>{l.reject(new _e(Y.CANCELLED,o))})}),i.cu.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await lu(t,r.Ms)}}function nO(n,e){const t=Ve(n),r=t._u.get(e);if(r&&r.tu)return Ye().add(r.key);{let s=Ye();const i=t.iu.get(e);if(!i)return s;for(const o of i){const a=t.ru.get(o);s=s.unionWith(a.view.Wa)}return s}}function kE(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=_E.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=nO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=YR.bind(null,e),e.nu.Q_=BR.bind(null,e.eventManager),e.nu.Tu=FR.bind(null,e.eventManager),e}function rO(n){const e=Ve(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ZR.bind(null,e),e}class Nc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ef(e.databaseInfo.databaseId),this.sharedClientState=this.Au(e),this.persistence=this.Ru(e),await this.persistence.start(),this.localStore=this.Vu(e),this.gcScheduler=this.mu(e,this.localStore),this.indexBackfillerScheduler=this.fu(e,this.localStore)}mu(e,t){return null}fu(e,t){return null}Vu(e){return aR(this.persistence,new sR,e.initialUser,this.serializer)}Ru(e){return new aE(Wm.Ei,this.serializer)}Au(e){return new pR}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Nc.provider={build:()=>new Nc};class sO extends Nc{constructor(e){super(),this.cacheSizeBytes=e}mu(e,t){it(this.persistence.referenceDelegate instanceof Oc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new HP(r,e.asyncQueue,t)}Ru(e){const t=this.cacheSizeBytes!==void 0?In.withCacheSize(this.cacheSizeBytes):In.DEFAULT;return new aE(r=>Oc.Ei(r,t),this.serializer)}}class Ap{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=tO.bind(null,this.syncEngine),await LR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $R}()}createDatastore(e){const t=ef(e.databaseInfo.databaseId),r=function(i){return new bR(i)}(e.databaseInfo);return function(i,o,a,l){return new SR(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,i,o,a){return new xR(r,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>_0(this.syncEngine,t,0),function(){return v0.C()?new v0:new mR}())}createSyncEngine(e,t){return function(s,i,o,a,l,c,u){const d=new UR(s,i,o,a,l,c);return u&&(d.hu=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const i=Ve(s);ge(Xi,"RemoteStore shutting down."),i.aa.add(5),await au(i),i.ca.shutdown(),i.la.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}Ap.provider={build:()=>new Ap};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.pu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.pu(this.observer.error,e):ps("Uncaught Error in snapshot listener:",e.toString()))}yu(){this.muted=!0}pu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ai="FirestoreClient";class iO{constructor(e,t,r,s,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=hn.UNAUTHENTICATED,this.clientId=TT.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{ge(ai,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(ge(ai,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ls;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=eg(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ah(n,e){n.asyncQueue.verifyOperationInProgress(),ge(ai,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await lE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function C0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await oO(n);ge(ai,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>w0(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>w0(e.remoteStore,s)),n._onlineComponents=e}async function oO(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge(ai,"Using user provided OfflineComponentProvider");try{await ah(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===Y.FAILED_PRECONDITION||s.code===Y.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;ra("Error using user provided cache. Falling back to memory cache: "+t),await ah(n,new Nc)}}else ge(ai,"Using default OfflineComponentProvider"),await ah(n,new sO(void 0));return n._offlineComponents}async function ME(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge(ai,"Using user provided OnlineComponentProvider"),await C0(n,n._uninitializedComponentsProvider._online)):(ge(ai,"Using default OnlineComponentProvider"),await C0(n,new Ap))),n._onlineComponents}function aO(n){return ME(n).then(e=>e.syncEngine)}async function PE(n){const e=await ME(n),t=e.eventManager;return t.onListen=qR.bind(null,e.syncEngine),t.onUnlisten=KR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=WR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=JR.bind(null,e.syncEngine),t}function lO(n,e,t={}){const r=new ls;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new IE({next:h=>{u.yu(),o.enqueueAndForget(()=>bE(i,d));const p=h.docs.has(a);!p&&h.fromCache?c.reject(new _e(Y.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&h.fromCache&&l&&l.source==="server"?c.reject(new _e(Y.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new wE(Bm(a.path),u,{includeMetadataChanges:!0,Fa:!0});return vE(i,d)}(await PE(n),n.asyncQueue,e,t,r)),r.promise}function uO(n,e,t={}){const r=new ls;return n.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,c){const u=new IE({next:h=>{u.yu(),o.enqueueAndForget(()=>bE(i,d)),h.fromCache&&l.source==="server"?c.reject(new _e(Y.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(h)},error:h=>c.reject(h)}),d=new wE(a,u,{includeMetadataChanges:!0,Fa:!0});return vE(i,d)}(await PE(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(n,e,t){if(!t)throw new _e(Y.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function cO(n,e,t,r){if(e===!0&&r===!0)throw new _e(Y.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function k0(n){if(!Ie.isDocumentKey(n))throw new _e(Y.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function I0(n){if(Ie.isDocumentKey(n))throw new _e(Y.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function sg(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Re(12329,{type:typeof n})}function Vr(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new _e(Y.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=sg(n);throw new _e(Y.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DE="firestore.googleapis.com",M0=!0;class P0{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new _e(Y.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=DE,this.ssl=M0}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:M0;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=oE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<zP)throw new _e(Y.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}cO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new _e(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new _e(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new _e(Y.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rf{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new P0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new _e(Y.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new _e(Y.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new P0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new yM;switch(r.type){case"firstParty":return new TM(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new _e(Y.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=A0.get(t);r&&(ge("ComponentProvider","Removing Datastore"),A0.delete(t),r.terminate())}(this),Promise.resolve()}}function dO(n,e,t,r={}){var s;const i=(n=Vr(n,rf))._getSettings(),o=Object.assign(Object.assign({},i),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;i.host!==DE&&i.host!==a&&ra("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},i),{host:a,ssl:!1,emulatorOptions:r});if(!Ol(l,o)&&(n._setSettings(l),r.mockUserToken)){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=hn.MOCK_USER;else{c=Gk(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new _e(Y.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new hn(d)}n._authCredentials=new vM(new bT(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new sf(this.firestore,e,this._query)}}class Rn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Gs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Rn(this.firestore,e,this._key)}}class Gs extends sf{constructor(e,t,r){super(e,t,Bm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Rn(this.firestore,null,new Ie(e))}withConverter(e){return new Gs(this.firestore,e,this._path)}}function NE(n,e,...t){if(n=Dr(n),OE("collection","path",e),n instanceof rf){const r=gt.fromString(e,...t);return I0(r),new Gs(n,null,r)}{if(!(n instanceof Rn||n instanceof Gs))throw new _e(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(gt.fromString(e,...t));return I0(r),new Gs(n.firestore,null,r)}}function ho(n,e,...t){if(n=Dr(n),arguments.length===1&&(e=TT.newId()),OE("doc","path",e),n instanceof rf){const r=gt.fromString(e,...t);return k0(r),new Rn(n,null,new Ie(r))}{if(!(n instanceof Rn||n instanceof Gs))throw new _e(Y.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(gt.fromString(e,...t));return k0(r),new Rn(n.firestore,n instanceof Gs?n.converter:null,new Ie(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R0="AsyncQueue";class O0{constructor(e=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new cE(this,"async_queue_retry"),this.ju=()=>{const r=oh();r&&ge(R0,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=e;const t=oh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Ju(),this.Yu(e)}enterRestrictedMode(e){if(!this.$u){this.$u=!0,this.Gu=e||!1;const t=oh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.ju)}}enqueue(e){if(this.Ju(),this.$u)return new Promise(()=>{});const t=new ls;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qu.push(e),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(e){if(!xa(e))throw e;ge(R0,"Operation failed with retryable error: "+e)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(e){const t=this.Hu.then(()=>(this.Wu=!0,e().catch(r=>{throw this.Ku=r,this.Wu=!1,ps("INTERNAL UNHANDLED ERROR: ",D0(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=t,t}enqueueAfterDelay(e,t,r){this.Ju(),this.zu.indexOf(e)>-1&&(t=0);const s=Zm.createAndSchedule(this,e,t,r,i=>this.Xu(i));return this.Uu.push(s),s}Ju(){this.Ku&&Re(47125,{ec:D0(this.Ku)})}verifyOperationInProgress(){}async tc(){let e;do e=this.Hu,await e;while(e!==this.Hu)}nc(e){for(const t of this.Uu)if(t.timerId===e)return!0;return!1}rc(e){return this.tc().then(()=>{this.Uu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.tc()})}sc(e){this.zu.push(e)}Xu(e){const t=this.Uu.indexOf(e);this.Uu.splice(t,1)}}function D0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class Aa extends rf{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new O0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new O0(e),this._firestoreClient=void 0,await e}}}function fO(n,e){const t=typeof n=="object"?n:uT(),r=typeof n=="string"?n:Cc,s=su(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=qk("firestore");i&&dO(s,...i)}return s}function ig(n){if(n._terminated)throw new _e(Y.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||hO(n),n._firestoreClient}function hO(n){var e,t,r;const s=n._freezeSettings(),i=function(a,l,c,u){return new LM(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,RE(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new iO(n._authCredentials,n._appCheckCredentials,n._queue,i,n._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ua(sn.fromBase64String(e))}catch(t){throw new _e(Y.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ua(sn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class of{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new _e(Y.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new nn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class og{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ag{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new _e(Y.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new _e(Y.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return We(this._lat,e._lat)||We(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pO=/^__.*__$/;class mO{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new gi(e,this.data,this.fieldMask,t,this.fieldTransforms):new iu(e,this.data,t,this.fieldTransforms)}}class LE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new gi(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function VE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Re(40011,{oc:n})}}class ug{constructor(e,t,r,s,i,o){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this._c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(e){return new ug(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ac({path:r,cc:!1});return s.lc(e),s}hc(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ac({path:r,cc:!1});return s._c(),s}Pc(e){return this.ac({path:void 0,cc:!0})}Tc(e){return Lc(e,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}_c(){if(this.path)for(let e=0;e<this.path.length;e++)this.lc(this.path.get(e))}lc(e){if(e.length===0)throw this.Tc("Document fields must not be empty");if(VE(this.oc)&&pO.test(e))throw this.Tc('Document fields cannot begin and end with "__"')}}class gO{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ef(e)}dc(e,t,r,s=!1){return new ug({oc:e,methodName:t,Ec:r,path:nn.emptyPath(),cc:!1,Ic:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $E(n){const e=n._freezeSettings(),t=ef(n._databaseId);return new gO(n._databaseId,!!e.ignoreUndefinedProperties,t)}function yO(n,e,t,r,s,i={}){const o=n.dc(i.merge||i.mergeFields?2:0,e,t,s);cg("Data must be an object, but it was:",o,r);const a=BE(r,o);let l,c;if(i.merge)l=new Hn(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const u=[];for(const d of i.mergeFields){const h=kp(e,d,t);if(!o.contains(h))throw new _e(Y.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);zE(u,h)||u.push(h)}l=new Hn(u),c=o.fieldTransforms.filter(d=>l.covers(d.field))}else l=null,c=o.fieldTransforms;return new mO(new Pn(a),l,c)}class af extends og{_toFieldTransform(e){if(e.oc!==2)throw e.oc===1?e.Tc(`${this._methodName}() can only appear at the top level of your update data`):e.Tc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof af}}function vO(n,e,t,r){const s=n.dc(1,e,t);cg("Data must be an object, but it was:",s,r);const i=[],o=Pn.empty();mi(r,(l,c)=>{const u=dg(e,l,t);c=Dr(c);const d=s.hc(u);if(c instanceof af)i.push(u);else{const h=lf(c,d);h!=null&&(i.push(u),o.set(u,h))}});const a=new Hn(i);return new LE(o,a,s.fieldTransforms)}function bO(n,e,t,r,s,i){const o=n.dc(1,e,t),a=[kp(e,r,t)],l=[s];if(i.length%2!=0)throw new _e(Y.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<i.length;h+=2)a.push(kp(e,i[h])),l.push(i[h+1]);const c=[],u=Pn.empty();for(let h=a.length-1;h>=0;--h)if(!zE(c,a[h])){const p=a[h];let m=l[h];m=Dr(m);const y=o.hc(p);if(m instanceof af)c.push(p);else{const v=lf(m,y);v!=null&&(c.push(p),u.set(p,v))}}const d=new Hn(c);return new LE(u,d,o.fieldTransforms)}function lf(n,e){if(FE(n=Dr(n)))return cg("Unsupported field value:",e,n),BE(n,e);if(n instanceof og)return function(r,s){if(!VE(s.oc))throw s.Tc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Tc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.cc&&e.oc!==4)throw e.Tc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const a of r){let l=lf(a,s.Pc(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(n,e)}return function(r,s){if((r=Dr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return oP(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Lt.fromDate(r);return{timestampValue:Rc(s.serializer,i)}}if(r instanceof Lt){const i=new Lt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Rc(s.serializer,i)}}if(r instanceof ag)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ua)return{bytesValue:ZT(s.serializer,r._byteString)};if(r instanceof Rn){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Tc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Um(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof lg)return function(o,a){return{mapValue:{fields:{[IT]:{stringValue:MT},[Ac]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Tc("VectorValues must only contain numeric values.");return Fm(a.serializer,c)})}}}}}}(r,s);throw s.Tc(`Unsupported field value: ${sg(r)}`)}(n,e)}function BE(n,e){const t={};return ST(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mi(n,(r,s)=>{const i=lf(s,e.uc(r));i!=null&&(t[r]=i)}),{mapValue:{fields:t}}}function FE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Lt||n instanceof ag||n instanceof ua||n instanceof Rn||n instanceof og||n instanceof lg)}function cg(n,e,t){if(!FE(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=sg(t);throw r==="an object"?e.Tc(n+" a custom object"):e.Tc(n+" "+r)}}function kp(n,e,t){if((e=Dr(e))instanceof of)return e._internalPath;if(typeof e=="string")return dg(n,e);throw Lc("Field path arguments must be of type string or ",n,!1,void 0,t)}const wO=new RegExp("[~\\*/\\[\\]]");function dg(n,e,t){if(e.search(wO)>=0)throw Lc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new of(...e.split("."))._internalPath}catch{throw Lc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Lc(n,e,t,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new _e(Y.INVALID_ARGUMENT,a+n+l)}function zE(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE{constructor(e,t,r,s,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new TO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(HE("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class TO extends jE{data(){return super.data()}}function HE(n,e){return typeof e=="string"?dg(n,e):e instanceof of?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EO(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new _e(Y.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class SO{convertValue(e,t="none"){switch(ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ct(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Re(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return mi(e,(s,i)=>{r[s]=this.convertValue(i,t)}),r}convertVectorValue(e){var t,r,s;const i=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[Ac].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ct(o.doubleValue));return new lg(i)}convertGeoPoint(e){return new ag(Ct(e.latitude),Ct(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Gd(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ll(e));default:return null}}convertTimestamp(e){const t=ri(e);return new Lt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=gt.fromString(e);it(iE(r),9688,{name:e});const s=new Vl(r.get(1),r.get(3)),i=new Ie(r.popFirst(5));return s.isEqual(t)||ps(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _O(n,e,t){let r;return r=n?n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Za{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class UE extends jE{constructor(e,t,r,s,i,o){super(e,t,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new ic(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(HE("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class ic extends UE{data(e={}){return super.data(e)}}class xO{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Za(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new ic(this._firestore,this._userDataWriter,r.key,r,new Za(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new _e(Y.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new ic(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Za(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new ic(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Za(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:CO(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function CO(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Re(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uu(n){n=Vr(n,Rn);const e=Vr(n.firestore,Aa);return lO(ig(e),n._key).then(t=>MO(e,n,t))}class qE extends SO{constructor(e){super(),this.firestore=e}convertBytes(e){return new ua(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Rn(this.firestore,null,t)}}function WE(n){n=Vr(n,sf);const e=Vr(n.firestore,Aa),t=ig(e),r=new qE(e);return EO(n._query),uO(t,n._query).then(s=>new xO(e,r,n,s))}function AO(n,e,t){n=Vr(n,Rn);const r=Vr(n.firestore,Aa),s=_O(n.converter,e);return fg(r,[yO($E(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,dr.none())])}function kO(n,e,t,...r){n=Vr(n,Rn);const s=Vr(n.firestore,Aa),i=$E(s);let o;return o=typeof(e=Dr(e))=="string"||e instanceof of?bO(i,"updateDoc",n._key,e,t,r):vO(i,"updateDoc",n._key,e),fg(s,[o.toMutation(n._key,dr.exists(!0))])}function IO(n){return fg(Vr(n.firestore,Aa),[new zm(n._key,dr.none())])}function fg(n,e){return function(r,s){const i=new ls;return r.asyncQueue.enqueueAndForget(async()=>QR(await aO(r),s,i)),i.promise}(ig(n),e)}function MO(n,e,t){const r=t.docs.get(e._key),s=new qE(n);return new UE(n,s,e._key,r,new Za(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){Sa=s})(sM),ti(new fs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),a=new Aa(new bM(r.getProvider("auth-internal")),new EM(o,r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new _e(Y.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vl(c.options.projectId,u)}(o,s),o);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),Mr(Bv,Fv,e),Mr(Bv,Fv,"esm2017")})();const GE="@firebase/installations",hg="0.6.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KE=1e4,JE=`w:${hg}`,QE="FIS_v2",PO="https://firebaseinstallations.googleapis.com/v1",RO=60*60*1e3,OO="installations",DO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Zi=new Ud(OO,DO,NO);function YE(n){return n instanceof pi&&n.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE({projectId:n}){return`${PO}/projects/${n}/installations`}function ZE(n){return{token:n.token,requestStatus:2,expiresIn:VO(n.expiresIn),creationTime:Date.now()}}async function eS(n,e){const r=(await e.json()).error;return Zi.create("request-failed",{requestName:n,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function tS({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function LO(n,{refreshToken:e}){const t=tS(n);return t.append("Authorization",$O(e)),t}async function nS(n){const e=await n();return e.status>=500&&e.status<600?n():e}function VO(n){return Number(n.replace("s","000"))}function $O(n){return`${QE} ${n}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BO({appConfig:n,heartbeatServiceProvider:e},{fid:t}){const r=XE(n),s=tS(n),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={fid:t,authVersion:QE,appId:n.appId,sdkVersion:JE},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await nS(()=>fetch(r,a));if(l.ok){const c=await l.json();return{fid:c.fid||t,registrationStatus:2,refreshToken:c.refreshToken,authToken:ZE(c.authToken)}}else throw await eS("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(n){return new Promise(e=>{setTimeout(e,n)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zO=/^[cdef][\w-]{21}$/,Ip="";function jO(){try{const n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;const t=HO(n);return zO.test(t)?t:Ip}catch{return Ip}}function HO(n){return FO(n).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(n){return`${n.appName}!${n.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sS=new Map;function iS(n,e){const t=uf(n);oS(t,e),UO(t,e)}function oS(n,e){const t=sS.get(n);if(t)for(const r of t)r(e)}function UO(n,e){const t=qO();t&&t.postMessage({key:n,fid:e}),WO()}let $i=null;function qO(){return!$i&&"BroadcastChannel"in self&&($i=new BroadcastChannel("[Firebase] FID Change"),$i.onmessage=n=>{oS(n.data.key,n.data.fid)}),$i}function WO(){sS.size===0&&$i&&($i.close(),$i=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GO="firebase-installations-database",KO=1,eo="firebase-installations-store";let lh=null;function pg(){return lh||(lh=aT(GO,KO,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(eo)}}})),lh}async function Vc(n,e){const t=uf(n),s=(await pg()).transaction(eo,"readwrite"),i=s.objectStore(eo),o=await i.get(t);return await i.put(e,t),await s.done,(!o||o.fid!==e.fid)&&iS(n,e.fid),e}async function aS(n){const e=uf(n),r=(await pg()).transaction(eo,"readwrite");await r.objectStore(eo).delete(e),await r.done}async function cf(n,e){const t=uf(n),s=(await pg()).transaction(eo,"readwrite"),i=s.objectStore(eo),o=await i.get(t),a=e(o);return a===void 0?await i.delete(t):await i.put(a,t),await s.done,a&&(!o||o.fid!==a.fid)&&iS(n,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mg(n){let e;const t=await cf(n.appConfig,r=>{const s=JO(r),i=QO(n,s);return e=i.registrationPromise,i.installationEntry});return t.fid===Ip?{installationEntry:await e}:{installationEntry:t,registrationPromise:e}}function JO(n){const e=n||{fid:jO(),registrationStatus:0};return lS(e)}function QO(n,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Zi.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=YO(n,t);return{installationEntry:t,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:XO(n)}:{installationEntry:e}}async function YO(n,e){try{const t=await BO(n,e);return Vc(n.appConfig,t)}catch(t){throw YE(t)&&t.customData.serverCode===409?await aS(n.appConfig):await Vc(n.appConfig,{fid:e.fid,registrationStatus:0}),t}}async function XO(n){let e=await N0(n.appConfig);for(;e.registrationStatus===1;)await rS(100),e=await N0(n.appConfig);if(e.registrationStatus===0){const{installationEntry:t,registrationPromise:r}=await mg(n);return r||t}return e}function N0(n){return cf(n,e=>{if(!e)throw Zi.create("installation-not-found");return lS(e)})}function lS(n){return ZO(n)?{fid:n.fid,registrationStatus:0}:n}function ZO(n){return n.registrationStatus===1&&n.registrationTime+KE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function e2({appConfig:n,heartbeatServiceProvider:e},t){const r=t2(n,t),s=LO(n,t),i=e.getImmediate({optional:!0});if(i){const c=await i.getHeartbeatsHeader();c&&s.append("x-firebase-client",c)}const o={installation:{sdkVersion:JE,appId:n.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await nS(()=>fetch(r,a));if(l.ok){const c=await l.json();return ZE(c)}else throw await eS("Generate Auth Token",l)}function t2(n,{fid:e}){return`${XE(n)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gg(n,e=!1){let t;const r=await cf(n.appConfig,i=>{if(!uS(i))throw Zi.create("not-registered");const o=i.authToken;if(!e&&s2(o))return i;if(o.requestStatus===1)return t=n2(n,e),i;{if(!navigator.onLine)throw Zi.create("app-offline");const a=o2(i);return t=r2(n,a),a}});return t?await t:r.authToken}async function n2(n,e){let t=await L0(n.appConfig);for(;t.authToken.requestStatus===1;)await rS(100),t=await L0(n.appConfig);const r=t.authToken;return r.requestStatus===0?gg(n,e):r}function L0(n){return cf(n,e=>{if(!uS(e))throw Zi.create("not-registered");const t=e.authToken;return a2(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function r2(n,e){try{const t=await e2(n,e),r=Object.assign(Object.assign({},e),{authToken:t});return await Vc(n.appConfig,r),t}catch(t){if(YE(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))await aS(n.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Vc(n.appConfig,r)}throw t}}function uS(n){return n!==void 0&&n.registrationStatus===2}function s2(n){return n.requestStatus===2&&!i2(n)}function i2(n){const e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+RO}function o2(n){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function a2(n){return n.requestStatus===1&&n.requestTime+KE<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l2(n){const e=n,{installationEntry:t,registrationPromise:r}=await mg(e);return r?r.catch(console.error):gg(e).catch(console.error),t.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u2(n,e=!1){const t=n;return await c2(t),(await gg(t,e)).token}async function c2(n){const{registrationPromise:e}=await mg(n);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d2(n){if(!n||!n.options)throw uh("App Configuration");if(!n.name)throw uh("App Name");const e=["projectId","apiKey","appId"];for(const t of e)if(!n.options[t])throw uh(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function uh(n){return Zi.create("missing-app-config-values",{valueName:n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="installations",f2="installations-internal",h2=n=>{const e=n.getProvider("app").getImmediate(),t=d2(e),r=su(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},p2=n=>{const e=n.getProvider("app").getImmediate(),t=su(e,cS).getImmediate();return{getId:()=>l2(t),getToken:s=>u2(t,s)}};function m2(){ti(new fs(cS,h2,"PUBLIC")),ti(new fs(f2,p2,"PRIVATE"))}m2();Mr(GE,hg);Mr(GE,hg,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $c="analytics",g2="firebase_id",y2="origin",v2=60*1e3,b2="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",yg="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const On=new Pm("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w2={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Un=new Ud("analytics","Analytics",w2);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(n){if(!n.startsWith(yg)){const e=Un.create("invalid-gtag-resource",{gtagURL:n});return On.warn(e.message),""}return n}function dS(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function E2(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function S2(n,e){const t=E2("firebase-js-sdk-policy",{createScriptURL:T2}),r=document.createElement("script"),s=`${yg}?l=${n}&id=${e}`;r.src=t?t==null?void 0:t.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function _2(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}async function x2(n,e,t,r,s,i){const o=r[s];try{if(o)await e[o];else{const l=(await dS(t)).find(c=>c.measurementId===s);l&&await e[l.appId]}}catch(a){On.error(a)}n("config",s,i)}async function C2(n,e,t,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const a=await dS(t);for(const l of o){const c=a.find(d=>d.measurementId===l),u=c&&e[c.appId];if(u)i.push(u);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),n("event",r,s||{})}catch(i){On.error(i)}}function A2(n,e,t,r){async function s(i,...o){try{if(i==="event"){const[a,l]=o;await C2(n,e,t,a,l)}else if(i==="config"){const[a,l]=o;await x2(n,e,t,r,a,l)}else if(i==="consent"){const[a,l]=o;n("consent",a,l)}else if(i==="get"){const[a,l,c]=o;n("get",a,l,c)}else if(i==="set"){const[a]=o;n("set",a)}else n(i,...o)}catch(a){On.error(a)}}return s}function k2(n,e,t,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=A2(i,n,e,t),{gtagCore:i,wrappedGtag:window[s]}}function I2(n){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(yg)&&t.src.includes(n))return t;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2=30,P2=1e3;class R2{constructor(e={},t=P2){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const fS=new R2;function O2(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}async function D2(n){var e;const{appId:t,apiKey:r}=n,s={method:"GET",headers:O2(r)},i=b2.replace("{app-id}",t),o=await fetch(i,s);if(o.status!==200&&o.status!==304){let a="";try{const l=await o.json();!((e=l.error)===null||e===void 0)&&e.message&&(a=l.error.message)}catch{}throw Un.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()}async function N2(n,e=fS,t){const{appId:r,apiKey:s,measurementId:i}=n.options;if(!r)throw Un.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw Un.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new $2;return setTimeout(async()=>{a.abort()},v2),hS({appId:r,apiKey:s,measurementId:i},o,a,e)}async function hS(n,{throttleEndTimeMillis:e,backoffCount:t},r,s=fS){var i;const{appId:o,measurementId:a}=n;try{await L2(r,e)}catch(l){if(a)return On.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${l==null?void 0:l.message}]`),{appId:o,measurementId:a};throw l}try{const l=await D2(n);return s.deleteThrottleMetadata(o),l}catch(l){const c=l;if(!V2(c)){if(s.deleteThrottleMetadata(o),a)return On.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:a};throw l}const u=Number((i=c==null?void 0:c.customData)===null||i===void 0?void 0:i.httpStatus)===503?Iv(t,s.intervalMillis,M2):Iv(t,s.intervalMillis),d={throttleEndTimeMillis:Date.now()+u,backoffCount:t+1};return s.setThrottleMetadata(o,d),On.debug(`Calling attemptFetch again in ${u} millis`),hS(n,d,r,s)}}function L2(n,e){return new Promise((t,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(t,s);n.addEventListener(()=>{clearTimeout(i),r(Un.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function V2(n){if(!(n instanceof pi)||!n.customData)return!1;const e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}class $2{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function B2(n,e,t,r,s){if(s&&s.global){n("event",t,r);return}else{const i=await e,o=Object.assign(Object.assign({},r),{send_to:i});n("event",t,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F2(){if(rT())try{await sT()}catch(n){return On.warn(Un.create("indexeddb-unavailable",{errorInfo:n==null?void 0:n.toString()}).message),!1}else return On.warn(Un.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function z2(n,e,t,r,s,i,o){var a;const l=N2(n);l.then(p=>{t[p.measurementId]=p.appId,n.options.measurementId&&p.measurementId!==n.options.measurementId&&On.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${p.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(p=>On.error(p)),e.push(l);const c=F2().then(p=>{if(p)return r.getId()}),[u,d]=await Promise.all([l,c]);I2(i)||S2(i,u.measurementId),s("js",new Date);const h=(a=o==null?void 0:o.config)!==null&&a!==void 0?a:{};return h[y2]="firebase",h.update=!0,d!=null&&(h[g2]=d),s("config",u.measurementId,h),u.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.app=e}_delete(){return delete pl[this.app.options.appId],Promise.resolve()}}let pl={},V0=[];const $0={};let ch="dataLayer",H2="gtag",B0,pS,F0=!1;function U2(){const n=[];if(Qk()&&n.push("This is a browser extension environment."),Xk()||n.push("Cookies are not available."),n.length>0){const e=n.map((r,s)=>`(${s+1}) ${r}`).join(" "),t=Un.create("invalid-analytics-context",{errorInfo:e});On.warn(t.message)}}function q2(n,e,t){U2();const r=n.options.appId;if(!r)throw Un.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)On.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Un.create("no-api-key");if(pl[r]!=null)throw Un.create("already-exists",{id:r});if(!F0){_2(ch);const{wrappedGtag:i,gtagCore:o}=k2(pl,V0,$0,ch,H2);pS=i,B0=o,F0=!0}return pl[r]=z2(n,V0,$0,e,B0,ch,t),new j2(n)}function W2(n=uT()){n=Dr(n);const e=su(n,$c);return e.isInitialized()?e.getImmediate():G2(n)}function G2(n,e={}){const t=su(n,$c);if(t.isInitialized()){const s=t.getImmediate();if(Ol(e,t.getOptions()))return s;throw Un.create("already-initialized")}return t.initialize({options:e})}function K2(n,e,t,r){n=Dr(n),B2(pS,pl[n.app.options.appId],e,t,r).catch(s=>On.error(s))}const z0="@firebase/analytics",j0="0.10.12";function J2(){ti(new fs($c,(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return q2(r,s,t)},"PUBLIC")),ti(new fs("analytics-internal",n,"PRIVATE")),Mr(z0,j0),Mr(z0,j0,"esm2017");function n(e){try{const t=e.getProvider($c).getImmediate();return{logEvent:(r,s,i)=>K2(t,r,s,i)}}catch(t){throw Un.create("interop-component-reg-failed",{reason:t})}}}J2();const Q2={apiKey:"AIzaSyBLe2TOSDo7xeMZh4ARVXbd1FiPCVCUNGo",authDomain:"roteiroviagem-b5116.firebaseapp.com",projectId:"roteiroviagem-b5116",storageBucket:"roteiroviagem-b5116.firebasestorage.app",messagingSenderId:"872269638046",appId:"1:872269638046:web:2718740bd2eba8ba028e8f",measurementId:"G-EV395T3365"},mS=lT(Q2);W2(mS);const bs=fO(mS);async function Y2(){try{const n=ho(bs,uo.site,"header"),e=await uu(n);return e.exists()?e.data():null}catch(n){return console.error("Erro ao buscar header do site:",n),null}}async function X2(){try{const n=ho(bs,uo.site,"footer"),e=await uu(n);return e.exists()?e.data():null}catch(n){return console.error("Erro ao buscar footer do site:",n),null}}async function Z2(n="santiago"){try{return(await WE(NE(bs,uo.trips,n,"itinerary"))).docs.map(r=>({id:r.id,...r.data()})).sort((r,s)=>r.dayNumber-s.dayNumber)}catch(e){return console.error(`Erro ao buscar itinerrio da viagem ${n}:`,e),[]}}async function eD(n="santiago"){try{return(await WE(NE(bs,uo.trips,n,"activities"))).docs.map(t=>({id:t.id,...t.data()}))}catch(e){return console.error(`Erro ao buscar atividades da viagem ${n}:`,e),[]}}async function tD(n="santiago"){try{const e=ho(bs,uo.trips,n,"info","tips"),t=await uu(e);return t.exists()?t.data():null}catch(e){return console.error(`Erro ao buscar dicas da viagem ${n}:`,e),null}}async function nD(n,e="santiago"){try{const t=ho(bs,uo.trips,e,"activities",n),r=await uu(t);return r.exists()?{id:r.id,...r.data()}:null}catch(t){return console.error(`Erro ao buscar atividade ${n}:`,t),null}}async function rD(n,e="santiago"){try{const t=ho(bs,uo.trips,e,"itinerary",n),r=await uu(t);return r.exists()?{id:r.id,...r.data()}:null}catch(t){return console.error(`Erro ao buscar dia ${n}:`,t),null}}const gS="Oxd3Xk7F7XTzfELkxS74",sD=n=>({...n,adminToken:gS}),cu=async(n,e,t)=>{try{const r=ho(bs,n,e);return await AO(r,sD(t)),{success:!0,id:e}}catch(r){return console.error(`Erro ao salvar documento ${e} em ${n}:`,r),{success:!1,error:r}}},yS=async(n,e)=>{try{const t=ho(bs,n,e);return await kO(t,{adminToken:gS}),await IO(t),{success:!0}}catch(t){return console.error(`Erro ao excluir documento ${e} em ${n}:`,t),{success:!1,error:t}}},iD=async n=>await cu("site","header",n),oD=async n=>await cu("site","footer",n),aD=async(n,e)=>await cu(`trips/${n}/info`,"tips",e),lD=async(n,e,t)=>await cu(`trips/${n}/activities`,e,t),uD=async(n,e,t)=>await cu(`trips/${n}/itinerary`,e,t);async function vS(){return Y2()}async function bS(){return X2()}async function df(n="santiago"){return Z2(n)}async function vg(n="santiago"){return eD(n)}async function bg(n="santiago"){return tD(n)}async function cD(n,e="santiago"){return nD(n,e)}async function dD(n,e="santiago"){return rD(n,e)}const mr=(n,e)=>{const t=n.__vccOpts||n;for(const[r,s]of e)t[r]=s;return t},fD={class:"p-4 border-b border-gray-700"},hD={class:"flex items-center justify-between"},pD={class:"mt-4"},mD={__name:"AdminSidebar",props:{isOpen:{type:Boolean,default:!1}},emits:["close"],setup(n){return(e,t)=>{const r=Ta("router-link");return z(),j(Be,null,[w("div",{class:ye(["admin-sidebar fixed inset-y-0 left-0 z-50 w-64 bg-gray-800 text-white transform transition-transform duration-300 ease-in-out",n.isOpen?"translate-x-0":"-translate-x-full"])},[w("div",fD,[w("div",hD,[t[8]||(t[8]=w("h2",{class:"text-xl font-semibold"},"Administrao",-1)),w("button",{onClick:t[0]||(t[0]=s=>e.$emit("close")),class:"text-white p-2 rounded-md hover:bg-gray-700"},t[7]||(t[7]=[w("i",{class:"fas fa-times"},null,-1)]))])]),w("nav",pD,[t[14]||(t[14]=w("div",{class:"px-4 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider"}," Configuraes do Site ",-1)),w("ul",null,[w("li",null,[Ee(r,{to:"/admin/header",class:"block px-4 py-2 hover:bg-gray-700 transition-colors duration-200",onClick:t[1]||(t[1]=s=>e.$emit("close"))},{default:nt(()=>t[9]||(t[9]=[w("i",{class:"fas fa-heading mr-2"},null,-1),St(" Header ")])),_:1})]),w("li",null,[Ee(r,{to:"/admin/footer",class:"block px-4 py-2 hover:bg-gray-700 transition-colors duration-200",onClick:t[2]||(t[2]=s=>e.$emit("close"))},{default:nt(()=>t[10]||(t[10]=[w("i",{class:"fas fa-shoe-prints mr-2"},null,-1),St(" Footer ")])),_:1})])]),t[15]||(t[15]=w("div",{class:"mt-6 px-4 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider"}," Contedo da Viagem ",-1)),w("ul",null,[w("li",null,[Ee(r,{to:"/admin/itinerario",class:"block px-4 py-2 hover:bg-gray-700 transition-colors duration-200",onClick:t[3]||(t[3]=s=>e.$emit("close"))},{default:nt(()=>t[11]||(t[11]=[w("i",{class:"fas fa-calendar-alt mr-2"},null,-1),St(" Itinerrio ")])),_:1})]),w("li",null,[Ee(r,{to:"/admin/atividades",class:"block px-4 py-2 hover:bg-gray-700 transition-colors duration-200",onClick:t[4]||(t[4]=s=>e.$emit("close"))},{default:nt(()=>t[12]||(t[12]=[w("i",{class:"fas fa-hiking mr-2"},null,-1),St(" Atividades ")])),_:1})]),w("li",null,[Ee(r,{to:"/admin/dicas",class:"block px-4 py-2 hover:bg-gray-700 transition-colors duration-200",onClick:t[5]||(t[5]=s=>e.$emit("close"))},{default:nt(()=>t[13]||(t[13]=[w("i",{class:"fas fa-lightbulb mr-2"},null,-1),St(" Dicas ")])),_:1})])])]),t[16]||(t[16]=w("div",{class:"absolute bottom-0 w-full p-4 border-t border-gray-700"},[w("p",{class:"text-sm text-gray-400"},[St(" Logado como "),w("span",{class:"font-semibold"},"Administrador")])],-1))],2),n.isOpen?(z(),j("div",{key:0,onClick:t[6]||(t[6]=s=>e.$emit("close")),class:"fixed inset-0 bg-black bg-opacity-50 z-40"})):he("",!0)],64)}}},gD=mr(mD,[["__scopeId","data-v-8fd32f79"]]),yD={class:"text-3xl sm:text-4xl md:text-5xl lg:text-6xl font-bold mb-4"},vD={class:"text-lg sm:text-xl lg:text-2xl mb-8"},bD={class:"inline-flex bg-white text-blue-900 font-bold rounded-full px-6 py-2"},wD={__name:"header",setup(n){const e=fe(null),t=fe(!1),r=()=>{t.value=!t.value},s=()=>{t.value=!1},i=Oe(()=>!e.value||!e.value.backgroundImage?{}:{backgroundImage:`linear-gradient(rgba(0, 0, 0, 0.5), rgba(0, 0, 0, 0.5)), url(${e.value.backgroundImage})`,backgroundSize:"cover",backgroundPosition:"center"}),o=(a,l)=>{const[c,u,d]=a.split("/"),[h,p,m]=l.split("/"),y=new Date(`${d}-${u}-${c}`),v=y.toLocaleString("pt-BR",{month:"long"}),S=y.getFullYear();return`${parseInt(c)} a ${parseInt(h)} de ${v} de ${S}`};return kt(async()=>{try{e.value=await vS()}catch(a){console.error("Erro ao carregar dados do header:",a)}}),(a,l)=>(z(),j(Be,null,[e.value?(z(),j("header",{key:0,class:"relative hero-bg text-white py-12 sm:py-16 lg:py-24 px-4 sm:px-6 lg:px-8 text-center",style:Ld(i.value)},[w("button",{onClick:r,class:"absolute top-4 left-4 text-white p-2 bg-blue-900 bg-opacity-50 rounded-md hover:bg-opacity-70 transition-all"},l[0]||(l[0]=[w("i",{class:"fas fa-bars text-xl"},null,-1)])),w("h1",yD,Ce(e.value.title),1),w("p",vD,Ce(e.value.subtitle),1),w("div",bD,[l[1]||(l[1]=w("span",{class:"mr-2"},[w("i",{class:"fas fa-calendar-alt"})],-1)),St(" "+Ce(o(e.value.period.start,e.value.period.end)),1)])],4)):he("",!0),Ee(gD,{isOpen:t.value,onClose:s},null,8,["isOpen"])],64))}},TD={id:"visao-geral",class:"p-6"},ED={__name:"TripOverview",setup(n){return(e,t)=>(z(),j("section",TD,t[0]||(t[0]=[QA('<h2 class="text-3xl font-bold text-blue-800 mb-6 pb-2 border-b-2 border-blue-300" data-v-e4bae3b2>Viso Geral da Viagem</h2><div class="bg-white rounded-lg shadow-lg p-6 mb-8" data-v-e4bae3b2><p class="text-lg mb-4" data-v-e4bae3b2>Este roteiro inclui 8 dias no Chile, com base em Santiago, combinando experincias incrveis:</p><ul class="grid grid-cols-1 md:grid-cols-2 gap-4 my-6" data-v-e4bae3b2><li class="flex items-start" data-v-e4bae3b2><div class="flex-shrink-0 h-6 w-6 text-blue-600 mr-2" data-v-e4bae3b2><i class="fas fa-snowflake" data-v-e4bae3b2></i></div><p data-v-e4bae3b2>Aventuras na neve (Valle Nevado e Portillo)</p></li><li class="flex items-start" data-v-e4bae3b2><div class="flex-shrink-0 h-6 w-6 text-blue-600 mr-2" data-v-e4bae3b2><i class="fas fa-city" data-v-e4bae3b2></i></div><p data-v-e4bae3b2>Turismo urbano em Santiago</p></li><li class="flex items-start" data-v-e4bae3b2><div class="flex-shrink-0 h-6 w-6 text-blue-600 mr-2" data-v-e4bae3b2><i class="fas fa-mountain" data-v-e4bae3b2></i></div><p data-v-e4bae3b2>Passeios a Valparaso e Via del Mar</p></li><li class="flex items-start" data-v-e4bae3b2><div class="flex-shrink-0 h-6 w-6 text-blue-600 mr-2" data-v-e4bae3b2><i class="fas fa-wine-glass-alt" data-v-e4bae3b2></i></div><p data-v-e4bae3b2>Degustao em vincolas</p></li><li class="flex items-start" data-v-e4bae3b2><div class="flex-shrink-0 h-6 w-6 text-blue-600 mr-2" data-v-e4bae3b2><i class="fas fa-utensils" data-v-e4bae3b2></i></div><p data-v-e4bae3b2>Experincias gastronmicas</p></li><li class="flex items-start" data-v-e4bae3b2><div class="flex-shrink-0 h-6 w-6 text-blue-600 mr-2" data-v-e4bae3b2><i class="fas fa-church" data-v-e4bae3b2></i></div><p data-v-e4bae3b2>Visitas culturais e religiosas</p></li></ul><div class="text-gray-700 italic" data-v-e4bae3b2><p data-v-e4bae3b2>A probabilidade de neve em Valle Nevado durante nossa visita  classificada como mdia a alta, o que promete uma experincia incrvel com a neve andina.</p></div></div>',2)])))}},SD=mr(ED,[["__scopeId","data-v-e4bae3b2"]]);function H0(n){return n!==null&&typeof n=="object"&&"constructor"in n&&n.constructor===Object}function wg(n,e){n===void 0&&(n={}),e===void 0&&(e={});const t=["__proto__","constructor","prototype"];Object.keys(e).filter(r=>t.indexOf(r)<0).forEach(r=>{typeof n[r]>"u"?n[r]=e[r]:H0(e[r])&&H0(n[r])&&Object.keys(e[r]).length>0&&wg(n[r],e[r])})}const wS={body:{},addEventListener(){},removeEventListener(){},activeElement:{blur(){},nodeName:""},querySelector(){return null},querySelectorAll(){return[]},getElementById(){return null},createEvent(){return{initEvent(){}}},createElement(){return{children:[],childNodes:[],style:{},setAttribute(){},getElementsByTagName(){return[]}}},createElementNS(){return{}},importNode(){return null},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""}};function po(){const n=typeof document<"u"?document:{};return wg(n,wS),n}const _D={document:wS,navigator:{userAgent:""},location:{hash:"",host:"",hostname:"",href:"",origin:"",pathname:"",protocol:"",search:""},history:{replaceState(){},pushState(){},go(){},back(){}},CustomEvent:function(){return this},addEventListener(){},removeEventListener(){},getComputedStyle(){return{getPropertyValue(){return""}}},Image(){},Date(){},screen:{},setTimeout(){},clearTimeout(){},matchMedia(){return{}},requestAnimationFrame(n){return typeof setTimeout>"u"?(n(),null):setTimeout(n,0)},cancelAnimationFrame(n){typeof setTimeout>"u"||clearTimeout(n)}};function kn(){const n=typeof window<"u"?window:{};return wg(n,_D),n}function xD(n){return n===void 0&&(n=""),n.trim().split(" ").filter(e=>!!e.trim())}function CD(n){const e=n;Object.keys(e).forEach(t=>{try{e[t]=null}catch{}try{delete e[t]}catch{}})}function Bc(n,e){return e===void 0&&(e=0),setTimeout(n,e)}function Fc(){return Date.now()}function AD(n){const e=kn();let t;return e.getComputedStyle&&(t=e.getComputedStyle(n,null)),!t&&n.currentStyle&&(t=n.currentStyle),t||(t=n.style),t}function kD(n,e){e===void 0&&(e="x");const t=kn();let r,s,i;const o=AD(n);return t.WebKitCSSMatrix?(s=o.transform||o.webkitTransform,s.split(",").length>6&&(s=s.split(", ").map(a=>a.replace(",",".")).join(", ")),i=new t.WebKitCSSMatrix(s==="none"?"":s)):(i=o.MozTransform||o.OTransform||o.MsTransform||o.msTransform||o.transform||o.getPropertyValue("transform").replace("translate(","matrix(1, 0, 0, 1,"),r=i.toString().split(",")),e==="x"&&(t.WebKitCSSMatrix?s=i.m41:r.length===16?s=parseFloat(r[12]):s=parseFloat(r[4])),e==="y"&&(t.WebKitCSSMatrix?s=i.m42:r.length===16?s=parseFloat(r[13]):s=parseFloat(r[5])),s||0}function Nu(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"}function ID(n){return typeof window<"u"&&typeof window.HTMLElement<"u"?n instanceof HTMLElement:n&&(n.nodeType===1||n.nodeType===11)}function Bn(){const n=Object(arguments.length<=0?void 0:arguments[0]),e=["__proto__","constructor","prototype"];for(let t=1;t<arguments.length;t+=1){const r=t<0||arguments.length<=t?void 0:arguments[t];if(r!=null&&!ID(r)){const s=Object.keys(Object(r)).filter(i=>e.indexOf(i)<0);for(let i=0,o=s.length;i<o;i+=1){const a=s[i],l=Object.getOwnPropertyDescriptor(r,a);l!==void 0&&l.enumerable&&(Nu(n[a])&&Nu(r[a])?r[a].__swiper__?n[a]=r[a]:Bn(n[a],r[a]):!Nu(n[a])&&Nu(r[a])?(n[a]={},r[a].__swiper__?n[a]=r[a]:Bn(n[a],r[a])):n[a]=r[a])}}}return n}function Lu(n,e,t){n.style.setProperty(e,t)}function TS(n){let{swiper:e,targetPosition:t,side:r}=n;const s=kn(),i=-e.translate;let o=null,a;const l=e.params.speed;e.wrapperEl.style.scrollSnapType="none",s.cancelAnimationFrame(e.cssModeFrameID);const c=t>i?"next":"prev",u=(h,p)=>c==="next"&&h>=p||c==="prev"&&h<=p,d=()=>{a=new Date().getTime(),o===null&&(o=a);const h=Math.max(Math.min((a-o)/l,1),0),p=.5-Math.cos(h*Math.PI)/2;let m=i+p*(t-i);if(u(m,t)&&(m=t),e.wrapperEl.scrollTo({[r]:m}),u(m,t)){e.wrapperEl.style.overflow="hidden",e.wrapperEl.style.scrollSnapType="",setTimeout(()=>{e.wrapperEl.style.overflow="",e.wrapperEl.scrollTo({[r]:m})}),s.cancelAnimationFrame(e.cssModeFrameID);return}e.cssModeFrameID=s.requestAnimationFrame(d)};d()}function Ar(n,e){e===void 0&&(e="");const t=kn(),r=[...n.children];return t.HTMLSlotElement&&n instanceof HTMLSlotElement&&r.push(...n.assignedElements()),e?r.filter(s=>s.matches(e)):r}function MD(n,e){const t=[e];for(;t.length>0;){const r=t.shift();if(n===r)return!0;t.push(...r.children,...r.shadowRoot?r.shadowRoot.children:[],...r.assignedElements?r.assignedElements():[])}}function PD(n,e){const t=kn();let r=e.contains(n);return!r&&t.HTMLSlotElement&&e instanceof HTMLSlotElement&&(r=[...e.assignedElements()].includes(n),r||(r=MD(n,e))),r}function zc(n){try{console.warn(n);return}catch{}}function jc(n,e){e===void 0&&(e=[]);const t=document.createElement(n);return t.classList.add(...Array.isArray(e)?e:xD(e)),t}function RD(n,e){const t=[];for(;n.previousElementSibling;){const r=n.previousElementSibling;e?r.matches(e)&&t.push(r):t.push(r),n=r}return t}function OD(n,e){const t=[];for(;n.nextElementSibling;){const r=n.nextElementSibling;e?r.matches(e)&&t.push(r):t.push(r),n=r}return t}function $s(n,e){return kn().getComputedStyle(n,null).getPropertyValue(e)}function Hc(n){let e=n,t;if(e){for(t=0;(e=e.previousSibling)!==null;)e.nodeType===1&&(t+=1);return t}}function ES(n,e){const t=[];let r=n.parentElement;for(;r;)e?r.matches(e)&&t.push(r):t.push(r),r=r.parentElement;return t}function DD(n,e){function t(r){r.target===n&&(e.call(n,r),n.removeEventListener("transitionend",t))}e&&n.addEventListener("transitionend",t)}function Mp(n,e,t){const r=kn();return n[e==="width"?"offsetWidth":"offsetHeight"]+parseFloat(r.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-right":"margin-top"))+parseFloat(r.getComputedStyle(n,null).getPropertyValue(e==="width"?"margin-left":"margin-bottom"))}function zt(n){return(Array.isArray(n)?n:[n]).filter(e=>!!e)}let dh;function ND(){const n=kn(),e=po();return{smoothScroll:e.documentElement&&e.documentElement.style&&"scrollBehavior"in e.documentElement.style,touch:!!("ontouchstart"in n||n.DocumentTouch&&e instanceof n.DocumentTouch)}}function SS(){return dh||(dh=ND()),dh}let fh;function LD(n){let{userAgent:e}=n===void 0?{}:n;const t=SS(),r=kn(),s=r.navigator.platform,i=e||r.navigator.userAgent,o={ios:!1,android:!1},a=r.screen.width,l=r.screen.height,c=i.match(/(Android);?[\s\/]+([\d.]+)?/);let u=i.match(/(iPad).*OS\s([\d_]+)/);const d=i.match(/(iPod)(.*OS\s([\d_]+))?/),h=!u&&i.match(/(iPhone\sOS|iOS)\s([\d_]+)/),p=s==="Win32";let m=s==="MacIntel";const y=["1024x1366","1366x1024","834x1194","1194x834","834x1112","1112x834","768x1024","1024x768","820x1180","1180x820","810x1080","1080x810"];return!u&&m&&t.touch&&y.indexOf(`${a}x${l}`)>=0&&(u=i.match(/(Version)\/([\d.]+)/),u||(u=[0,1,"13_0_0"]),m=!1),c&&!p&&(o.os="android",o.android=!0),(u||h||d)&&(o.os="ios",o.ios=!0),o}function _S(n){return n===void 0&&(n={}),fh||(fh=LD(n)),fh}let hh;function VD(){const n=kn(),e=_S();let t=!1;function r(){const a=n.navigator.userAgent.toLowerCase();return a.indexOf("safari")>=0&&a.indexOf("chrome")<0&&a.indexOf("android")<0}if(r()){const a=String(n.navigator.userAgent);if(a.includes("Version/")){const[l,c]=a.split("Version/")[1].split(" ")[0].split(".").map(u=>Number(u));t=l<16||l===16&&c<2}}const s=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(n.navigator.userAgent),i=r(),o=i||s&&e.ios;return{isSafari:t||i,needPerspectiveFix:t,need3dFix:o,isWebView:s}}function xS(){return hh||(hh=VD()),hh}function $D(n){let{swiper:e,on:t,emit:r}=n;const s=kn();let i=null,o=null;const a=()=>{!e||e.destroyed||!e.initialized||(r("beforeResize"),r("resize"))},l=()=>{!e||e.destroyed||!e.initialized||(i=new ResizeObserver(d=>{o=s.requestAnimationFrame(()=>{const{width:h,height:p}=e;let m=h,y=p;d.forEach(v=>{let{contentBoxSize:S,contentRect:T,target:b}=v;b&&b!==e.el||(m=T?T.width:(S[0]||S).inlineSize,y=T?T.height:(S[0]||S).blockSize)}),(m!==h||y!==p)&&a()})}),i.observe(e.el))},c=()=>{o&&s.cancelAnimationFrame(o),i&&i.unobserve&&e.el&&(i.unobserve(e.el),i=null)},u=()=>{!e||e.destroyed||!e.initialized||r("orientationchange")};t("init",()=>{if(e.params.resizeObserver&&typeof s.ResizeObserver<"u"){l();return}s.addEventListener("resize",a),s.addEventListener("orientationchange",u)}),t("destroy",()=>{c(),s.removeEventListener("resize",a),s.removeEventListener("orientationchange",u)})}function BD(n){let{swiper:e,extendParams:t,on:r,emit:s}=n;const i=[],o=kn(),a=function(u,d){d===void 0&&(d={});const h=o.MutationObserver||o.WebkitMutationObserver,p=new h(m=>{if(e.__preventObserver__)return;if(m.length===1){s("observerUpdate",m[0]);return}const y=function(){s("observerUpdate",m[0])};o.requestAnimationFrame?o.requestAnimationFrame(y):o.setTimeout(y,0)});p.observe(u,{attributes:typeof d.attributes>"u"?!0:d.attributes,childList:e.isElement||(typeof d.childList>"u"?!0:d).childList,characterData:typeof d.characterData>"u"?!0:d.characterData}),i.push(p)},l=()=>{if(e.params.observer){if(e.params.observeParents){const u=ES(e.hostEl);for(let d=0;d<u.length;d+=1)a(u[d])}a(e.hostEl,{childList:e.params.observeSlideChildren}),a(e.wrapperEl,{attributes:!1})}},c=()=>{i.forEach(u=>{u.disconnect()}),i.splice(0,i.length)};t({observer:!1,observeParents:!1,observeSlideChildren:!1}),r("init",l),r("destroy",c)}var FD={on(n,e,t){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;const s=t?"unshift":"push";return n.split(" ").forEach(i=>{r.eventsListeners[i]||(r.eventsListeners[i]=[]),r.eventsListeners[i][s](e)}),r},once(n,e,t){const r=this;if(!r.eventsListeners||r.destroyed||typeof e!="function")return r;function s(){r.off(n,s),s.__emitterProxy&&delete s.__emitterProxy;for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];e.apply(r,o)}return s.__emitterProxy=e,r.on(n,s,t)},onAny(n,e){const t=this;if(!t.eventsListeners||t.destroyed||typeof n!="function")return t;const r=e?"unshift":"push";return t.eventsAnyListeners.indexOf(n)<0&&t.eventsAnyListeners[r](n),t},offAny(n){const e=this;if(!e.eventsListeners||e.destroyed||!e.eventsAnyListeners)return e;const t=e.eventsAnyListeners.indexOf(n);return t>=0&&e.eventsAnyListeners.splice(t,1),e},off(n,e){const t=this;return!t.eventsListeners||t.destroyed||!t.eventsListeners||n.split(" ").forEach(r=>{typeof e>"u"?t.eventsListeners[r]=[]:t.eventsListeners[r]&&t.eventsListeners[r].forEach((s,i)=>{(s===e||s.__emitterProxy&&s.__emitterProxy===e)&&t.eventsListeners[r].splice(i,1)})}),t},emit(){const n=this;if(!n.eventsListeners||n.destroyed||!n.eventsListeners)return n;let e,t,r;for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return typeof i[0]=="string"||Array.isArray(i[0])?(e=i[0],t=i.slice(1,i.length),r=n):(e=i[0].events,t=i[0].data,r=i[0].context||n),t.unshift(r),(Array.isArray(e)?e:e.split(" ")).forEach(l=>{n.eventsAnyListeners&&n.eventsAnyListeners.length&&n.eventsAnyListeners.forEach(c=>{c.apply(r,[l,...t])}),n.eventsListeners&&n.eventsListeners[l]&&n.eventsListeners[l].forEach(c=>{c.apply(r,t)})}),n}};function zD(){const n=this;let e,t;const r=n.el;typeof n.params.width<"u"&&n.params.width!==null?e=n.params.width:e=r.clientWidth,typeof n.params.height<"u"&&n.params.height!==null?t=n.params.height:t=r.clientHeight,!(e===0&&n.isHorizontal()||t===0&&n.isVertical())&&(e=e-parseInt($s(r,"padding-left")||0,10)-parseInt($s(r,"padding-right")||0,10),t=t-parseInt($s(r,"padding-top")||0,10)-parseInt($s(r,"padding-bottom")||0,10),Number.isNaN(e)&&(e=0),Number.isNaN(t)&&(t=0),Object.assign(n,{width:e,height:t,size:n.isHorizontal()?e:t}))}function jD(){const n=this;function e(M,I){return parseFloat(M.getPropertyValue(n.getDirectionLabel(I))||0)}const t=n.params,{wrapperEl:r,slidesEl:s,size:i,rtlTranslate:o,wrongRTL:a}=n,l=n.virtual&&t.virtual.enabled,c=l?n.virtual.slides.length:n.slides.length,u=Ar(s,`.${n.params.slideClass}, swiper-slide`),d=l?n.virtual.slides.length:u.length;let h=[];const p=[],m=[];let y=t.slidesOffsetBefore;typeof y=="function"&&(y=t.slidesOffsetBefore.call(n));let v=t.slidesOffsetAfter;typeof v=="function"&&(v=t.slidesOffsetAfter.call(n));const S=n.snapGrid.length,T=n.slidesGrid.length;let b=t.spaceBetween,C=-y,O=0,N=0;if(typeof i>"u")return;typeof b=="string"&&b.indexOf("%")>=0?b=parseFloat(b.replace("%",""))/100*i:typeof b=="string"&&(b=parseFloat(b)),n.virtualSize=-b,u.forEach(M=>{o?M.style.marginLeft="":M.style.marginRight="",M.style.marginBottom="",M.style.marginTop=""}),t.centeredSlides&&t.cssMode&&(Lu(r,"--swiper-centered-offset-before",""),Lu(r,"--swiper-centered-offset-after",""));const A=t.grid&&t.grid.rows>1&&n.grid;A?n.grid.initSlides(u):n.grid&&n.grid.unsetSlides();let x;const _=t.slidesPerView==="auto"&&t.breakpoints&&Object.keys(t.breakpoints).filter(M=>typeof t.breakpoints[M].slidesPerView<"u").length>0;for(let M=0;M<d;M+=1){x=0;let I;if(u[M]&&(I=u[M]),A&&n.grid.updateSlide(M,I,u),!(u[M]&&$s(I,"display")==="none")){if(t.slidesPerView==="auto"){_&&(u[M].style[n.getDirectionLabel("width")]="");const P=getComputedStyle(I),k=I.style.transform,K=I.style.webkitTransform;if(k&&(I.style.transform="none"),K&&(I.style.webkitTransform="none"),t.roundLengths)x=n.isHorizontal()?Mp(I,"width"):Mp(I,"height");else{const le=e(P,"width"),J=e(P,"padding-left"),ee=e(P,"padding-right"),ue=e(P,"margin-left"),be=e(P,"margin-right"),He=P.getPropertyValue("box-sizing");if(He&&He==="border-box")x=le+ue+be;else{const{clientWidth:Pe,offsetWidth:$e}=I;x=le+J+ee+ue+be+($e-Pe)}}k&&(I.style.transform=k),K&&(I.style.webkitTransform=K),t.roundLengths&&(x=Math.floor(x))}else x=(i-(t.slidesPerView-1)*b)/t.slidesPerView,t.roundLengths&&(x=Math.floor(x)),u[M]&&(u[M].style[n.getDirectionLabel("width")]=`${x}px`);u[M]&&(u[M].swiperSlideSize=x),m.push(x),t.centeredSlides?(C=C+x/2+O/2+b,O===0&&M!==0&&(C=C-i/2-b),M===0&&(C=C-i/2-b),Math.abs(C)<1/1e3&&(C=0),t.roundLengths&&(C=Math.floor(C)),N%t.slidesPerGroup===0&&h.push(C),p.push(C)):(t.roundLengths&&(C=Math.floor(C)),(N-Math.min(n.params.slidesPerGroupSkip,N))%n.params.slidesPerGroup===0&&h.push(C),p.push(C),C=C+x+b),n.virtualSize+=x+b,O=x,N+=1}}if(n.virtualSize=Math.max(n.virtualSize,i)+v,o&&a&&(t.effect==="slide"||t.effect==="coverflow")&&(r.style.width=`${n.virtualSize+b}px`),t.setWrapperSize&&(r.style[n.getDirectionLabel("width")]=`${n.virtualSize+b}px`),A&&n.grid.updateWrapperSize(x,h),!t.centeredSlides){const M=[];for(let I=0;I<h.length;I+=1){let P=h[I];t.roundLengths&&(P=Math.floor(P)),h[I]<=n.virtualSize-i&&M.push(P)}h=M,Math.floor(n.virtualSize-i)-Math.floor(h[h.length-1])>1&&h.push(n.virtualSize-i)}if(l&&t.loop){const M=m[0]+b;if(t.slidesPerGroup>1){const I=Math.ceil((n.virtual.slidesBefore+n.virtual.slidesAfter)/t.slidesPerGroup),P=M*t.slidesPerGroup;for(let k=0;k<I;k+=1)h.push(h[h.length-1]+P)}for(let I=0;I<n.virtual.slidesBefore+n.virtual.slidesAfter;I+=1)t.slidesPerGroup===1&&h.push(h[h.length-1]+M),p.push(p[p.length-1]+M),n.virtualSize+=M}if(h.length===0&&(h=[0]),b!==0){const M=n.isHorizontal()&&o?"marginLeft":n.getDirectionLabel("marginRight");u.filter((I,P)=>!t.cssMode||t.loop?!0:P!==u.length-1).forEach(I=>{I.style[M]=`${b}px`})}if(t.centeredSlides&&t.centeredSlidesBounds){let M=0;m.forEach(P=>{M+=P+(b||0)}),M-=b;const I=M>i?M-i:0;h=h.map(P=>P<=0?-y:P>I?I+v:P)}if(t.centerInsufficientSlides){let M=0;m.forEach(P=>{M+=P+(b||0)}),M-=b;const I=(t.slidesOffsetBefore||0)+(t.slidesOffsetAfter||0);if(M+I<i){const P=(i-M-I)/2;h.forEach((k,K)=>{h[K]=k-P}),p.forEach((k,K)=>{p[K]=k+P})}}if(Object.assign(n,{slides:u,snapGrid:h,slidesGrid:p,slidesSizesGrid:m}),t.centeredSlides&&t.cssMode&&!t.centeredSlidesBounds){Lu(r,"--swiper-centered-offset-before",`${-h[0]}px`),Lu(r,"--swiper-centered-offset-after",`${n.size/2-m[m.length-1]/2}px`);const M=-n.snapGrid[0],I=-n.slidesGrid[0];n.snapGrid=n.snapGrid.map(P=>P+M),n.slidesGrid=n.slidesGrid.map(P=>P+I)}if(d!==c&&n.emit("slidesLengthChange"),h.length!==S&&(n.params.watchOverflow&&n.checkOverflow(),n.emit("snapGridLengthChange")),p.length!==T&&n.emit("slidesGridLengthChange"),t.watchSlidesProgress&&n.updateSlidesOffset(),n.emit("slidesUpdated"),!l&&!t.cssMode&&(t.effect==="slide"||t.effect==="fade")){const M=`${t.containerModifierClass}backface-hidden`,I=n.el.classList.contains(M);d<=t.maxBackfaceHiddenSlides?I||n.el.classList.add(M):I&&n.el.classList.remove(M)}}function HD(n){const e=this,t=[],r=e.virtual&&e.params.virtual.enabled;let s=0,i;typeof n=="number"?e.setTransition(n):n===!0&&e.setTransition(e.params.speed);const o=a=>r?e.slides[e.getSlideIndexByData(a)]:e.slides[a];if(e.params.slidesPerView!=="auto"&&e.params.slidesPerView>1)if(e.params.centeredSlides)(e.visibleSlides||[]).forEach(a=>{t.push(a)});else for(i=0;i<Math.ceil(e.params.slidesPerView);i+=1){const a=e.activeIndex+i;if(a>e.slides.length&&!r)break;t.push(o(a))}else t.push(o(e.activeIndex));for(i=0;i<t.length;i+=1)if(typeof t[i]<"u"){const a=t[i].offsetHeight;s=a>s?a:s}(s||s===0)&&(e.wrapperEl.style.height=`${s}px`)}function UD(){const n=this,e=n.slides,t=n.isElement?n.isHorizontal()?n.wrapperEl.offsetLeft:n.wrapperEl.offsetTop:0;for(let r=0;r<e.length;r+=1)e[r].swiperSlideOffset=(n.isHorizontal()?e[r].offsetLeft:e[r].offsetTop)-t-n.cssOverflowAdjustment()}const U0=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function qD(n){n===void 0&&(n=this&&this.translate||0);const e=this,t=e.params,{slides:r,rtlTranslate:s,snapGrid:i}=e;if(r.length===0)return;typeof r[0].swiperSlideOffset>"u"&&e.updateSlidesOffset();let o=-n;s&&(o=n),e.visibleSlidesIndexes=[],e.visibleSlides=[];let a=t.spaceBetween;typeof a=="string"&&a.indexOf("%")>=0?a=parseFloat(a.replace("%",""))/100*e.size:typeof a=="string"&&(a=parseFloat(a));for(let l=0;l<r.length;l+=1){const c=r[l];let u=c.swiperSlideOffset;t.cssMode&&t.centeredSlides&&(u-=r[0].swiperSlideOffset);const d=(o+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+a),h=(o-i[0]+(t.centeredSlides?e.minTranslate():0)-u)/(c.swiperSlideSize+a),p=-(o-u),m=p+e.slidesSizesGrid[l],y=p>=0&&p<=e.size-e.slidesSizesGrid[l],v=p>=0&&p<e.size-1||m>1&&m<=e.size||p<=0&&m>=e.size;v&&(e.visibleSlides.push(c),e.visibleSlidesIndexes.push(l)),U0(c,v,t.slideVisibleClass),U0(c,y,t.slideFullyVisibleClass),c.progress=s?-d:d,c.originalProgress=s?-h:h}}function WD(n){const e=this;if(typeof n>"u"){const u=e.rtlTranslate?-1:1;n=e&&e.translate&&e.translate*u||0}const t=e.params,r=e.maxTranslate()-e.minTranslate();let{progress:s,isBeginning:i,isEnd:o,progressLoop:a}=e;const l=i,c=o;if(r===0)s=0,i=!0,o=!0;else{s=(n-e.minTranslate())/r;const u=Math.abs(n-e.minTranslate())<1,d=Math.abs(n-e.maxTranslate())<1;i=u||s<=0,o=d||s>=1,u&&(s=0),d&&(s=1)}if(t.loop){const u=e.getSlideIndexByData(0),d=e.getSlideIndexByData(e.slides.length-1),h=e.slidesGrid[u],p=e.slidesGrid[d],m=e.slidesGrid[e.slidesGrid.length-1],y=Math.abs(n);y>=h?a=(y-h)/m:a=(y+m-p)/m,a>1&&(a-=1)}Object.assign(e,{progress:s,progressLoop:a,isBeginning:i,isEnd:o}),(t.watchSlidesProgress||t.centeredSlides&&t.autoHeight)&&e.updateSlidesProgress(n),i&&!l&&e.emit("reachBeginning toEdge"),o&&!c&&e.emit("reachEnd toEdge"),(l&&!i||c&&!o)&&e.emit("fromEdge"),e.emit("progress",s)}const ph=(n,e,t)=>{e&&!n.classList.contains(t)?n.classList.add(t):!e&&n.classList.contains(t)&&n.classList.remove(t)};function GD(){const n=this,{slides:e,params:t,slidesEl:r,activeIndex:s}=n,i=n.virtual&&t.virtual.enabled,o=n.grid&&t.grid&&t.grid.rows>1,a=d=>Ar(r,`.${t.slideClass}${d}, swiper-slide${d}`)[0];let l,c,u;if(i)if(t.loop){let d=s-n.virtual.slidesBefore;d<0&&(d=n.virtual.slides.length+d),d>=n.virtual.slides.length&&(d-=n.virtual.slides.length),l=a(`[data-swiper-slide-index="${d}"]`)}else l=a(`[data-swiper-slide-index="${s}"]`);else o?(l=e.find(d=>d.column===s),u=e.find(d=>d.column===s+1),c=e.find(d=>d.column===s-1)):l=e[s];l&&(o||(u=OD(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!u&&(u=e[0]),c=RD(l,`.${t.slideClass}, swiper-slide`)[0],t.loop&&!c===0&&(c=e[e.length-1]))),e.forEach(d=>{ph(d,d===l,t.slideActiveClass),ph(d,d===u,t.slideNextClass),ph(d,d===c,t.slidePrevClass)}),n.emitSlidesClasses()}const oc=(n,e)=>{if(!n||n.destroyed||!n.params)return;const t=()=>n.isElement?"swiper-slide":`.${n.params.slideClass}`,r=e.closest(t());if(r){let s=r.querySelector(`.${n.params.lazyPreloaderClass}`);!s&&n.isElement&&(r.shadowRoot?s=r.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`):requestAnimationFrame(()=>{r.shadowRoot&&(s=r.shadowRoot.querySelector(`.${n.params.lazyPreloaderClass}`),s&&s.remove())})),s&&s.remove()}},mh=(n,e)=>{if(!n.slides[e])return;const t=n.slides[e].querySelector('[loading="lazy"]');t&&t.removeAttribute("loading")},Pp=n=>{if(!n||n.destroyed||!n.params)return;let e=n.params.lazyPreloadPrevNext;const t=n.slides.length;if(!t||!e||e<0)return;e=Math.min(e,t);const r=n.params.slidesPerView==="auto"?n.slidesPerViewDynamic():Math.ceil(n.params.slidesPerView),s=n.activeIndex;if(n.params.grid&&n.params.grid.rows>1){const o=s,a=[o-e];a.push(...Array.from({length:e}).map((l,c)=>o+r+c)),n.slides.forEach((l,c)=>{a.includes(l.column)&&mh(n,c)});return}const i=s+r-1;if(n.params.rewind||n.params.loop)for(let o=s-e;o<=i+e;o+=1){const a=(o%t+t)%t;(a<s||a>i)&&mh(n,a)}else for(let o=Math.max(s-e,0);o<=Math.min(i+e,t-1);o+=1)o!==s&&(o>i||o<s)&&mh(n,o)};function KD(n){const{slidesGrid:e,params:t}=n,r=n.rtlTranslate?n.translate:-n.translate;let s;for(let i=0;i<e.length;i+=1)typeof e[i+1]<"u"?r>=e[i]&&r<e[i+1]-(e[i+1]-e[i])/2?s=i:r>=e[i]&&r<e[i+1]&&(s=i+1):r>=e[i]&&(s=i);return t.normalizeSlideIndex&&(s<0||typeof s>"u")&&(s=0),s}function JD(n){const e=this,t=e.rtlTranslate?e.translate:-e.translate,{snapGrid:r,params:s,activeIndex:i,realIndex:o,snapIndex:a}=e;let l=n,c;const u=p=>{let m=p-e.virtual.slidesBefore;return m<0&&(m=e.virtual.slides.length+m),m>=e.virtual.slides.length&&(m-=e.virtual.slides.length),m};if(typeof l>"u"&&(l=KD(e)),r.indexOf(t)>=0)c=r.indexOf(t);else{const p=Math.min(s.slidesPerGroupSkip,l);c=p+Math.floor((l-p)/s.slidesPerGroup)}if(c>=r.length&&(c=r.length-1),l===i&&!e.params.loop){c!==a&&(e.snapIndex=c,e.emit("snapIndexChange"));return}if(l===i&&e.params.loop&&e.virtual&&e.params.virtual.enabled){e.realIndex=u(l);return}const d=e.grid&&s.grid&&s.grid.rows>1;let h;if(e.virtual&&s.virtual.enabled&&s.loop)h=u(l);else if(d){const p=e.slides.find(y=>y.column===l);let m=parseInt(p.getAttribute("data-swiper-slide-index"),10);Number.isNaN(m)&&(m=Math.max(e.slides.indexOf(p),0)),h=Math.floor(m/s.grid.rows)}else if(e.slides[l]){const p=e.slides[l].getAttribute("data-swiper-slide-index");p?h=parseInt(p,10):h=l}else h=l;Object.assign(e,{previousSnapIndex:a,snapIndex:c,previousRealIndex:o,realIndex:h,previousIndex:i,activeIndex:l}),e.initialized&&Pp(e),e.emit("activeIndexChange"),e.emit("snapIndexChange"),(e.initialized||e.params.runCallbacksOnInit)&&(o!==h&&e.emit("realIndexChange"),e.emit("slideChange"))}function QD(n,e){const t=this,r=t.params;let s=n.closest(`.${r.slideClass}, swiper-slide`);!s&&t.isElement&&e&&e.length>1&&e.includes(n)&&[...e.slice(e.indexOf(n)+1,e.length)].forEach(a=>{!s&&a.matches&&a.matches(`.${r.slideClass}, swiper-slide`)&&(s=a)});let i=!1,o;if(s){for(let a=0;a<t.slides.length;a+=1)if(t.slides[a]===s){i=!0,o=a;break}}if(s&&i)t.clickedSlide=s,t.virtual&&t.params.virtual.enabled?t.clickedIndex=parseInt(s.getAttribute("data-swiper-slide-index"),10):t.clickedIndex=o;else{t.clickedSlide=void 0,t.clickedIndex=void 0;return}r.slideToClickedSlide&&t.clickedIndex!==void 0&&t.clickedIndex!==t.activeIndex&&t.slideToClickedSlide()}var YD={updateSize:zD,updateSlides:jD,updateAutoHeight:HD,updateSlidesOffset:UD,updateSlidesProgress:qD,updateProgress:WD,updateSlidesClasses:GD,updateActiveIndex:JD,updateClickedSlide:QD};function XD(n){n===void 0&&(n=this.isHorizontal()?"x":"y");const e=this,{params:t,rtlTranslate:r,translate:s,wrapperEl:i}=e;if(t.virtualTranslate)return r?-s:s;if(t.cssMode)return s;let o=kD(i,n);return o+=e.cssOverflowAdjustment(),r&&(o=-o),o||0}function ZD(n,e){const t=this,{rtlTranslate:r,params:s,wrapperEl:i,progress:o}=t;let a=0,l=0;const c=0;t.isHorizontal()?a=r?-n:n:l=n,s.roundLengths&&(a=Math.floor(a),l=Math.floor(l)),t.previousTranslate=t.translate,t.translate=t.isHorizontal()?a:l,s.cssMode?i[t.isHorizontal()?"scrollLeft":"scrollTop"]=t.isHorizontal()?-a:-l:s.virtualTranslate||(t.isHorizontal()?a-=t.cssOverflowAdjustment():l-=t.cssOverflowAdjustment(),i.style.transform=`translate3d(${a}px, ${l}px, ${c}px)`);let u;const d=t.maxTranslate()-t.minTranslate();d===0?u=0:u=(n-t.minTranslate())/d,u!==o&&t.updateProgress(n),t.emit("setTranslate",t.translate,e)}function eN(){return-this.snapGrid[0]}function tN(){return-this.snapGrid[this.snapGrid.length-1]}function nN(n,e,t,r,s){n===void 0&&(n=0),e===void 0&&(e=this.params.speed),t===void 0&&(t=!0),r===void 0&&(r=!0);const i=this,{params:o,wrapperEl:a}=i;if(i.animating&&o.preventInteractionOnTransition)return!1;const l=i.minTranslate(),c=i.maxTranslate();let u;if(r&&n>l?u=l:r&&n<c?u=c:u=n,i.updateProgress(u),o.cssMode){const d=i.isHorizontal();if(e===0)a[d?"scrollLeft":"scrollTop"]=-u;else{if(!i.support.smoothScroll)return TS({swiper:i,targetPosition:-u,side:d?"left":"top"}),!0;a.scrollTo({[d?"left":"top"]:-u,behavior:"smooth"})}return!0}return e===0?(i.setTransition(0),i.setTranslate(u),t&&(i.emit("beforeTransitionStart",e,s),i.emit("transitionEnd"))):(i.setTransition(e),i.setTranslate(u),t&&(i.emit("beforeTransitionStart",e,s),i.emit("transitionStart")),i.animating||(i.animating=!0,i.onTranslateToWrapperTransitionEnd||(i.onTranslateToWrapperTransitionEnd=function(h){!i||i.destroyed||h.target===this&&(i.wrapperEl.removeEventListener("transitionend",i.onTranslateToWrapperTransitionEnd),i.onTranslateToWrapperTransitionEnd=null,delete i.onTranslateToWrapperTransitionEnd,i.animating=!1,t&&i.emit("transitionEnd"))}),i.wrapperEl.addEventListener("transitionend",i.onTranslateToWrapperTransitionEnd))),!0}var rN={getTranslate:XD,setTranslate:ZD,minTranslate:eN,maxTranslate:tN,translateTo:nN};function sN(n,e){const t=this;t.params.cssMode||(t.wrapperEl.style.transitionDuration=`${n}ms`,t.wrapperEl.style.transitionDelay=n===0?"0ms":""),t.emit("setTransition",n,e)}function CS(n){let{swiper:e,runCallbacks:t,direction:r,step:s}=n;const{activeIndex:i,previousIndex:o}=e;let a=r;if(a||(i>o?a="next":i<o?a="prev":a="reset"),e.emit(`transition${s}`),t&&i!==o){if(a==="reset"){e.emit(`slideResetTransition${s}`);return}e.emit(`slideChangeTransition${s}`),a==="next"?e.emit(`slideNextTransition${s}`):e.emit(`slidePrevTransition${s}`)}}function iN(n,e){n===void 0&&(n=!0);const t=this,{params:r}=t;r.cssMode||(r.autoHeight&&t.updateAutoHeight(),CS({swiper:t,runCallbacks:n,direction:e,step:"Start"}))}function oN(n,e){n===void 0&&(n=!0);const t=this,{params:r}=t;t.animating=!1,!r.cssMode&&(t.setTransition(0),CS({swiper:t,runCallbacks:n,direction:e,step:"End"}))}var aN={setTransition:sN,transitionStart:iN,transitionEnd:oN};function lN(n,e,t,r,s){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const i=this;let o=n;o<0&&(o=0);const{params:a,snapGrid:l,slidesGrid:c,previousIndex:u,activeIndex:d,rtlTranslate:h,wrapperEl:p,enabled:m}=i;if(!m&&!r&&!s||i.destroyed||i.animating&&a.preventInteractionOnTransition)return!1;typeof e>"u"&&(e=i.params.speed);const y=Math.min(i.params.slidesPerGroupSkip,o);let v=y+Math.floor((o-y)/i.params.slidesPerGroup);v>=l.length&&(v=l.length-1);const S=-l[v];if(a.normalizeSlideIndex)for(let A=0;A<c.length;A+=1){const x=-Math.floor(S*100),_=Math.floor(c[A]*100),M=Math.floor(c[A+1]*100);typeof c[A+1]<"u"?x>=_&&x<M-(M-_)/2?o=A:x>=_&&x<M&&(o=A+1):x>=_&&(o=A)}if(i.initialized&&o!==d&&(!i.allowSlideNext&&(h?S>i.translate&&S>i.minTranslate():S<i.translate&&S<i.minTranslate())||!i.allowSlidePrev&&S>i.translate&&S>i.maxTranslate()&&(d||0)!==o))return!1;o!==(u||0)&&t&&i.emit("beforeSlideChangeStart"),i.updateProgress(S);let T;o>d?T="next":o<d?T="prev":T="reset";const b=i.virtual&&i.params.virtual.enabled;if(!(b&&s)&&(h&&-S===i.translate||!h&&S===i.translate))return i.updateActiveIndex(o),a.autoHeight&&i.updateAutoHeight(),i.updateSlidesClasses(),a.effect!=="slide"&&i.setTranslate(S),T!=="reset"&&(i.transitionStart(t,T),i.transitionEnd(t,T)),!1;if(a.cssMode){const A=i.isHorizontal(),x=h?S:-S;if(e===0)b&&(i.wrapperEl.style.scrollSnapType="none",i._immediateVirtual=!0),b&&!i._cssModeVirtualInitialSet&&i.params.initialSlide>0?(i._cssModeVirtualInitialSet=!0,requestAnimationFrame(()=>{p[A?"scrollLeft":"scrollTop"]=x})):p[A?"scrollLeft":"scrollTop"]=x,b&&requestAnimationFrame(()=>{i.wrapperEl.style.scrollSnapType="",i._immediateVirtual=!1});else{if(!i.support.smoothScroll)return TS({swiper:i,targetPosition:x,side:A?"left":"top"}),!0;p.scrollTo({[A?"left":"top"]:x,behavior:"smooth"})}return!0}const N=xS().isSafari;return b&&!s&&N&&i.isElement&&i.virtual.update(!1,!1,o),i.setTransition(e),i.setTranslate(S),i.updateActiveIndex(o),i.updateSlidesClasses(),i.emit("beforeTransitionStart",e,r),i.transitionStart(t,T),e===0?i.transitionEnd(t,T):i.animating||(i.animating=!0,i.onSlideToWrapperTransitionEnd||(i.onSlideToWrapperTransitionEnd=function(x){!i||i.destroyed||x.target===this&&(i.wrapperEl.removeEventListener("transitionend",i.onSlideToWrapperTransitionEnd),i.onSlideToWrapperTransitionEnd=null,delete i.onSlideToWrapperTransitionEnd,i.transitionEnd(t,T))}),i.wrapperEl.addEventListener("transitionend",i.onSlideToWrapperTransitionEnd)),!0}function uN(n,e,t,r){n===void 0&&(n=0),t===void 0&&(t=!0),typeof n=="string"&&(n=parseInt(n,10));const s=this;if(s.destroyed)return;typeof e>"u"&&(e=s.params.speed);const i=s.grid&&s.params.grid&&s.params.grid.rows>1;let o=n;if(s.params.loop)if(s.virtual&&s.params.virtual.enabled)o=o+s.virtual.slidesBefore;else{let a;if(i){const h=o*s.params.grid.rows;a=s.slides.find(p=>p.getAttribute("data-swiper-slide-index")*1===h).column}else a=s.getSlideIndexByData(o);const l=i?Math.ceil(s.slides.length/s.params.grid.rows):s.slides.length,{centeredSlides:c}=s.params;let u=s.params.slidesPerView;u==="auto"?u=s.slidesPerViewDynamic():(u=Math.ceil(parseFloat(s.params.slidesPerView,10)),c&&u%2===0&&(u=u+1));let d=l-a<u;if(c&&(d=d||a<Math.ceil(u/2)),r&&c&&s.params.slidesPerView!=="auto"&&!i&&(d=!1),d){const h=c?a<s.activeIndex?"prev":"next":a-s.activeIndex-1<s.params.slidesPerView?"next":"prev";s.loopFix({direction:h,slideTo:!0,activeSlideIndex:h==="next"?a+1:a-l+1,slideRealIndex:h==="next"?s.realIndex:void 0})}if(i){const h=o*s.params.grid.rows;o=s.slides.find(p=>p.getAttribute("data-swiper-slide-index")*1===h).column}else o=s.getSlideIndexByData(o)}return requestAnimationFrame(()=>{s.slideTo(o,e,t,r)}),s}function cN(n,e,t){e===void 0&&(e=!0);const r=this,{enabled:s,params:i,animating:o}=r;if(!s||r.destroyed)return r;typeof n>"u"&&(n=r.params.speed);let a=i.slidesPerGroup;i.slidesPerView==="auto"&&i.slidesPerGroup===1&&i.slidesPerGroupAuto&&(a=Math.max(r.slidesPerViewDynamic("current",!0),1));const l=r.activeIndex<i.slidesPerGroupSkip?1:a,c=r.virtual&&i.virtual.enabled;if(i.loop){if(o&&!c&&i.loopPreventsSliding)return!1;if(r.loopFix({direction:"next"}),r._clientLeft=r.wrapperEl.clientLeft,r.activeIndex===r.slides.length-1&&i.cssMode)return requestAnimationFrame(()=>{r.slideTo(r.activeIndex+l,n,e,t)}),!0}return i.rewind&&r.isEnd?r.slideTo(0,n,e,t):r.slideTo(r.activeIndex+l,n,e,t)}function dN(n,e,t){e===void 0&&(e=!0);const r=this,{params:s,snapGrid:i,slidesGrid:o,rtlTranslate:a,enabled:l,animating:c}=r;if(!l||r.destroyed)return r;typeof n>"u"&&(n=r.params.speed);const u=r.virtual&&s.virtual.enabled;if(s.loop){if(c&&!u&&s.loopPreventsSliding)return!1;r.loopFix({direction:"prev"}),r._clientLeft=r.wrapperEl.clientLeft}const d=a?r.translate:-r.translate;function h(T){return T<0?-Math.floor(Math.abs(T)):Math.floor(T)}const p=h(d),m=i.map(T=>h(T)),y=s.freeMode&&s.freeMode.enabled;let v=i[m.indexOf(p)-1];if(typeof v>"u"&&(s.cssMode||y)){let T;i.forEach((b,C)=>{p>=b&&(T=C)}),typeof T<"u"&&(v=y?i[T]:i[T>0?T-1:T])}let S=0;if(typeof v<"u"&&(S=o.indexOf(v),S<0&&(S=r.activeIndex-1),s.slidesPerView==="auto"&&s.slidesPerGroup===1&&s.slidesPerGroupAuto&&(S=S-r.slidesPerViewDynamic("previous",!0)+1,S=Math.max(S,0))),s.rewind&&r.isBeginning){const T=r.params.virtual&&r.params.virtual.enabled&&r.virtual?r.virtual.slides.length-1:r.slides.length-1;return r.slideTo(T,n,e,t)}else if(s.loop&&r.activeIndex===0&&s.cssMode)return requestAnimationFrame(()=>{r.slideTo(S,n,e,t)}),!0;return r.slideTo(S,n,e,t)}function fN(n,e,t){e===void 0&&(e=!0);const r=this;if(!r.destroyed)return typeof n>"u"&&(n=r.params.speed),r.slideTo(r.activeIndex,n,e,t)}function hN(n,e,t,r){e===void 0&&(e=!0),r===void 0&&(r=.5);const s=this;if(s.destroyed)return;typeof n>"u"&&(n=s.params.speed);let i=s.activeIndex;const o=Math.min(s.params.slidesPerGroupSkip,i),a=o+Math.floor((i-o)/s.params.slidesPerGroup),l=s.rtlTranslate?s.translate:-s.translate;if(l>=s.snapGrid[a]){const c=s.snapGrid[a],u=s.snapGrid[a+1];l-c>(u-c)*r&&(i+=s.params.slidesPerGroup)}else{const c=s.snapGrid[a-1],u=s.snapGrid[a];l-c<=(u-c)*r&&(i-=s.params.slidesPerGroup)}return i=Math.max(i,0),i=Math.min(i,s.slidesGrid.length-1),s.slideTo(i,n,e,t)}function pN(){const n=this;if(n.destroyed)return;const{params:e,slidesEl:t}=n,r=e.slidesPerView==="auto"?n.slidesPerViewDynamic():e.slidesPerView;let s=n.clickedIndex,i;const o=n.isElement?"swiper-slide":`.${e.slideClass}`;if(e.loop){if(n.animating)return;i=parseInt(n.clickedSlide.getAttribute("data-swiper-slide-index"),10),e.centeredSlides?s<n.loopedSlides-r/2||s>n.slides.length-n.loopedSlides+r/2?(n.loopFix(),s=n.getSlideIndex(Ar(t,`${o}[data-swiper-slide-index="${i}"]`)[0]),Bc(()=>{n.slideTo(s)})):n.slideTo(s):s>n.slides.length-r?(n.loopFix(),s=n.getSlideIndex(Ar(t,`${o}[data-swiper-slide-index="${i}"]`)[0]),Bc(()=>{n.slideTo(s)})):n.slideTo(s)}else n.slideTo(s)}var mN={slideTo:lN,slideToLoop:uN,slideNext:cN,slidePrev:dN,slideReset:fN,slideToClosest:hN,slideToClickedSlide:pN};function gN(n,e){const t=this,{params:r,slidesEl:s}=t;if(!r.loop||t.virtual&&t.params.virtual.enabled)return;const i=()=>{Ar(s,`.${r.slideClass}, swiper-slide`).forEach((h,p)=>{h.setAttribute("data-swiper-slide-index",p)})},o=t.grid&&r.grid&&r.grid.rows>1,a=r.slidesPerGroup*(o?r.grid.rows:1),l=t.slides.length%a!==0,c=o&&t.slides.length%r.grid.rows!==0,u=d=>{for(let h=0;h<d;h+=1){const p=t.isElement?jc("swiper-slide",[r.slideBlankClass]):jc("div",[r.slideClass,r.slideBlankClass]);t.slidesEl.append(p)}};if(l){if(r.loopAddBlankSlides){const d=a-t.slides.length%a;u(d),t.recalcSlides(),t.updateSlides()}else zc("Swiper Loop Warning: The number of slides is not even to slidesPerGroup, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else if(c){if(r.loopAddBlankSlides){const d=r.grid.rows-t.slides.length%r.grid.rows;u(d),t.recalcSlides(),t.updateSlides()}else zc("Swiper Loop Warning: The number of slides is not even to grid.rows, loop mode may not function properly. You need to add more slides (or make duplicates, or empty slides)");i()}else i();t.loopFix({slideRealIndex:n,direction:r.centeredSlides?void 0:"next",initial:e})}function yN(n){let{slideRealIndex:e,slideTo:t=!0,direction:r,setTranslate:s,activeSlideIndex:i,initial:o,byController:a,byMousewheel:l}=n===void 0?{}:n;const c=this;if(!c.params.loop)return;c.emit("beforeLoopFix");const{slides:u,allowSlidePrev:d,allowSlideNext:h,slidesEl:p,params:m}=c,{centeredSlides:y,initialSlide:v}=m;if(c.allowSlidePrev=!0,c.allowSlideNext=!0,c.virtual&&m.virtual.enabled){t&&(!m.centeredSlides&&c.snapIndex===0?c.slideTo(c.virtual.slides.length,0,!1,!0):m.centeredSlides&&c.snapIndex<m.slidesPerView?c.slideTo(c.virtual.slides.length+c.snapIndex,0,!1,!0):c.snapIndex===c.snapGrid.length-1&&c.slideTo(c.virtual.slidesBefore,0,!1,!0)),c.allowSlidePrev=d,c.allowSlideNext=h,c.emit("loopFix");return}let S=m.slidesPerView;S==="auto"?S=c.slidesPerViewDynamic():(S=Math.ceil(parseFloat(m.slidesPerView,10)),y&&S%2===0&&(S=S+1));const T=m.slidesPerGroupAuto?S:m.slidesPerGroup;let b=T;b%T!==0&&(b+=T-b%T),b+=m.loopAdditionalSlides,c.loopedSlides=b;const C=c.grid&&m.grid&&m.grid.rows>1;u.length<S+b||c.params.effect==="cards"&&u.length<S+b*2?zc("Swiper Loop Warning: The number of slides is not enough for loop mode, it will be disabled or not function properly. You need to add more slides (or make duplicates) or lower the values of slidesPerView and slidesPerGroup parameters"):C&&m.grid.fill==="row"&&zc("Swiper Loop Warning: Loop mode is not compatible with grid.fill = `row`");const O=[],N=[],A=C?Math.ceil(u.length/m.grid.rows):u.length,x=o&&A-v<S&&!y;let _=x?v:c.activeIndex;typeof i>"u"?i=c.getSlideIndex(u.find(J=>J.classList.contains(m.slideActiveClass))):_=i;const M=r==="next"||!r,I=r==="prev"||!r;let P=0,k=0;const le=(C?u[i].column:i)+(y&&typeof s>"u"?-S/2+.5:0);if(le<b){P=Math.max(b-le,T);for(let J=0;J<b-le;J+=1){const ee=J-Math.floor(J/A)*A;if(C){const ue=A-ee-1;for(let be=u.length-1;be>=0;be-=1)u[be].column===ue&&O.push(be)}else O.push(A-ee-1)}}else if(le+S>A-b){k=Math.max(le-(A-b*2),T),x&&(k=Math.max(k,S-A+v+1));for(let J=0;J<k;J+=1){const ee=J-Math.floor(J/A)*A;C?u.forEach((ue,be)=>{ue.column===ee&&N.push(be)}):N.push(ee)}}if(c.__preventObserver__=!0,requestAnimationFrame(()=>{c.__preventObserver__=!1}),c.params.effect==="cards"&&u.length<S+b*2&&(N.includes(i)&&N.splice(N.indexOf(i),1),O.includes(i)&&O.splice(O.indexOf(i),1)),I&&O.forEach(J=>{u[J].swiperLoopMoveDOM=!0,p.prepend(u[J]),u[J].swiperLoopMoveDOM=!1}),M&&N.forEach(J=>{u[J].swiperLoopMoveDOM=!0,p.append(u[J]),u[J].swiperLoopMoveDOM=!1}),c.recalcSlides(),m.slidesPerView==="auto"?c.updateSlides():C&&(O.length>0&&I||N.length>0&&M)&&c.slides.forEach((J,ee)=>{c.grid.updateSlide(ee,J,c.slides)}),m.watchSlidesProgress&&c.updateSlidesOffset(),t){if(O.length>0&&I){if(typeof e>"u"){const J=c.slidesGrid[_],ue=c.slidesGrid[_+P]-J;l?c.setTranslate(c.translate-ue):(c.slideTo(_+Math.ceil(P),0,!1,!0),s&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-ue,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-ue))}else if(s){const J=C?O.length/m.grid.rows:O.length;c.slideTo(c.activeIndex+J,0,!1,!0),c.touchEventsData.currentTranslate=c.translate}}else if(N.length>0&&M)if(typeof e>"u"){const J=c.slidesGrid[_],ue=c.slidesGrid[_-k]-J;l?c.setTranslate(c.translate-ue):(c.slideTo(_-k,0,!1,!0),s&&(c.touchEventsData.startTranslate=c.touchEventsData.startTranslate-ue,c.touchEventsData.currentTranslate=c.touchEventsData.currentTranslate-ue))}else{const J=C?N.length/m.grid.rows:N.length;c.slideTo(c.activeIndex-J,0,!1,!0)}}if(c.allowSlidePrev=d,c.allowSlideNext=h,c.controller&&c.controller.control&&!a){const J={slideRealIndex:e,direction:r,setTranslate:s,activeSlideIndex:i,byController:!0};Array.isArray(c.controller.control)?c.controller.control.forEach(ee=>{!ee.destroyed&&ee.params.loop&&ee.loopFix({...J,slideTo:ee.params.slidesPerView===m.slidesPerView?t:!1})}):c.controller.control instanceof c.constructor&&c.controller.control.params.loop&&c.controller.control.loopFix({...J,slideTo:c.controller.control.params.slidesPerView===m.slidesPerView?t:!1})}c.emit("loopFix")}function vN(){const n=this,{params:e,slidesEl:t}=n;if(!e.loop||!t||n.virtual&&n.params.virtual.enabled)return;n.recalcSlides();const r=[];n.slides.forEach(s=>{const i=typeof s.swiperSlideIndex>"u"?s.getAttribute("data-swiper-slide-index")*1:s.swiperSlideIndex;r[i]=s}),n.slides.forEach(s=>{s.removeAttribute("data-swiper-slide-index")}),r.forEach(s=>{t.append(s)}),n.recalcSlides(),n.slideTo(n.realIndex,0)}var bN={loopCreate:gN,loopFix:yN,loopDestroy:vN};function wN(n){const e=this;if(!e.params.simulateTouch||e.params.watchOverflow&&e.isLocked||e.params.cssMode)return;const t=e.params.touchEventsTarget==="container"?e.el:e.wrapperEl;e.isElement&&(e.__preventObserver__=!0),t.style.cursor="move",t.style.cursor=n?"grabbing":"grab",e.isElement&&requestAnimationFrame(()=>{e.__preventObserver__=!1})}function TN(){const n=this;n.params.watchOverflow&&n.isLocked||n.params.cssMode||(n.isElement&&(n.__preventObserver__=!0),n[n.params.touchEventsTarget==="container"?"el":"wrapperEl"].style.cursor="",n.isElement&&requestAnimationFrame(()=>{n.__preventObserver__=!1}))}var EN={setGrabCursor:wN,unsetGrabCursor:TN};function SN(n,e){e===void 0&&(e=this);function t(r){if(!r||r===po()||r===kn())return null;r.assignedSlot&&(r=r.assignedSlot);const s=r.closest(n);return!s&&!r.getRootNode?null:s||t(r.getRootNode().host)}return t(e)}function q0(n,e,t){const r=kn(),{params:s}=n,i=s.edgeSwipeDetection,o=s.edgeSwipeThreshold;return i&&(t<=o||t>=r.innerWidth-o)?i==="prevent"?(e.preventDefault(),!0):!1:!0}function _N(n){const e=this,t=po();let r=n;r.originalEvent&&(r=r.originalEvent);const s=e.touchEventsData;if(r.type==="pointerdown"){if(s.pointerId!==null&&s.pointerId!==r.pointerId)return;s.pointerId=r.pointerId}else r.type==="touchstart"&&r.targetTouches.length===1&&(s.touchId=r.targetTouches[0].identifier);if(r.type==="touchstart"){q0(e,r,r.targetTouches[0].pageX);return}const{params:i,touches:o,enabled:a}=e;if(!a||!i.simulateTouch&&r.pointerType==="mouse"||e.animating&&i.preventInteractionOnTransition)return;!e.animating&&i.cssMode&&i.loop&&e.loopFix();let l=r.target;if(i.touchEventsTarget==="wrapper"&&!PD(l,e.wrapperEl)||"which"in r&&r.which===3||"button"in r&&r.button>0||s.isTouched&&s.isMoved)return;const c=!!i.noSwipingClass&&i.noSwipingClass!=="",u=r.composedPath?r.composedPath():r.path;c&&r.target&&r.target.shadowRoot&&u&&(l=u[0]);const d=i.noSwipingSelector?i.noSwipingSelector:`.${i.noSwipingClass}`,h=!!(r.target&&r.target.shadowRoot);if(i.noSwiping&&(h?SN(d,l):l.closest(d))){e.allowClick=!0;return}if(i.swipeHandler&&!l.closest(i.swipeHandler))return;o.currentX=r.pageX,o.currentY=r.pageY;const p=o.currentX,m=o.currentY;if(!q0(e,r,p))return;Object.assign(s,{isTouched:!0,isMoved:!1,allowTouchCallbacks:!0,isScrolling:void 0,startMoving:void 0}),o.startX=p,o.startY=m,s.touchStartTime=Fc(),e.allowClick=!0,e.updateSize(),e.swipeDirection=void 0,i.threshold>0&&(s.allowThresholdMove=!1);let y=!0;l.matches(s.focusableElements)&&(y=!1,l.nodeName==="SELECT"&&(s.isTouched=!1)),t.activeElement&&t.activeElement.matches(s.focusableElements)&&t.activeElement!==l&&(r.pointerType==="mouse"||r.pointerType!=="mouse"&&!l.matches(s.focusableElements))&&t.activeElement.blur();const v=y&&e.allowTouchMove&&i.touchStartPreventDefault;(i.touchStartForcePreventDefault||v)&&!l.isContentEditable&&r.preventDefault(),i.freeMode&&i.freeMode.enabled&&e.freeMode&&e.animating&&!i.cssMode&&e.freeMode.onTouchStart(),e.emit("touchStart",r)}function xN(n){const e=po(),t=this,r=t.touchEventsData,{params:s,touches:i,rtlTranslate:o,enabled:a}=t;if(!a||!s.simulateTouch&&n.pointerType==="mouse")return;let l=n;if(l.originalEvent&&(l=l.originalEvent),l.type==="pointermove"&&(r.touchId!==null||l.pointerId!==r.pointerId))return;let c;if(l.type==="touchmove"){if(c=[...l.changedTouches].find(O=>O.identifier===r.touchId),!c||c.identifier!==r.touchId)return}else c=l;if(!r.isTouched){r.startMoving&&r.isScrolling&&t.emit("touchMoveOpposite",l);return}const u=c.pageX,d=c.pageY;if(l.preventedByNestedSwiper){i.startX=u,i.startY=d;return}if(!t.allowTouchMove){l.target.matches(r.focusableElements)||(t.allowClick=!1),r.isTouched&&(Object.assign(i,{startX:u,startY:d,currentX:u,currentY:d}),r.touchStartTime=Fc());return}if(s.touchReleaseOnEdges&&!s.loop)if(t.isVertical()){if(d<i.startY&&t.translate<=t.maxTranslate()||d>i.startY&&t.translate>=t.minTranslate()){r.isTouched=!1,r.isMoved=!1;return}}else{if(o&&(u>i.startX&&-t.translate<=t.maxTranslate()||u<i.startX&&-t.translate>=t.minTranslate()))return;if(!o&&(u<i.startX&&t.translate<=t.maxTranslate()||u>i.startX&&t.translate>=t.minTranslate()))return}if(e.activeElement&&e.activeElement.matches(r.focusableElements)&&e.activeElement!==l.target&&l.pointerType!=="mouse"&&e.activeElement.blur(),e.activeElement&&l.target===e.activeElement&&l.target.matches(r.focusableElements)){r.isMoved=!0,t.allowClick=!1;return}r.allowTouchCallbacks&&t.emit("touchMove",l),i.previousX=i.currentX,i.previousY=i.currentY,i.currentX=u,i.currentY=d;const h=i.currentX-i.startX,p=i.currentY-i.startY;if(t.params.threshold&&Math.sqrt(h**2+p**2)<t.params.threshold)return;if(typeof r.isScrolling>"u"){let O;t.isHorizontal()&&i.currentY===i.startY||t.isVertical()&&i.currentX===i.startX?r.isScrolling=!1:h*h+p*p>=25&&(O=Math.atan2(Math.abs(p),Math.abs(h))*180/Math.PI,r.isScrolling=t.isHorizontal()?O>s.touchAngle:90-O>s.touchAngle)}if(r.isScrolling&&t.emit("touchMoveOpposite",l),typeof r.startMoving>"u"&&(i.currentX!==i.startX||i.currentY!==i.startY)&&(r.startMoving=!0),r.isScrolling||l.type==="touchmove"&&r.preventTouchMoveFromPointerMove){r.isTouched=!1;return}if(!r.startMoving)return;t.allowClick=!1,!s.cssMode&&l.cancelable&&l.preventDefault(),s.touchMoveStopPropagation&&!s.nested&&l.stopPropagation();let m=t.isHorizontal()?h:p,y=t.isHorizontal()?i.currentX-i.previousX:i.currentY-i.previousY;s.oneWayMovement&&(m=Math.abs(m)*(o?1:-1),y=Math.abs(y)*(o?1:-1)),i.diff=m,m*=s.touchRatio,o&&(m=-m,y=-y);const v=t.touchesDirection;t.swipeDirection=m>0?"prev":"next",t.touchesDirection=y>0?"prev":"next";const S=t.params.loop&&!s.cssMode,T=t.touchesDirection==="next"&&t.allowSlideNext||t.touchesDirection==="prev"&&t.allowSlidePrev;if(!r.isMoved){if(S&&T&&t.loopFix({direction:t.swipeDirection}),r.startTranslate=t.getTranslate(),t.setTransition(0),t.animating){const O=new window.CustomEvent("transitionend",{bubbles:!0,cancelable:!0,detail:{bySwiperTouchMove:!0}});t.wrapperEl.dispatchEvent(O)}r.allowMomentumBounce=!1,s.grabCursor&&(t.allowSlideNext===!0||t.allowSlidePrev===!0)&&t.setGrabCursor(!0),t.emit("sliderFirstMove",l)}if(new Date().getTime(),s._loopSwapReset!==!1&&r.isMoved&&r.allowThresholdMove&&v!==t.touchesDirection&&S&&T&&Math.abs(m)>=1){Object.assign(i,{startX:u,startY:d,currentX:u,currentY:d,startTranslate:r.currentTranslate}),r.loopSwapReset=!0,r.startTranslate=r.currentTranslate;return}t.emit("sliderMove",l),r.isMoved=!0,r.currentTranslate=m+r.startTranslate;let b=!0,C=s.resistanceRatio;if(s.touchReleaseOnEdges&&(C=0),m>0?(S&&T&&r.allowThresholdMove&&r.currentTranslate>(s.centeredSlides?t.minTranslate()-t.slidesSizesGrid[t.activeIndex+1]-(s.slidesPerView!=="auto"&&t.slides.length-s.slidesPerView>=2?t.slidesSizesGrid[t.activeIndex+1]+t.params.spaceBetween:0)-t.params.spaceBetween:t.minTranslate())&&t.loopFix({direction:"prev",setTranslate:!0,activeSlideIndex:0}),r.currentTranslate>t.minTranslate()&&(b=!1,s.resistance&&(r.currentTranslate=t.minTranslate()-1+(-t.minTranslate()+r.startTranslate+m)**C))):m<0&&(S&&T&&r.allowThresholdMove&&r.currentTranslate<(s.centeredSlides?t.maxTranslate()+t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween+(s.slidesPerView!=="auto"&&t.slides.length-s.slidesPerView>=2?t.slidesSizesGrid[t.slidesSizesGrid.length-1]+t.params.spaceBetween:0):t.maxTranslate())&&t.loopFix({direction:"next",setTranslate:!0,activeSlideIndex:t.slides.length-(s.slidesPerView==="auto"?t.slidesPerViewDynamic():Math.ceil(parseFloat(s.slidesPerView,10)))}),r.currentTranslate<t.maxTranslate()&&(b=!1,s.resistance&&(r.currentTranslate=t.maxTranslate()+1-(t.maxTranslate()-r.startTranslate-m)**C))),b&&(l.preventedByNestedSwiper=!0),!t.allowSlideNext&&t.swipeDirection==="next"&&r.currentTranslate<r.startTranslate&&(r.currentTranslate=r.startTranslate),!t.allowSlidePrev&&t.swipeDirection==="prev"&&r.currentTranslate>r.startTranslate&&(r.currentTranslate=r.startTranslate),!t.allowSlidePrev&&!t.allowSlideNext&&(r.currentTranslate=r.startTranslate),s.threshold>0)if(Math.abs(m)>s.threshold||r.allowThresholdMove){if(!r.allowThresholdMove){r.allowThresholdMove=!0,i.startX=i.currentX,i.startY=i.currentY,r.currentTranslate=r.startTranslate,i.diff=t.isHorizontal()?i.currentX-i.startX:i.currentY-i.startY;return}}else{r.currentTranslate=r.startTranslate;return}!s.followFinger||s.cssMode||((s.freeMode&&s.freeMode.enabled&&t.freeMode||s.watchSlidesProgress)&&(t.updateActiveIndex(),t.updateSlidesClasses()),s.freeMode&&s.freeMode.enabled&&t.freeMode&&t.freeMode.onTouchMove(),t.updateProgress(r.currentTranslate),t.setTranslate(r.currentTranslate))}function CN(n){const e=this,t=e.touchEventsData;let r=n;r.originalEvent&&(r=r.originalEvent);let s;if(r.type==="touchend"||r.type==="touchcancel"){if(s=[...r.changedTouches].find(O=>O.identifier===t.touchId),!s||s.identifier!==t.touchId)return}else{if(t.touchId!==null||r.pointerId!==t.pointerId)return;s=r}if(["pointercancel","pointerout","pointerleave","contextmenu"].includes(r.type)&&!(["pointercancel","contextmenu"].includes(r.type)&&(e.browser.isSafari||e.browser.isWebView)))return;t.pointerId=null,t.touchId=null;const{params:o,touches:a,rtlTranslate:l,slidesGrid:c,enabled:u}=e;if(!u||!o.simulateTouch&&r.pointerType==="mouse")return;if(t.allowTouchCallbacks&&e.emit("touchEnd",r),t.allowTouchCallbacks=!1,!t.isTouched){t.isMoved&&o.grabCursor&&e.setGrabCursor(!1),t.isMoved=!1,t.startMoving=!1;return}o.grabCursor&&t.isMoved&&t.isTouched&&(e.allowSlideNext===!0||e.allowSlidePrev===!0)&&e.setGrabCursor(!1);const d=Fc(),h=d-t.touchStartTime;if(e.allowClick){const O=r.path||r.composedPath&&r.composedPath();e.updateClickedSlide(O&&O[0]||r.target,O),e.emit("tap click",r),h<300&&d-t.lastClickTime<300&&e.emit("doubleTap doubleClick",r)}if(t.lastClickTime=Fc(),Bc(()=>{e.destroyed||(e.allowClick=!0)}),!t.isTouched||!t.isMoved||!e.swipeDirection||a.diff===0&&!t.loopSwapReset||t.currentTranslate===t.startTranslate&&!t.loopSwapReset){t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;return}t.isTouched=!1,t.isMoved=!1,t.startMoving=!1;let p;if(o.followFinger?p=l?e.translate:-e.translate:p=-t.currentTranslate,o.cssMode)return;if(o.freeMode&&o.freeMode.enabled){e.freeMode.onTouchEnd({currentPos:p});return}const m=p>=-e.maxTranslate()&&!e.params.loop;let y=0,v=e.slidesSizesGrid[0];for(let O=0;O<c.length;O+=O<o.slidesPerGroupSkip?1:o.slidesPerGroup){const N=O<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;typeof c[O+N]<"u"?(m||p>=c[O]&&p<c[O+N])&&(y=O,v=c[O+N]-c[O]):(m||p>=c[O])&&(y=O,v=c[c.length-1]-c[c.length-2])}let S=null,T=null;o.rewind&&(e.isBeginning?T=o.virtual&&o.virtual.enabled&&e.virtual?e.virtual.slides.length-1:e.slides.length-1:e.isEnd&&(S=0));const b=(p-c[y])/v,C=y<o.slidesPerGroupSkip-1?1:o.slidesPerGroup;if(h>o.longSwipesMs){if(!o.longSwipes){e.slideTo(e.activeIndex);return}e.swipeDirection==="next"&&(b>=o.longSwipesRatio?e.slideTo(o.rewind&&e.isEnd?S:y+C):e.slideTo(y)),e.swipeDirection==="prev"&&(b>1-o.longSwipesRatio?e.slideTo(y+C):T!==null&&b<0&&Math.abs(b)>o.longSwipesRatio?e.slideTo(T):e.slideTo(y))}else{if(!o.shortSwipes){e.slideTo(e.activeIndex);return}e.navigation&&(r.target===e.navigation.nextEl||r.target===e.navigation.prevEl)?r.target===e.navigation.nextEl?e.slideTo(y+C):e.slideTo(y):(e.swipeDirection==="next"&&e.slideTo(S!==null?S:y+C),e.swipeDirection==="prev"&&e.slideTo(T!==null?T:y))}}function W0(){const n=this,{params:e,el:t}=n;if(t&&t.offsetWidth===0)return;e.breakpoints&&n.setBreakpoint();const{allowSlideNext:r,allowSlidePrev:s,snapGrid:i}=n,o=n.virtual&&n.params.virtual.enabled;n.allowSlideNext=!0,n.allowSlidePrev=!0,n.updateSize(),n.updateSlides(),n.updateSlidesClasses();const a=o&&e.loop;(e.slidesPerView==="auto"||e.slidesPerView>1)&&n.isEnd&&!n.isBeginning&&!n.params.centeredSlides&&!a?n.slideTo(n.slides.length-1,0,!1,!0):n.params.loop&&!o?n.slideToLoop(n.realIndex,0,!1,!0):n.slideTo(n.activeIndex,0,!1,!0),n.autoplay&&n.autoplay.running&&n.autoplay.paused&&(clearTimeout(n.autoplay.resizeTimeout),n.autoplay.resizeTimeout=setTimeout(()=>{n.autoplay&&n.autoplay.running&&n.autoplay.paused&&n.autoplay.resume()},500)),n.allowSlidePrev=s,n.allowSlideNext=r,n.params.watchOverflow&&i!==n.snapGrid&&n.checkOverflow()}function AN(n){const e=this;e.enabled&&(e.allowClick||(e.params.preventClicks&&n.preventDefault(),e.params.preventClicksPropagation&&e.animating&&(n.stopPropagation(),n.stopImmediatePropagation())))}function kN(){const n=this,{wrapperEl:e,rtlTranslate:t,enabled:r}=n;if(!r)return;n.previousTranslate=n.translate,n.isHorizontal()?n.translate=-e.scrollLeft:n.translate=-e.scrollTop,n.translate===0&&(n.translate=0),n.updateActiveIndex(),n.updateSlidesClasses();let s;const i=n.maxTranslate()-n.minTranslate();i===0?s=0:s=(n.translate-n.minTranslate())/i,s!==n.progress&&n.updateProgress(t?-n.translate:n.translate),n.emit("setTranslate",n.translate,!1)}function IN(n){const e=this;oc(e,n.target),!(e.params.cssMode||e.params.slidesPerView!=="auto"&&!e.params.autoHeight)&&e.update()}function MN(){const n=this;n.documentTouchHandlerProceeded||(n.documentTouchHandlerProceeded=!0,n.params.touchReleaseOnEdges&&(n.el.style.touchAction="auto"))}const AS=(n,e)=>{const t=po(),{params:r,el:s,wrapperEl:i,device:o}=n,a=!!r.nested,l=e==="on"?"addEventListener":"removeEventListener",c=e;!s||typeof s=="string"||(t[l]("touchstart",n.onDocumentTouchStart,{passive:!1,capture:a}),s[l]("touchstart",n.onTouchStart,{passive:!1}),s[l]("pointerdown",n.onTouchStart,{passive:!1}),t[l]("touchmove",n.onTouchMove,{passive:!1,capture:a}),t[l]("pointermove",n.onTouchMove,{passive:!1,capture:a}),t[l]("touchend",n.onTouchEnd,{passive:!0}),t[l]("pointerup",n.onTouchEnd,{passive:!0}),t[l]("pointercancel",n.onTouchEnd,{passive:!0}),t[l]("touchcancel",n.onTouchEnd,{passive:!0}),t[l]("pointerout",n.onTouchEnd,{passive:!0}),t[l]("pointerleave",n.onTouchEnd,{passive:!0}),t[l]("contextmenu",n.onTouchEnd,{passive:!0}),(r.preventClicks||r.preventClicksPropagation)&&s[l]("click",n.onClick,!0),r.cssMode&&i[l]("scroll",n.onScroll),r.updateOnWindowResize?n[c](o.ios||o.android?"resize orientationchange observerUpdate":"resize observerUpdate",W0,!0):n[c]("observerUpdate",W0,!0),s[l]("load",n.onLoad,{capture:!0}))};function PN(){const n=this,{params:e}=n;n.onTouchStart=_N.bind(n),n.onTouchMove=xN.bind(n),n.onTouchEnd=CN.bind(n),n.onDocumentTouchStart=MN.bind(n),e.cssMode&&(n.onScroll=kN.bind(n)),n.onClick=AN.bind(n),n.onLoad=IN.bind(n),AS(n,"on")}function RN(){AS(this,"off")}var ON={attachEvents:PN,detachEvents:RN};const G0=(n,e)=>n.grid&&e.grid&&e.grid.rows>1;function DN(){const n=this,{realIndex:e,initialized:t,params:r,el:s}=n,i=r.breakpoints;if(!i||i&&Object.keys(i).length===0)return;const o=po(),a=r.breakpointsBase==="window"||!r.breakpointsBase?r.breakpointsBase:"container",l=["window","container"].includes(r.breakpointsBase)||!r.breakpointsBase?n.el:o.querySelector(r.breakpointsBase),c=n.getBreakpoint(i,a,l);if(!c||n.currentBreakpoint===c)return;const d=(c in i?i[c]:void 0)||n.originalParams,h=G0(n,r),p=G0(n,d),m=n.params.grabCursor,y=d.grabCursor,v=r.enabled;h&&!p?(s.classList.remove(`${r.containerModifierClass}grid`,`${r.containerModifierClass}grid-column`),n.emitContainerClasses()):!h&&p&&(s.classList.add(`${r.containerModifierClass}grid`),(d.grid.fill&&d.grid.fill==="column"||!d.grid.fill&&r.grid.fill==="column")&&s.classList.add(`${r.containerModifierClass}grid-column`),n.emitContainerClasses()),m&&!y?n.unsetGrabCursor():!m&&y&&n.setGrabCursor(),["navigation","pagination","scrollbar"].forEach(N=>{if(typeof d[N]>"u")return;const A=r[N]&&r[N].enabled,x=d[N]&&d[N].enabled;A&&!x&&n[N].disable(),!A&&x&&n[N].enable()});const S=d.direction&&d.direction!==r.direction,T=r.loop&&(d.slidesPerView!==r.slidesPerView||S),b=r.loop;S&&t&&n.changeDirection(),Bn(n.params,d);const C=n.params.enabled,O=n.params.loop;Object.assign(n,{allowTouchMove:n.params.allowTouchMove,allowSlideNext:n.params.allowSlideNext,allowSlidePrev:n.params.allowSlidePrev}),v&&!C?n.disable():!v&&C&&n.enable(),n.currentBreakpoint=c,n.emit("_beforeBreakpoint",d),t&&(T?(n.loopDestroy(),n.loopCreate(e),n.updateSlides()):!b&&O?(n.loopCreate(e),n.updateSlides()):b&&!O&&n.loopDestroy()),n.emit("breakpoint",d)}function NN(n,e,t){if(e===void 0&&(e="window"),!n||e==="container"&&!t)return;let r=!1;const s=kn(),i=e==="window"?s.innerHeight:t.clientHeight,o=Object.keys(n).map(a=>{if(typeof a=="string"&&a.indexOf("@")===0){const l=parseFloat(a.substr(1));return{value:i*l,point:a}}return{value:a,point:a}});o.sort((a,l)=>parseInt(a.value,10)-parseInt(l.value,10));for(let a=0;a<o.length;a+=1){const{point:l,value:c}=o[a];e==="window"?s.matchMedia(`(min-width: ${c}px)`).matches&&(r=l):c<=t.clientWidth&&(r=l)}return r||"max"}var LN={setBreakpoint:DN,getBreakpoint:NN};function VN(n,e){const t=[];return n.forEach(r=>{typeof r=="object"?Object.keys(r).forEach(s=>{r[s]&&t.push(e+s)}):typeof r=="string"&&t.push(e+r)}),t}function $N(){const n=this,{classNames:e,params:t,rtl:r,el:s,device:i}=n,o=VN(["initialized",t.direction,{"free-mode":n.params.freeMode&&t.freeMode.enabled},{autoheight:t.autoHeight},{rtl:r},{grid:t.grid&&t.grid.rows>1},{"grid-column":t.grid&&t.grid.rows>1&&t.grid.fill==="column"},{android:i.android},{ios:i.ios},{"css-mode":t.cssMode},{centered:t.cssMode&&t.centeredSlides},{"watch-progress":t.watchSlidesProgress}],t.containerModifierClass);e.push(...o),s.classList.add(...e),n.emitContainerClasses()}function BN(){const n=this,{el:e,classNames:t}=n;!e||typeof e=="string"||(e.classList.remove(...t),n.emitContainerClasses())}var FN={addClasses:$N,removeClasses:BN};function zN(){const n=this,{isLocked:e,params:t}=n,{slidesOffsetBefore:r}=t;if(r){const s=n.slides.length-1,i=n.slidesGrid[s]+n.slidesSizesGrid[s]+r*2;n.isLocked=n.size>i}else n.isLocked=n.snapGrid.length===1;t.allowSlideNext===!0&&(n.allowSlideNext=!n.isLocked),t.allowSlidePrev===!0&&(n.allowSlidePrev=!n.isLocked),e&&e!==n.isLocked&&(n.isEnd=!1),e!==n.isLocked&&n.emit(n.isLocked?"lock":"unlock")}var jN={checkOverflow:zN},Rp={init:!0,direction:"horizontal",oneWayMovement:!1,swiperElementNodeName:"SWIPER-CONTAINER",touchEventsTarget:"wrapper",initialSlide:0,speed:300,cssMode:!1,updateOnWindowResize:!0,resizeObserver:!0,nested:!1,createElements:!1,eventsPrefix:"swiper",enabled:!0,focusableElements:"input, select, option, textarea, button, video, label",width:null,height:null,preventInteractionOnTransition:!1,userAgent:null,url:null,edgeSwipeDetection:!1,edgeSwipeThreshold:20,autoHeight:!1,setWrapperSize:!1,virtualTranslate:!1,effect:"slide",breakpoints:void 0,breakpointsBase:"window",spaceBetween:0,slidesPerView:1,slidesPerGroup:1,slidesPerGroupSkip:0,slidesPerGroupAuto:!1,centeredSlides:!1,centeredSlidesBounds:!1,slidesOffsetBefore:0,slidesOffsetAfter:0,normalizeSlideIndex:!0,centerInsufficientSlides:!1,watchOverflow:!0,roundLengths:!1,touchRatio:1,touchAngle:45,simulateTouch:!0,shortSwipes:!0,longSwipes:!0,longSwipesRatio:.5,longSwipesMs:300,followFinger:!0,allowTouchMove:!0,threshold:5,touchMoveStopPropagation:!1,touchStartPreventDefault:!0,touchStartForcePreventDefault:!1,touchReleaseOnEdges:!1,uniqueNavElements:!0,resistance:!0,resistanceRatio:.85,watchSlidesProgress:!1,grabCursor:!1,preventClicks:!0,preventClicksPropagation:!0,slideToClickedSlide:!1,loop:!1,loopAddBlankSlides:!0,loopAdditionalSlides:0,loopPreventsSliding:!0,rewind:!1,allowSlidePrev:!0,allowSlideNext:!0,swipeHandler:null,noSwiping:!0,noSwipingClass:"swiper-no-swiping",noSwipingSelector:null,passiveListeners:!0,maxBackfaceHiddenSlides:10,containerModifierClass:"swiper-",slideClass:"swiper-slide",slideBlankClass:"swiper-slide-blank",slideActiveClass:"swiper-slide-active",slideVisibleClass:"swiper-slide-visible",slideFullyVisibleClass:"swiper-slide-fully-visible",slideNextClass:"swiper-slide-next",slidePrevClass:"swiper-slide-prev",wrapperClass:"swiper-wrapper",lazyPreloaderClass:"swiper-lazy-preloader",lazyPreloadPrevNext:0,runCallbacksOnInit:!0,_emitClasses:!1};function HN(n,e){return function(r){r===void 0&&(r={});const s=Object.keys(r)[0],i=r[s];if(typeof i!="object"||i===null){Bn(e,r);return}if(n[s]===!0&&(n[s]={enabled:!0}),s==="navigation"&&n[s]&&n[s].enabled&&!n[s].prevEl&&!n[s].nextEl&&(n[s].auto=!0),["pagination","scrollbar"].indexOf(s)>=0&&n[s]&&n[s].enabled&&!n[s].el&&(n[s].auto=!0),!(s in n&&"enabled"in i)){Bn(e,r);return}typeof n[s]=="object"&&!("enabled"in n[s])&&(n[s].enabled=!0),n[s]||(n[s]={enabled:!1}),Bn(e,r)}}const gh={eventsEmitter:FD,update:YD,translate:rN,transition:aN,slide:mN,loop:bN,grabCursor:EN,events:ON,breakpoints:LN,checkOverflow:jN,classes:FN},yh={};let Tg=class Zr{constructor(){let e,t;for(var r=arguments.length,s=new Array(r),i=0;i<r;i++)s[i]=arguments[i];s.length===1&&s[0].constructor&&Object.prototype.toString.call(s[0]).slice(8,-1)==="Object"?t=s[0]:[e,t]=s,t||(t={}),t=Bn({},t),e&&!t.el&&(t.el=e);const o=po();if(t.el&&typeof t.el=="string"&&o.querySelectorAll(t.el).length>1){const u=[];return o.querySelectorAll(t.el).forEach(d=>{const h=Bn({},t,{el:d});u.push(new Zr(h))}),u}const a=this;a.__swiper__=!0,a.support=SS(),a.device=_S({userAgent:t.userAgent}),a.browser=xS(),a.eventsListeners={},a.eventsAnyListeners=[],a.modules=[...a.__modules__],t.modules&&Array.isArray(t.modules)&&a.modules.push(...t.modules);const l={};a.modules.forEach(u=>{u({params:t,swiper:a,extendParams:HN(t,l),on:a.on.bind(a),once:a.once.bind(a),off:a.off.bind(a),emit:a.emit.bind(a)})});const c=Bn({},Rp,l);return a.params=Bn({},c,yh,t),a.originalParams=Bn({},a.params),a.passedParams=Bn({},t),a.params&&a.params.on&&Object.keys(a.params.on).forEach(u=>{a.on(u,a.params.on[u])}),a.params&&a.params.onAny&&a.onAny(a.params.onAny),Object.assign(a,{enabled:a.params.enabled,el:e,classNames:[],slides:[],slidesGrid:[],snapGrid:[],slidesSizesGrid:[],isHorizontal(){return a.params.direction==="horizontal"},isVertical(){return a.params.direction==="vertical"},activeIndex:0,realIndex:0,isBeginning:!0,isEnd:!1,translate:0,previousTranslate:0,progress:0,velocity:0,animating:!1,cssOverflowAdjustment(){return Math.trunc(this.translate/2**23)*2**23},allowSlideNext:a.params.allowSlideNext,allowSlidePrev:a.params.allowSlidePrev,touchEventsData:{isTouched:void 0,isMoved:void 0,allowTouchCallbacks:void 0,touchStartTime:void 0,isScrolling:void 0,currentTranslate:void 0,startTranslate:void 0,allowThresholdMove:void 0,focusableElements:a.params.focusableElements,lastClickTime:0,clickTimeout:void 0,velocities:[],allowMomentumBounce:void 0,startMoving:void 0,pointerId:null,touchId:null},allowClick:!0,allowTouchMove:a.params.allowTouchMove,touches:{startX:0,startY:0,currentX:0,currentY:0,diff:0},imagesToLoad:[],imagesLoaded:0}),a.emit("_swiper"),a.params.init&&a.init(),a}getDirectionLabel(e){return this.isHorizontal()?e:{width:"height","margin-top":"margin-left","margin-bottom ":"margin-right","margin-left":"margin-top","margin-right":"margin-bottom","padding-left":"padding-top","padding-right":"padding-bottom",marginRight:"marginBottom"}[e]}getSlideIndex(e){const{slidesEl:t,params:r}=this,s=Ar(t,`.${r.slideClass}, swiper-slide`),i=Hc(s[0]);return Hc(e)-i}getSlideIndexByData(e){return this.getSlideIndex(this.slides.find(t=>t.getAttribute("data-swiper-slide-index")*1===e))}recalcSlides(){const e=this,{slidesEl:t,params:r}=e;e.slides=Ar(t,`.${r.slideClass}, swiper-slide`)}enable(){const e=this;e.enabled||(e.enabled=!0,e.params.grabCursor&&e.setGrabCursor(),e.emit("enable"))}disable(){const e=this;e.enabled&&(e.enabled=!1,e.params.grabCursor&&e.unsetGrabCursor(),e.emit("disable"))}setProgress(e,t){const r=this;e=Math.min(Math.max(e,0),1);const s=r.minTranslate(),o=(r.maxTranslate()-s)*e+s;r.translateTo(o,typeof t>"u"?0:t),r.updateActiveIndex(),r.updateSlidesClasses()}emitContainerClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=e.el.className.split(" ").filter(r=>r.indexOf("swiper")===0||r.indexOf(e.params.containerModifierClass)===0);e.emit("_containerClasses",t.join(" "))}getSlideClasses(e){const t=this;return t.destroyed?"":e.className.split(" ").filter(r=>r.indexOf("swiper-slide")===0||r.indexOf(t.params.slideClass)===0).join(" ")}emitSlidesClasses(){const e=this;if(!e.params._emitClasses||!e.el)return;const t=[];e.slides.forEach(r=>{const s=e.getSlideClasses(r);t.push({slideEl:r,classNames:s}),e.emit("_slideClass",r,s)}),e.emit("_slideClasses",t)}slidesPerViewDynamic(e,t){e===void 0&&(e="current"),t===void 0&&(t=!1);const r=this,{params:s,slides:i,slidesGrid:o,slidesSizesGrid:a,size:l,activeIndex:c}=r;let u=1;if(typeof s.slidesPerView=="number")return s.slidesPerView;if(s.centeredSlides){let d=i[c]?Math.ceil(i[c].swiperSlideSize):0,h;for(let p=c+1;p<i.length;p+=1)i[p]&&!h&&(d+=Math.ceil(i[p].swiperSlideSize),u+=1,d>l&&(h=!0));for(let p=c-1;p>=0;p-=1)i[p]&&!h&&(d+=i[p].swiperSlideSize,u+=1,d>l&&(h=!0))}else if(e==="current")for(let d=c+1;d<i.length;d+=1)(t?o[d]+a[d]-o[c]<l:o[d]-o[c]<l)&&(u+=1);else for(let d=c-1;d>=0;d-=1)o[c]-o[d]<l&&(u+=1);return u}update(){const e=this;if(!e||e.destroyed)return;const{snapGrid:t,params:r}=e;r.breakpoints&&e.setBreakpoint(),[...e.el.querySelectorAll('[loading="lazy"]')].forEach(o=>{o.complete&&oc(e,o)}),e.updateSize(),e.updateSlides(),e.updateProgress(),e.updateSlidesClasses();function s(){const o=e.rtlTranslate?e.translate*-1:e.translate,a=Math.min(Math.max(o,e.maxTranslate()),e.minTranslate());e.setTranslate(a),e.updateActiveIndex(),e.updateSlidesClasses()}let i;if(r.freeMode&&r.freeMode.enabled&&!r.cssMode)s(),r.autoHeight&&e.updateAutoHeight();else{if((r.slidesPerView==="auto"||r.slidesPerView>1)&&e.isEnd&&!r.centeredSlides){const o=e.virtual&&r.virtual.enabled?e.virtual.slides:e.slides;i=e.slideTo(o.length-1,0,!1,!0)}else i=e.slideTo(e.activeIndex,0,!1,!0);i||s()}r.watchOverflow&&t!==e.snapGrid&&e.checkOverflow(),e.emit("update")}changeDirection(e,t){t===void 0&&(t=!0);const r=this,s=r.params.direction;return e||(e=s==="horizontal"?"vertical":"horizontal"),e===s||e!=="horizontal"&&e!=="vertical"||(r.el.classList.remove(`${r.params.containerModifierClass}${s}`),r.el.classList.add(`${r.params.containerModifierClass}${e}`),r.emitContainerClasses(),r.params.direction=e,r.slides.forEach(i=>{e==="vertical"?i.style.width="":i.style.height=""}),r.emit("changeDirection"),t&&r.update()),r}changeLanguageDirection(e){const t=this;t.rtl&&e==="rtl"||!t.rtl&&e==="ltr"||(t.rtl=e==="rtl",t.rtlTranslate=t.params.direction==="horizontal"&&t.rtl,t.rtl?(t.el.classList.add(`${t.params.containerModifierClass}rtl`),t.el.dir="rtl"):(t.el.classList.remove(`${t.params.containerModifierClass}rtl`),t.el.dir="ltr"),t.update())}mount(e){const t=this;if(t.mounted)return!0;let r=e||t.params.el;if(typeof r=="string"&&(r=document.querySelector(r)),!r)return!1;r.swiper=t,r.parentNode&&r.parentNode.host&&r.parentNode.host.nodeName===t.params.swiperElementNodeName.toUpperCase()&&(t.isElement=!0);const s=()=>`.${(t.params.wrapperClass||"").trim().split(" ").join(".")}`;let o=r&&r.shadowRoot&&r.shadowRoot.querySelector?r.shadowRoot.querySelector(s()):Ar(r,s())[0];return!o&&t.params.createElements&&(o=jc("div",t.params.wrapperClass),r.append(o),Ar(r,`.${t.params.slideClass}`).forEach(a=>{o.append(a)})),Object.assign(t,{el:r,wrapperEl:o,slidesEl:t.isElement&&!r.parentNode.host.slideSlots?r.parentNode.host:o,hostEl:t.isElement?r.parentNode.host:r,mounted:!0,rtl:r.dir.toLowerCase()==="rtl"||$s(r,"direction")==="rtl",rtlTranslate:t.params.direction==="horizontal"&&(r.dir.toLowerCase()==="rtl"||$s(r,"direction")==="rtl"),wrongRTL:$s(o,"display")==="-webkit-box"}),!0}init(e){const t=this;if(t.initialized||t.mount(e)===!1)return t;t.emit("beforeInit"),t.params.breakpoints&&t.setBreakpoint(),t.addClasses(),t.updateSize(),t.updateSlides(),t.params.watchOverflow&&t.checkOverflow(),t.params.grabCursor&&t.enabled&&t.setGrabCursor(),t.params.loop&&t.virtual&&t.params.virtual.enabled?t.slideTo(t.params.initialSlide+t.virtual.slidesBefore,0,t.params.runCallbacksOnInit,!1,!0):t.slideTo(t.params.initialSlide,0,t.params.runCallbacksOnInit,!1,!0),t.params.loop&&t.loopCreate(void 0,!0),t.attachEvents();const s=[...t.el.querySelectorAll('[loading="lazy"]')];return t.isElement&&s.push(...t.hostEl.querySelectorAll('[loading="lazy"]')),s.forEach(i=>{i.complete?oc(t,i):i.addEventListener("load",o=>{oc(t,o.target)})}),Pp(t),t.initialized=!0,Pp(t),t.emit("init"),t.emit("afterInit"),t}destroy(e,t){e===void 0&&(e=!0),t===void 0&&(t=!0);const r=this,{params:s,el:i,wrapperEl:o,slides:a}=r;return typeof r.params>"u"||r.destroyed||(r.emit("beforeDestroy"),r.initialized=!1,r.detachEvents(),s.loop&&r.loopDestroy(),t&&(r.removeClasses(),i&&typeof i!="string"&&i.removeAttribute("style"),o&&o.removeAttribute("style"),a&&a.length&&a.forEach(l=>{l.classList.remove(s.slideVisibleClass,s.slideFullyVisibleClass,s.slideActiveClass,s.slideNextClass,s.slidePrevClass),l.removeAttribute("style"),l.removeAttribute("data-swiper-slide-index")})),r.emit("destroy"),Object.keys(r.eventsListeners).forEach(l=>{r.off(l)}),e!==!1&&(r.el&&typeof r.el!="string"&&(r.el.swiper=null),CD(r)),r.destroyed=!0),null}static extendDefaults(e){Bn(yh,e)}static get extendedDefaults(){return yh}static get defaults(){return Rp}static installModule(e){Zr.prototype.__modules__||(Zr.prototype.__modules__=[]);const t=Zr.prototype.__modules__;typeof e=="function"&&t.indexOf(e)<0&&t.push(e)}static use(e){return Array.isArray(e)?(e.forEach(t=>Zr.installModule(t)),Zr):(Zr.installModule(e),Zr)}};Object.keys(gh).forEach(n=>{Object.keys(gh[n]).forEach(e=>{Tg.prototype[e]=gh[n][e]})});Tg.use([$D,BD]);const kS=["eventsPrefix","injectStyles","injectStylesUrls","modules","init","_direction","oneWayMovement","swiperElementNodeName","touchEventsTarget","initialSlide","_speed","cssMode","updateOnWindowResize","resizeObserver","nested","focusableElements","_enabled","_width","_height","preventInteractionOnTransition","userAgent","url","_edgeSwipeDetection","_edgeSwipeThreshold","_freeMode","_autoHeight","setWrapperSize","virtualTranslate","_effect","breakpoints","breakpointsBase","_spaceBetween","_slidesPerView","maxBackfaceHiddenSlides","_grid","_slidesPerGroup","_slidesPerGroupSkip","_slidesPerGroupAuto","_centeredSlides","_centeredSlidesBounds","_slidesOffsetBefore","_slidesOffsetAfter","normalizeSlideIndex","_centerInsufficientSlides","_watchOverflow","roundLengths","touchRatio","touchAngle","simulateTouch","_shortSwipes","_longSwipes","longSwipesRatio","longSwipesMs","_followFinger","allowTouchMove","_threshold","touchMoveStopPropagation","touchStartPreventDefault","touchStartForcePreventDefault","touchReleaseOnEdges","uniqueNavElements","_resistance","_resistanceRatio","_watchSlidesProgress","_grabCursor","preventClicks","preventClicksPropagation","_slideToClickedSlide","_loop","loopAdditionalSlides","loopAddBlankSlides","loopPreventsSliding","_rewind","_allowSlidePrev","_allowSlideNext","_swipeHandler","_noSwiping","noSwipingClass","noSwipingSelector","passiveListeners","containerModifierClass","slideClass","slideActiveClass","slideVisibleClass","slideFullyVisibleClass","slideNextClass","slidePrevClass","slideBlankClass","wrapperClass","lazyPreloaderClass","lazyPreloadPrevNext","runCallbacksOnInit","observer","observeParents","observeSlideChildren","a11y","_autoplay","_controller","coverflowEffect","cubeEffect","fadeEffect","flipEffect","creativeEffect","cardsEffect","hashNavigation","history","keyboard","mousewheel","_navigation","_pagination","parallax","_scrollbar","_thumbs","virtual","zoom","control"];function to(n){return typeof n=="object"&&n!==null&&n.constructor&&Object.prototype.toString.call(n).slice(8,-1)==="Object"&&!n.__swiper__}function Zo(n,e){const t=["__proto__","constructor","prototype"];Object.keys(e).filter(r=>t.indexOf(r)<0).forEach(r=>{typeof n[r]>"u"?n[r]=e[r]:to(e[r])&&to(n[r])&&Object.keys(e[r]).length>0?e[r].__swiper__?n[r]=e[r]:Zo(n[r],e[r]):n[r]=e[r]})}function IS(n){return n===void 0&&(n={}),n.navigation&&typeof n.navigation.nextEl>"u"&&typeof n.navigation.prevEl>"u"}function MS(n){return n===void 0&&(n={}),n.pagination&&typeof n.pagination.el>"u"}function PS(n){return n===void 0&&(n={}),n.scrollbar&&typeof n.scrollbar.el>"u"}function RS(n){n===void 0&&(n="");const e=n.split(" ").map(r=>r.trim()).filter(r=>!!r),t=[];return e.forEach(r=>{t.indexOf(r)<0&&t.push(r)}),t.join(" ")}function UN(n){return n===void 0&&(n=""),n?n.includes("swiper-wrapper")?n:`swiper-wrapper ${n}`:"swiper-wrapper"}function qN(n){let{swiper:e,slides:t,passedParams:r,changedParams:s,nextEl:i,prevEl:o,scrollbarEl:a,paginationEl:l}=n;const c=s.filter(_=>_!=="children"&&_!=="direction"&&_!=="wrapperClass"),{params:u,pagination:d,navigation:h,scrollbar:p,virtual:m,thumbs:y}=e;let v,S,T,b,C,O,N,A;s.includes("thumbs")&&r.thumbs&&r.thumbs.swiper&&!r.thumbs.swiper.destroyed&&u.thumbs&&(!u.thumbs.swiper||u.thumbs.swiper.destroyed)&&(v=!0),s.includes("controller")&&r.controller&&r.controller.control&&u.controller&&!u.controller.control&&(S=!0),s.includes("pagination")&&r.pagination&&(r.pagination.el||l)&&(u.pagination||u.pagination===!1)&&d&&!d.el&&(T=!0),s.includes("scrollbar")&&r.scrollbar&&(r.scrollbar.el||a)&&(u.scrollbar||u.scrollbar===!1)&&p&&!p.el&&(b=!0),s.includes("navigation")&&r.navigation&&(r.navigation.prevEl||o)&&(r.navigation.nextEl||i)&&(u.navigation||u.navigation===!1)&&h&&!h.prevEl&&!h.nextEl&&(C=!0);const x=_=>{e[_]&&(e[_].destroy(),_==="navigation"?(e.isElement&&(e[_].prevEl.remove(),e[_].nextEl.remove()),u[_].prevEl=void 0,u[_].nextEl=void 0,e[_].prevEl=void 0,e[_].nextEl=void 0):(e.isElement&&e[_].el.remove(),u[_].el=void 0,e[_].el=void 0))};s.includes("loop")&&e.isElement&&(u.loop&&!r.loop?O=!0:!u.loop&&r.loop?N=!0:A=!0),c.forEach(_=>{if(to(u[_])&&to(r[_]))Object.assign(u[_],r[_]),(_==="navigation"||_==="pagination"||_==="scrollbar")&&"enabled"in r[_]&&!r[_].enabled&&x(_);else{const M=r[_];(M===!0||M===!1)&&(_==="navigation"||_==="pagination"||_==="scrollbar")?M===!1&&x(_):u[_]=r[_]}}),c.includes("controller")&&!S&&e.controller&&e.controller.control&&u.controller&&u.controller.control&&(e.controller.control=u.controller.control),s.includes("children")&&t&&m&&u.virtual.enabled?(m.slides=t,m.update(!0)):s.includes("virtual")&&m&&u.virtual.enabled&&(t&&(m.slides=t),m.update(!0)),s.includes("children")&&t&&u.loop&&(A=!0),v&&y.init()&&y.update(!0),S&&(e.controller.control=u.controller.control),T&&(e.isElement&&(!l||typeof l=="string")&&(l=document.createElement("div"),l.classList.add("swiper-pagination"),l.part.add("pagination"),e.el.appendChild(l)),l&&(u.pagination.el=l),d.init(),d.render(),d.update()),b&&(e.isElement&&(!a||typeof a=="string")&&(a=document.createElement("div"),a.classList.add("swiper-scrollbar"),a.part.add("scrollbar"),e.el.appendChild(a)),a&&(u.scrollbar.el=a),p.init(),p.updateSize(),p.setTranslate()),C&&(e.isElement&&((!i||typeof i=="string")&&(i=document.createElement("div"),i.classList.add("swiper-button-next"),i.innerHTML=e.hostEl.constructor.nextButtonSvg,i.part.add("button-next"),e.el.appendChild(i)),(!o||typeof o=="string")&&(o=document.createElement("div"),o.classList.add("swiper-button-prev"),o.innerHTML=e.hostEl.constructor.prevButtonSvg,o.part.add("button-prev"),e.el.appendChild(o))),i&&(u.navigation.nextEl=i),o&&(u.navigation.prevEl=o),h.init(),h.update()),s.includes("allowSlideNext")&&(e.allowSlideNext=r.allowSlideNext),s.includes("allowSlidePrev")&&(e.allowSlidePrev=r.allowSlidePrev),s.includes("direction")&&e.changeDirection(r.direction,!1),(O||A)&&e.loopDestroy(),(N||A)&&e.loopCreate(),e.update()}function K0(n,e){n===void 0&&(n={});const t={on:{}},r={},s={};Zo(t,Rp),t._emitClasses=!0,t.init=!1;const i={},o=kS.map(l=>l.replace(/_/,"")),a=Object.assign({},n);return Object.keys(a).forEach(l=>{typeof n[l]>"u"||(o.indexOf(l)>=0?to(n[l])?(t[l]={},s[l]={},Zo(t[l],n[l]),Zo(s[l],n[l])):(t[l]=n[l],s[l]=n[l]):l.search(/on[A-Z]/)===0&&typeof n[l]=="function"?t.on[`${l[2].toLowerCase()}${l.substr(3)}`]=n[l]:i[l]=n[l])}),["navigation","pagination","scrollbar"].forEach(l=>{t[l]===!0&&(t[l]={}),t[l]===!1&&delete t[l]}),{params:t,passedParams:s,rest:i,events:r}}function WN(n,e){let{el:t,nextEl:r,prevEl:s,paginationEl:i,scrollbarEl:o,swiper:a}=n;IS(e)&&r&&s&&(a.params.navigation.nextEl=r,a.originalParams.navigation.nextEl=r,a.params.navigation.prevEl=s,a.originalParams.navigation.prevEl=s),MS(e)&&i&&(a.params.pagination.el=i,a.originalParams.pagination.el=i),PS(e)&&o&&(a.params.scrollbar.el=o,a.originalParams.scrollbar.el=o),a.init(t)}function GN(n,e,t,r,s){const i=[];if(!e)return i;const o=l=>{i.indexOf(l)<0&&i.push(l)};if(t&&r){const l=r.map(s),c=t.map(s);l.join("")!==c.join("")&&o("children"),r.length!==t.length&&o("children")}return kS.filter(l=>l[0]==="_").map(l=>l.replace(/_/,"")).forEach(l=>{if(l in n&&l in e)if(to(n[l])&&to(e[l])){const c=Object.keys(n[l]),u=Object.keys(e[l]);c.length!==u.length?o(l):(c.forEach(d=>{n[l][d]!==e[l][d]&&o(l)}),u.forEach(d=>{n[l][d]!==e[l][d]&&o(l)}))}else n[l]!==e[l]&&o(l)}),i}const KN=n=>{!n||n.destroyed||!n.params.virtual||n.params.virtual&&!n.params.virtual.enabled||(n.updateSlides(),n.updateProgress(),n.updateSlidesClasses(),n.parallax&&n.params.parallax&&n.params.parallax.enabled&&n.parallax.setTranslate())};function vh(n,e,t){n===void 0&&(n={});const r=[],s={"container-start":[],"container-end":[],"wrapper-start":[],"wrapper-end":[]},i=(o,a)=>{Array.isArray(o)&&o.forEach(l=>{const c=typeof l.type=="symbol";a==="default"&&(a="container-end"),c&&l.children?i(l.children,a):l.type&&(l.type.name==="SwiperSlide"||l.type.name==="AsyncComponentWrapper")||l.componentOptions&&l.componentOptions.tag==="SwiperSlide"?r.push(l):s[a]&&s[a].push(l)})};return Object.keys(n).forEach(o=>{if(typeof n[o]!="function")return;const a=n[o]();i(a,o)}),t.value=e.value,e.value=r,{slides:r,slots:s}}function JN(n,e,t){if(!t)return null;const r=u=>{let d=u;return u<0?d=e.length+u:d>=e.length&&(d=d-e.length),d},s=n.value.isHorizontal()?{[n.value.rtlTranslate?"right":"left"]:`${t.offset}px`}:{top:`${t.offset}px`},{from:i,to:o}=t,a=n.value.params.loop?-e.length:0,l=n.value.params.loop?e.length*2:e.length,c=[];for(let u=a;u<l;u+=1)u>=i&&u<=o&&c.length<e.length&&c.push(e[r(u)]);return c.map(u=>{if(u.props||(u.props={}),u.props.style||(u.props.style={}),u.props.swiperRef=n,u.props.style=s,u.type)return Sn(u.type,{...u.props},u.children);if(u.componentOptions)return Sn(u.componentOptions.Ctor,{...u.props},u.componentOptions.children)})}const Eg={name:"Swiper",props:{tag:{type:String,default:"div"},wrapperTag:{type:String,default:"div"},modules:{type:Array,default:void 0},init:{type:Boolean,default:void 0},direction:{type:String,default:void 0},oneWayMovement:{type:Boolean,default:void 0},swiperElementNodeName:{type:String,default:"SWIPER-CONTAINER"},touchEventsTarget:{type:String,default:void 0},initialSlide:{type:Number,default:void 0},speed:{type:Number,default:void 0},cssMode:{type:Boolean,default:void 0},updateOnWindowResize:{type:Boolean,default:void 0},resizeObserver:{type:Boolean,default:void 0},nested:{type:Boolean,default:void 0},focusableElements:{type:String,default:void 0},width:{type:Number,default:void 0},height:{type:Number,default:void 0},preventInteractionOnTransition:{type:Boolean,default:void 0},userAgent:{type:String,default:void 0},url:{type:String,default:void 0},edgeSwipeDetection:{type:[Boolean,String],default:void 0},edgeSwipeThreshold:{type:Number,default:void 0},autoHeight:{type:Boolean,default:void 0},setWrapperSize:{type:Boolean,default:void 0},virtualTranslate:{type:Boolean,default:void 0},effect:{type:String,default:void 0},breakpoints:{type:Object,default:void 0},breakpointsBase:{type:String,default:void 0},spaceBetween:{type:[Number,String],default:void 0},slidesPerView:{type:[Number,String],default:void 0},maxBackfaceHiddenSlides:{type:Number,default:void 0},slidesPerGroup:{type:Number,default:void 0},slidesPerGroupSkip:{type:Number,default:void 0},slidesPerGroupAuto:{type:Boolean,default:void 0},centeredSlides:{type:Boolean,default:void 0},centeredSlidesBounds:{type:Boolean,default:void 0},slidesOffsetBefore:{type:Number,default:void 0},slidesOffsetAfter:{type:Number,default:void 0},normalizeSlideIndex:{type:Boolean,default:void 0},centerInsufficientSlides:{type:Boolean,default:void 0},watchOverflow:{type:Boolean,default:void 0},roundLengths:{type:Boolean,default:void 0},touchRatio:{type:Number,default:void 0},touchAngle:{type:Number,default:void 0},simulateTouch:{type:Boolean,default:void 0},shortSwipes:{type:Boolean,default:void 0},longSwipes:{type:Boolean,default:void 0},longSwipesRatio:{type:Number,default:void 0},longSwipesMs:{type:Number,default:void 0},followFinger:{type:Boolean,default:void 0},allowTouchMove:{type:Boolean,default:void 0},threshold:{type:Number,default:void 0},touchMoveStopPropagation:{type:Boolean,default:void 0},touchStartPreventDefault:{type:Boolean,default:void 0},touchStartForcePreventDefault:{type:Boolean,default:void 0},touchReleaseOnEdges:{type:Boolean,default:void 0},uniqueNavElements:{type:Boolean,default:void 0},resistance:{type:Boolean,default:void 0},resistanceRatio:{type:Number,default:void 0},watchSlidesProgress:{type:Boolean,default:void 0},grabCursor:{type:Boolean,default:void 0},preventClicks:{type:Boolean,default:void 0},preventClicksPropagation:{type:Boolean,default:void 0},slideToClickedSlide:{type:Boolean,default:void 0},loop:{type:Boolean,default:void 0},loopedSlides:{type:Number,default:void 0},loopPreventsSliding:{type:Boolean,default:void 0},rewind:{type:Boolean,default:void 0},allowSlidePrev:{type:Boolean,default:void 0},allowSlideNext:{type:Boolean,default:void 0},swipeHandler:{type:Boolean,default:void 0},noSwiping:{type:Boolean,default:void 0},noSwipingClass:{type:String,default:void 0},noSwipingSelector:{type:String,default:void 0},passiveListeners:{type:Boolean,default:void 0},containerModifierClass:{type:String,default:void 0},slideClass:{type:String,default:void 0},slideActiveClass:{type:String,default:void 0},slideVisibleClass:{type:String,default:void 0},slideFullyVisibleClass:{type:String,default:void 0},slideBlankClass:{type:String,default:void 0},slideNextClass:{type:String,default:void 0},slidePrevClass:{type:String,default:void 0},wrapperClass:{type:String,default:void 0},lazyPreloaderClass:{type:String,default:void 0},lazyPreloadPrevNext:{type:Number,default:void 0},runCallbacksOnInit:{type:Boolean,default:void 0},observer:{type:Boolean,default:void 0},observeParents:{type:Boolean,default:void 0},observeSlideChildren:{type:Boolean,default:void 0},a11y:{type:[Boolean,Object],default:void 0},autoplay:{type:[Boolean,Object],default:void 0},controller:{type:Object,default:void 0},coverflowEffect:{type:Object,default:void 0},cubeEffect:{type:Object,default:void 0},fadeEffect:{type:Object,default:void 0},flipEffect:{type:Object,default:void 0},creativeEffect:{type:Object,default:void 0},cardsEffect:{type:Object,default:void 0},hashNavigation:{type:[Boolean,Object],default:void 0},history:{type:[Boolean,Object],default:void 0},keyboard:{type:[Boolean,Object],default:void 0},mousewheel:{type:[Boolean,Object],default:void 0},navigation:{type:[Boolean,Object],default:void 0},pagination:{type:[Boolean,Object],default:void 0},parallax:{type:[Boolean,Object],default:void 0},scrollbar:{type:[Boolean,Object],default:void 0},thumbs:{type:Object,default:void 0},virtual:{type:[Boolean,Object],default:void 0},zoom:{type:[Boolean,Object],default:void 0},grid:{type:[Object],default:void 0},freeMode:{type:[Boolean,Object],default:void 0},enabled:{type:Boolean,default:void 0}},emits:["_beforeBreakpoint","_containerClasses","_slideClass","_slideClasses","_swiper","_freeModeNoMomentumRelease","activeIndexChange","afterInit","autoplay","autoplayStart","autoplayStop","autoplayPause","autoplayResume","autoplayTimeLeft","beforeDestroy","beforeInit","beforeLoopFix","beforeResize","beforeSlideChangeStart","beforeTransitionStart","breakpoint","changeDirection","click","disable","doubleTap","doubleClick","destroy","enable","fromEdge","hashChange","hashSet","init","keyPress","lock","loopFix","momentumBounce","navigationHide","navigationShow","navigationPrev","navigationNext","observerUpdate","orientationchange","paginationHide","paginationRender","paginationShow","paginationUpdate","progress","reachBeginning","reachEnd","realIndexChange","resize","scroll","scrollbarDragEnd","scrollbarDragMove","scrollbarDragStart","setTransition","setTranslate","slidesUpdated","slideChange","slideChangeTransitionEnd","slideChangeTransitionStart","slideNextTransitionEnd","slideNextTransitionStart","slidePrevTransitionEnd","slidePrevTransitionStart","slideResetTransitionStart","slideResetTransitionEnd","sliderMove","sliderFirstMove","slidesLengthChange","slidesGridLengthChange","snapGridLengthChange","snapIndexChange","swiper","tap","toEdge","touchEnd","touchMove","touchMoveOpposite","touchStart","transitionEnd","transitionStart","unlock","update","virtualUpdate","zoomChange"],setup(n,e){let{slots:t,emit:r}=e;const{tag:s,wrapperTag:i}=n,o=fe("swiper"),a=fe(null),l=fe(!1),c=fe(!1),u=fe(null),d=fe(null),h=fe(null),p={value:[]},m={value:[]},y=fe(null),v=fe(null),S=fe(null),T=fe(null),{params:b,passedParams:C}=K0(n);vh(t,p,m),h.value=C,m.value=p.value;const O=()=>{vh(t,p,m),l.value=!0};b.onAny=function(x){for(var _=arguments.length,M=new Array(_>1?_-1:0),I=1;I<_;I++)M[I-1]=arguments[I];r(x,...M)},Object.assign(b.on,{_beforeBreakpoint:O,_containerClasses(x,_){o.value=_}});const N={...b};if(delete N.wrapperClass,d.value=new Tg(N),d.value.virtual&&d.value.params.virtual.enabled){d.value.virtual.slides=p.value;const x={cache:!1,slides:p.value,renderExternal:_=>{a.value=_},renderExternalUpdate:!1};Zo(d.value.params.virtual,x),Zo(d.value.originalParams.virtual,x)}xm(()=>{!c.value&&d.value&&(d.value.emitSlidesClasses(),c.value=!0);const{passedParams:x}=K0(n),_=GN(x,h.value,p.value,m.value,M=>M.props&&M.props.key);h.value=x,(_.length||l.value)&&d.value&&!d.value.destroyed&&qN({swiper:d.value,slides:p.value,passedParams:x,changedParams:_,nextEl:y.value,prevEl:v.value,scrollbarEl:T.value,paginationEl:S.value}),l.value=!1}),Yo("swiper",d),At(a,()=>{as(()=>{KN(d.value)})}),kt(()=>{u.value&&(WN({el:u.value,nextEl:y.value,prevEl:v.value,paginationEl:S.value,scrollbarEl:T.value,swiper:d.value},b),r("swiper",d.value))}),lo(()=>{d.value&&!d.value.destroyed&&d.value.destroy(!0,!1)});function A(x){return b.virtual?JN(d,x,a.value):(x.forEach((_,M)=>{_.props||(_.props={}),_.props.swiperRef=d,_.props.swiperSlideIndex=M}),x)}return()=>{const{slides:x,slots:_}=vh(t,p,m);return Sn(s,{ref:u,class:RS(o.value)},[_["container-start"],Sn(i,{class:UN(b.wrapperClass)},[_["wrapper-start"],A(x),_["wrapper-end"]]),IS(n)&&[Sn("div",{ref:v,class:"swiper-button-prev"}),Sn("div",{ref:y,class:"swiper-button-next"})],PS(n)&&Sn("div",{ref:T,class:"swiper-scrollbar"}),MS(n)&&Sn("div",{ref:S,class:"swiper-pagination"}),_["container-end"]])}}},Sg={name:"SwiperSlide",props:{tag:{type:String,default:"div"},swiperRef:{type:Object,required:!1},swiperSlideIndex:{type:Number,default:void 0,required:!1},zoom:{type:Boolean,default:void 0,required:!1},lazy:{type:Boolean,default:!1,required:!1},virtualIndex:{type:[String,Number],default:void 0}},setup(n,e){let{slots:t}=e,r=!1;const{swiperRef:s}=n,i=fe(null),o=fe("swiper-slide"),a=fe(!1);function l(d,h,p){h===i.value&&(o.value=p)}kt(()=>{!s||!s.value||(s.value.on("_slideClass",l),r=!0)}),C1(()=>{r||!s||!s.value||(s.value.on("_slideClass",l),r=!0)}),xm(()=>{!i.value||!s||!s.value||(typeof n.swiperSlideIndex<"u"&&(i.value.swiperSlideIndex=n.swiperSlideIndex),s.value.destroyed&&o.value!=="swiper-slide"&&(o.value="swiper-slide"))}),lo(()=>{!s||!s.value||s.value.off("_slideClass",l)});const c=Oe(()=>({isActive:o.value.indexOf("swiper-slide-active")>=0,isVisible:o.value.indexOf("swiper-slide-visible")>=0,isPrev:o.value.indexOf("swiper-slide-prev")>=0,isNext:o.value.indexOf("swiper-slide-next")>=0}));Yo("swiperSlide",c);const u=()=>{a.value=!0};return()=>Sn(n.tag,{class:RS(`${o.value}`),ref:i,"data-swiper-slide-index":typeof n.virtualIndex>"u"&&s&&s.value&&s.value.params.loop?n.swiperSlideIndex:n.virtualIndex,onLoadCapture:u},n.zoom?Sn("div",{class:"swiper-zoom-container","data-swiper-zoom":typeof n.zoom=="number"?n.zoom:void 0},[t.default&&t.default(c.value),n.lazy&&!a.value&&Sn("div",{class:"swiper-lazy-preloader"})]):[t.default&&t.default(c.value),n.lazy&&!a.value&&Sn("div",{class:"swiper-lazy-preloader"})])}};function OS(n,e,t,r){return n.params.createElements&&Object.keys(r).forEach(s=>{if(!t[s]&&t.auto===!0){let i=Ar(n.el,`.${r[s]}`)[0];i||(i=jc("div",r[s]),i.className=r[s],n.el.append(i)),t[s]=i,e[s]=i}}),t}function DS(n){let{swiper:e,extendParams:t,on:r,emit:s}=n;t({navigation:{nextEl:null,prevEl:null,hideOnClick:!1,disabledClass:"swiper-button-disabled",hiddenClass:"swiper-button-hidden",lockClass:"swiper-button-lock",navigationDisabledClass:"swiper-navigation-disabled"}}),e.navigation={nextEl:null,prevEl:null};function i(m){let y;return m&&typeof m=="string"&&e.isElement&&(y=e.el.querySelector(m)||e.hostEl.querySelector(m),y)?y:(m&&(typeof m=="string"&&(y=[...document.querySelectorAll(m)]),e.params.uniqueNavElements&&typeof m=="string"&&y&&y.length>1&&e.el.querySelectorAll(m).length===1?y=e.el.querySelector(m):y&&y.length===1&&(y=y[0])),m&&!y?m:y)}function o(m,y){const v=e.params.navigation;m=zt(m),m.forEach(S=>{S&&(S.classList[y?"add":"remove"](...v.disabledClass.split(" ")),S.tagName==="BUTTON"&&(S.disabled=y),e.params.watchOverflow&&e.enabled&&S.classList[e.isLocked?"add":"remove"](v.lockClass))})}function a(){const{nextEl:m,prevEl:y}=e.navigation;if(e.params.loop){o(y,!1),o(m,!1);return}o(y,e.isBeginning&&!e.params.rewind),o(m,e.isEnd&&!e.params.rewind)}function l(m){m.preventDefault(),!(e.isBeginning&&!e.params.loop&&!e.params.rewind)&&(e.slidePrev(),s("navigationPrev"))}function c(m){m.preventDefault(),!(e.isEnd&&!e.params.loop&&!e.params.rewind)&&(e.slideNext(),s("navigationNext"))}function u(){const m=e.params.navigation;if(e.params.navigation=OS(e,e.originalParams.navigation,e.params.navigation,{nextEl:"swiper-button-next",prevEl:"swiper-button-prev"}),!(m.nextEl||m.prevEl))return;let y=i(m.nextEl),v=i(m.prevEl);Object.assign(e.navigation,{nextEl:y,prevEl:v}),y=zt(y),v=zt(v);const S=(T,b)=>{T&&T.addEventListener("click",b==="next"?c:l),!e.enabled&&T&&T.classList.add(...m.lockClass.split(" "))};y.forEach(T=>S(T,"next")),v.forEach(T=>S(T,"prev"))}function d(){let{nextEl:m,prevEl:y}=e.navigation;m=zt(m),y=zt(y);const v=(S,T)=>{S.removeEventListener("click",T==="next"?c:l),S.classList.remove(...e.params.navigation.disabledClass.split(" "))};m.forEach(S=>v(S,"next")),y.forEach(S=>v(S,"prev"))}r("init",()=>{e.params.navigation.enabled===!1?p():(u(),a())}),r("toEdge fromEdge lock unlock",()=>{a()}),r("destroy",()=>{d()}),r("enable disable",()=>{let{nextEl:m,prevEl:y}=e.navigation;if(m=zt(m),y=zt(y),e.enabled){a();return}[...m,...y].filter(v=>!!v).forEach(v=>v.classList.add(e.params.navigation.lockClass))}),r("click",(m,y)=>{let{nextEl:v,prevEl:S}=e.navigation;v=zt(v),S=zt(S);const T=y.target;let b=S.includes(T)||v.includes(T);if(e.isElement&&!b){const C=y.path||y.composedPath&&y.composedPath();C&&(b=C.find(O=>v.includes(O)||S.includes(O)))}if(e.params.navigation.hideOnClick&&!b){if(e.pagination&&e.params.pagination&&e.params.pagination.clickable&&(e.pagination.el===T||e.pagination.el.contains(T)))return;let C;v.length?C=v[0].classList.contains(e.params.navigation.hiddenClass):S.length&&(C=S[0].classList.contains(e.params.navigation.hiddenClass)),s(C===!0?"navigationShow":"navigationHide"),[...v,...S].filter(O=>!!O).forEach(O=>O.classList.toggle(e.params.navigation.hiddenClass))}});const h=()=>{e.el.classList.remove(...e.params.navigation.navigationDisabledClass.split(" ")),u(),a()},p=()=>{e.el.classList.add(...e.params.navigation.navigationDisabledClass.split(" ")),d()};Object.assign(e.navigation,{enable:h,disable:p,update:a,init:u,destroy:d})}function Ha(n){return n===void 0&&(n=""),`.${n.trim().replace(/([\.:!+\/])/g,"\\$1").replace(/ /g,".")}`}function NS(n){let{swiper:e,extendParams:t,on:r,emit:s}=n;const i="swiper-pagination";t({pagination:{el:null,bulletElement:"span",clickable:!1,hideOnClick:!1,renderBullet:null,renderProgressbar:null,renderFraction:null,renderCustom:null,progressbarOpposite:!1,type:"bullets",dynamicBullets:!1,dynamicMainBullets:1,formatFractionCurrent:T=>T,formatFractionTotal:T=>T,bulletClass:`${i}-bullet`,bulletActiveClass:`${i}-bullet-active`,modifierClass:`${i}-`,currentClass:`${i}-current`,totalClass:`${i}-total`,hiddenClass:`${i}-hidden`,progressbarFillClass:`${i}-progressbar-fill`,progressbarOppositeClass:`${i}-progressbar-opposite`,clickableClass:`${i}-clickable`,lockClass:`${i}-lock`,horizontalClass:`${i}-horizontal`,verticalClass:`${i}-vertical`,paginationDisabledClass:`${i}-disabled`}}),e.pagination={el:null,bullets:[]};let o,a=0;function l(){return!e.params.pagination.el||!e.pagination.el||Array.isArray(e.pagination.el)&&e.pagination.el.length===0}function c(T,b){const{bulletActiveClass:C}=e.params.pagination;T&&(T=T[`${b==="prev"?"previous":"next"}ElementSibling`],T&&(T.classList.add(`${C}-${b}`),T=T[`${b==="prev"?"previous":"next"}ElementSibling`],T&&T.classList.add(`${C}-${b}-${b}`)))}function u(T,b,C){if(T=T%C,b=b%C,b===T+1)return"next";if(b===T-1)return"previous"}function d(T){const b=T.target.closest(Ha(e.params.pagination.bulletClass));if(!b)return;T.preventDefault();const C=Hc(b)*e.params.slidesPerGroup;if(e.params.loop){if(e.realIndex===C)return;const O=u(e.realIndex,C,e.slides.length);O==="next"?e.slideNext():O==="previous"?e.slidePrev():e.slideToLoop(C)}else e.slideTo(C)}function h(){const T=e.rtl,b=e.params.pagination;if(l())return;let C=e.pagination.el;C=zt(C);let O,N;const A=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.slides.length,x=e.params.loop?Math.ceil(A/e.params.slidesPerGroup):e.snapGrid.length;if(e.params.loop?(N=e.previousRealIndex||0,O=e.params.slidesPerGroup>1?Math.floor(e.realIndex/e.params.slidesPerGroup):e.realIndex):typeof e.snapIndex<"u"?(O=e.snapIndex,N=e.previousSnapIndex):(N=e.previousIndex||0,O=e.activeIndex||0),b.type==="bullets"&&e.pagination.bullets&&e.pagination.bullets.length>0){const _=e.pagination.bullets;let M,I,P;if(b.dynamicBullets&&(o=Mp(_[0],e.isHorizontal()?"width":"height"),C.forEach(k=>{k.style[e.isHorizontal()?"width":"height"]=`${o*(b.dynamicMainBullets+4)}px`}),b.dynamicMainBullets>1&&N!==void 0&&(a+=O-(N||0),a>b.dynamicMainBullets-1?a=b.dynamicMainBullets-1:a<0&&(a=0)),M=Math.max(O-a,0),I=M+(Math.min(_.length,b.dynamicMainBullets)-1),P=(I+M)/2),_.forEach(k=>{const K=[...["","-next","-next-next","-prev","-prev-prev","-main"].map(le=>`${b.bulletActiveClass}${le}`)].map(le=>typeof le=="string"&&le.includes(" ")?le.split(" "):le).flat();k.classList.remove(...K)}),C.length>1)_.forEach(k=>{const K=Hc(k);K===O?k.classList.add(...b.bulletActiveClass.split(" ")):e.isElement&&k.setAttribute("part","bullet"),b.dynamicBullets&&(K>=M&&K<=I&&k.classList.add(...`${b.bulletActiveClass}-main`.split(" ")),K===M&&c(k,"prev"),K===I&&c(k,"next"))});else{const k=_[O];if(k&&k.classList.add(...b.bulletActiveClass.split(" ")),e.isElement&&_.forEach((K,le)=>{K.setAttribute("part",le===O?"bullet-active":"bullet")}),b.dynamicBullets){const K=_[M],le=_[I];for(let J=M;J<=I;J+=1)_[J]&&_[J].classList.add(...`${b.bulletActiveClass}-main`.split(" "));c(K,"prev"),c(le,"next")}}if(b.dynamicBullets){const k=Math.min(_.length,b.dynamicMainBullets+4),K=(o*k-o)/2-P*o,le=T?"right":"left";_.forEach(J=>{J.style[e.isHorizontal()?le:"top"]=`${K}px`})}}C.forEach((_,M)=>{if(b.type==="fraction"&&(_.querySelectorAll(Ha(b.currentClass)).forEach(I=>{I.textContent=b.formatFractionCurrent(O+1)}),_.querySelectorAll(Ha(b.totalClass)).forEach(I=>{I.textContent=b.formatFractionTotal(x)})),b.type==="progressbar"){let I;b.progressbarOpposite?I=e.isHorizontal()?"vertical":"horizontal":I=e.isHorizontal()?"horizontal":"vertical";const P=(O+1)/x;let k=1,K=1;I==="horizontal"?k=P:K=P,_.querySelectorAll(Ha(b.progressbarFillClass)).forEach(le=>{le.style.transform=`translate3d(0,0,0) scaleX(${k}) scaleY(${K})`,le.style.transitionDuration=`${e.params.speed}ms`})}b.type==="custom"&&b.renderCustom?(_.innerHTML=b.renderCustom(e,O+1,x),M===0&&s("paginationRender",_)):(M===0&&s("paginationRender",_),s("paginationUpdate",_)),e.params.watchOverflow&&e.enabled&&_.classList[e.isLocked?"add":"remove"](b.lockClass)})}function p(){const T=e.params.pagination;if(l())return;const b=e.virtual&&e.params.virtual.enabled?e.virtual.slides.length:e.grid&&e.params.grid.rows>1?e.slides.length/Math.ceil(e.params.grid.rows):e.slides.length;let C=e.pagination.el;C=zt(C);let O="";if(T.type==="bullets"){let N=e.params.loop?Math.ceil(b/e.params.slidesPerGroup):e.snapGrid.length;e.params.freeMode&&e.params.freeMode.enabled&&N>b&&(N=b);for(let A=0;A<N;A+=1)T.renderBullet?O+=T.renderBullet.call(e,A,T.bulletClass):O+=`<${T.bulletElement} ${e.isElement?'part="bullet"':""} class="${T.bulletClass}"></${T.bulletElement}>`}T.type==="fraction"&&(T.renderFraction?O=T.renderFraction.call(e,T.currentClass,T.totalClass):O=`<span class="${T.currentClass}"></span> / <span class="${T.totalClass}"></span>`),T.type==="progressbar"&&(T.renderProgressbar?O=T.renderProgressbar.call(e,T.progressbarFillClass):O=`<span class="${T.progressbarFillClass}"></span>`),e.pagination.bullets=[],C.forEach(N=>{T.type!=="custom"&&(N.innerHTML=O||""),T.type==="bullets"&&e.pagination.bullets.push(...N.querySelectorAll(Ha(T.bulletClass)))}),T.type!=="custom"&&s("paginationRender",C[0])}function m(){e.params.pagination=OS(e,e.originalParams.pagination,e.params.pagination,{el:"swiper-pagination"});const T=e.params.pagination;if(!T.el)return;let b;typeof T.el=="string"&&e.isElement&&(b=e.el.querySelector(T.el)),!b&&typeof T.el=="string"&&(b=[...document.querySelectorAll(T.el)]),b||(b=T.el),!(!b||b.length===0)&&(e.params.uniqueNavElements&&typeof T.el=="string"&&Array.isArray(b)&&b.length>1&&(b=[...e.el.querySelectorAll(T.el)],b.length>1&&(b=b.find(C=>ES(C,".swiper")[0]===e.el))),Array.isArray(b)&&b.length===1&&(b=b[0]),Object.assign(e.pagination,{el:b}),b=zt(b),b.forEach(C=>{T.type==="bullets"&&T.clickable&&C.classList.add(...(T.clickableClass||"").split(" ")),C.classList.add(T.modifierClass+T.type),C.classList.add(e.isHorizontal()?T.horizontalClass:T.verticalClass),T.type==="bullets"&&T.dynamicBullets&&(C.classList.add(`${T.modifierClass}${T.type}-dynamic`),a=0,T.dynamicMainBullets<1&&(T.dynamicMainBullets=1)),T.type==="progressbar"&&T.progressbarOpposite&&C.classList.add(T.progressbarOppositeClass),T.clickable&&C.addEventListener("click",d),e.enabled||C.classList.add(T.lockClass)}))}function y(){const T=e.params.pagination;if(l())return;let b=e.pagination.el;b&&(b=zt(b),b.forEach(C=>{C.classList.remove(T.hiddenClass),C.classList.remove(T.modifierClass+T.type),C.classList.remove(e.isHorizontal()?T.horizontalClass:T.verticalClass),T.clickable&&(C.classList.remove(...(T.clickableClass||"").split(" ")),C.removeEventListener("click",d))})),e.pagination.bullets&&e.pagination.bullets.forEach(C=>C.classList.remove(...T.bulletActiveClass.split(" ")))}r("changeDirection",()=>{if(!e.pagination||!e.pagination.el)return;const T=e.params.pagination;let{el:b}=e.pagination;b=zt(b),b.forEach(C=>{C.classList.remove(T.horizontalClass,T.verticalClass),C.classList.add(e.isHorizontal()?T.horizontalClass:T.verticalClass)})}),r("init",()=>{e.params.pagination.enabled===!1?S():(m(),p(),h())}),r("activeIndexChange",()=>{typeof e.snapIndex>"u"&&h()}),r("snapIndexChange",()=>{h()}),r("snapGridLengthChange",()=>{p(),h()}),r("destroy",()=>{y()}),r("enable disable",()=>{let{el:T}=e.pagination;T&&(T=zt(T),T.forEach(b=>b.classList[e.enabled?"remove":"add"](e.params.pagination.lockClass)))}),r("lock unlock",()=>{h()}),r("click",(T,b)=>{const C=b.target,O=zt(e.pagination.el);if(e.params.pagination.el&&e.params.pagination.hideOnClick&&O&&O.length>0&&!C.classList.contains(e.params.pagination.bulletClass)){if(e.navigation&&(e.navigation.nextEl&&C===e.navigation.nextEl||e.navigation.prevEl&&C===e.navigation.prevEl))return;const N=O[0].classList.contains(e.params.pagination.hiddenClass);s(N===!0?"paginationShow":"paginationHide"),O.forEach(A=>A.classList.toggle(e.params.pagination.hiddenClass))}});const v=()=>{e.el.classList.remove(e.params.pagination.paginationDisabledClass);let{el:T}=e.pagination;T&&(T=zt(T),T.forEach(b=>b.classList.remove(e.params.pagination.paginationDisabledClass))),m(),p(),h()},S=()=>{e.el.classList.add(e.params.pagination.paginationDisabledClass);let{el:T}=e.pagination;T&&(T=zt(T),T.forEach(b=>b.classList.add(e.params.pagination.paginationDisabledClass))),y()};Object.assign(e.pagination,{enable:v,disable:S,render:p,update:h,init:m,destroy:y})}function LS(n){let{swiper:e,extendParams:t,on:r}=n;t({controller:{control:void 0,inverse:!1,by:"slide"}}),e.controller={control:void 0};function s(c,u){const d=function(){let y,v,S;return(T,b)=>{for(v=-1,y=T.length;y-v>1;)S=y+v>>1,T[S]<=b?v=S:y=S;return y}}();this.x=c,this.y=u,this.lastIndex=c.length-1;let h,p;return this.interpolate=function(y){return y?(p=d(this.x,y),h=p-1,(y-this.x[h])*(this.y[p]-this.y[h])/(this.x[p]-this.x[h])+this.y[h]):0},this}function i(c){e.controller.spline=e.params.loop?new s(e.slidesGrid,c.slidesGrid):new s(e.snapGrid,c.snapGrid)}function o(c,u){const d=e.controller.control;let h,p;const m=e.constructor;function y(v){if(v.destroyed)return;const S=e.rtlTranslate?-e.translate:e.translate;e.params.controller.by==="slide"&&(i(v),p=-e.controller.spline.interpolate(-S)),(!p||e.params.controller.by==="container")&&(h=(v.maxTranslate()-v.minTranslate())/(e.maxTranslate()-e.minTranslate()),(Number.isNaN(h)||!Number.isFinite(h))&&(h=1),p=(S-e.minTranslate())*h+v.minTranslate()),e.params.controller.inverse&&(p=v.maxTranslate()-p),v.updateProgress(p),v.setTranslate(p,e),v.updateActiveIndex(),v.updateSlidesClasses()}if(Array.isArray(d))for(let v=0;v<d.length;v+=1)d[v]!==u&&d[v]instanceof m&&y(d[v]);else d instanceof m&&u!==d&&y(d)}function a(c,u){const d=e.constructor,h=e.controller.control;let p;function m(y){y.destroyed||(y.setTransition(c,e),c!==0&&(y.transitionStart(),y.params.autoHeight&&Bc(()=>{y.updateAutoHeight()}),DD(y.wrapperEl,()=>{h&&y.transitionEnd()})))}if(Array.isArray(h))for(p=0;p<h.length;p+=1)h[p]!==u&&h[p]instanceof d&&m(h[p]);else h instanceof d&&u!==h&&m(h)}function l(){e.controller.control&&e.controller.spline&&(e.controller.spline=void 0,delete e.controller.spline)}r("beforeInit",()=>{if(typeof window<"u"&&(typeof e.params.controller.control=="string"||e.params.controller.control instanceof HTMLElement)){(typeof e.params.controller.control=="string"?[...document.querySelectorAll(e.params.controller.control)]:[e.params.controller.control]).forEach(u=>{if(e.controller.control||(e.controller.control=[]),u&&u.swiper)e.controller.control.push(u.swiper);else if(u){const d=`${e.params.eventsPrefix}init`,h=p=>{e.controller.control.push(p.detail[0]),e.update(),u.removeEventListener(d,h)};u.addEventListener(d,h)}});return}e.controller.control=e.params.controller.control}),r("update",()=>{l()}),r("resize",()=>{l()}),r("observerUpdate",()=>{l()}),r("setTranslate",(c,u,d)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTranslate(u,d)}),r("setTransition",(c,u,d)=>{!e.controller.control||e.controller.control.destroyed||e.controller.setTransition(u,d)}),Object.assign(e.controller,{setTranslate:o,setTransition:a})}const QN={class:"day-menu-swiper-container bg-[#eaeaea] p-4 sticky top-0 z-40 border-b border-gray-300"},YN=["onClick"],XN={__name:"DayMenu",props:{days:{type:Array,required:!0},controlledSwiper:{type:Object,default:null},activeIndex:{type:Number,default:0}},emits:["goToDay","swiper"],setup(n,{emit:e}){const t=n,r=e;function s(l){if(!l||!l.id)return"Dia";const c=l.id.replace("day-",""),u=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"];let d=null,h,p,m;if(l.date)[h,p,m]=l.date.split("-").map(Number),d=new Date(h,p-1,m,12,0,0);else if(l.data){const T=l.data.match(/(\d{2})\/(\d{2})\/(\d{4})/);T&&(m=parseInt(T[1]),p=parseInt(T[2]),h=parseInt(T[3]),d=new Date(h,p-1,m,12,0,0))}if(!d||isNaN(d.getTime()))return`Dia ${c}`;const y=new Date;y.setHours(12,0,0,0),y.setHours(0,0,0,0);const v=new Date(y);v.setDate(y.getDate()+1);let S="";if(d.getDate()===y.getDate()&&d.getMonth()===y.getMonth()&&d.getFullYear()===y.getFullYear())S="Hoje";else if(d.getDate()===v.getDate()&&d.getMonth()===v.getMonth()&&d.getFullYear()===v.getFullYear())S="Amanh";else{const T=d.getDate(),b=u[d.getMonth()];S=`${T} de ${b}`}return`Dia ${c} - ${S}`}function i(l){r("goToDay",l)}function o(l){r("swiper",l)}const a=[LS];return(l,c)=>(z(),j("nav",QN,[Ee(_n(Eg),{modules:a,"slides-per-view":"auto","space-between":10,"centered-slides":!0,"grab-cursor":!0,onSwiper:o,class:"day-menu-swiper"},{default:nt(()=>[(z(!0),j(Be,null,ot(t.days,(u,d)=>(z(),mt(_n(Sg),{key:u.id,class:"day-menu-slide"},{default:nt(()=>[w("button",{onClick:h=>i(d),class:ye(["px-4 py-2 rounded-full text-sm font-medium transition-colors duration-200 ease-in-out cursor-pointer whitespace-nowrap",d===t.activeIndex?"bg-blue-600 text-white font-semibold":"bg-blue-100 text-blue-700 hover:bg-blue-200"])},Ce(s(u)),11,YN)]),_:2},1024))),128))]),_:1})]))}},ZN=mr(XN,[["__scopeId","data-v-fdd8d238"]]),eL={class:"bg-blue-900 text-white py-8 px-4"},tL={class:"container mx-auto"},nL={class:"flex justify-between items-center"},rL={class:"text-lg md:text-xl font-medium truncate max-w-[70%]"},sL={class:"flex items-center space-x-4"},iL=["href"],oL=["href"],aL=["href"],lL=["href"],uL={key:0,class:"border-b border-blue-800 mt-5"},cL={class:"border-t border-blue-700 mt-8 pt-6 text-center"},dL={__name:"FooterSection",setup(n){const e=fe({}),t=r=>r?r.includes("instagram.com")?r.startsWith("http")?r:`https://${r}`:`https://instagram.com/${r.startsWith("@")?r.substring(1):r}`:"#";return kt(async()=>{try{const r=await bS();r&&(e.value=r)}catch(r){console.error("Erro ao carregar os dados do footer:",r)}}),(r,s)=>(z(),j("footer",eL,[w("div",tL,[w("div",null,[s[4]||(s[4]=w("h3",{class:"text-xl font-bold mb-6"},"Contatos Importantes",-1)),(z(!0),j(Be,null,ot(e.value.contatos_importantes,(i,o)=>(z(),j("div",{key:i.id,class:"mb-5"},[w("div",nL,[w("p",rL,Ce(i.nome),1),w("div",sL,[i.contato&&i.contato.match(/^\+?\d/)?(z(),j("a",{key:0,href:`tel:${i.contato.replace(/\s+/g,"")}`,class:"text-white hover:text-blue-300 transition"},s[0]||(s[0]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"})],-1)]),8,iL)):he("",!0),i.whatsapp?(z(),j("a",{key:1,href:`https://wa.me/${i.whatsapp}`,target:"_blank",class:"text-white hover:text-blue-300 transition"},s[1]||(s[1]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor"},[w("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})],-1)]),8,oL)):he("",!0),i.instagram?(z(),j("a",{key:2,href:t(i.instagram),target:"_blank",class:"text-white hover:text-blue-300 transition"},s[2]||(s[2]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 24 24",fill:"currentColor"},[w("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})],-1)]),8,aL)):he("",!0),i.rota?(z(),j("a",{key:3,href:i.rota,target:"_blank",class:"text-white hover:text-blue-300 transition"},s[3]||(s[3]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor"},[w("path",{"fill-rule":"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z","clip-rule":"evenodd"})],-1)]),8,lL)):he("",!0)])]),o<e.value.contatos_importantes.length-1?(z(),j("div",uL)):he("",!0)]))),128))]),w("div",cL,[w("p",null,Ce(e.value.copyright),1)])])]))}},fL=mr(dL,[["__scopeId","data-v-ca0082fd"]]),hL={class:"activity-item"},pL={class:"font-medium"},mL={class:"text-gray-600"},gL={key:0,class:"note-container"},yL=["innerHTML"],vL={class:"mt-1 flex gap-2 flex-wrap"},bL=["href"],wL=["href"],TL=["href"],EL={__name:"ActivityItem",props:{atividade:{type:Object,required:!0}},setup(n){return(e,t)=>(z(),j("div",hL,[w("p",pL,Ce(n.atividade.titulo),1),w("p",mL,Ce(n.atividade.descricao),1),n.atividade.note?(z(),j("div",gL,[w("div",{innerHTML:n.atividade.note,class:"tiptap-content"},null,8,yL)])):he("",!0),w("div",vL,[n.atividade.location?(z(),j("a",{key:0,href:n.atividade.location,target:"_blank",class:"inline-flex items-center text-blue-600 hover:text-blue-800 text-sm"},t[0]||(t[0]=[w("i",{class:"fas fa-map-marker-alt mr-1"},null,-1)]),8,bL)):he("",!0),n.atividade.links&&n.atividade.links.site?(z(),j("a",{key:1,href:n.atividade.links.site,target:"_blank",class:"inline-flex items-center text-blue-600 hover:text-blue-800 text-sm"},t[1]||(t[1]=[w("i",{class:"fas fa-globe mr-1"},null,-1)]),8,wL)):he("",!0),n.atividade.links&&n.atividade.links.instagram?(z(),j("a",{key:2,href:n.atividade.links.instagram,target:"_blank",class:"inline-flex items-center text-blue-600 hover:text-blue-800 text-sm"},t[2]||(t[2]=[w("i",{class:"fab fa-instagram mr-1"},null,-1)]),8,TL)):he("",!0)])]))}},Ua=mr(EL,[["__scopeId","data-v-872e178d"]]),SL=["id"],_L={class:"flex flex-wrap items-center mb-1"},xL={class:"text-2xl sm:text-3xl font-bold text-blue-800 mr-4 mb-1 sm:mb-0"},CL={class:"mb-5"},AL={class:"text-sm text-gray-700"},kL={class:"mb-8"},IL={key:0,class:"photo-container h-60 sm:h-80 mb-8"},ML=["src","alt"],PL={class:"photo-container h-60 sm:h-72"},RL=["src","alt"],OL={class:"bg-white rounded-lg shadow-md p-6"},DL={key:0,class:"mb-4"},NL={key:1,class:"mb-4"},LL={key:2},VL={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},$L={key:0},BL={key:1},FL={class:"font-semibold text-blue-600 mb-2"},zL={class:"grid grid-cols-1 md:grid-cols-2 gap-6 mt-6"},jL={key:0},HL={key:1},UL={key:0,class:"mt-6"},qL={key:3,class:"mt-6 bg-blue-50 p-4 rounded-lg"},WL={class:"text-gray-700 space-y-2"},GL=["innerHTML"],KL={key:0,class:"text-xl font-bold text-blue-700 mb-4"},JL={key:1,class:"font-bold text-blue-800 mb-2"},QL={class:"text-gray-700 mb-4"},YL={key:1,class:"bg-white rounded-lg shadow-md p-6"},XL={class:"text-xl font-bold text-blue-700 mb-4"},ZL={class:"text-gray-700"},eV={__name:"DayCard",props:{day:{type:Object,required:!0}},setup(n){const e=n,t=fe(0),r=[DS,NS],s=fe([]),i=fe(!0),o=Oe(()=>{const d=[];return Object.values(u.value).forEach(h=>{h.forEach(p=>{p.images&&p.images.length&&d.push(...p.images)})}),[...new Set(d)]}),a=d=>{if(!d)return"";const h=new Date;h.setHours(0,0,0,0);const p=new Date(h);p.setDate(p.getDate()+1);let m,y,v,S;if(d.match(/^\d{4}-\d{2}-\d{2}$/))m=d.split("-"),S=parseInt(m[0],10),v=parseInt(m[1],10)-1,y=parseInt(m[2],10);else if(d.includes("/"))m=d.split("/"),y=parseInt(m[0],10),v=parseInt(m[1],10)-1,S=m[2].length===2?2e3+parseInt(m[2],10):parseInt(m[2],10);else if(d.includes("-"))m=d.split("-"),y=parseInt(m[0],10),v=parseInt(m[1],10)-1,S=m[2].length===2?2e3+parseInt(m[2],10):parseInt(m[2],10);else return d;if(isNaN(y)||isNaN(v)||isNaN(S))return d;const T=new Date(S,v,y),b=["Janeiro","Fevereiro","Maro","Abril","Maio","Junho","Julho","Agosto","Setembro","Outubro","Novembro","Dezembro"],C=["Domingo","Segunda-feira","Tera-feira","Quarta-feira","Quinta-feira","Sexta-feira","Sbado"];let O=`${y} de ${b[v]}`;if(T.getTime()===h.getTime()?O+=" (hoje)":T.getTime()===p.getTime()&&(O+=" (amanh)"),O+=` - ${C[T.getDay()]}`,e.day.id&&e.day.id.includes("day-")){const N=e.day.id.replace("day-","");isNaN(parseInt(N,10))||(O+=` - ${N} dia`)}return O},l=d=>{t.value=d.activeIndex},c=async()=>{try{i.value=!0,s.value=await vg()}catch(d){console.error("Erro ao carregar atividades:",d),s.value=[]}finally{i.value=!1}};kt(async()=>{await c()});const u=Oe(()=>{if(!e.day.schedule||s.value.length===0)return{morning:[],lunch:[],midDay:[],afternoon:[],evening:[],night:[]};const d=p=>!p||p.length===0||!p.map?[]:p.map(m=>{let y,v="";if(typeof m=="string")y=m;else if(typeof m=="object"&&m!==null)y=m.activityId,v=m.note||"";else return{id:"",titulo:"",descricao:"",title:"",description:"",note:""};const S=s.value.find(T=>T.id===y);return S?{...S,titulo:S.title,descricao:S.description,note:v}:{id:y,titulo:y,descricao:"",title:y,description:"",note:v}});return{morning:d(e.day.schedule.morning),lunch:d(e.day.schedule.lunch),midDay:d(e.day.schedule.midDay),afternoon:d(e.day.schedule.afternoon),evening:d(e.day.schedule.evening),night:d(e.day.schedule.night)}});return(d,h)=>(z(),j("section",{id:n.day.id,class:"mb-20"},[w("div",_L,[w("h2",xL,Ce(n.day.title),1)]),w("div",CL,[w("h3",AL,Ce(a(n.day.date)),1)]),w("div",kL,[o.value.length===1?(z(),j("div",IL,[w("img",{src:o.value[0],alt:n.day.title,class:"w-full h-full object-cover rounded-lg shadow-md"},null,8,ML)])):he("",!0),o.value.length>1?(z(),mt(_n(Eg),{key:1,modules:r,"slides-per-view":3,"space-between":20,loop:!0,pagination:{clickable:!0},navigation:!1,nested:!0,activeIndex:t.value,"onUpdate:activeIndex":h[0]||(h[0]=p=>t.value=p),onSlideChange:l,class:"photo-swiper mb-8",breakpoints:{320:{slidesPerView:1,spaceBetween:10},768:{slidesPerView:2,spaceBetween:15},1024:{slidesPerView:3,spaceBetween:20}}},{default:nt(()=>[(z(!0),j(Be,null,ot(o.value,(p,m)=>(z(),mt(_n(Sg),{key:m},{default:nt(()=>[w("div",PL,[w("img",{src:p,alt:`${n.day.title} ${m+1}`,class:"w-full h-full object-cover rounded-lg shadow-md"},null,8,RL)])]),_:2},1024))),128))]),_:1},8,["activeIndex"])):he("",!0),w("div",OL,[h[8]||(h[8]=w("h3",{class:"text-xl font-bold text-blue-700 mb-4"}," Atividades Planejadas ",-1)),i.value?(z(),j("div",DL,h[1]||(h[1]=[w("p",{class:"text-gray-600 italic"},"Carregando atividades...",-1)]))):u.value.morning.length+u.value.lunch.length+u.value.midDay.length+u.value.afternoon.length+u.value.evening.length+u.value.night.length>0?(z(),j("div",NL)):he("",!0),i.value?he("",!0):(z(),j("div",LL,[w("div",VL,[u.value.morning.length>0?(z(),j("div",$L,[h[2]||(h[2]=w("h4",{class:"font-semibold text-blue-600 mb-2"},"Manh",-1)),(z(!0),j(Be,null,ot(u.value.morning,(p,m)=>(z(),mt(Ua,{key:"manha-"+m,atividade:p},null,8,["atividade"]))),128))])):he("",!0),u.value.lunch.length>0||u.value.midDay.length>0?(z(),j("div",BL,[w("h4",FL,Ce(u.value.lunch.length>0?"Almoo":"Meio-dia"),1),(z(!0),j(Be,null,ot(u.value.lunch.length>0?u.value.lunch:u.value.midDay,(p,m)=>(z(),mt(Ua,{key:"almoco-"+m,atividade:p},null,8,["atividade"]))),128))])):he("",!0)]),w("div",zL,[u.value.afternoon.length>0?(z(),j("div",jL,[h[3]||(h[3]=w("h4",{class:"font-semibold text-blue-600 mb-2"},"Tarde",-1)),(z(!0),j(Be,null,ot(u.value.afternoon,(p,m)=>(z(),mt(Ua,{key:"tarde-"+m,atividade:p},null,8,["atividade"]))),128))])):he("",!0),u.value.evening.length>0?(z(),j("div",HL,[h[4]||(h[4]=w("h4",{class:"font-semibold text-blue-600 mb-2"},"Fim de tarde",-1)),(z(!0),j(Be,null,ot(u.value.evening,(p,m)=>(z(),mt(Ua,{key:"fimtarde-"+m,atividade:p},null,8,["atividade"]))),128))])):he("",!0)]),u.value.night.length>0?(z(),j("div",UL,[h[5]||(h[5]=w("h4",{class:"font-semibold text-blue-600 mb-2"},"Noite",-1)),(z(!0),j(Be,null,ot(u.value.night,(p,m)=>(z(),mt(Ua,{key:"noite-"+m,atividade:p},null,8,["atividade"]))),128))])):he("",!0)])),n.day.tips&&n.day.tips.length>0?(z(),j("div",qL,[h[7]||(h[7]=w("h4",{class:"font-bold text-blue-800 mb-2"},[w("i",{class:"fas fa-lightbulb text-yellow-500 mr-2"}),St(" Dicas para o dia:")],-1)),w("ul",WL,[(z(!0),j(Be,null,ot(n.day.tips,(p,m)=>(z(),j("li",{key:m},[h[6]||(h[6]=St(" ")),w("span",{innerHTML:p},null,8,GL)]))),128))])])):he("",!0)])]),n.day.additionalDetails&&n.day.additionalDetails.length>0?(z(),j("div",{key:0,class:ye([{"bg-white":!n.day.about,"bg-blue-50":n.day.about},"rounded-lg shadow-md p-6 mb-8"])},[(z(!0),j(Be,null,ot(n.day.additionalDetails,(p,m)=>(z(),j("div",{key:m},[m===0?(z(),j("h3",KL,Ce(p.title),1)):(z(),j("h4",JL,Ce(p.title),1)),w("p",QL,Ce(p.content),1)]))),128))],2)):he("",!0),n.day.about&&!n.day.additionalDetails?(z(),j("div",YL,[w("h3",XL,"Sobre "+Ce(n.day.title.split(" - ")[1]||n.day.title),1),w("p",ZL,Ce(n.day.about),1)])):he("",!0)],8,SL))}},tV=mr(eV,[["__scopeId","data-v-188d29a1"]]),nV={id:"tips",class:"mb-20"},rV={class:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8"},sV={class:"text-xl font-bold text-blue-700 mb-4"},iV={class:"flex-shrink-0 h-6 w-6 text-blue-600 mr-2"},oV={class:"font-medium"},aV={class:"text-gray-600"},lV={key:0,class:"bg-blue-50 rounded-lg shadow-md p-6"},uV={class:"text-gray-700 mb-4"},cV={__name:"Recommendations",props:{recommendations:{type:Object,required:!0}},setup(n){return(e,t)=>(z(),j("section",nV,[t[1]||(t[1]=w("h2",{class:"text-3xl font-bold text-blue-800 mb-6 pb-2 border-b-2 border-blue-300"},"Dicas e Recomendaes",-1)),w("div",rV,[(z(!0),j(Be,null,ot(n.recommendations.categories,(r,s)=>(z(),j("div",{key:s,class:"bg-white rounded-lg shadow-md p-6"},[w("h3",sV,Ce(r.title),1),(z(!0),j(Be,null,ot(r.items,(i,o)=>(z(),j("div",{key:o,class:"flex items-start mb-4"},[w("div",iV,[w("i",{class:ye(i.icon)},null,2)]),w("div",null,[w("p",oV,Ce(i.title),1),w("p",aV,Ce(i.description),1)])]))),128))]))),128))]),n.recommendations.observations?(z(),j("div",lV,[t[0]||(t[0]=w("h3",{class:"text-xl font-bold text-blue-700 mb-4"},"Observaes Finais",-1)),w("p",uV,Ce(n.recommendations.observations),1)])):he("",!0)]))}};/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Bo=typeof document<"u";function VS(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function dV(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&VS(n.default)}const rt=Object.assign;function bh(n,e){const t={};for(const r in e){const s=e[r];t[r]=hr(s)?s.map(n):n(s)}return t}const ml=()=>{},hr=Array.isArray,$S=/#/g,fV=/&/g,hV=/\//g,pV=/=/g,mV=/\?/g,BS=/\+/g,gV=/%5B/g,yV=/%5D/g,FS=/%5E/g,vV=/%60/g,zS=/%7B/g,bV=/%7C/g,jS=/%7D/g,wV=/%20/g;function _g(n){return encodeURI(""+n).replace(bV,"|").replace(gV,"[").replace(yV,"]")}function TV(n){return _g(n).replace(zS,"{").replace(jS,"}").replace(FS,"^")}function Op(n){return _g(n).replace(BS,"%2B").replace(wV,"+").replace($S,"%23").replace(fV,"%26").replace(vV,"`").replace(zS,"{").replace(jS,"}").replace(FS,"^")}function EV(n){return Op(n).replace(pV,"%3D")}function SV(n){return _g(n).replace($S,"%23").replace(mV,"%3F")}function _V(n){return n==null?"":SV(n).replace(hV,"%2F")}function zl(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const xV=/\/$/,CV=n=>n.replace(xV,"");function wh(n,e,t="/"){let r,s={},i="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(r=e.slice(0,l),i=e.slice(l+1,a>-1?a:e.length),s=n(i)),a>-1&&(r=r||e.slice(0,a),o=e.slice(a,e.length)),r=MV(r??e,t),{fullPath:r+(i&&"?")+i+o,path:r,query:s,hash:zl(o)}}function AV(n,e){const t=e.query?n(e.query):"";return e.path+(t&&"?")+t+(e.hash||"")}function J0(n,e){return!e||!n.toLowerCase().startsWith(e.toLowerCase())?n:n.slice(e.length)||"/"}function kV(n,e,t){const r=e.matched.length-1,s=t.matched.length-1;return r>-1&&r===s&&ca(e.matched[r],t.matched[s])&&HS(e.params,t.params)&&n(e.query)===n(t.query)&&e.hash===t.hash}function ca(n,e){return(n.aliasOf||n)===(e.aliasOf||e)}function HS(n,e){if(Object.keys(n).length!==Object.keys(e).length)return!1;for(const t in n)if(!IV(n[t],e[t]))return!1;return!0}function IV(n,e){return hr(n)?Q0(n,e):hr(e)?Q0(e,n):n===e}function Q0(n,e){return hr(e)?n.length===e.length&&n.every((t,r)=>t===e[r]):n.length===1&&n[0]===e}function MV(n,e){if(n.startsWith("/"))return n;if(!n)return e;const t=e.split("/"),r=n.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=t.length-1,o,a;for(o=0;o<r.length;o++)if(a=r[o],a!==".")if(a==="..")i>1&&i--;else break;return t.slice(0,i).join("/")+"/"+r.slice(o).join("/")}const Cs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var jl;(function(n){n.pop="pop",n.push="push"})(jl||(jl={}));var gl;(function(n){n.back="back",n.forward="forward",n.unknown=""})(gl||(gl={}));function PV(n){if(!n)if(Bo){const e=document.querySelector("base");n=e&&e.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),CV(n)}const RV=/^[^#]+#/;function OV(n,e){return n.replace(RV,"#")+e}function DV(n,e){const t=document.documentElement.getBoundingClientRect(),r=n.getBoundingClientRect();return{behavior:e.behavior,left:r.left-t.left-(e.left||0),top:r.top-t.top-(e.top||0)}}const ff=()=>({left:window.scrollX,top:window.scrollY});function NV(n){let e;if("el"in n){const t=n.el,r=typeof t=="string"&&t.startsWith("#"),s=typeof t=="string"?r?document.getElementById(t.slice(1)):document.querySelector(t):t;if(!s)return;e=DV(s,n)}else e=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Y0(n,e){return(history.state?history.state.position-e:-1)+n}const Dp=new Map;function LV(n,e){Dp.set(n,e)}function VV(n){const e=Dp.get(n);return Dp.delete(n),e}let $V=()=>location.protocol+"//"+location.host;function US(n,e){const{pathname:t,search:r,hash:s}=e,i=n.indexOf("#");if(i>-1){let a=s.includes(n.slice(i))?n.slice(i).length:1,l=s.slice(a);return l[0]!=="/"&&(l="/"+l),J0(l,"")}return J0(t,n)+r+s}function BV(n,e,t,r){let s=[],i=[],o=null;const a=({state:h})=>{const p=US(n,location),m=t.value,y=e.value;let v=0;if(h){if(t.value=p,e.value=h,o&&o===m){o=null;return}v=y?h.position-y.position:0}else r(p);s.forEach(S=>{S(t.value,m,{delta:v,type:jl.pop,direction:v?v>0?gl.forward:gl.back:gl.unknown})})};function l(){o=t.value}function c(h){s.push(h);const p=()=>{const m=s.indexOf(h);m>-1&&s.splice(m,1)};return i.push(p),p}function u(){const{history:h}=window;h.state&&h.replaceState(rt({},h.state,{scroll:ff()}),"")}function d(){for(const h of i)h();i=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:l,listen:c,destroy:d}}function X0(n,e,t,r=!1,s=!1){return{back:n,current:e,forward:t,replaced:r,position:window.history.length,scroll:s?ff():null}}function FV(n){const{history:e,location:t}=window,r={value:US(n,t)},s={value:e.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function i(l,c,u){const d=n.indexOf("#"),h=d>-1?(t.host&&document.querySelector("base")?n:n.slice(d))+l:$V()+n+l;try{e[u?"replaceState":"pushState"](c,"",h),s.value=c}catch(p){console.error(p),t[u?"replace":"assign"](h)}}function o(l,c){const u=rt({},e.state,X0(s.value.back,l,s.value.forward,!0),c,{position:s.value.position});i(l,u,!0),r.value=l}function a(l,c){const u=rt({},s.value,e.state,{forward:l,scroll:ff()});i(u.current,u,!0);const d=rt({},X0(r.value,l,null),{position:u.position+1},c);i(l,d,!1),r.value=l}return{location:r,state:s,push:a,replace:o}}function zV(n){n=PV(n);const e=FV(n),t=BV(n,e.state,e.location,e.replace);function r(i,o=!0){o||t.pauseListeners(),history.go(i)}const s=rt({location:"",base:n,go:r,createHref:OV.bind(null,n)},e,t);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}function jV(n){return typeof n=="string"||n&&typeof n=="object"}function qS(n){return typeof n=="string"||typeof n=="symbol"}const WS=Symbol("");var Z0;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(Z0||(Z0={}));function da(n,e){return rt(new Error,{type:n,[WS]:!0},e)}function Jr(n,e){return n instanceof Error&&WS in n&&(e==null||!!(n.type&e))}const eb="[^/]+?",HV={sensitive:!1,strict:!1,start:!0,end:!0},UV=/[.+*?^${}()[\]/\\]/g;function qV(n,e){const t=rt({},HV,e),r=[];let s=t.start?"^":"";const i=[];for(const c of n){const u=c.length?[]:[90];t.strict&&!c.length&&(s+="/");for(let d=0;d<c.length;d++){const h=c[d];let p=40+(t.sensitive?.25:0);if(h.type===0)d||(s+="/"),s+=h.value.replace(UV,"\\$&"),p+=40;else if(h.type===1){const{value:m,repeatable:y,optional:v,regexp:S}=h;i.push({name:m,repeatable:y,optional:v});const T=S||eb;if(T!==eb){p+=10;try{new RegExp(`(${T})`)}catch(C){throw new Error(`Invalid custom RegExp for param "${m}" (${T}): `+C.message)}}let b=y?`((?:${T})(?:/(?:${T}))*)`:`(${T})`;d||(b=v&&c.length<2?`(?:/${b})`:"/"+b),v&&(b+="?"),s+=b,p+=20,v&&(p+=-8),y&&(p+=-20),T===".*"&&(p+=-50)}u.push(p)}r.push(u)}if(t.strict&&t.end){const c=r.length-1;r[c][r[c].length-1]+=.7000000000000001}t.strict||(s+="/?"),t.end?s+="$":t.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const o=new RegExp(s,t.sensitive?"":"i");function a(c){const u=c.match(o),d={};if(!u)return null;for(let h=1;h<u.length;h++){const p=u[h]||"",m=i[h-1];d[m.name]=p&&m.repeatable?p.split("/"):p}return d}function l(c){let u="",d=!1;for(const h of n){(!d||!u.endsWith("/"))&&(u+="/"),d=!1;for(const p of h)if(p.type===0)u+=p.value;else if(p.type===1){const{value:m,repeatable:y,optional:v}=p,S=m in c?c[m]:"";if(hr(S)&&!y)throw new Error(`Provided param "${m}" is an array but it is not repeatable (* or + modifiers)`);const T=hr(S)?S.join("/"):S;if(!T)if(v)h.length<2&&(u.endsWith("/")?u=u.slice(0,-1):d=!0);else throw new Error(`Missing required param "${m}"`);u+=T}}return u||"/"}return{re:o,score:r,keys:i,parse:a,stringify:l}}function WV(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=e[t]-n[t];if(r)return r;t++}return n.length<e.length?n.length===1&&n[0]===80?-1:1:n.length>e.length?e.length===1&&e[0]===80?1:-1:0}function GS(n,e){let t=0;const r=n.score,s=e.score;for(;t<r.length&&t<s.length;){const i=WV(r[t],s[t]);if(i)return i;t++}if(Math.abs(s.length-r.length)===1){if(tb(r))return 1;if(tb(s))return-1}return s.length-r.length}function tb(n){const e=n[n.length-1];return n.length>0&&e[e.length-1]<0}const GV={type:0,value:""},KV=/[a-zA-Z0-9_]/;function JV(n){if(!n)return[[]];if(n==="/")return[[GV]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function e(p){throw new Error(`ERR (${t})/"${c}": ${p}`)}let t=0,r=t;const s=[];let i;function o(){i&&s.push(i),i=[]}let a=0,l,c="",u="";function d(){c&&(t===0?i.push({type:0,value:c}):t===1||t===2||t===3?(i.length>1&&(l==="*"||l==="+")&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:c,regexp:u,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):e("Invalid state to consume buffer"),c="")}function h(){c+=l}for(;a<n.length;){if(l=n[a++],l==="\\"&&t!==2){r=t,t=4;continue}switch(t){case 0:l==="/"?(c&&d(),o()):l===":"?(d(),t=1):h();break;case 4:h(),t=r;break;case 1:l==="("?t=2:KV.test(l)?h():(d(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--);break;case 2:l===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+l:t=3:u+=l;break;case 3:d(),t=0,l!=="*"&&l!=="?"&&l!=="+"&&a--,u="";break;default:e("Unknown state");break}}return t===2&&e(`Unfinished custom RegExp for param "${c}"`),d(),o(),s}function QV(n,e,t){const r=qV(JV(n.path),t),s=rt(r,{record:n,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function YV(n,e){const t=[],r=new Map;e=ib({strict:!1,end:!0,sensitive:!1},e);function s(d){return r.get(d)}function i(d,h,p){const m=!p,y=rb(d);y.aliasOf=p&&p.record;const v=ib(e,d),S=[y];if("alias"in d){const C=typeof d.alias=="string"?[d.alias]:d.alias;for(const O of C)S.push(rb(rt({},y,{components:p?p.record.components:y.components,path:O,aliasOf:p?p.record:y})))}let T,b;for(const C of S){const{path:O}=C;if(h&&O[0]!=="/"){const N=h.record.path,A=N[N.length-1]==="/"?"":"/";C.path=h.record.path+(O&&A+O)}if(T=QV(C,h,v),p?p.alias.push(T):(b=b||T,b!==T&&b.alias.push(T),m&&d.name&&!sb(T)&&o(d.name)),KS(T)&&l(T),y.children){const N=y.children;for(let A=0;A<N.length;A++)i(N[A],T,p&&p.children[A])}p=p||T}return b?()=>{o(b)}:ml}function o(d){if(qS(d)){const h=r.get(d);h&&(r.delete(d),t.splice(t.indexOf(h),1),h.children.forEach(o),h.alias.forEach(o))}else{const h=t.indexOf(d);h>-1&&(t.splice(h,1),d.record.name&&r.delete(d.record.name),d.children.forEach(o),d.alias.forEach(o))}}function a(){return t}function l(d){const h=e4(d,t);t.splice(h,0,d),d.record.name&&!sb(d)&&r.set(d.record.name,d)}function c(d,h){let p,m={},y,v;if("name"in d&&d.name){if(p=r.get(d.name),!p)throw da(1,{location:d});v=p.record.name,m=rt(nb(h.params,p.keys.filter(b=>!b.optional).concat(p.parent?p.parent.keys.filter(b=>b.optional):[]).map(b=>b.name)),d.params&&nb(d.params,p.keys.map(b=>b.name))),y=p.stringify(m)}else if(d.path!=null)y=d.path,p=t.find(b=>b.re.test(y)),p&&(m=p.parse(y),v=p.record.name);else{if(p=h.name?r.get(h.name):t.find(b=>b.re.test(h.path)),!p)throw da(1,{location:d,currentLocation:h});v=p.record.name,m=rt({},h.params,d.params),y=p.stringify(m)}const S=[];let T=p;for(;T;)S.unshift(T.record),T=T.parent;return{name:v,path:y,params:m,matched:S,meta:ZV(S)}}n.forEach(d=>i(d));function u(){t.length=0,r.clear()}return{addRoute:i,resolve:c,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:s}}function nb(n,e){const t={};for(const r of e)r in n&&(t[r]=n[r]);return t}function rb(n){const e={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:XV(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function XV(n){const e={},t=n.props||!1;if("component"in n)e.default=t;else for(const r in n.components)e[r]=typeof t=="object"?t[r]:t;return e}function sb(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function ZV(n){return n.reduce((e,t)=>rt(e,t.meta),{})}function ib(n,e){const t={};for(const r in n)t[r]=r in e?e[r]:n[r];return t}function e4(n,e){let t=0,r=e.length;for(;t!==r;){const i=t+r>>1;GS(n,e[i])<0?r=i:t=i+1}const s=t4(n);return s&&(r=e.lastIndexOf(s,r-1)),r}function t4(n){let e=n;for(;e=e.parent;)if(KS(e)&&GS(n,e)===0)return e}function KS({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function n4(n){const e={};if(n===""||n==="?")return e;const r=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(BS," "),o=i.indexOf("="),a=zl(o<0?i:i.slice(0,o)),l=o<0?null:zl(i.slice(o+1));if(a in e){let c=e[a];hr(c)||(c=e[a]=[c]),c.push(l)}else e[a]=l}return e}function ob(n){let e="";for(let t in n){const r=n[t];if(t=EV(t),r==null){r!==void 0&&(e+=(e.length?"&":"")+t);continue}(hr(r)?r.map(i=>i&&Op(i)):[r&&Op(r)]).forEach(i=>{i!==void 0&&(e+=(e.length?"&":"")+t,i!=null&&(e+="="+i))})}return e}function r4(n){const e={};for(const t in n){const r=n[t];r!==void 0&&(e[t]=hr(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const s4=Symbol(""),ab=Symbol(""),hf=Symbol(""),xg=Symbol(""),Np=Symbol("");function qa(){let n=[];function e(r){return n.push(r),()=>{const s=n.indexOf(r);s>-1&&n.splice(s,1)}}function t(){n=[]}return{add:e,list:()=>n.slice(),reset:t}}function Ps(n,e,t,r,s,i=o=>o()){const o=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((a,l)=>{const c=h=>{h===!1?l(da(4,{from:t,to:e})):h instanceof Error?l(h):jV(h)?l(da(2,{from:e,to:h})):(o&&r.enterCallbacks[s]===o&&typeof h=="function"&&o.push(h),a())},u=i(()=>n.call(r&&r.instances[s],e,t,c));let d=Promise.resolve(u);n.length<3&&(d=d.then(c)),d.catch(h=>l(h))})}function Th(n,e,t,r,s=i=>i()){const i=[];for(const o of n)for(const a in o.components){let l=o.components[a];if(!(e!=="beforeRouteEnter"&&!o.instances[a]))if(VS(l)){const u=(l.__vccOpts||l)[e];u&&i.push(Ps(u,t,r,o,a,s))}else{let c=l();i.push(()=>c.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const d=dV(u)?u.default:u;o.mods[a]=u,o.components[a]=d;const p=(d.__vccOpts||d)[e];return p&&Ps(p,t,r,o,a,s)()}))}}return i}function lb(n){const e=cr(hf),t=cr(xg),r=Oe(()=>{const l=_n(n.to);return e.resolve(l)}),s=Oe(()=>{const{matched:l}=r.value,{length:c}=l,u=l[c-1],d=t.matched;if(!u||!d.length)return-1;const h=d.findIndex(ca.bind(null,u));if(h>-1)return h;const p=ub(l[c-2]);return c>1&&ub(u)===p&&d[d.length-1].path!==p?d.findIndex(ca.bind(null,l[c-2])):h}),i=Oe(()=>s.value>-1&&u4(t.params,r.value.params)),o=Oe(()=>s.value>-1&&s.value===t.matched.length-1&&HS(t.params,r.value.params));function a(l={}){if(l4(l)){const c=e[_n(n.replace)?"replace":"push"](_n(n.to)).catch(ml);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>c),c}return Promise.resolve()}return{route:r,href:Oe(()=>r.value.href),isActive:i,isExactActive:o,navigate:a}}function i4(n){return n.length===1?n[0]:n}const o4=_m({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:lb,setup(n,{slots:e}){const t=tu(lb(n)),{options:r}=cr(hf),s=Oe(()=>({[cb(n.activeClass,r.linkActiveClass,"router-link-active")]:t.isActive,[cb(n.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:t.isExactActive}));return()=>{const i=e.default&&i4(e.default(t));return n.custom?i:Sn("a",{"aria-current":t.isExactActive?n.ariaCurrentValue:null,href:t.href,onClick:t.navigate,class:s.value},i)}}}),a4=o4;function l4(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const e=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return n.preventDefault&&n.preventDefault(),!0}}function u4(n,e){for(const t in e){const r=e[t],s=n[t];if(typeof r=="string"){if(r!==s)return!1}else if(!hr(s)||s.length!==r.length||r.some((i,o)=>i!==s[o]))return!1}return!0}function ub(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const cb=(n,e,t)=>n??e??t,c4=_m({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:e,slots:t}){const r=cr(Np),s=Oe(()=>n.route||r.value),i=cr(ab,0),o=Oe(()=>{let c=_n(i);const{matched:u}=s.value;let d;for(;(d=u[c])&&!d.components;)c++;return c}),a=Oe(()=>s.value.matched[o.value]);Yo(ab,Oe(()=>o.value+1)),Yo(s4,a),Yo(Np,s);const l=fe();return At(()=>[l.value,a.value,n.name],([c,u,d],[h,p,m])=>{u&&(u.instances[d]=c,p&&p!==u&&c&&c===h&&(u.leaveGuards.size||(u.leaveGuards=p.leaveGuards),u.updateGuards.size||(u.updateGuards=p.updateGuards))),c&&u&&(!p||!ca(u,p)||!h)&&(u.enterCallbacks[d]||[]).forEach(y=>y(c))},{flush:"post"}),()=>{const c=s.value,u=n.name,d=a.value,h=d&&d.components[u];if(!h)return db(t.default,{Component:h,route:c});const p=d.props[u],m=p?p===!0?c.params:typeof p=="function"?p(c):p:null,v=Sn(h,rt({},m,e,{onVnodeUnmounted:S=>{S.component.isUnmounted&&(d.instances[u]=null)},ref:l}));return db(t.default,{Component:v,route:c})||v}}});function db(n,e){if(!n)return null;const t=n(e);return t.length===1?t[0]:t}const d4=c4;function f4(n){const e=YV(n.routes,n),t=n.parseQuery||n4,r=n.stringifyQuery||ob,s=n.history,i=qa(),o=qa(),a=qa(),l=Di(Cs);let c=Cs;Bo&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=bh.bind(null,B=>""+B),d=bh.bind(null,_V),h=bh.bind(null,zl);function p(B,ie){let oe,me;return qS(B)?(oe=e.getRecordMatcher(B),me=ie):me=B,e.addRoute(me,oe)}function m(B){const ie=e.getRecordMatcher(B);ie&&e.removeRoute(ie)}function y(){return e.getRoutes().map(B=>B.record)}function v(B){return!!e.getRecordMatcher(B)}function S(B,ie){if(ie=rt({},ie||l.value),typeof B=="string"){const $=wh(t,B,ie.path),U=e.resolve({path:$.path},ie),W=s.createHref($.fullPath);return rt($,U,{params:h(U.params),hash:zl($.hash),redirectedFrom:void 0,href:W})}let oe;if(B.path!=null)oe=rt({},B,{path:wh(t,B.path,ie.path).path});else{const $=rt({},B.params);for(const U in $)$[U]==null&&delete $[U];oe=rt({},B,{params:d($)}),ie.params=d(ie.params)}const me=e.resolve(oe,ie),Ge=B.hash||"";me.params=u(h(me.params));const D=AV(r,rt({},B,{hash:TV(Ge),path:me.path})),L=s.createHref(D);return rt({fullPath:D,hash:Ge,query:r===ob?r4(B.query):B.query||{}},me,{redirectedFrom:void 0,href:L})}function T(B){return typeof B=="string"?wh(t,B,l.value.path):rt({},B)}function b(B,ie){if(c!==B)return da(8,{from:ie,to:B})}function C(B){return A(B)}function O(B){return C(rt(T(B),{replace:!0}))}function N(B){const ie=B.matched[B.matched.length-1];if(ie&&ie.redirect){const{redirect:oe}=ie;let me=typeof oe=="function"?oe(B):oe;return typeof me=="string"&&(me=me.includes("?")||me.includes("#")?me=T(me):{path:me},me.params={}),rt({query:B.query,hash:B.hash,params:me.path!=null?{}:B.params},me)}}function A(B,ie){const oe=c=S(B),me=l.value,Ge=B.state,D=B.force,L=B.replace===!0,$=N(oe);if($)return A(rt(T($),{state:typeof $=="object"?rt({},Ge,$.state):Ge,force:D,replace:L}),ie||oe);const U=oe;U.redirectedFrom=ie;let W;return!D&&kV(r,me,oe)&&(W=da(16,{to:U,from:me}),Pe(me,me,!0,!1)),(W?Promise.resolve(W):M(U,me)).catch(q=>Jr(q)?Jr(q,2)?q:He(q):ue(q,U,me)).then(q=>{if(q){if(Jr(q,2))return A(rt({replace:L},T(q.to),{state:typeof q.to=="object"?rt({},Ge,q.to.state):Ge,force:D}),ie||U)}else q=P(U,me,!0,L,Ge);return I(U,me,q),q})}function x(B,ie){const oe=b(B,ie);return oe?Promise.reject(oe):Promise.resolve()}function _(B){const ie=Qe.values().next().value;return ie&&typeof ie.runWithContext=="function"?ie.runWithContext(B):B()}function M(B,ie){let oe;const[me,Ge,D]=h4(B,ie);oe=Th(me.reverse(),"beforeRouteLeave",B,ie);for(const $ of me)$.leaveGuards.forEach(U=>{oe.push(Ps(U,B,ie))});const L=x.bind(null,B,ie);return oe.push(L),X(oe).then(()=>{oe=[];for(const $ of i.list())oe.push(Ps($,B,ie));return oe.push(L),X(oe)}).then(()=>{oe=Th(Ge,"beforeRouteUpdate",B,ie);for(const $ of Ge)$.updateGuards.forEach(U=>{oe.push(Ps(U,B,ie))});return oe.push(L),X(oe)}).then(()=>{oe=[];for(const $ of D)if($.beforeEnter)if(hr($.beforeEnter))for(const U of $.beforeEnter)oe.push(Ps(U,B,ie));else oe.push(Ps($.beforeEnter,B,ie));return oe.push(L),X(oe)}).then(()=>(B.matched.forEach($=>$.enterCallbacks={}),oe=Th(D,"beforeRouteEnter",B,ie,_),oe.push(L),X(oe))).then(()=>{oe=[];for(const $ of o.list())oe.push(Ps($,B,ie));return oe.push(L),X(oe)}).catch($=>Jr($,8)?$:Promise.reject($))}function I(B,ie,oe){a.list().forEach(me=>_(()=>me(B,ie,oe)))}function P(B,ie,oe,me,Ge){const D=b(B,ie);if(D)return D;const L=ie===Cs,$=Bo?history.state:{};oe&&(me||L?s.replace(B.fullPath,rt({scroll:L&&$&&$.scroll},Ge)):s.push(B.fullPath,Ge)),l.value=B,Pe(B,ie,oe,L),He()}let k;function K(){k||(k=s.listen((B,ie,oe)=>{if(!ke.listening)return;const me=S(B),Ge=N(me);if(Ge){A(rt(Ge,{replace:!0,force:!0}),me).catch(ml);return}c=me;const D=l.value;Bo&&LV(Y0(D.fullPath,oe.delta),ff()),M(me,D).catch(L=>Jr(L,12)?L:Jr(L,2)?(A(rt(T(L.to),{force:!0}),me).then($=>{Jr($,20)&&!oe.delta&&oe.type===jl.pop&&s.go(-1,!1)}).catch(ml),Promise.reject()):(oe.delta&&s.go(-oe.delta,!1),ue(L,me,D))).then(L=>{L=L||P(me,D,!1),L&&(oe.delta&&!Jr(L,8)?s.go(-oe.delta,!1):oe.type===jl.pop&&Jr(L,20)&&s.go(-1,!1)),I(me,D,L)}).catch(ml)}))}let le=qa(),J=qa(),ee;function ue(B,ie,oe){He(B);const me=J.list();return me.length?me.forEach(Ge=>Ge(B,ie,oe)):console.error(B),Promise.reject(B)}function be(){return ee&&l.value!==Cs?Promise.resolve():new Promise((B,ie)=>{le.add([B,ie])})}function He(B){return ee||(ee=!B,K(),le.list().forEach(([ie,oe])=>B?oe(B):ie()),le.reset()),B}function Pe(B,ie,oe,me){const{scrollBehavior:Ge}=n;if(!Bo||!Ge)return Promise.resolve();const D=!oe&&VV(Y0(B.fullPath,0))||(me||!oe)&&history.state&&history.state.scroll||null;return as().then(()=>Ge(B,ie,D)).then(L=>L&&NV(L)).catch(L=>ue(L,B,ie))}const $e=B=>s.go(B);let Je;const Qe=new Set,ke={currentRoute:l,listening:!0,addRoute:p,removeRoute:m,clearRoutes:e.clearRoutes,hasRoute:v,getRoutes:y,resolve:S,options:n,push:C,replace:O,go:$e,back:()=>$e(-1),forward:()=>$e(1),beforeEach:i.add,beforeResolve:o.add,afterEach:a.add,onError:J.add,isReady:be,install(B){const ie=this;B.component("RouterLink",a4),B.component("RouterView",d4),B.config.globalProperties.$router=ie,Object.defineProperty(B.config.globalProperties,"$route",{enumerable:!0,get:()=>_n(l)}),Bo&&!Je&&l.value===Cs&&(Je=!0,C(s.location).catch(Ge=>{}));const oe={};for(const Ge in Cs)Object.defineProperty(oe,Ge,{get:()=>l.value[Ge],enumerable:!0});B.provide(hf,ie),B.provide(xg,l1(oe)),B.provide(Np,l);const me=B.unmount;Qe.add(B),B.unmount=function(){Qe.delete(B),Qe.size<1&&(c=Cs,k&&k(),k=null,l.value=Cs,Je=!1,ee=!1),me()}}};function X(B){return B.reduce((ie,oe)=>ie.then(()=>_(oe)),Promise.resolve())}return ke}function h4(n,e){const t=[],r=[],s=[],i=Math.max(e.matched.length,n.matched.length);for(let o=0;o<i;o++){const a=e.matched[o];a&&(n.matched.find(c=>ca(c,a))?r.push(a):t.push(a));const l=n.matched[o];l&&(e.matched.find(c=>ca(c,l))||s.push(l))}return[t,r,s]}function ka(){return cr(hf)}function pf(n){return cr(xg)}const p4={key:1},m4={key:0,class:"container container-swiper mx-auto px-4 sm:px-6 lg:px-8"},g4={key:1,class:"container"},y4={__name:"App",setup(n){const e=pf(),t=Oe(()=>{const p=e.path.startsWith("/admin");return console.log("Current route:",e.path,"isAdmin:",p),p}),r=fe([]),s=fe(null);kt(async()=>{if(!t.value)try{const p=await df();p&&(r.value=p.filter(y=>y.id.startsWith("day")));const m=await bg();m&&(s.value=m)}catch(p){console.error("Erro ao carregar dados:",p)}});const i=[DS,NS,LS],o=fe(null),a=fe(null),l=fe(0),c=p=>{o.value=p,l.value=p.activeIndex},u=p=>{a.value=p},d=p=>{var m;(m=o.value)==null||m.slideTo(p)},h=p=>{l.value=p.activeIndex,a.value&&a.value.slideTo(p.activeIndex)};return(p,m)=>{const y=Ta("router-view");return t.value?(z(),mt(y,{key:0})):(z(),j("div",p4,[Ee(wD),Dt(Ee(SD,null,null,512),[[fk,!1]]),r.value.length>0?(z(),j("main",m4,[Ee(ZN,{days:r.value,onGoToDay:d,onSwiper:u,"controlled-swiper":o.value,"active-index":l.value},null,8,["days","controlled-swiper","active-index"]),Ee(_n(Eg),{modules:i,"slides-per-view":1,"space-between":50,navigation:!1,pagination:{el:".main-swiper-pagination",clickable:!0},"auto-height":!0,onSwiper:c,onSlideChange:h,class:"main-day-swiper"},{default:nt(()=>[(z(!0),j(Be,null,ot(r.value,(v,S)=>(z(),mt(_n(Sg),{key:v.id},{default:nt(()=>[Ee(tV,{day:v},null,8,["day"])]),_:2},1024))),128))]),_:1}),m[0]||(m[0]=w("div",{class:"main-swiper-pagination"},null,-1))])):he("",!0),s.value?(z(),j("div",g4,[Ee(cV,{recommendations:s.value},null,8,["recommendations"])])):he("",!0),Ee(fL)]))}}},v4={class:"flex items-center"},b4={key:0,class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},w4={key:1,class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},T4={key:2,class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},E4={key:3,class:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},S4={__name:"AlertNotification",props:{show:{type:Boolean,default:!1},message:{type:String,default:""},type:{type:String,default:"success",validator:n=>["success","error","warning","info"].includes(n)},autoClose:{type:Boolean,default:!0},duration:{type:Number,default:5e3}},emits:["update:show","close"],setup(n,{emit:e}){const t=n,r=e;let s=null;At(()=>t.show,a=>{a&&t.autoClose?i():!a&&s&&(clearTimeout(s),s=null)});const i=()=>{s&&clearTimeout(s),s=setTimeout(()=>{o()},t.duration)},o=()=>{s&&(clearTimeout(s),s=null),r("update:show",!1),r("close")};return kt(()=>{t.show&&t.autoClose&&i()}),lo(()=>{s&&clearTimeout(s)}),(a,l)=>n.show?(z(),j("div",{key:0,class:ye(["fixed top-4 left-0 right-0 mx-auto max-w-md z-50 p-4 rounded-md flex items-center justify-between transition-all duration-300 shadow-lg",n.type==="success"?"bg-green-100 text-green-800 border border-green-200":n.type==="error"?"bg-red-100 text-red-800 border border-red-200":n.type==="warning"?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-blue-100 text-blue-800 border border-blue-200"])},[w("div",v4,[n.type==="success"?(z(),j("svg",b4,l[0]||(l[0]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"},null,-1)]))):n.type==="error"?(z(),j("svg",w4,l[1]||(l[1]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))):n.type==="warning"?(z(),j("svg",T4,l[2]||(l[2]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"},null,-1)]))):(z(),j("svg",E4,l[3]||(l[3]=[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"},null,-1)]))),w("span",null,Ce(n.message),1)]),w("button",{onClick:o,class:"text-gray-500 hover:text-gray-700"},l[4]||(l[4]=[w("svg",{class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))],2)):he("",!0)}},_4=mr(S4,[["__scopeId","data-v-184102e3"]]),x4={class:"bg-white rounded-lg shadow-md p-6"},C4={class:"flex items-center mb-6"},A4={class:"text-xl font-semibold"},k4={__name:"AdminFormLayout",props:{title:{type:String,required:!0},alert:{type:Object,required:!0}},emits:["update:alert","close-alert"],setup(n,{emit:e}){const t=e,r=ka(),s=()=>{t("close-alert")},i=()=>{r.back()};return(o,a)=>(z(),j("div",x4,[Ee(_4,{show:n.alert.show,"onUpdate:show":a[0]||(a[0]=l=>n.alert.show=l),message:n.alert.message,type:n.alert.type,onClose:s},null,8,["show","message","type"]),w("div",C4,[w("button",{class:"mr-3 flex items-center text-gray-700",onClick:i},a[1]||(a[1]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)])),w("h2",A4,Ce(n.title),1)]),dn(o.$slots,"default",{},void 0,!0)]))}},yi=mr(k4,[["__scopeId","data-v-b67f0bb0"]]),I4={class:"mb-4"},M4=["for"],P4=["type","id","value"],Fn={__name:"FormField",props:{id:{type:String,required:!0},label:{type:String,required:!0},modelValue:{type:[String,Number],default:""},type:{type:String,default:"text"}},emits:["update:modelValue"],setup(n){return(e,t)=>(z(),j("div",I4,[w("label",{for:n.id,class:"block text-sm font-medium text-gray-700 mb-1"},Ce(n.label),9,M4),w("input",{type:n.type,id:n.id,value:n.modelValue,onInput:t[0]||(t[0]=r=>e.$emit("update:modelValue",r.target.value)),class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,40,P4)]))}},R4={class:"flex justify-end space-x-3"},O4={type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},mf={__name:"FormActions",props:{submitLabel:{type:String,default:"Salvar"},cancelLabel:{type:String,default:"Cancelar"}},emits:["cancel"],setup(n){return(e,t)=>(z(),j("div",R4,[w("button",{type:"button",class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400",onClick:t[0]||(t[0]=r=>e.$emit("cancel"))},Ce(n.cancelLabel),1),w("button",O4,Ce(n.submitLabel),1)]))}},D4={class:"mb-2"},N4={__name:"SiteHeaderForm",setup(n){const e=ka(),t=fe({title:"",subtitle:"",backgroundImage:"",period:{start:"",end:""}}),r=fe({show:!1,message:"",type:"success"}),s=(u,d="success")=>{r.value={show:!0,message:u,type:d}},i=()=>{r.value.show=!1};function o(u){if(!u)return"";const d=u.split("/");return d.length!==3?"":`${d[2]}-${d[1]}-${d[0]}`}function a(u){if(!u)return"";const d=u.split("-");return d.length!==3?"":`${d[2]}/${d[1]}/${d[0]}`}kt(async()=>{var d,h;const u=await vS();u&&(t.value={title:u.title||"",subtitle:u.subtitle||"",backgroundImage:u.backgroundImage||"",period:{start:o((d=u.period)==null?void 0:d.start)||"",end:o((h=u.period)==null?void 0:h.end)||""}})});const l=async()=>{const u={...t.value,period:{start:a(t.value.period.start),end:a(t.value.period.end)}};(await iD(u)).success?s("Cabealho salvo com sucesso!","success"):s("Erro ao salvar cabealho!","error")},c=()=>{e.back()};return(u,d)=>(z(),mt(yi,{title:"Configurao de Cabealho",alert:r.value,onCloseAlert:i},{default:nt(()=>[w("form",{onSubmit:Hs(l,["prevent"])},[Ee(Fn,{id:"title",label:"Ttulo",modelValue:t.value.title,"onUpdate:modelValue":d[0]||(d[0]=h=>t.value.title=h)},null,8,["modelValue"]),Ee(Fn,{id:"subtitle",label:"Subttulo",modelValue:t.value.subtitle,"onUpdate:modelValue":d[1]||(d[1]=h=>t.value.subtitle=h)},null,8,["modelValue"]),Ee(Fn,{id:"backgroundImage",label:"Imagem de Fundo (URL)",modelValue:t.value.backgroundImage,"onUpdate:modelValue":d[2]||(d[2]=h=>t.value.backgroundImage=h)},null,8,["modelValue"]),Ee(Fn,{id:"periodStart",label:"Data de Incio",type:"date",modelValue:t.value.period.start,"onUpdate:modelValue":d[3]||(d[3]=h=>t.value.period.start=h)},null,8,["modelValue"]),w("div",D4,[Ee(Fn,{id:"periodEnd",label:"Data de Trmino",type:"date",modelValue:t.value.period.end,"onUpdate:modelValue":d[4]||(d[4]=h=>t.value.period.end=h)},null,8,["modelValue"])]),Ee(mf,{onCancel:c})],32)]),_:1},8,["alert"]))}},L4=mr(N4,[["__scopeId","data-v-267f41f8"]]),V4={class:"mb-4"},$4={class:"flex justify-between mb-2"},B4={class:"flex items-center"},F4=["onClick"],z4={class:"font-medium"},j4={class:"flex"},H4=["onClick","disabled"],U4=["onClick","disabled"],q4={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},W4=["for"],G4=["id","onUpdate:modelValue"],K4=["for"],J4=["id","onUpdate:modelValue"],Q4=["for"],Y4=["id","onUpdate:modelValue"],X4=["for"],Z4=["id","onUpdate:modelValue"],e3=["for"],t3=["id","onUpdate:modelValue"],n3=["for"],r3=["id","onUpdate:modelValue"],s3={key:0,class:"mt-3 border-t border-gray-100 pt-3"},i3={class:"flex justify-between items-center mb-2"},o3=["onClick"],a3=["onClick"],l3={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-3"},u3=["for"],c3=["id","value","onInput"],d3=["for"],f3=["id","value","onInput"],h3={__name:"SiteFooterForm",setup(n){const e=ka(),t=fe({titulo:"",descricao:"",data:"",contatos_importantes:[],copyright:""}),r=tu({}),s=fe({show:!1,message:"",type:"success"}),i=(v,S="success")=>{s.value={show:!0,message:v,type:S}},o=()=>{s.value.show=!1},a=()=>{const v={id:`contato-${t.value.contatos_importantes.length+1}`,nome:"",contato:"",instagram:"",whatsapp:"",rota:""};t.value.contatos_importantes.push(v)},l=v=>{t.value.contatos_importantes.splice(v,1)},c=(v,S)=>{const T=t.value.contatos_importantes;S==="up"&&v>0?[T[v],T[v-1]]=[T[v-1],T[v]]:S==="down"&&v<T.length-1&&([T[v],T[v+1]]=[T[v+1],T[v]])},u=(v,S)=>{v.link||(v.link={titulo:"",url:""}),v.link.titulo=S.target.value},d=(v,S)=>{v.link||(v.link={titulo:"",url:""}),v.link.url=S.target.value},h=v=>{const S=t.value.contatos_importantes[v];S.link||(S.link={titulo:"",url:""}),r[v]=!0},p=v=>{const S=t.value.contatos_importantes[v];delete S.link,r[v]=!1};kt(async()=>{try{const v=await bS();v&&(t.value={titulo:v.titulo||"",descricao:v.descricao||"",data:v.data||"",contatos_importantes:Array.isArray(v.contatos_importantes)?v.contatos_importantes:[],copyright:v.copyright||""},t.value.contatos_importantes.forEach((S,T)=>{S.id||(S.id=`contato-${T+1}`),r[T]=!!S.link,S.link&&typeof S.link!="object"&&(S.link={titulo:"",url:""})}))}catch(v){console.error("Erro ao carregar dados do rodap:",v),i("Erro ao carregar dados do rodap!","error")}});const m=async()=>{try{(await oD(t.value)).success?i("Rodap salvo com sucesso!","success"):i("Erro ao salvar rodap!","error")}catch(v){console.error("Erro ao salvar rodap:",v),i("Erro ao salvar rodap!","error")}},y=()=>{e.back()};return(v,S)=>(z(),mt(yi,{title:"Configurao de Rodap",alert:s.value,onCloseAlert:o},{default:nt(()=>[w("form",{onSubmit:Hs(m,["prevent"])},[Ee(Fn,{id:"titulo",label:"Ttulo",modelValue:t.value.titulo,"onUpdate:modelValue":S[0]||(S[0]=T=>t.value.titulo=T)},null,8,["modelValue"]),Ee(Fn,{id:"descricao",label:"Descrio",modelValue:t.value.descricao,"onUpdate:modelValue":S[1]||(S[1]=T=>t.value.descricao=T)},null,8,["modelValue"]),Ee(Fn,{id:"data",label:"Data",modelValue:t.value.data,"onUpdate:modelValue":S[2]||(S[2]=T=>t.value.data=T)},null,8,["modelValue"]),w("div",V4,[S[9]||(S[9]=w("div",{class:"flex justify-between items-center mb-2"},[w("label",{class:"block text-sm font-medium text-gray-700"},"Contatos Importantes")],-1)),(z(!0),j(Be,null,ot(t.value.contatos_importantes,(T,b)=>(z(),j("div",{key:b,class:"border border-gray-200 rounded-md p-4 mb-3"},[w("div",$4,[w("div",B4,[w("button",{type:"button",class:"text-red-600 hover:text-red-800 mr-3",onClick:C=>l(b)},S[4]||(S[4]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,F4),w("h3",z4,"Contato #"+Ce(b+1),1)]),w("div",j4,[w("button",{type:"button",class:ye(["text-gray-600 hover:text-gray-800 mr-1",{"opacity-50 cursor-not-allowed":b===0}]),onClick:C=>c(b,"up"),disabled:b===0},S[5]||(S[5]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 15l7-7 7 7"})],-1)]),10,H4),w("button",{type:"button",class:ye(["text-gray-600 hover:text-gray-800",{"opacity-50 cursor-not-allowed":b===t.value.contatos_importantes.length-1}]),onClick:C=>c(b,"down"),disabled:b===t.value.contatos_importantes.length-1},S[6]||(S[6]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)]),10,U4)])]),w("div",q4,[w("div",null,[w("label",{for:`contato-id-${b}`,class:"block text-sm font-medium text-gray-700 mb-1"},"ID",8,W4),Dt(w("input",{type:"text",id:`contato-id-${b}`,"onUpdate:modelValue":C=>T.id=C,class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,8,G4),[[jt,T.id]])]),w("div",null,[w("label",{for:`contato-nome-${b}`,class:"block text-sm font-medium text-gray-700 mb-1"},"Nome",8,K4),Dt(w("input",{type:"text",id:`contato-nome-${b}`,"onUpdate:modelValue":C=>T.nome=C,class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,8,J4),[[jt,T.nome]])]),w("div",null,[w("label",{for:`contato-contato-${b}`,class:"block text-sm font-medium text-gray-700 mb-1"},"Contato",8,Q4),Dt(w("input",{type:"text",id:`contato-contato-${b}`,"onUpdate:modelValue":C=>T.contato=C,class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,8,Y4),[[jt,T.contato]])]),w("div",null,[w("label",{for:`contato-instagram-${b}`,class:"block text-sm font-medium text-gray-700 mb-1"},"Instagram",8,X4),Dt(w("input",{type:"text",id:`contato-instagram-${b}`,"onUpdate:modelValue":C=>T.instagram=C,class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,8,Z4),[[jt,T.instagram]])]),w("div",null,[w("label",{for:`contato-whatsapp-${b}`,class:"block text-sm font-medium text-gray-700 mb-1"},"WhatsApp",8,e3),Dt(w("input",{type:"text",id:`contato-whatsapp-${b}`,"onUpdate:modelValue":C=>T.whatsapp=C,class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"+55 (00) 00000-0000"},null,8,t3),[[jt,T.whatsapp]])]),w("div",null,[w("label",{for:`contato-rota-${b}`,class:"block text-sm font-medium text-gray-700 mb-1"},"Rota",8,n3),Dt(w("input",{type:"text",id:`contato-rota-${b}`,"onUpdate:modelValue":C=>T.rota=C,class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,8,r3),[[jt,T.rota]])])]),T.link||r[b]?(z(),j("div",s3,[w("div",i3,[S[7]||(S[7]=w("h4",{class:"text-sm font-medium"},"Link",-1)),!T.link&&r[b]?(z(),j("button",{key:0,type:"button",class:"text-red-600 hover:text-red-800 text-sm",onClick:C=>p(b)}," Remover Link ",8,o3)):he("",!0),!T.link&&!r[b]?(z(),j("button",{key:1,type:"button",class:"text-blue-600 hover:text-blue-800 text-sm",onClick:C=>h(b)}," Adicionar Link ",8,a3)):he("",!0)]),T.link||r[b]?(z(),j("div",l3,[w("div",null,[w("label",{for:`contato-link-titulo-${b}`,class:"block text-sm font-medium text-gray-700 mb-1"},"Ttulo do Link",8,u3),w("input",{type:"text",id:`contato-link-titulo-${b}`,value:T.link?T.link.titulo:"",onInput:C=>u(T,C),class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,40,c3)]),w("div",null,[w("label",{for:`contato-link-url-${b}`,class:"block text-sm font-medium text-gray-700 mb-1"},"URL do Link",8,d3),w("input",{type:"text",id:`contato-link-url-${b}`,value:T.link?T.link.url:"",onInput:C=>d(T,C),class:"w-full px-3 py-2 border border-gray-300 rounded-md"},null,40,f3)])])):he("",!0)])):he("",!0)]))),128)),w("button",{type:"button",class:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm flex items-center justify-center",onClick:a},S[8]||(S[8]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),St(" Adicionar Contato ")]))]),Ee(Fn,{id:"copyright",label:"Copyright",modelValue:t.value.copyright,"onUpdate:modelValue":S[3]||(S[3]=T=>t.value.copyright=T),class:"mb-6"},null,8,["modelValue"]),Ee(mf,{onCancel:y})],32)]),_:1},8,["alert"]))}},p3=mr(h3,[["__scopeId","data-v-3eecb0bb"]]),m3={class:"mb-6"},g3={class:"flex justify-end mb-4"},y3={key:0,class:"text-center py-8"},v3={key:1,class:"bg-gray-50 rounded-lg p-8 text-center"},b3={key:2,class:"bg-white shadow rounded-lg overflow-hidden"},w3={class:"divide-y divide-gray-200"},T3={class:"flex items-center"},E3={class:"flex-shrink-0 mr-4"},S3=["src","alt"],_3={class:"flex-1"},x3={class:"text-lg font-medium text-gray-900"},C3={key:0,class:"text-sm text-gray-500 mt-1 line-clamp-2"},A3={class:"flex items-center mt-2"},k3={key:0,class:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full mr-2"},I3={key:1,class:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded-full"},M3={__name:"ActivitiesList",setup(n){const e=fe([]),t=fe(!0),r=fe([]),s=fe({}),i=fe({show:!1,message:"",type:"success"}),o=(u,d="success")=>{i.value={show:!0,message:u,type:d}},a=()=>{i.value.show=!1},l=()=>{s.value={},e.value.forEach(u=>{s.value[u.id]=0}),r.value.forEach(u=>{u.schedule&&["morning","lunch","midDay","afternoon","evening","night"].forEach(h=>{u.schedule[h]&&Array.isArray(u.schedule[h])&&u.schedule[h].forEach(p=>{typeof p=="string"?s.value[p]!==void 0&&s.value[p]++:p&&p.activityId&&s.value[p.activityId]!==void 0&&s.value[p.activityId]++})})})},c=u=>s.value[u]||0;return kt(async()=>{try{t.value=!0;const[u,d]=await Promise.all([vg(),df()]);e.value=u,r.value=d.filter(h=>h.id.startsWith("day")),e.value.sort((h,p)=>h.title&&p.title?h.title.localeCompare(p.title):0),l()}catch(u){console.error("Erro ao carregar atividades:",u),o("Erro ao carregar lista de atividades!","error")}finally{t.value=!1}}),(u,d)=>{const h=Ta("router-link");return z(),mt(yi,{title:"Gesto de Atividades",alert:i.value,onCloseAlert:a},{default:nt(()=>[w("div",m3,[d[7]||(d[7]=w("p",{class:"text-sm text-gray-600 mb-4"}," Gerencie as atividades disponveis no sistema. Clique em uma atividade para edit-la ou adicione uma nova atividade. ",-1)),w("div",g3,[Ee(h,{to:"/admin/atividades/novo",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center text-sm"},{default:nt(()=>d[0]||(d[0]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),St(" Nova Atividade ")])),_:1})]),t.value?(z(),j("div",y3,d[1]||(d[1]=[w("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-600"},null,-1),w("p",{class:"mt-2 text-gray-500"},"Carregando atividades...",-1)]))):e.value.length===0?(z(),j("div",v3,[d[3]||(d[3]=w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mx-auto text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 20l-5.447-2.724A1 1 0 013 16.382V5.618a1 1 0 011.447-.894L9 7m0 13l6-3m-6 3V7m6 10l4.553 2.276A1 1 0 0021 18.382V7.618a1 1 0 00-.553-.894L15 4m0 13V4m0 0L9 7"})],-1)),d[4]||(d[4]=w("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Nenhuma atividade cadastrada",-1)),d[5]||(d[5]=w("p",{class:"text-gray-500 mb-4"},"Comece adicionando sua primeira atividade ao sistema.",-1)),Ee(h,{to:"/admin/atividades/novo",class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},{default:nt(()=>d[2]||(d[2]=[St(" Adicionar Nova Atividade ")])),_:1})])):(z(),j("div",b3,[w("ul",w3,[(z(!0),j(Be,null,ot(e.value,p=>(z(),j("li",{key:p.id,class:"hover:bg-gray-50"},[Ee(h,{to:`/admin/atividades/${p.id}`,class:"block p-4"},{default:nt(()=>[w("div",T3,[w("div",E3,[w("img",{src:p.images&&p.images.length>0?p.images[0]:"https://www2.camara.leg.br/atividade-legislativa/comissoes/comissoes-permanentes/cindra/imagens/sem.jpg.gif",alt:p.title,class:"h-16 w-16 object-cover rounded-md"},null,8,S3)]),w("div",_3,[w("h3",x3,Ce(p.title),1),p.description?(z(),j("p",C3,Ce(p.description),1)):he("",!0),w("div",A3,[c(p.id)>0?(z(),j("span",k3," Usado "+Ce(c(p.id))+" "+Ce(c(p.id)===1?"vez":"vezes"),1)):(z(),j("span",I3," No utilizado "))])]),d[6]||(d[6]=w("div",{class:"text-gray-400"},[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1))])]),_:2},1032,["to"])]))),128))])]))])]),_:1},8,["alert"])}}},P3={class:"mb-4"},R3={class:"mb-4"},O3={class:"mb-4"},D3={class:"flex justify-between mb-2"},N3={class:"flex items-center"},L3=["onClick"],V3={class:"font-medium"},$3={class:"flex"},B3=["onClick","disabled"],F3=["onClick","disabled"],z3={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},j3={class:"col-span-2"},H3=["for"],U3=["id","onUpdate:modelValue"],q3={key:0,class:"mt-3"},W3=["src","alt"],G3={class:"mb-6"},K3={class:"flex justify-between mb-2"},J3={class:"flex items-center"},Q3=["onClick"],Y3={class:"font-medium"},X3={class:"grid grid-cols-1 md:grid-cols-2 gap-3"},Z3=["for"],e$=["id","onUpdate:modelValue"],t$=["for"],n$=["id","onUpdate:modelValue"],r$={class:"flex gap-3 mt-8"},s$={key:0,class:"fixed inset-0 flex items-center justify-center z-50"},i$={class:"bg-white rounded-lg p-6 max-w-md w-full z-10"},o$={class:"mb-4 text-gray-600"},a$={class:"flex justify-end gap-3"},l$={__name:"ActivityForm",setup(n){const e=ka(),t=pf(),r=fe(!1),s=Oe(()=>t.params.id==="novo"),i=fe({title:"",location:"",description:"",type:"",images:[],links:[]}),o=fe({show:!1,message:"",type:"success"}),a=(T,b="success")=>{o.value={show:!0,message:T,type:b}},l=()=>{o.value.show=!1};kt(async()=>{if(!s.value)try{const T=t.params.id,b=await cD(T);b?(console.log("Dados da atividade carregados:",b),i.value={title:b.title||"",location:b.location||"",description:b.description||"",type:b.type||"",images:[],links:[]},b.images&&(Array.isArray(b.images)?i.value.images=b.images.map(C=>({url:typeof C=="object"?C.url||"":C,alt:typeof C=="object"&&C.alt||""})):typeof b.images=="string"&&(i.value.images=[{url:b.images,alt:""}])),b.links&&typeof b.links=="object"&&!Array.isArray(b.links)&&(i.value.links=Object.entries(b.links).map(([C,O])=>({title:C,url:O}))),console.log("Formulrio preenchido:",i.value)):(a("Atividade no encontrada!","error"),e.push("/admin/atividades"))}catch(T){console.error("Erro ao carregar dados da atividade:",T),a("Erro ao carregar dados da atividade!","error")}});const c=()=>{i.value.images.push({url:""})},u=T=>{i.value.images.splice(T,1)},d=(T,b)=>{const C=i.value.images;b==="up"&&T>0?[C[T],C[T-1]]=[C[T-1],C[T]]:b==="down"&&T<C.length-1&&([C[T],C[T+1]]=[C[T+1],C[T]])},h=()=>{i.value.links.push({title:"",url:""})},p=T=>{i.value.links.splice(T,1)},m=async()=>{try{if(!i.value.title.trim()){a("O nome da atividade  obrigatrio!","error");return}const T=s.value?i.value.title.toLowerCase().replace(/\s+/g,"-").normalize("NFD").replace(/[\u0300-\u036f]/g,""):t.params.id,b={...i.value};b.images=b.images.filter(O=>O.url.trim()!=="").map(O=>O.url),b.links=b.links.filter(O=>O.url.trim()!=="").reduce((O,N)=>{const A=N.title.trim()||"link";return O[A]=N.url,O},{}),console.log("Dados a serem salvos:",b),(await lD("santiago",T,b)).success?(a("Atividade salva com sucesso!","success"),s.value&&e.push(`/admin/atividades/${T}`)):a("Erro ao salvar atividade!","error")}catch(T){console.error("Erro ao salvar atividade:",T),a("Erro ao salvar atividade!","error")}},y=()=>{r.value=!0},v=async()=>{try{const T=t.params.id;(await yS("trips/santiago/activities",T)).success?(a("Atividade excluda com sucesso!","success"),e.push("/admin/atividades")):a("Erro ao excluir atividade!","error"),r.value=!1}catch(T){console.error("Erro ao excluir atividade:",T),a("Erro ao excluir atividade!","error"),r.value=!1}},S=()=>{e.push("/admin/atividades")};return(T,b)=>(z(),mt(yi,{title:s.value?"Nova Atividade":`Editar Atividade: ${i.value.title}`,alert:o.value,onCloseAlert:l},{default:nt(()=>[w("form",{onSubmit:Hs(m,["prevent"])},[Ee(Fn,{id:"title",label:"Nome da Atividade",modelValue:i.value.title,"onUpdate:modelValue":b[0]||(b[0]=C=>i.value.title=C),required:""},null,8,["modelValue"]),w("div",P3,[b[5]||(b[5]=w("label",{for:"location",class:"block text-sm font-medium text-gray-700 mb-1"},"Local (URL do Google Maps)",-1)),Dt(w("input",{type:"text",id:"location","onUpdate:modelValue":b[1]||(b[1]=C=>i.value.location=C),class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"https://maps.app.goo.gl/..."},null,512),[[jt,i.value.location]]),b[6]||(b[6]=w("p",{class:"text-xs text-gray-500 mt-1"},"Cole aqui a URL do Google Maps para o local da atividade",-1))]),w("div",R3,[b[7]||(b[7]=w("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-1"},"Descrio",-1)),Dt(w("textarea",{id:"description","onUpdate:modelValue":b[2]||(b[2]=C=>i.value.description=C),rows:"4",class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Descreva esta atividade"},null,512),[[jt,i.value.description]])]),Ee(Fn,{id:"type",label:"Tipo",modelValue:i.value.type,"onUpdate:modelValue":b[3]||(b[3]=C=>i.value.type=C),class:"mb-4"},null,8,["modelValue"]),w("div",O3,[b[12]||(b[12]=w("div",{class:"flex justify-between items-center mb-2"},[w("label",{class:"block text-sm font-medium text-gray-700"},"Imagens")],-1)),(z(!0),j(Be,null,ot(i.value.images,(C,O)=>(z(),j("div",{key:O,class:"border border-gray-200 rounded-md p-4 mb-3"},[w("div",D3,[w("div",N3,[w("button",{type:"button",class:"text-red-600 hover:text-red-800 mr-3",onClick:N=>u(O)},b[8]||(b[8]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,L3),w("h3",V3,"Imagem #"+Ce(O+1),1)]),w("div",$3,[w("button",{type:"button",class:ye(["text-gray-600 hover:text-gray-800 mr-1",{"opacity-50 cursor-not-allowed":O===0}]),onClick:N=>d(O,"up"),disabled:O===0},b[9]||(b[9]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 15l7-7 7 7"})],-1)]),10,B3),w("button",{type:"button",class:ye(["text-gray-600 hover:text-gray-800",{"opacity-50 cursor-not-allowed":O===i.value.images.length-1}]),onClick:N=>d(O,"down"),disabled:O===i.value.images.length-1},b[10]||(b[10]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1)]),10,F3)])]),w("div",z3,[w("div",j3,[w("label",{for:`imagem-url-${O}`,class:"block text-sm font-medium text-gray-700 mb-1"},"URL da Imagem",8,H3),Dt(w("input",{type:"text",id:`imagem-url-${O}`,"onUpdate:modelValue":N=>C.url=N,class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"https://exemplo.com/imagem.jpg"},null,8,U3),[[jt,C.url]])])]),C.url?(z(),j("div",q3,[w("img",{src:C.url,alt:C.name||"Imagem da atividade",class:"h-32 object-cover rounded-md"},null,8,W3)])):he("",!0)]))),128)),w("button",{type:"button",class:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm flex items-center justify-center",onClick:c},b[11]||(b[11]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),St(" Adicionar Imagem ")]))]),w("div",G3,[b[15]||(b[15]=w("div",{class:"flex justify-between items-center mb-2"},[w("label",{class:"block text-sm font-medium text-gray-700"},"Links Relacionados")],-1)),(z(!0),j(Be,null,ot(i.value.links,(C,O)=>(z(),j("div",{key:O,class:"border border-gray-200 rounded-md p-4 mb-3"},[w("div",K3,[w("div",J3,[w("button",{type:"button",class:"text-red-600 hover:text-red-800 mr-3",onClick:N=>p(O)},b[13]||(b[13]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Q3),w("h3",Y3,"Link #"+Ce(O+1),1)])]),w("div",X3,[w("div",null,[w("label",{for:`link-titulo-${O}`,class:"block text-sm font-medium text-gray-700 mb-1"},"Ttulo",8,Z3),Dt(w("input",{type:"text",id:`link-titulo-${O}`,"onUpdate:modelValue":N=>C.title=N,class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Ex: Site Oficial"},null,8,e$),[[jt,C.title]])]),w("div",null,[w("label",{for:`link-url-${O}`,class:"block text-sm font-medium text-gray-700 mb-1"},"URL",8,t$),Dt(w("input",{type:"text",id:`link-url-${O}`,"onUpdate:modelValue":N=>C.url=N,class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"https://exemplo.com"},null,8,n$),[[jt,C.url]])])])]))),128)),w("button",{type:"button",class:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm flex items-center justify-center",onClick:h},b[14]||(b[14]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),St(" Adicionar Link ")]))]),w("div",r$,[s.value?he("",!0):(z(),j("button",{key:0,type:"button",onClick:y,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700"}," Excluir ")),b[16]||(b[16]=w("div",{class:"flex-grow"},null,-1)),Ee(mf,{onCancel:S})])],32),r.value?(z(),j("div",s$,[b[18]||(b[18]=w("div",{class:"fixed inset-0 bg-black opacity-50"},null,-1)),w("div",i$,[b[17]||(b[17]=w("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Confirmar Excluso",-1)),w("p",o$,' Tem certeza de que deseja excluir a atividade "'+Ce(i.value.title)+'"? Esta ao no pode ser desfeita. ',1),w("div",a$,[w("button",{onClick:b[4]||(b[4]=C=>r.value=!1),class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300"}," Cancelar "),w("button",{onClick:v,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700"}," Excluir ")])])])):he("",!0)]),_:1},8,["title","alert"]))}},u$={class:"mb-6"},c$={class:"flex justify-end mb-4"},d$={key:0,class:"text-center py-8"},f$={key:1,class:"bg-gray-50 rounded-lg p-8 text-center"},h$={key:2,class:"bg-white shadow rounded-lg overflow-hidden"},p$={class:"divide-y divide-gray-200"},m$={class:"flex items-center justify-between"},g$={class:"text-lg font-medium text-gray-900"},y$={class:"text-sm text-gray-500 mt-1 flex items-center"},v$={class:"mr-3"},b$={key:0,class:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded"},w$={__name:"ItineraryList",setup(n){const e=fe([]),t=fe(!0),r=fe({show:!1,message:"",type:"success"}),s=(l,c="success")=>{r.value={show:!0,message:l,type:c}},i=()=>{r.value.show=!1},o=l=>{if(!l)return"";const c={day:"2-digit",month:"2-digit",year:"numeric"};return new Date(l).toLocaleDateString("pt-BR",c)},a=l=>{if(!l)return 0;let c=0;return["morning","lunch","midDay","afternoon","evening","night"].forEach(d=>{l[d]&&Array.isArray(l[d])&&(c+=l[d].length)}),c};return kt(async()=>{try{t.value=!0;const l=await df();e.value=l.filter(c=>c.id.startsWith("day")),e.value.sort((c,u)=>c.date&&u.date?new Date(c.date)-new Date(u.date):c.id.localeCompare(u.id))}catch(l){console.error("Erro ao carregar itinerrio:",l),s("Erro ao carregar lista de dias do itinerrio!","error")}finally{t.value=!1}}),(l,c)=>{const u=Ta("router-link");return z(),mt(yi,{title:"Gesto de Itinerrio",alert:r.value,onCloseAlert:i},{default:nt(()=>[w("div",u$,[c[7]||(c[7]=w("p",{class:"text-sm text-gray-600 mb-4"}," Gerencie os dias do roteiro de viagem. Clique em um dia para edit-lo ou adicione um novo dia. ",-1)),w("div",c$,[Ee(u,{to:"/admin/itinerario/novo",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center text-sm"},{default:nt(()=>c[0]||(c[0]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),St(" Novo Dia ")])),_:1})]),t.value?(z(),j("div",d$,c[1]||(c[1]=[w("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-600"},null,-1),w("p",{class:"mt-2 text-gray-500"},"Carregando itinerrio...",-1)]))):e.value.length===0?(z(),j("div",f$,[c[3]||(c[3]=w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-12 w-12 mx-auto text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),c[4]||(c[4]=w("h3",{class:"text-lg font-medium text-gray-900 mb-2"},"Nenhum dia no itinerrio",-1)),c[5]||(c[5]=w("p",{class:"text-gray-500 mb-4"},"Comece adicionando o primeiro dia ao roteiro da viagem.",-1)),Ee(u,{to:"/admin/itinerario/novo",class:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"},{default:nt(()=>c[2]||(c[2]=[St(" Adicionar Primeiro Dia ")])),_:1})])):(z(),j("div",h$,[w("ul",p$,[(z(!0),j(Be,null,ot(e.value,d=>(z(),j("li",{key:d.id,class:"hover:bg-gray-50"},[Ee(u,{to:`/admin/itinerario/${d.id}`,class:"block p-4"},{default:nt(()=>[w("div",m$,[w("div",null,[w("h3",g$,Ce(d.title),1),w("p",y$,[w("span",v$,Ce(o(d.date)),1),d.schedule?(z(),j("span",b$,Ce(a(d.schedule))+" atividades ",1)):he("",!0)])]),c[6]||(c[6]=w("div",{class:"text-gray-400"},[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1))])]),_:2},1032,["to"])]))),128))])]))])]),_:1},8,["alert"])}}};function Tr(n){return n==null}function T$(n,e,t){const{object:r,valueProp:s,mode:i}=Gn(n),o=Ea().proxy,a=t.iv,l=(d,h=!0)=>{a.value=u(d);const p=c(d);e.emit("change",p,o),h&&(e.emit("input",p),e.emit("update:modelValue",p))},c=d=>r.value||Tr(d)?d:Array.isArray(d)?d.map(h=>h[s.value]):d[s.value],u=d=>Tr(d)?i.value==="single"?{}:[]:d;return{update:l}}function vt(n){return h1(()=>({get:n,set:()=>{}}))}function E$(n,e){const{value:t,modelValue:r,mode:s,valueProp:i}=Gn(n),o=fe(s.value!=="single"?[]:{}),a=vt(()=>r.value!==void 0?r.value:t.value),l=Oe(()=>s.value==="single"?o.value[i.value]:o.value.map(u=>u[i.value])),c=vt(()=>s.value!=="single"?o.value.map(u=>u[i.value]).join(","):o.value[i.value]);return{iv:o,internalValue:o,ev:a,externalValue:a,textValue:c,plainValue:l}}function S$(n,e,t){const{regex:r}=Gn(n),s=Ea().proxy,i=t.isOpen,o=t.open,a=fe(null),l=()=>{a.value=""},c=h=>{a.value=h.target.value},u=h=>{if(r.value){let p=r.value;typeof p=="string"&&(p=new RegExp(p)),h.key.match(p)||h.preventDefault()}},d=h=>{if(r.value){let m=(h.clipboardData||window.clipboardData).getData("Text"),y=r.value;typeof y=="string"&&(y=new RegExp(y)),m.split("").every(v=>!!v.match(y))||h.preventDefault()}e.emit("paste",h,s)};return At(a,h=>{!i.value&&h&&o(),e.emit("search-change",h,s)}),{search:a,clearSearch:l,handleSearchInput:c,handleKeypress:u,handlePaste:d}}function _$(n,e,t){const{groupSelect:r,mode:s,groups:i,disabledProp:o}=Gn(n),a=fe(null),l=u=>{u===void 0||u!==null&&u[o.value]||i.value&&u&&u.group&&(s.value==="single"||!r.value)||(a.value=u)};return{pointer:a,setPointer:l,clearPointer:()=>{l(null)}}}function Eh(n,e=!0){return e?String(n).toLowerCase().trim():String(n).toLowerCase().normalize("NFD").trim().replace(//g,"ae").replace(//g,"oe").replace(//g,"o").replace(new RegExp("\\p{Diacritic}","gu"),"")}function x$(n){return Object.prototype.toString.call(n)==="[object Object]"}function C$(n,e){if(n.length!==e.length)return!1;const t=e.slice().sort();return n.slice().sort().every(function(r,s){return r===t[s]})}const JS=(n,e)=>{if(n===e)return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;const t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(let s of t)if(!r.includes(s)||!JS(n[s],e[s]))return!1;return!0};function A$(n,e,t){const{options:r,mode:s,trackBy:i,limit:o,hideSelected:a,createTag:l,createOption:c,label:u,appendNewTag:d,appendNewOption:h,multipleLabel:p,object:m,loading:y,delay:v,resolveOnLoad:S,minChars:T,filterResults:b,clearOnSearch:C,clearOnSelect:O,valueProp:N,allowAbsent:A,groupLabel:x,canDeselect:_,max:M,strict:I,closeOnSelect:P,closeOnDeselect:k,groups:K,reverse:le,infinite:J,groupOptions:ee,groupHideEmpty:ue,groupSelect:be,onCreate:He,disabledProp:Pe,searchStart:$e,searchFilter:Je}=Gn(n),Qe=Ea().proxy,ke=t.iv,X=t.ev,B=t.search,ie=t.clearSearch,oe=t.update,me=t.pointer,Ge=t.setPointer,D=t.clearPointer,L=t.focus,$=t.deactivate,U=t.close,W=t.localize,q=fe([]),ae=fe([]),ne=fe(!1),te=fe(null),Q=fe(J.value&&o.value===-1?10:o.value),xe=Oe({get:()=>ae.value,set:V=>ae.value=V}),de=vt(()=>l.value||c.value||!1),we=vt(()=>d.value!==void 0?d.value:h.value!==void 0?h.value:!0),Te=Oe(()=>{if(K.value){let V=ze.value||[],se=[];return V.forEach(Ke=>{Ci(Ke[ee.value]).forEach(ct=>{se.push(Object.assign({},ct,Ke[Pe.value]?{[Pe.value]:!0}:{}))})}),se}else{let V=Ci(ae.value||[]);return q.value.length&&(V=V.concat(q.value)),V}}),Se=Oe(()=>{let V=Te.value;return le.value&&(V=V.reverse()),pt.value.length&&(V=pt.value.concat(V)),To(V)}),Me=Oe(()=>{let V=Se.value;return Q.value>0&&(V=V.slice(0,Q.value)),V}),ze=Oe(()=>{if(!K.value)return[];let V=[],se=ae.value||[];return q.value.length&&V.push({[x.value]:" ",[ee.value]:[...q.value],__CREATE__:!0}),V.concat(se)}),$t=Oe(()=>{let V=[...ze.value].map(se=>({...se}));return pt.value.length&&(V[0]&&V[0].__CREATE__?V[0][ee.value]=[...pt.value,...V[0][ee.value]]:V=[{[x.value]:" ",[ee.value]:[...pt.value],__CREATE__:!0}].concat(V)),V}),xt=Oe(()=>{if(!K.value)return[];let V=$t.value;return wo((V||[]).map((se,Ke)=>{const ct=Ci(se[ee.value]);return{...se,index:Ke,group:!0,[ee.value]:To(ct,!1).map(vr=>Object.assign({},vr,se[Pe.value]?{[Pe.value]:!0}:{})),__VISIBLE__:To(ct).map(vr=>Object.assign({},vr,se[Pe.value]?{[Pe.value]:!0}:{}))}}))}),an=Oe(()=>{switch(s.value){case"single":return!Tr(ke.value[N.value]);case"multiple":case"tags":return!Tr(ke.value)&&ke.value.length>0}}),Bt=Oe(()=>p.value!==void 0?p.value(ke.value,Qe):ke.value&&ke.value.length>1?`${ke.value.length} options selected`:"1 option selected"),gr=vt(()=>!Te.value.length&&!ne.value&&!pt.value.length),Ei=vt(()=>Te.value.length>0&&Me.value.length==0&&(B.value&&K.value||!K.value)),pt=Oe(()=>de.value===!1||!B.value?[]:Es(B.value)!==-1?[]:[{[N.value]:B.value,[It.value[0]]:B.value,[u.value]:B.value,__CREATE__:!0}]),It=Oe(()=>i.value?Array.isArray(i.value)?i.value:[i.value]:[u.value]),go=vt(()=>{switch(s.value){case"single":return null;case"multiple":case"tags":return[]}}),Ma=vt(()=>y.value||ne.value),jr=V=>{switch(typeof V!="object"&&(V=or(V)),s.value){case"single":oe(V);break;case"multiple":case"tags":oe(ke.value.concat(V));break}e.emit("select",ws(V),V,Qe)},Hr=V=>{switch(typeof V!="object"&&(V=or(V)),s.value){case"single":yr();break;case"tags":case"multiple":oe(Array.isArray(V)?ke.value.filter(se=>V.map(Ke=>Ke[N.value]).indexOf(se[N.value])===-1):ke.value.filter(se=>se[N.value]!=V[N.value]));break}e.emit("deselect",ws(V),V,Qe)},ws=V=>m.value?V:V[N.value],yo=V=>{Hr(V)},Pa=(V,se)=>{if(se.button!==0){se.preventDefault();return}yo(V)},yr=()=>{oe(go.value),e.emit("clear",Qe)},Jn=V=>{if(V.group!==void 0)return s.value==="single"?!1:Df(V[ee.value])&&V[ee.value].length;switch(s.value){case"single":return!Tr(ke.value)&&(ke.value[N.value]==V[N.value]||typeof ke.value[N.value]=="object"&&typeof V[N.value]=="object"&&JS(ke.value[N.value],V[N.value]));case"tags":case"multiple":return!Tr(ke.value)&&ke.value.map(se=>se[N.value]).indexOf(V[N.value])!==-1}},Ts=V=>V[Pe.value]===!0,vo=()=>M===void 0||M.value===-1||!an.value&&M.value>0?!1:ke.value.length>=M.value,Si=V=>{if(!Ts(V)){if(He.value&&!Jn(V)&&V.__CREATE__&&(V={...V},delete V.__CREATE__,V=He.value(V,Qe),V instanceof Promise)){ne.value=!0,V.then(se=>{ne.value=!1,Ra(se)});return}Ra(V)}},Ra=V=>{switch(V.__CREATE__&&(V={...V},delete V.__CREATE__),s.value){case"single":if(V&&Jn(V)){_.value&&Hr(V),k.value&&(D(),U());return}V&&bo(V),O.value&&ie(),P.value&&(D(),U()),V&&jr(V);break;case"multiple":if(V&&Jn(V)){Hr(V),k.value&&(D(),U());return}if(vo()){e.emit("max",Qe);return}V&&(bo(V),jr(V)),O.value&&ie(),a.value&&D(),P.value&&U();break;case"tags":if(V&&Jn(V)){Hr(V),k.value&&(D(),U());return}if(vo()){e.emit("max",Qe);return}V&&bo(V),O.value&&ie(),V&&jr(V),a.value&&D(),P.value&&U();break}P.value||L()},Jt=V=>{if(!(Ts(V)||s.value==="single"||!be.value)){switch(s.value){case"multiple":case"tags":xi(V[ee.value])?Hr(V[ee.value]):jr(V[ee.value].filter(se=>ke.value.map(Ke=>Ke[N.value]).indexOf(se[N.value])===-1).filter(se=>!se[Pe.value]).filter((se,Ke)=>ke.value.length+1+Ke<=M.value||M.value===-1)),a.value&&me.value&&Ge(xt.value.filter(se=>!se[Pe.value])[me.value.index]);break}P.value&&$()}},bo=V=>{or(V[N.value])===void 0&&de.value&&(e.emit("tag",V[N.value],Qe),e.emit("option",V[N.value],Qe),e.emit("create",V[N.value],Qe),we.value&&Lf(V),ie())},_i=()=>{s.value!=="single"&&jr(Me.value.filter(V=>!V.disabled&&!Jn(V)))},xi=V=>V.find(se=>!Jn(se)&&!se[Pe.value])===void 0,Df=V=>V.find(se=>!Jn(se))===void 0,or=V=>Te.value[Te.value.map(se=>String(se[N.value])).indexOf(String(V))],Es=V=>Te.value.findIndex(se=>It.value.some(Ke=>(parseInt(se[Ke])==se[Ke]?parseInt(se[Ke]):se[Ke])===(parseInt(V)==V?parseInt(V):V))),Nf=V=>["tags","multiple"].indexOf(s.value)!==-1&&a.value&&Jn(V),Lf=V=>{q.value.push(V)},wo=V=>ue.value?V.filter(se=>B.value?se.__VISIBLE__.length:se[ee.value].length):V.filter(se=>B.value?se.__VISIBLE__.length:!0),To=(V,se=!0)=>{let Ke=V;if(B.value&&b.value){let ct=Je.value;ct||(ct=(vr,_o,xo)=>It.value.some(qr=>{let Co=Eh(W(vr[qr]),I.value);return $e.value?Co.startsWith(Eh(_o,I.value)):Co.indexOf(Eh(_o,I.value))!==-1})),Ke=Ke.filter(vr=>ct(vr,B.value,Qe))}return a.value&&se&&(Ke=Ke.filter(ct=>!Nf(ct))),Ke},Ci=V=>{let se=V;return x$(se)&&(se=Object.keys(se).map(Ke=>{let ct=se[Ke];return{[N.value]:Ke,[It.value[0]]:ct,[u.value]:ct}})),se&&Array.isArray(se)?se=se.map(Ke=>typeof Ke=="object"?Ke:{[N.value]:Ke,[It.value[0]]:Ke,[u.value]:Ke}):se=[],se},Ur=()=>{Tr(X.value)||(ke.value=Ss(X.value))},Ln=V=>(ne.value=!0,new Promise((se,Ke)=>{r.value(B.value,Qe).then(ct=>{ae.value=ct||[],typeof V=="function"&&V(ct),ne.value=!1}).catch(ct=>{console.error(ct),ae.value=[],ne.value=!1}).finally(()=>{se()})})),Eo=()=>{if(an.value)if(s.value==="single"){let V=or(ke.value[N.value]);if(V!==void 0){let se=V[u.value];ke.value[u.value]=se,m.value&&(X.value[u.value]=se)}}else ke.value.forEach((V,se)=>{let Ke=or(ke.value[se][N.value]);if(Ke!==void 0){let ct=Ke[u.value];ke.value[se][u.value]=ct,m.value&&(X.value[se][u.value]=ct)}})},pu=V=>{Ln(V)},Ss=V=>Tr(V)?s.value==="single"?{}:[]:m.value?V:s.value==="single"?or(V)||(A.value?{[u.value]:V,[N.value]:V,[It.value[0]]:V}:{}):V.filter(se=>!!or(se)||A.value).map(se=>or(se)||{[u.value]:se,[N.value]:se,[It.value[0]]:se}),So=()=>{te.value=At(B,V=>{V.length<T.value||!V&&T.value!==0||(ne.value=!0,C.value&&(ae.value=[]),setTimeout(()=>{V==B.value&&r.value(B.value,Qe).then(se=>{(V==B.value||!B.value)&&(ae.value=se,me.value=Me.value.filter(Ke=>Ke[Pe.value]!==!0)[0]||null,ne.value=!1)}).catch(se=>{console.error(se)})},v.value))},{flush:"sync"})};if(s.value!=="single"&&!Tr(X.value)&&!Array.isArray(X.value))throw new Error(`v-model must be an array when using "${s.value}" mode`);return r&&typeof r.value=="function"?S.value?Ln(Ur):m.value==!0&&Ur():(ae.value=r.value,Ur()),v.value>-1&&So(),At(v,(V,se)=>{te.value&&te.value(),V>=0&&So()}),At(X,V=>{if(Tr(V)){oe(Ss(V),!1);return}switch(s.value){case"single":(m.value?V[N.value]!=ke.value[N.value]:V!=ke.value[N.value])&&oe(Ss(V),!1);break;case"multiple":case"tags":C$(m.value?V.map(se=>se[N.value]):V,ke.value.map(se=>se[N.value]))||oe(Ss(V),!1);break}},{deep:!0}),At(r,(V,se)=>{typeof n.options=="function"?S.value&&(!se||V&&V.toString()!==se.toString())&&Ln():(ae.value=n.options,Object.keys(ke.value).length||Ur(),Eo())}),At(u,Eo),At(o,(V,se)=>{Q.value=J.value&&V===-1?10:V}),{resolvedOptions:xe,pfo:Se,fo:Me,filteredOptions:Me,hasSelected:an,multipleLabelText:Bt,eo:Te,extendedOptions:Te,eg:ze,extendedGroups:ze,fg:xt,filteredGroups:xt,noOptions:gr,noResults:Ei,resolving:ne,busy:Ma,offset:Q,select:jr,deselect:Hr,remove:yo,selectAll:_i,clear:yr,isSelected:Jn,isDisabled:Ts,isMax:vo,getOption:or,handleOptionClick:Si,handleGroupClick:Jt,handleTagRemove:Pa,refreshOptions:pu,resolveOptions:Ln,refreshLabels:Eo}}function k$(n,e,t){const{valueProp:r,showOptions:s,searchable:i,groupLabel:o,groups:a,mode:l,groupSelect:c,disabledProp:u,groupOptions:d}=Gn(n),h=t.fo,p=t.fg,m=t.handleOptionClick,y=t.handleGroupClick,v=t.search,S=t.pointer,T=t.setPointer,b=t.clearPointer,C=t.multiselect,O=t.isOpen,N=Oe(()=>h.value.filter(X=>!X[u.value])),A=Oe(()=>p.value.filter(X=>!X[u.value])),x=vt(()=>l.value!=="single"&&c.value),_=vt(()=>S.value&&S.value.group),M=Oe(()=>Qe(S.value)),I=Oe(()=>{const X=_.value?S.value:Qe(S.value),B=A.value.map(oe=>oe[o.value]).indexOf(X[o.value]);let ie=A.value[B-1];return ie===void 0&&(ie=k.value),ie}),P=Oe(()=>{let X=A.value.map(B=>B.label).indexOf(_.value?S.value[o.value]:Qe(S.value)[o.value])+1;return A.value.length<=X&&(X=0),A.value[X]}),k=Oe(()=>[...A.value].slice(-1)[0]),K=Oe(()=>S.value.__VISIBLE__.filter(X=>!X[u.value])[0]),le=Oe(()=>{const X=M.value.__VISIBLE__.filter(B=>!B[u.value]);return X[X.map(B=>B[r.value]).indexOf(S.value[r.value])-1]}),J=Oe(()=>{const X=Qe(S.value).__VISIBLE__.filter(B=>!B[u.value]);return X[X.map(B=>B[r.value]).indexOf(S.value[r.value])+1]}),ee=Oe(()=>[...I.value.__VISIBLE__.filter(X=>!X[u.value])].slice(-1)[0]),ue=Oe(()=>[...k.value.__VISIBLE__.filter(X=>!X[u.value])].slice(-1)[0]),be=X=>S.value&&(!X.group&&S.value[r.value]===X[r.value]||X.group!==void 0&&S.value[o.value]===X[o.value])?!0:void 0,He=()=>{T(N.value[0]||null)},Pe=()=>{!S.value||S.value[u.value]===!0||(_.value?y(S.value):m(S.value))},$e=()=>{if(S.value===null)T((a.value&&x.value?A.value[0].__CREATE__?N.value[0]:A.value[0]:N.value[0])||null);else if(a.value&&x.value){let X=_.value?K.value:J.value;X===void 0&&(X=P.value,X.__CREATE__&&(X=X[d.value][0])),T(X||null)}else{let X=N.value.map(B=>B[r.value]).indexOf(S.value[r.value])+1;N.value.length<=X&&(X=0),T(N.value[X]||null)}as(()=>{ke()})},Je=()=>{if(S.value===null){let X=N.value[N.value.length-1];a.value&&x.value&&(X=ue.value,X===void 0&&(X=k.value)),T(X||null)}else if(a.value&&x.value){let X=_.value?ee.value:le.value;X===void 0&&(X=_.value?I.value:M.value,X.__CREATE__&&(X=ee.value,X===void 0&&(X=I.value))),T(X||null)}else{let X=N.value.map(B=>B[r.value]).indexOf(S.value[r.value])-1;X<0&&(X=N.value.length-1),T(N.value[X]||null)}as(()=>{ke()})},Qe=X=>A.value.find(B=>B.__VISIBLE__.map(ie=>ie[r.value]).indexOf(X[r.value])!==-1),ke=()=>{let X=C.value.querySelector("[data-pointed]");if(!X)return;let B=X.parentElement.parentElement;a.value&&(B=_.value?X.parentElement.parentElement.parentElement:X.parentElement.parentElement.parentElement.parentElement),X.offsetTop+X.offsetHeight>B.clientHeight+B.scrollTop&&(B.scrollTop=X.offsetTop+X.offsetHeight-B.clientHeight),X.offsetTop<B.scrollTop&&(B.scrollTop=X.offsetTop)};return At(v,X=>{i.value&&(X.length&&s.value?He():b())}),At(O,X=>{if(X&&C&&C.value){let B=C.value.querySelectorAll("[data-selected]")[0];if(!B)return;let ie=B.parentElement.parentElement;as(()=>{ie.scrollTop=B.offsetTop})}}),{pointer:S,canPointGroups:x,isPointed:be,setPointerFirst:He,selectPointer:Pe,forwardPointer:$e,backwardPointer:Je}}function Wn(n){if(n==null)return window;if(n.toString()!=="[object Window]"){var e=n.ownerDocument;return e&&e.defaultView||window}return n}function no(n){var e=Wn(n).Element;return n instanceof e||n instanceof Element}function nr(n){var e=Wn(n).HTMLElement;return n instanceof e||n instanceof HTMLElement}function Cg(n){if(typeof ShadowRoot>"u")return!1;var e=Wn(n).ShadowRoot;return n instanceof e||n instanceof ShadowRoot}var Ui=Math.max,Uc=Math.min,fa=Math.round;function Lp(){var n=navigator.userAgentData;return n!=null&&n.brands&&Array.isArray(n.brands)?n.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function QS(){return!/^((?!chrome|android).)*safari/i.test(Lp())}function ha(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!1);var r=n.getBoundingClientRect(),s=1,i=1;e&&nr(n)&&(s=n.offsetWidth>0&&fa(r.width)/n.offsetWidth||1,i=n.offsetHeight>0&&fa(r.height)/n.offsetHeight||1);var o=no(n)?Wn(n):window,a=o.visualViewport,l=!QS()&&t,c=(r.left+(l&&a?a.offsetLeft:0))/s,u=(r.top+(l&&a?a.offsetTop:0))/i,d=r.width/s,h=r.height/i;return{width:d,height:h,top:u,right:c+d,bottom:u+h,left:c,x:c,y:u}}function Ag(n){var e=Wn(n),t=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:t,scrollTop:r}}function I$(n){return{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}}function M$(n){return n===Wn(n)||!nr(n)?Ag(n):I$(n)}function $r(n){return n?(n.nodeName||"").toLowerCase():null}function vi(n){return((no(n)?n.ownerDocument:n.document)||window.document).documentElement}function kg(n){return ha(vi(n)).left+Ag(n).scrollLeft}function gs(n){return Wn(n).getComputedStyle(n)}function Ig(n){var e=gs(n),t=e.overflow,r=e.overflowX,s=e.overflowY;return/auto|scroll|overlay|hidden/.test(t+s+r)}function P$(n){var e=n.getBoundingClientRect(),t=fa(e.width)/n.offsetWidth||1,r=fa(e.height)/n.offsetHeight||1;return t!==1||r!==1}function R$(n,e,t){t===void 0&&(t=!1);var r=nr(e),s=nr(e)&&P$(e),i=vi(e),o=ha(n,s,t),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(r||!r&&!t)&&(($r(e)!=="body"||Ig(i))&&(a=M$(e)),nr(e)?(l=ha(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):i&&(l.x=kg(i))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function YS(n){var e=ha(n),t=n.offsetWidth,r=n.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:n.offsetLeft,y:n.offsetTop,width:t,height:r}}function gf(n){return $r(n)==="html"?n:n.assignedSlot||n.parentNode||(Cg(n)?n.host:null)||vi(n)}function XS(n){return["html","body","#document"].indexOf($r(n))>=0?n.ownerDocument.body:nr(n)&&Ig(n)?n:XS(gf(n))}function yl(n,e){var t;e===void 0&&(e=[]);var r=XS(n),s=r===((t=n.ownerDocument)==null?void 0:t.body),i=Wn(r),o=s?[i].concat(i.visualViewport||[],Ig(r)?r:[]):r,a=e.concat(o);return s?a:a.concat(yl(gf(o)))}function O$(n){return["table","td","th"].indexOf($r(n))>=0}function fb(n){return!nr(n)||gs(n).position==="fixed"?null:n.offsetParent}function D$(n){var e=/firefox/i.test(Lp()),t=/Trident/i.test(Lp());if(t&&nr(n)){var r=gs(n);if(r.position==="fixed")return null}var s=gf(n);for(Cg(s)&&(s=s.host);nr(s)&&["html","body"].indexOf($r(s))<0;){var i=gs(s);if(i.transform!=="none"||i.perspective!=="none"||i.contain==="paint"||["transform","perspective"].indexOf(i.willChange)!==-1||e&&i.willChange==="filter"||e&&i.filter&&i.filter!=="none")return s;s=s.parentNode}return null}function yf(n){for(var e=Wn(n),t=fb(n);t&&O$(t)&&gs(t).position==="static";)t=fb(t);return t&&($r(t)==="html"||$r(t)==="body"&&gs(t).position==="static")?e:t||D$(n)||e}var fr="top",Br="bottom",li="right",us="left",Mg="auto",vf=[fr,Br,li,us],pa="start",Hl="end",N$="clippingParents",ZS="viewport",Wa="popper",L$="reference",hb=vf.reduce(function(n,e){return n.concat([e+"-"+pa,e+"-"+Hl])},[]),V$=[].concat(vf,[Mg]).reduce(function(n,e){return n.concat([e,e+"-"+pa,e+"-"+Hl])},[]),$$="beforeRead",B$="read",F$="afterRead",z$="beforeMain",j$="main",H$="afterMain",U$="beforeWrite",q$="write",W$="afterWrite",G$=[$$,B$,F$,z$,j$,H$,U$,q$,W$];function K$(n){var e=new Map,t=new Set,r=[];n.forEach(function(i){e.set(i.name,i)});function s(i){t.add(i.name);var o=[].concat(i.requires||[],i.requiresIfExists||[]);o.forEach(function(a){if(!t.has(a)){var l=e.get(a);l&&s(l)}}),r.push(i)}return n.forEach(function(i){t.has(i.name)||s(i)}),r}function J$(n){var e=K$(n);return G$.reduce(function(t,r){return t.concat(e.filter(function(s){return s.phase===r}))},[])}function Q$(n){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(n())})})),e}}function Y$(n){var e=n.reduce(function(t,r){var s=t[r.name];return t[r.name]=s?Object.assign({},s,r,{options:Object.assign({},s.options,r.options),data:Object.assign({},s.data,r.data)}):r,t},{});return Object.keys(e).map(function(t){return e[t]})}function X$(n,e){var t=Wn(n),r=vi(n),s=t.visualViewport,i=r.clientWidth,o=r.clientHeight,a=0,l=0;if(s){i=s.width,o=s.height;var c=QS();(c||!c&&e==="fixed")&&(a=s.offsetLeft,l=s.offsetTop)}return{width:i,height:o,x:a+kg(n),y:l}}function Z$(n){var e,t=vi(n),r=Ag(n),s=(e=n.ownerDocument)==null?void 0:e.body,i=Ui(t.scrollWidth,t.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=Ui(t.scrollHeight,t.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),a=-r.scrollLeft+kg(n),l=-r.scrollTop;return gs(s||t).direction==="rtl"&&(a+=Ui(t.clientWidth,s?s.clientWidth:0)-i),{width:i,height:o,x:a,y:l}}function eB(n,e){var t=e.getRootNode&&e.getRootNode();if(n.contains(e))return!0;if(t&&Cg(t)){var r=e;do{if(r&&n.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Vp(n){return Object.assign({},n,{left:n.x,top:n.y,right:n.x+n.width,bottom:n.y+n.height})}function tB(n,e){var t=ha(n,!1,e==="fixed");return t.top=t.top+n.clientTop,t.left=t.left+n.clientLeft,t.bottom=t.top+n.clientHeight,t.right=t.left+n.clientWidth,t.width=n.clientWidth,t.height=n.clientHeight,t.x=t.left,t.y=t.top,t}function pb(n,e,t){return e===ZS?Vp(X$(n,t)):no(e)?tB(e,t):Vp(Z$(vi(n)))}function nB(n){var e=yl(gf(n)),t=["absolute","fixed"].indexOf(gs(n).position)>=0,r=t&&nr(n)?yf(n):n;return no(r)?e.filter(function(s){return no(s)&&eB(s,r)&&$r(s)!=="body"}):[]}function rB(n,e,t,r){var s=e==="clippingParents"?nB(n):[].concat(e),i=[].concat(s,[t]),o=i[0],a=i.reduce(function(l,c){var u=pb(n,c,r);return l.top=Ui(u.top,l.top),l.right=Uc(u.right,l.right),l.bottom=Uc(u.bottom,l.bottom),l.left=Ui(u.left,l.left),l},pb(n,o,r));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Ks(n){return n.split("-")[0]}function ma(n){return n.split("-")[1]}function e_(n){return["top","bottom"].indexOf(n)>=0?"x":"y"}function t_(n){var e=n.reference,t=n.element,r=n.placement,s=r?Ks(r):null,i=r?ma(r):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2,l;switch(s){case fr:l={x:o,y:e.y-t.height};break;case Br:l={x:o,y:e.y+e.height};break;case li:l={x:e.x+e.width,y:a};break;case us:l={x:e.x-t.width,y:a};break;default:l={x:e.x,y:e.y}}var c=s?e_(s):null;if(c!=null){var u=c==="y"?"height":"width";switch(i){case pa:l[c]=l[c]-(e[u]/2-t[u]/2);break;case Hl:l[c]=l[c]+(e[u]/2-t[u]/2);break}}return l}function n_(){return{top:0,right:0,bottom:0,left:0}}function sB(n){return Object.assign({},n_(),n)}function iB(n,e){return e.reduce(function(t,r){return t[r]=n,t},{})}function Pg(n,e){e===void 0&&(e={});var t=e,r=t.placement,s=r===void 0?n.placement:r,i=t.strategy,o=i===void 0?n.strategy:i,a=t.boundary,l=a===void 0?N$:a,c=t.rootBoundary,u=c===void 0?ZS:c,d=t.elementContext,h=d===void 0?Wa:d,p=t.altBoundary,m=p===void 0?!1:p,y=t.padding,v=y===void 0?0:y,S=sB(typeof v!="number"?v:iB(v,vf)),T=h===Wa?L$:Wa,b=n.rects.popper,C=n.elements[m?T:h],O=rB(no(C)?C:C.contextElement||vi(n.elements.popper),l,u,o),N=ha(n.elements.reference),A=t_({reference:N,element:b,placement:s}),x=Vp(Object.assign({},b,A)),_=h===Wa?x:N,M={top:O.top-_.top+S.top,bottom:_.bottom-O.bottom+S.bottom,left:O.left-_.left+S.left,right:_.right-O.right+S.right},I=n.modifiersData.offset;if(h===Wa&&I){var P=I[s];Object.keys(M).forEach(function(k){var K=[li,Br].indexOf(k)>=0?1:-1,le=[fr,Br].indexOf(k)>=0?"y":"x";M[k]+=P[le]*K})}return M}var mb={placement:"bottom",modifiers:[],strategy:"absolute"};function gb(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function oB(n){n===void 0&&(n={});var e=n,t=e.defaultModifiers,r=t===void 0?[]:t,s=e.defaultOptions,i=s===void 0?mb:s;return function(a,l,c){c===void 0&&(c=i);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},mb,i),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},d=[],h=!1,p={state:u,setOptions:function(S){var T=typeof S=="function"?S(u.options):S;y(),u.options=Object.assign({},i,u.options,T),u.scrollParents={reference:no(a)?yl(a):a.contextElement?yl(a.contextElement):[],popper:yl(l)};var b=J$(Y$([].concat(r,u.options.modifiers)));return u.orderedModifiers=b.filter(function(C){return C.enabled}),m(),p.update()},forceUpdate:function(){if(!h){var S=u.elements,T=S.reference,b=S.popper;if(gb(T,b)){u.rects={reference:R$(T,yf(b),u.options.strategy==="fixed"),popper:YS(b)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(M){return u.modifiersData[M.name]=Object.assign({},M.data)});for(var C=0;C<u.orderedModifiers.length;C++){if(u.reset===!0){u.reset=!1,C=-1;continue}var O=u.orderedModifiers[C],N=O.fn,A=O.options,x=A===void 0?{}:A,_=O.name;typeof N=="function"&&(u=N({state:u,options:x,name:_,instance:p})||u)}}}},update:Q$(function(){return new Promise(function(v){p.forceUpdate(),v(u)})}),destroy:function(){y(),h=!0}};if(!gb(a,l))return p;p.setOptions(c).then(function(v){!h&&c.onFirstUpdate&&c.onFirstUpdate(v)});function m(){u.orderedModifiers.forEach(function(v){var S=v.name,T=v.options,b=T===void 0?{}:T,C=v.effect;if(typeof C=="function"){var O=C({state:u,name:S,instance:p,options:b}),N=function(){};d.push(O||N)}})}function y(){d.forEach(function(v){return v()}),d=[]}return p}}var Vu={passive:!0};function aB(n){var e=n.state,t=n.instance,r=n.options,s=r.scroll,i=s===void 0?!0:s,o=r.resize,a=o===void 0?!0:o,l=Wn(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return i&&c.forEach(function(u){u.addEventListener("scroll",t.update,Vu)}),a&&l.addEventListener("resize",t.update,Vu),function(){i&&c.forEach(function(u){u.removeEventListener("scroll",t.update,Vu)}),a&&l.removeEventListener("resize",t.update,Vu)}}var lB={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:aB,data:{}};function uB(n){var e=n.state,t=n.name;e.modifiersData[t]=t_({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}var cB={name:"popperOffsets",enabled:!0,phase:"read",fn:uB,data:{}},dB={top:"auto",right:"auto",bottom:"auto",left:"auto"};function fB(n,e){var t=n.x,r=n.y,s=e.devicePixelRatio||1;return{x:fa(t*s)/s||0,y:fa(r*s)/s||0}}function yb(n){var e,t=n.popper,r=n.popperRect,s=n.placement,i=n.variation,o=n.offsets,a=n.position,l=n.gpuAcceleration,c=n.adaptive,u=n.roundOffsets,d=n.isFixed,h=o.x,p=h===void 0?0:h,m=o.y,y=m===void 0?0:m,v=typeof u=="function"?u({x:p,y}):{x:p,y};p=v.x,y=v.y;var S=o.hasOwnProperty("x"),T=o.hasOwnProperty("y"),b=us,C=fr,O=window;if(c){var N=yf(t),A="clientHeight",x="clientWidth";if(N===Wn(t)&&(N=vi(t),gs(N).position!=="static"&&a==="absolute"&&(A="scrollHeight",x="scrollWidth")),N=N,s===fr||(s===us||s===li)&&i===Hl){C=Br;var _=d&&N===O&&O.visualViewport?O.visualViewport.height:N[A];y-=_-r.height,y*=l?1:-1}if(s===us||(s===fr||s===Br)&&i===Hl){b=li;var M=d&&N===O&&O.visualViewport?O.visualViewport.width:N[x];p-=M-r.width,p*=l?1:-1}}var I=Object.assign({position:a},c&&dB),P=u===!0?fB({x:p,y},Wn(t)):{x:p,y};if(p=P.x,y=P.y,l){var k;return Object.assign({},I,(k={},k[C]=T?"0":"",k[b]=S?"0":"",k.transform=(O.devicePixelRatio||1)<=1?"translate("+p+"px, "+y+"px)":"translate3d("+p+"px, "+y+"px, 0)",k))}return Object.assign({},I,(e={},e[C]=T?y+"px":"",e[b]=S?p+"px":"",e.transform="",e))}function hB(n){var e=n.state,t=n.options,r=t.gpuAcceleration,s=r===void 0?!0:r,i=t.adaptive,o=i===void 0?!0:i,a=t.roundOffsets,l=a===void 0?!0:a,c={placement:Ks(e.placement),variation:ma(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:s,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,yb(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,yb(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var pB={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:hB,data:{}};function mB(n){var e=n.state;Object.keys(e.elements).forEach(function(t){var r=e.styles[t]||{},s=e.attributes[t]||{},i=e.elements[t];!nr(i)||!$r(i)||(Object.assign(i.style,r),Object.keys(s).forEach(function(o){var a=s[o];a===!1?i.removeAttribute(o):i.setAttribute(o,a===!0?"":a)}))})}function gB(n){var e=n.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(r){var s=e.elements[r],i=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:t[r]),a=o.reduce(function(l,c){return l[c]="",l},{});!nr(s)||!$r(s)||(Object.assign(s.style,a),Object.keys(i).forEach(function(l){s.removeAttribute(l)}))})}}var yB={name:"applyStyles",enabled:!0,phase:"write",fn:mB,effect:gB,requires:["computeStyles"]},vB=[lB,cB,pB,yB],bB=oB({defaultModifiers:vB});function wB(n){return n==="x"?"y":"x"}function ac(n,e,t){return Ui(n,Uc(e,t))}function TB(n,e,t){var r=ac(n,e,t);return r>t?t:r}function EB(n){var e=n.state,t=n.options,r=n.name,s=t.mainAxis,i=s===void 0?!0:s,o=t.altAxis,a=o===void 0?!1:o,l=t.boundary,c=t.rootBoundary,u=t.altBoundary,d=t.padding,h=t.tether,p=h===void 0?!0:h,m=t.tetherOffset,y=m===void 0?0:m,v=Pg(e,{boundary:l,rootBoundary:c,padding:d,altBoundary:u}),S=Ks(e.placement),T=ma(e.placement),b=!T,C=e_(S),O=wB(C),N=e.modifiersData.popperOffsets,A=e.rects.reference,x=e.rects.popper,_=typeof y=="function"?y(Object.assign({},e.rects,{placement:e.placement})):y,M=typeof _=="number"?{mainAxis:_,altAxis:_}:Object.assign({mainAxis:0,altAxis:0},_),I=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,P={x:0,y:0};if(N){if(i){var k,K=C==="y"?fr:us,le=C==="y"?Br:li,J=C==="y"?"height":"width",ee=N[C],ue=ee+v[K],be=ee-v[le],He=p?-x[J]/2:0,Pe=T===pa?A[J]:x[J],$e=T===pa?-x[J]:-A[J],Je=e.elements.arrow,Qe=p&&Je?YS(Je):{width:0,height:0},ke=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:n_(),X=ke[K],B=ke[le],ie=ac(0,A[J],Qe[J]),oe=b?A[J]/2-He-ie-X-M.mainAxis:Pe-ie-X-M.mainAxis,me=b?-A[J]/2+He+ie+B+M.mainAxis:$e+ie+B+M.mainAxis,Ge=e.elements.arrow&&yf(e.elements.arrow),D=Ge?C==="y"?Ge.clientTop||0:Ge.clientLeft||0:0,L=(k=I==null?void 0:I[C])!=null?k:0,$=ee+oe-L-D,U=ee+me-L,W=ac(p?Uc(ue,$):ue,ee,p?Ui(be,U):be);N[C]=W,P[C]=W-ee}if(a){var q,ae=C==="x"?fr:us,ne=C==="x"?Br:li,te=N[O],Q=O==="y"?"height":"width",xe=te+v[ae],de=te-v[ne],we=[fr,us].indexOf(S)!==-1,Te=(q=I==null?void 0:I[O])!=null?q:0,Se=we?xe:te-A[Q]-x[Q]-Te+M.altAxis,Me=we?te+A[Q]+x[Q]-Te-M.altAxis:de,ze=p&&we?TB(Se,te,Me):ac(p?Se:xe,te,p?Me:de);N[O]=ze,P[O]=ze-te}e.modifiersData[r]=P}}var SB={name:"preventOverflow",enabled:!0,phase:"main",fn:EB,requiresIfExists:["offset"]},_B={left:"right",right:"left",bottom:"top",top:"bottom"};function lc(n){return n.replace(/left|right|bottom|top/g,function(e){return _B[e]})}var xB={start:"end",end:"start"};function vb(n){return n.replace(/start|end/g,function(e){return xB[e]})}function CB(n,e){e===void 0&&(e={});var t=e,r=t.placement,s=t.boundary,i=t.rootBoundary,o=t.padding,a=t.flipVariations,l=t.allowedAutoPlacements,c=l===void 0?V$:l,u=ma(r),d=u?a?hb:hb.filter(function(m){return ma(m)===u}):vf,h=d.filter(function(m){return c.indexOf(m)>=0});h.length===0&&(h=d);var p=h.reduce(function(m,y){return m[y]=Pg(n,{placement:y,boundary:s,rootBoundary:i,padding:o})[Ks(y)],m},{});return Object.keys(p).sort(function(m,y){return p[m]-p[y]})}function AB(n){if(Ks(n)===Mg)return[];var e=lc(n);return[vb(n),e,vb(e)]}function kB(n){var e=n.state,t=n.options,r=n.name;if(!e.modifiersData[r]._skip){for(var s=t.mainAxis,i=s===void 0?!0:s,o=t.altAxis,a=o===void 0?!0:o,l=t.fallbackPlacements,c=t.padding,u=t.boundary,d=t.rootBoundary,h=t.altBoundary,p=t.flipVariations,m=p===void 0?!0:p,y=t.allowedAutoPlacements,v=e.options.placement,S=Ks(v),T=S===v,b=l||(T||!m?[lc(v)]:AB(v)),C=[v].concat(b).reduce(function(Qe,ke){return Qe.concat(Ks(ke)===Mg?CB(e,{placement:ke,boundary:u,rootBoundary:d,padding:c,flipVariations:m,allowedAutoPlacements:y}):ke)},[]),O=e.rects.reference,N=e.rects.popper,A=new Map,x=!0,_=C[0],M=0;M<C.length;M++){var I=C[M],P=Ks(I),k=ma(I)===pa,K=[fr,Br].indexOf(P)>=0,le=K?"width":"height",J=Pg(e,{placement:I,boundary:u,rootBoundary:d,altBoundary:h,padding:c}),ee=K?k?li:us:k?Br:fr;O[le]>N[le]&&(ee=lc(ee));var ue=lc(ee),be=[];if(i&&be.push(J[P]<=0),a&&be.push(J[ee]<=0,J[ue]<=0),be.every(function(Qe){return Qe})){_=I,x=!1;break}A.set(I,be)}if(x)for(var He=m?3:1,Pe=function(ke){var X=C.find(function(B){var ie=A.get(B);if(ie)return ie.slice(0,ke).every(function(oe){return oe})});if(X)return _=X,"break"},$e=He;$e>0;$e--){var Je=Pe($e);if(Je==="break")break}e.placement!==_&&(e.modifiersData[r]._skip=!0,e.placement=_,e.reset=!0)}}var IB={name:"flip",enabled:!0,phase:"main",fn:kB,requiresIfExists:["offset"],data:{_skip:!1}};function MB(n,e,t){const{disabled:r,appendTo:s,appendToBody:i,openDirection:o}=Gn(n),a=Ea().proxy,l=t.multiselect,c=t.dropdown,u=fe(!1),d=fe(null),h=fe(null),p=vt(()=>s.value||i.value),m=vt(()=>o.value==="top"&&h.value==="bottom"||o.value==="bottom"&&h.value!=="top"?"bottom":"top"),y=()=>{u.value||r.value||(u.value=!0,e.emit("open",a),p.value&&as(()=>{S()}))},v=()=>{u.value&&(u.value=!1,e.emit("close",a))},S=()=>{if(!d.value)return;let b=parseInt(window.getComputedStyle(c.value).borderTopWidth.replace("px","")),C=parseInt(window.getComputedStyle(c.value).borderBottomWidth.replace("px",""));d.value.setOptions(O=>({...O,modifiers:[...O.modifiers,{name:"offset",options:{offset:[0,(m.value==="top"?b:C)*-1]}}]})),d.value.update()},T=b=>{for(;b&&b!==document.body;){if(getComputedStyle(b).position==="fixed")return!0;b=b.parentElement}return!1};return kt(()=>{p.value&&(d.value=bB(l.value,c.value,{strategy:T(l.value)?"fixed":void 0,placement:o.value,modifiers:[SB,IB,{name:"sameWidth",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:({state:b})=>{b.styles.popper.width=`${b.rects.reference.width}px`},effect:({state:b})=>{b.elements.popper.style.width=`${b.elements.reference.offsetWidth}px`}},{name:"toggleClass",enabled:!0,phase:"write",fn({state:b}){h.value=b.placement}}]}))}),lo(()=>{!p.value||!d.value||(d.value.destroy(),d.value=null)}),{popper:d,isOpen:u,open:y,close:v,placement:m,updatePopper:S}}function PB(n,e,t){const{searchable:r,disabled:s,clearOnBlur:i}=Gn(n),o=t.input,a=t.open,l=t.close,c=t.clearSearch,u=t.isOpen,d=t.wrapper,h=t.tags,p=fe(!1),m=fe(!1),y=vt(()=>r.value||s.value?-1:0),v=()=>{r.value&&o.value.blur(),d.value.blur()},S=()=>{r.value&&!s.value&&o.value.focus()},T=(x=!0)=>{s.value||(p.value=!0,x&&a())},b=()=>{p.value=!1,setTimeout(()=>{p.value||(l(),i.value&&c())},1)};return{tabindex:y,isActive:p,mouseClicked:m,blur:v,focus:S,activate:T,deactivate:b,handleFocusIn:x=>{x.target.closest("[data-tags]")&&x.target.nodeName!=="INPUT"||x.target.closest("[data-clear]")||T(m.value)},handleFocusOut:()=>{b()},handleCaretClick:()=>{b(),v()},handleMousedown:x=>{m.value=!0,u.value&&(x.target.isEqualNode(d.value)||x.target.isEqualNode(h.value))?setTimeout(()=>{b()},0):!u.value&&(document.activeElement.isEqualNode(d.value)||document.activeElement.isEqualNode(o.value))&&T(),setTimeout(()=>{m.value=!1},0)}}}function RB(n,e,t){const{mode:r,addTagOn:s,openDirection:i,searchable:o,showOptions:a,valueProp:l,groups:c,addOptionOn:u,createTag:d,createOption:h,reverse:p}=Gn(n),m=Ea().proxy,y=t.iv,v=t.update,S=t.deselect,T=t.search,b=t.setPointer,C=t.selectPointer,O=t.backwardPointer,N=t.forwardPointer,A=t.multiselect,x=t.wrapper,_=t.tags,M=t.isOpen,I=t.open,P=t.blur,k=t.fo,K=vt(()=>d.value||h.value||!1),le=vt(()=>s.value!==void 0?s.value:u.value!==void 0?u.value:["enter"]),J=()=>{r.value==="tags"&&!a.value&&K.value&&o.value&&!c.value&&b(k.value[k.value.map(be=>be[l.value]).indexOf(T.value)])};return{handleKeydown:be=>{e.emit("keydown",be,m);let He,Pe;switch(["ArrowLeft","ArrowRight","Enter"].indexOf(be.key)!==-1&&r.value==="tags"&&(He=[...A.value.querySelectorAll("[data-tags] > *")].filter($e=>$e!==_.value),Pe=He.findIndex($e=>$e===document.activeElement)),be.key){case"Backspace":if(r.value==="single"||o.value&&[null,""].indexOf(T.value)===-1||y.value.length===0)return;let $e=y.value.filter(Je=>!Je.disabled&&Je.remove!==!1);$e.length&&S($e[$e.length-1]);break;case"Enter":if(be.preventDefault(),be.keyCode===229)return;if(Pe!==-1&&Pe!==void 0){v([...y.value].filter((Je,Qe)=>Qe!==Pe)),Pe===He.length-1&&(He.length-1?He[He.length-2].focus():o.value?_.value.querySelector("input").focus():x.value.focus());return}if(le.value.indexOf("enter")===-1&&K.value)return;J(),C();break;case" ":if(!K.value&&!o.value){be.preventDefault(),J(),C();return}if(!K.value)return!1;if(le.value.indexOf("space")===-1&&K.value)return;be.preventDefault(),J(),C();break;case"Tab":case";":case",":if(le.value.indexOf(be.key.toLowerCase())===-1||!K.value)return;J(),C(),be.preventDefault();break;case"Escape":P();break;case"ArrowUp":if(be.preventDefault(),!a.value)return;M.value||I(),O();break;case"ArrowDown":if(be.preventDefault(),!a.value)return;M.value||I(),N();break;case"ArrowLeft":if(o.value&&_.value&&_.value.querySelector("input").selectionStart||be.shiftKey||r.value!=="tags"||!y.value||!y.value.length)return;be.preventDefault(),Pe===-1?He[He.length-1].focus():Pe>0&&He[Pe-1].focus();break;case"ArrowRight":if(Pe===-1||be.shiftKey||r.value!=="tags"||!y.value||!y.value.length)return;be.preventDefault(),He.length>Pe+1?He[Pe+1].focus():o.value?_.value.querySelector("input").focus():o.value||x.value.focus();break}},handleKeyup:be=>{e.emit("keyup",be,m)},preparePointer:J}}function OB(n,e,t){const{classes:r,disabled:s,showOptions:i,breakTags:o}=Gn(n),a=t.isOpen,l=t.isPointed,c=t.isSelected,u=t.isDisabled,d=t.isActive,h=t.canPointGroups,p=t.resolving,m=t.fo,y=t.placement,v=vt(()=>({container:"multiselect",containerDisabled:"is-disabled",containerOpen:"is-open",containerOpenTop:"is-open-top",containerActive:"is-active",wrapper:"multiselect-wrapper",singleLabel:"multiselect-single-label",singleLabelText:"multiselect-single-label-text",multipleLabel:"multiselect-multiple-label",search:"multiselect-search",tags:"multiselect-tags",tag:"multiselect-tag",tagWrapper:"multiselect-tag-wrapper",tagWrapperBreak:"multiselect-tag-wrapper-break",tagDisabled:"is-disabled",tagRemove:"multiselect-tag-remove",tagRemoveIcon:"multiselect-tag-remove-icon",tagsSearchWrapper:"multiselect-tags-search-wrapper",tagsSearch:"multiselect-tags-search",tagsSearchCopy:"multiselect-tags-search-copy",placeholder:"multiselect-placeholder",caret:"multiselect-caret",caretOpen:"is-open",clear:"multiselect-clear",clearIcon:"multiselect-clear-icon",spinner:"multiselect-spinner",inifinite:"multiselect-inifite",inifiniteSpinner:"multiselect-inifite-spinner",dropdown:"multiselect-dropdown",dropdownTop:"is-top",dropdownHidden:"is-hidden",options:"multiselect-options",optionsTop:"is-top",group:"multiselect-group",groupLabel:"multiselect-group-label",groupLabelPointable:"is-pointable",groupLabelPointed:"is-pointed",groupLabelSelected:"is-selected",groupLabelDisabled:"is-disabled",groupLabelSelectedPointed:"is-selected is-pointed",groupLabelSelectedDisabled:"is-selected is-disabled",groupOptions:"multiselect-group-options",option:"multiselect-option",optionPointed:"is-pointed",optionSelected:"is-selected",optionDisabled:"is-disabled",optionSelectedPointed:"is-selected is-pointed",optionSelectedDisabled:"is-selected is-disabled",noOptions:"multiselect-no-options",noResults:"multiselect-no-results",fakeInput:"multiselect-fake-input",assist:"multiselect-assistive-text",spacer:"multiselect-spacer",...r.value})),S=vt(()=>!!(a.value&&i.value&&(!p.value||p.value&&m.value.length)));return{classList:Oe(()=>{const b=v.value;return{container:[b.container].concat(s.value?b.containerDisabled:[]).concat(S.value&&y.value==="top"?b.containerOpenTop:[]).concat(S.value&&y.value!=="top"?b.containerOpen:[]).concat(d.value?b.containerActive:[]),wrapper:b.wrapper,spacer:b.spacer,singleLabel:b.singleLabel,singleLabelText:b.singleLabelText,multipleLabel:b.multipleLabel,search:b.search,tags:b.tags,tag:[b.tag].concat(s.value?b.tagDisabled:[]),tagWrapper:[b.tagWrapper,o.value?b.tagWrapperBreak:null],tagDisabled:b.tagDisabled,tagRemove:b.tagRemove,tagRemoveIcon:b.tagRemoveIcon,tagsSearchWrapper:b.tagsSearchWrapper,tagsSearch:b.tagsSearch,tagsSearchCopy:b.tagsSearchCopy,placeholder:b.placeholder,caret:[b.caret].concat(a.value?b.caretOpen:[]),clear:b.clear,clearIcon:b.clearIcon,spinner:b.spinner,inifinite:b.inifinite,inifiniteSpinner:b.inifiniteSpinner,dropdown:[b.dropdown].concat(y.value==="top"?b.dropdownTop:[]).concat(!a.value||!i.value||!S.value?b.dropdownHidden:[]),options:[b.options].concat(y.value==="top"?b.optionsTop:[]),group:b.group,groupLabel:C=>{let O=[b.groupLabel];return l(C)?O.push(c(C)?b.groupLabelSelectedPointed:b.groupLabelPointed):c(C)&&h.value?O.push(u(C)?b.groupLabelSelectedDisabled:b.groupLabelSelected):u(C)&&O.push(b.groupLabelDisabled),h.value&&O.push(b.groupLabelPointable),O},groupOptions:b.groupOptions,option:(C,O)=>{let N=[b.option];return l(C)?N.push(c(C)?b.optionSelectedPointed:b.optionPointed):c(C)?N.push(u(C)?b.optionSelectedDisabled:b.optionSelected):(u(C)||O&&u(O))&&N.push(b.optionDisabled),N},noOptions:b.noOptions,noResults:b.noResults,assist:b.assist,fakeInput:b.fakeInput}}),showDropdown:S}}function DB(n,e,t){const{limit:r,infinite:s}=Gn(n),i=t.isOpen,o=t.offset,a=t.search,l=t.pfo,c=t.eo,u=fe(null),d=Di(null),h=vt(()=>o.value<l.value.length),p=y=>{const{isIntersecting:v,target:S}=y[0];if(v){const T=S.offsetParent,b=T.scrollTop;o.value+=r.value==-1?10:r.value,as(()=>{T.scrollTop=b})}},m=()=>{i.value&&o.value<l.value.length?u.value.observe(d.value):!i.value&&u.value&&u.value.disconnect()};return At(i,()=>{s.value&&m()}),At(a,()=>{s.value&&(o.value=r.value,m())},{flush:"post"}),At(c,()=>{s.value&&m()},{immediate:!1,flush:"post"}),kt(()=>{window&&window.IntersectionObserver&&(u.value=new IntersectionObserver(p))}),{hasMore:h,infiniteLoader:d}}function NB(n,e,t){const{placeholder:r,id:s,valueProp:i,label:o,mode:a,groupLabel:l,aria:c,searchable:u}=Gn(n),d=t.pointer,h=t.iv,p=t.hasSelected,m=t.multipleLabelText,y=fe(null),v=vt(()=>`${s.value?s.value+"-":""}assist`),S=vt(()=>`${s.value?s.value+"-":""}multiselect-options`),T=vt(()=>{if(d.value){let P=s.value?`${s.value}-`:"";return P+=`${d.value.group?"multiselect-group":"multiselect-option"}-`,P+=d.value.group?d.value.index:d.value[i.value],P}}),b=vt(()=>r.value),C=vt(()=>a.value!=="single"),O=Oe(()=>a.value==="single"&&p.value?h.value[o.value]:a.value==="multiple"&&p.value?m.value:a.value==="tags"&&p.value?h.value.map(P=>P[o.value]).join(", "):""),N=Oe(()=>{let P={...c.value};return u.value&&(P["aria-labelledby"]=P["aria-labelledby"]?`${v.value} ${P["aria-labelledby"]}`:v.value,O.value&&P["aria-label"]&&(P["aria-label"]=`${O.value}, ${P["aria-label"]}`)),P}),A=P=>`${s.value?s.value+"-":""}multiselect-option-${P[i.value]}`,x=P=>`${s.value?s.value+"-":""}multiselect-group-${P.index}`,_=P=>`${P}`,M=P=>`${P}`,I=P=>`${P} `;return kt(()=>{if(s.value&&document&&document.querySelector){let P=document.querySelector(`[for="${s.value}"]`);y.value=P?P.innerText:null}}),{arias:N,ariaLabel:O,ariaAssist:v,ariaControls:S,ariaPlaceholder:b,ariaMultiselectable:C,ariaActiveDescendant:T,ariaOptionId:A,ariaOptionLabel:_,ariaGroupId:x,ariaGroupLabel:M,ariaTagLabel:I}}function LB(n,e,t){const{locale:r,fallbackLocale:s}=Gn(n);return{localize:o=>!o||typeof o!="object"?o:o&&o[r.value]?o[r.value]:o&&r.value&&o[r.value.toUpperCase()]?o[r.value.toUpperCase()]:o&&o[s.value]?o[s.value]:o&&s.value&&o[s.value.toUpperCase()]?o[s.value.toUpperCase()]:o&&Object.keys(o)[0]?o[Object.keys(o)[0]]:""}}function VB(n,e,t){const r=Di(null),s=Di(null),i=Di(null),o=Di(null),a=Di(null);return{multiselect:r,wrapper:s,tags:i,input:o,dropdown:a}}function $B(n,e,t,r={}){return t.forEach(s=>{r={...r,...s(n,e,r)}}),r}var Rg={name:"Multiselect",emits:["paste","open","close","select","deselect","input","search-change","tag","option","update:modelValue","change","clear","keydown","keyup","max","create"],props:{value:{required:!1},modelValue:{required:!1},options:{type:[Array,Object,Function],required:!1,default:()=>[]},id:{type:[String,Number],required:!1,default:void 0},name:{type:[String,Number],required:!1,default:"multiselect"},disabled:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:"label"},trackBy:{type:[String,Array],required:!1,default:void 0},valueProp:{type:String,required:!1,default:"value"},placeholder:{type:String,required:!1,default:null},mode:{type:String,required:!1,default:"single"},searchable:{type:Boolean,required:!1,default:!1},limit:{type:Number,required:!1,default:-1},hideSelected:{type:Boolean,required:!1,default:!0},createTag:{type:Boolean,required:!1,default:void 0},createOption:{type:Boolean,required:!1,default:void 0},appendNewTag:{type:Boolean,required:!1,default:void 0},appendNewOption:{type:Boolean,required:!1,default:void 0},addTagOn:{type:Array,required:!1,default:void 0},addOptionOn:{type:Array,required:!1,default:void 0},caret:{type:Boolean,required:!1,default:!0},loading:{type:Boolean,required:!1,default:!1},noOptionsText:{type:[String,Object],required:!1,default:"The list is empty"},noResultsText:{type:[String,Object],required:!1,default:"No results found"},multipleLabel:{type:Function,required:!1,default:void 0},object:{type:Boolean,required:!1,default:!1},delay:{type:Number,required:!1,default:-1},minChars:{type:Number,required:!1,default:0},resolveOnLoad:{type:Boolean,required:!1,default:!0},filterResults:{type:Boolean,required:!1,default:!0},clearOnSearch:{type:Boolean,required:!1,default:!1},clearOnSelect:{type:Boolean,required:!1,default:!0},canDeselect:{type:Boolean,required:!1,default:!0},canClear:{type:Boolean,required:!1,default:!0},max:{type:Number,required:!1,default:-1},showOptions:{type:Boolean,required:!1,default:!0},required:{type:Boolean,required:!1,default:!1},openDirection:{type:String,required:!1,default:"bottom"},nativeSupport:{type:Boolean,required:!1,default:!1},classes:{type:Object,required:!1,default:()=>({})},strict:{type:Boolean,required:!1,default:!0},closeOnSelect:{type:Boolean,required:!1,default:!0},closeOnDeselect:{type:Boolean,required:!1,default:!1},autocomplete:{type:String,required:!1,default:void 0},groups:{type:Boolean,required:!1,default:!1},groupLabel:{type:String,required:!1,default:"label"},groupOptions:{type:String,required:!1,default:"options"},groupHideEmpty:{type:Boolean,required:!1,default:!1},groupSelect:{type:Boolean,required:!1,default:!0},inputType:{type:String,required:!1,default:"text"},attrs:{required:!1,type:Object,default:()=>({})},onCreate:{required:!1,type:Function,default:void 0},disabledProp:{type:String,required:!1,default:"disabled"},searchStart:{type:Boolean,required:!1,default:!1},reverse:{type:Boolean,required:!1,default:!1},regex:{type:[Object,String,RegExp],required:!1,default:void 0},rtl:{type:Boolean,required:!1,default:!1},infinite:{type:Boolean,required:!1,default:!1},aria:{required:!1,type:Object,default:()=>({})},clearOnBlur:{required:!1,type:Boolean,default:!0},locale:{required:!1,type:String,default:null},fallbackLocale:{required:!1,type:String,default:"en"},searchFilter:{required:!1,type:Function,default:null},allowAbsent:{required:!1,type:Boolean,default:!1},appendToBody:{required:!1,type:Boolean,default:!1},closeOnScroll:{required:!1,type:Boolean,default:!1},breakTags:{required:!1,type:Boolean,default:!1},appendTo:{required:!1,type:String,default:void 0}},setup(n,e){return $B(n,e,[VB,LB,E$,_$,MB,S$,T$,PB,A$,DB,k$,RB,OB,NB])},beforeMount(){(this.$root.constructor&&this.$root.constructor.version&&this.$root.constructor.version.match(/^2\./)||this.vueVersionMs===2)&&(this.$options.components.Teleport||(this.$options.components.Teleport={render(){return this.$slots.default?this.$slots.default[0]:null}}))}};const BB=["id","dir"],FB=["tabindex","aria-controls","aria-placeholder","aria-expanded","aria-activedescendant","aria-multiselectable","role"],zB=["type","modelValue","value","autocomplete","id","aria-controls","aria-placeholder","aria-expanded","aria-activedescendant","aria-multiselectable"],jB=["onKeyup","aria-label"],HB=["onClick"],UB=["type","modelValue","value","id","autocomplete","aria-controls","aria-placeholder","aria-expanded","aria-activedescendant","aria-multiselectable"],qB=["innerHTML"],WB=["id"],GB=["id"],KB=["id","aria-label","aria-selected"],JB=["data-pointed","onMouseenter","onClick"],QB=["innerHTML"],YB=["aria-label"],XB=["data-pointed","data-selected","onMouseenter","onClick","id","aria-selected","aria-label"],ZB=["data-pointed","data-selected","onMouseenter","onClick","id","aria-selected","aria-label"],eF=["innerHTML"],tF=["innerHTML"],nF=["value"],rF=["name","value"],sF=["name","value"],iF=["id"];function oF(n,e,t,r,s,i){return z(),j("div",{ref:"multiselect",class:ye(n.classList.container),id:t.searchable?void 0:t.id,dir:t.rtl?"rtl":void 0,onFocusin:e[12]||(e[12]=(...o)=>n.handleFocusIn&&n.handleFocusIn(...o)),onFocusout:e[13]||(e[13]=(...o)=>n.handleFocusOut&&n.handleFocusOut(...o)),onKeyup:e[14]||(e[14]=(...o)=>n.handleKeyup&&n.handleKeyup(...o)),onKeydown:e[15]||(e[15]=(...o)=>n.handleKeydown&&n.handleKeydown(...o))},[w("div",Xu({class:n.classList.wrapper,onMousedown:e[9]||(e[9]=(...o)=>n.handleMousedown&&n.handleMousedown(...o)),ref:"wrapper",tabindex:n.tabindex,"aria-controls":t.searchable?void 0:n.ariaControls,"aria-placeholder":t.searchable?void 0:n.ariaPlaceholder,"aria-expanded":t.searchable?void 0:n.isOpen,"aria-activedescendant":t.searchable?void 0:n.ariaActiveDescendant,"aria-multiselectable":t.searchable?void 0:n.ariaMultiselectable,role:t.searchable?void 0:"combobox"},t.searchable?{}:n.arias),[he(" Search "),t.mode!=="tags"&&t.searchable&&!t.disabled?(z(),j("input",Xu({key:0,type:t.inputType,modelValue:n.search,value:n.search,class:n.classList.search,autocomplete:t.autocomplete,id:t.searchable?t.id:void 0,onInput:e[0]||(e[0]=(...o)=>n.handleSearchInput&&n.handleSearchInput(...o)),onKeypress:e[1]||(e[1]=(...o)=>n.handleKeypress&&n.handleKeypress(...o)),onPaste:e[2]||(e[2]=Hs((...o)=>n.handlePaste&&n.handlePaste(...o),["stop"])),ref:"input","aria-controls":n.ariaControls,"aria-placeholder":n.ariaPlaceholder,"aria-expanded":n.isOpen,"aria-activedescendant":n.ariaActiveDescendant,"aria-multiselectable":n.ariaMultiselectable,role:"combobox"},{...t.attrs,...n.arias}),null,16,zB)):he("v-if",!0),he(" Tags (with search) "),t.mode=="tags"?(z(),j("div",{key:1,class:ye(n.classList.tags),"data-tags":""},[(z(!0),j(Be,null,ot(n.iv,(o,a,l)=>dn(n.$slots,"tag",{option:o,handleTagRemove:n.handleTagRemove,disabled:t.disabled},()=>[(z(),j("span",{class:ye([n.classList.tag,o.disabled?n.classList.tagDisabled:null]),tabindex:"-1",onKeyup:xv(c=>n.handleTagRemove(o,c),["enter"]),key:l,"aria-label":n.ariaTagLabel(n.localize(o[t.label]))},[w("span",{class:ye(n.classList.tagWrapper)},Ce(n.localize(o[t.label])),3),!t.disabled&&!o.disabled?(z(),j("span",{key:0,class:ye(n.classList.tagRemove),onClick:Hs(c=>n.handleTagRemove(o,c),["stop"])},[w("span",{class:ye(n.classList.tagRemoveIcon)},null,2)],10,HB)):he("v-if",!0)],42,jB))])),256)),w("div",{class:ye(n.classList.tagsSearchWrapper),ref:"tags"},[he(" Used for measuring search width "),w("span",{class:ye(n.classList.tagsSearchCopy)},Ce(n.search),3),he(" Actual search input "),t.searchable&&!t.disabled?(z(),j("input",Xu({key:0,type:t.inputType,modelValue:n.search,value:n.search,class:n.classList.tagsSearch,id:t.searchable?t.id:void 0,autocomplete:t.autocomplete,onInput:e[3]||(e[3]=(...o)=>n.handleSearchInput&&n.handleSearchInput(...o)),onKeypress:e[4]||(e[4]=(...o)=>n.handleKeypress&&n.handleKeypress(...o)),onPaste:e[5]||(e[5]=Hs((...o)=>n.handlePaste&&n.handlePaste(...o),["stop"])),ref:"input","aria-controls":n.ariaControls,"aria-placeholder":n.ariaPlaceholder,"aria-expanded":n.isOpen,"aria-activedescendant":n.ariaActiveDescendant,"aria-multiselectable":n.ariaMultiselectable,role:"combobox"},{...t.attrs,...n.arias}),null,16,UB)):he("v-if",!0)],2)],2)):he("v-if",!0),he(" Single label "),t.mode=="single"&&n.hasSelected&&!n.search&&n.iv?dn(n.$slots,"singlelabel",{key:2,value:n.iv},()=>[w("div",{class:ye(n.classList.singleLabel)},[w("span",{class:ye(n.classList.singleLabelText)},Ce(n.localize(n.iv[t.label])),3)],2)]):he("v-if",!0),he(" Multiple label "),t.mode=="multiple"&&n.hasSelected&&!n.search?dn(n.$slots,"multiplelabel",{key:3,values:n.iv},()=>[w("div",{class:ye(n.classList.multipleLabel),innerHTML:n.multipleLabelText},null,10,qB)]):he("v-if",!0),he(" Placeholder "),t.placeholder&&!n.hasSelected&&!n.search?dn(n.$slots,"placeholder",{key:4},()=>[w("div",{class:ye(n.classList.placeholder),"aria-hidden":"true"},Ce(t.placeholder),3)]):he("v-if",!0),he(" Spinner "),t.loading||n.resolving?dn(n.$slots,"spinner",{key:5},()=>[w("span",{class:ye(n.classList.spinner),"aria-hidden":"true"},null,2)]):he("v-if",!0),he(" Clear "),n.hasSelected&&!t.disabled&&t.canClear&&!n.busy?dn(n.$slots,"clear",{key:6,clear:n.clear},()=>[w("span",{"aria-hidden":"true",tabindex:"0",role:"button","data-clear":"","aria-roledescription":"",class:ye(n.classList.clear),onClick:e[6]||(e[6]=(...o)=>n.clear&&n.clear(...o)),onKeyup:e[7]||(e[7]=xv((...o)=>n.clear&&n.clear(...o),["enter"]))},[w("span",{class:ye(n.classList.clearIcon)},null,2)],34)]):he("v-if",!0),he(" Caret "),t.caret&&t.showOptions?dn(n.$slots,"caret",{key:7,handleCaretClick:n.handleCaretClick,isOpen:n.isOpen},()=>[w("span",{class:ye(n.classList.caret),onClick:e[8]||(e[8]=(...o)=>n.handleCaretClick&&n.handleCaretClick(...o)),"aria-hidden":"true"},null,2)]):he("v-if",!0)],16,FB),he(" Options "),(z(),mt(T1,{to:t.appendTo||"body",disabled:!t.appendToBody&&!t.appendTo},[w("div",{id:t.id?`${t.id}-dropdown`:void 0,class:ye(n.classList.dropdown),tabindex:"-1",ref:"dropdown",onFocusin:e[10]||(e[10]=(...o)=>n.handleFocusIn&&n.handleFocusIn(...o)),onFocusout:e[11]||(e[11]=(...o)=>n.handleFocusOut&&n.handleFocusOut(...o))},[dn(n.$slots,"beforelist",{options:n.fo}),w("ul",{class:ye(n.classList.options),id:n.ariaControls,role:"listbox"},[t.groups?(z(!0),j(Be,{key:0},ot(n.fg,(o,a,l)=>(z(),j("li",{class:ye(n.classList.group),key:l,id:n.ariaGroupId(o),"aria-label":n.ariaGroupLabel(n.localize(o[t.groupLabel])),"aria-selected":n.isSelected(o),role:"option"},[o.__CREATE__?he("v-if",!0):(z(),j("div",{key:0,class:ye(n.classList.groupLabel(o)),"data-pointed":n.isPointed(o),onMouseenter:c=>n.setPointer(o,a),onClick:c=>n.handleGroupClick(o)},[dn(n.$slots,"grouplabel",{group:o,isSelected:n.isSelected,isPointed:n.isPointed},()=>[w("span",{innerHTML:n.localize(o[t.groupLabel])},null,8,QB)])],42,JB)),w("ul",{class:ye(n.classList.groupOptions),"aria-label":n.ariaGroupLabel(n.localize(o[t.groupLabel])),role:"group"},[(z(!0),j(Be,null,ot(o.__VISIBLE__,(c,u,d)=>(z(),j("li",{class:ye(n.classList.option(c,o)),"data-pointed":n.isPointed(c),"data-selected":n.isSelected(c)||void 0,key:d,onMouseenter:h=>n.setPointer(c),onClick:h=>n.handleOptionClick(c),id:n.ariaOptionId(c),"aria-selected":n.isSelected(c),"aria-label":n.ariaOptionLabel(n.localize(c[t.label])),role:"option"},[dn(n.$slots,"option",{option:c,isSelected:n.isSelected,isPointed:n.isPointed,search:n.search},()=>[w("span",null,Ce(n.localize(c[t.label])),1)])],42,XB))),128))],10,YB)],10,KB))),128)):(z(!0),j(Be,{key:1},ot(n.fo,(o,a,l)=>(z(),j("li",{class:ye(n.classList.option(o)),"data-pointed":n.isPointed(o),"data-selected":n.isSelected(o)||void 0,key:l,onMouseenter:c=>n.setPointer(o),onClick:c=>n.handleOptionClick(o),id:n.ariaOptionId(o),"aria-selected":n.isSelected(o),"aria-label":n.ariaOptionLabel(n.localize(o[t.label])),role:"option"},[dn(n.$slots,"option",{option:o,isSelected:n.isSelected,isPointed:n.isPointed,search:n.search},()=>[w("span",null,Ce(n.localize(o[t.label])),1)])],42,ZB))),128))],10,GB),n.noOptions?dn(n.$slots,"nooptions",{key:0},()=>[w("div",{class:ye(n.classList.noOptions),innerHTML:n.localize(t.noOptionsText)},null,10,eF)]):he("v-if",!0),n.noResults?dn(n.$slots,"noresults",{key:1},()=>[w("div",{class:ye(n.classList.noResults),innerHTML:n.localize(t.noResultsText)},null,10,tF)]):he("v-if",!0),t.infinite&&n.hasMore?(z(),j("div",{key:2,class:ye(n.classList.inifinite),ref:"infiniteLoader"},[dn(n.$slots,"infinite",{},()=>[w("span",{class:ye(n.classList.inifiniteSpinner)},null,2)])],2)):he("v-if",!0),dn(n.$slots,"afterlist",{options:n.fo})],42,WB)],8,["to","disabled"])),he(" Hacky input element to show HTML5 required warning "),t.required?(z(),j("input",{key:0,class:ye(n.classList.fakeInput),tabindex:"-1",value:n.textValue,required:""},null,10,nF)):he("v-if",!0),he(" Native input support "),t.nativeSupport?(z(),j(Be,{key:1},[t.mode=="single"?(z(),j("input",{key:0,type:"hidden",name:t.name,value:n.plainValue!==void 0?n.plainValue:""},null,8,rF)):(z(!0),j(Be,{key:1},ot(n.plainValue,(o,a)=>(z(),j("input",{type:"hidden",name:`${t.name}[]`,value:o,key:a},null,8,sF))),128))],64)):he("v-if",!0),he(" Screen reader assistive text "),t.searchable&&n.hasSelected?(z(),j("div",{key:2,class:ye(n.classList.assist),id:n.ariaAssist,"aria-hidden":"true"},Ce(n.ariaLabel),11,iF)):he("v-if",!0),he(" Create height for empty input "),w("div",{class:ye(n.classList.spacer)},null,2)],42,BB)}Rg.render=oF;Rg.__file="src/Multiselect.vue";function Yt(n){this.content=n}Yt.prototype={constructor:Yt,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,s=r.find(n),i=r.content.slice();return s==-1?i.push(t||n,e):(i[s+1]=e,t&&(i[s]=t)),new Yt(i)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new Yt(t)},addToStart:function(n,e){return new Yt([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new Yt(t)},addBefore:function(n,e,t){var r=this.remove(e),s=r.content.slice(),i=r.find(n);return s.splice(i==-1?s.length:i,0,e,t),new Yt(s)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=Yt.from(n),n.size?new Yt(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=Yt.from(n),n.size?new Yt(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=Yt.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};Yt.from=function(n){if(n instanceof Yt)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new Yt(e)};function r_(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let s=n.child(r),i=e.child(r);if(s==i){t+=s.nodeSize;continue}if(!s.sameMarkup(i))return t;if(s.isText&&s.text!=i.text){for(let o=0;s.text[o]==i.text[o];o++)t++;return t}if(s.content.size||i.content.size){let o=r_(s.content,i.content,t+1);if(o!=null)return o}t+=s.nodeSize}}function s_(n,e,t,r){for(let s=n.childCount,i=e.childCount;;){if(s==0||i==0)return s==i?null:{a:t,b:r};let o=n.child(--s),a=e.child(--i),l=o.nodeSize;if(o==a){t-=l,r-=l;continue}if(!o.sameMarkup(a))return{a:t,b:r};if(o.isText&&o.text!=a.text){let c=0,u=Math.min(o.text.length,a.text.length);for(;c<u&&o.text[o.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(o.content.size||a.content.size){let c=s_(o.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}class Z{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,s=0,i){for(let o=0,a=0;a<t;o++){let l=this.content[o],c=a+l.nodeSize;if(c>e&&r(l,s+a,i||null,o)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,s+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,s){let i="",o=!0;return this.nodesBetween(e,t,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,t-l):a.isLeaf?s?typeof s=="function"?s(a):s:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(o?o=!1:i+=r),i+=c},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,s=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(r)&&(s[s.length-1]=t.withText(t.text+r.text),i=1);i<e.content.length;i++)s.push(e.content[i]);return new Z(s,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],s=0;if(t>e)for(let i=0,o=0;o<t;i++){let a=this.content[i],l=o+a.nodeSize;l>e&&((o<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-o),Math.min(a.text.length,t-o)):a=a.cut(Math.max(0,e-o-1),Math.min(a.content.size,t-o-1))),r.push(a),s+=a.nodeSize),o=l}return new Z(r,s)}cutByIndex(e,t){return e==t?Z.empty:e==0&&t==this.content.length?this:new Z(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let s=this.content.slice(),i=this.size+t.nodeSize-r.nodeSize;return s[e]=t,new Z(s,i)}addToStart(e){return new Z([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Z(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let s=this.content[t];e(s,r,t),r+=s.nodeSize}}findDiffStart(e,t=0){return r_(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return s_(this,e,t,r)}findIndex(e,t=-1){if(e==0)return $u(0,e);if(e==this.size)return $u(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,s=0;;r++){let i=this.child(r),o=s+i.nodeSize;if(o>=e)return o==e||t>0?$u(r+1,o):$u(r,s);s=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return Z.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new Z(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Z.empty;let t,r=0;for(let s=0;s<e.length;s++){let i=e[s];r+=i.nodeSize,s&&i.isText&&e[s-1].sameMarkup(i)?(t||(t=e.slice(0,s)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new Z(t||e,r)}static from(e){if(!e)return Z.empty;if(e instanceof Z)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Z([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Z.empty=new Z([],0);const Sh={index:0,offset:0};function $u(n,e){return Sh.index=n,Sh.offset=e,Sh}function qc(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!qc(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!qc(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let ut=class $p{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let s=0;s<e.length;s++){let i=e[s];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,s));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,s)),t.push(this),r=!0),t&&t.push(i)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&qc(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let s=r.create(t.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return $p.none;if(e instanceof $p)return[e];let t=e.slice();return t.sort((r,s)=>r.type.rank-s.type.rank),t}};ut.none=[];class Wc extends Error{}class pe{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=o_(this.content,e+this.openStart,t);return r&&new pe(r,this.openStart,this.openEnd)}removeBetween(e,t){return new pe(i_(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return pe.empty;let r=t.openStart||0,s=t.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new pe(Z.fromJSON(e,t.content),r,s)}static maxOpen(e,t=!0){let r=0,s=0;for(let i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)s++;return new pe(e,r,s)}}pe.empty=new pe(Z.empty,0,0);function i_(n,e,t){let{index:r,offset:s}=n.findIndex(e),i=n.maybeChild(r),{index:o,offset:a}=n.findIndex(t);if(s==e||i.isText){if(a!=t&&!n.child(o).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=o)throw new RangeError("Removing non-flat range");return n.replaceChild(r,i.copy(i_(i.content,e-s-1,t-s-1)))}function o_(n,e,t,r){let{index:s,offset:i}=n.findIndex(e),o=n.maybeChild(s);if(i==e||o.isText)return n.cut(0,e).append(t).append(n.cut(e));let a=o_(o.content,e-i-1,t);return a&&n.replaceChild(s,o.copy(a))}function aF(n,e,t){if(t.openStart>n.depth)throw new Wc("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new Wc("Inconsistent open depths");return a_(n,e,t,0)}function a_(n,e,t,r){let s=n.index(r),i=n.node(r);if(s==e.index(r)&&r<n.depth-t.openStart){let o=a_(n,e,t,r+1);return i.copy(i.content.replaceChild(s,o))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let o=n.parent,a=o.content;return Wi(o,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:o,end:a}=lF(t,n);return Wi(i,u_(n,o,a,e,r))}else return Wi(i,Gc(n,e,r))}function l_(n,e){if(!e.type.compatibleContent(n.type))throw new Wc("Cannot join "+e.type.name+" onto "+n.type.name)}function Bp(n,e,t){let r=n.node(t);return l_(r,e.node(t)),r}function qi(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function vl(n,e,t,r){let s=(e||n).node(t),i=0,o=e?e.index(t):s.childCount;n&&(i=n.index(t),n.depth>t?i++:n.textOffset&&(qi(n.nodeAfter,r),i++));for(let a=i;a<o;a++)qi(s.child(a),r);e&&e.depth==t&&e.textOffset&&qi(e.nodeBefore,r)}function Wi(n,e){return n.type.checkContent(e),n.copy(e)}function u_(n,e,t,r,s){let i=n.depth>s&&Bp(n,e,s+1),o=r.depth>s&&Bp(t,r,s+1),a=[];return vl(null,n,s,a),i&&o&&e.index(s)==t.index(s)?(l_(i,o),qi(Wi(i,u_(n,e,t,r,s+1)),a)):(i&&qi(Wi(i,Gc(n,e,s+1)),a),vl(e,t,s,a),o&&qi(Wi(o,Gc(t,r,s+1)),a)),vl(r,null,s,a),new Z(a)}function Gc(n,e,t){let r=[];if(vl(null,n,t,r),n.depth>t){let s=Bp(n,e,t+1);qi(Wi(s,Gc(n,e,t+1)),r)}return vl(e,null,t,r),new Z(r)}function lF(n,e){let t=e.depth-n.openStart,s=e.node(t).copy(n.content);for(let i=t-1;i>=0;i--)s=e.node(i).copy(Z.from(s));return{start:s.resolveNoCache(n.openStart+t),end:s.resolveNoCache(s.content.size-n.openEnd-t)}}class Ul{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(t);return r?e.child(t).cut(r):s}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],s=t==0?0:this.path[t*3-1]+1;for(let i=0;i<e;i++)s+=r.child(i).nodeSize;return s}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return ut.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),s=e.maybeChild(t);if(!r){let a=r;r=s,s=a}let i=r.marks;for(var o=0;o<i.length;o++)i[o].type.spec.inclusive===!1&&(!s||!i[o].isInSet(s.marks))&&(i=i[o--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,s=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!s||!r[i].isInSet(s.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new Kc(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],s=0,i=t;for(let o=e;;){let{index:a,offset:l}=o.content.findIndex(i),c=i-l;if(r.push(o,a,s+l),!c||(o=o.child(a),o.isText))break;i=c-1,s+=l+1}return new Ul(t,r,i)}static resolveCached(e,t){let r=bb.get(e);if(r)for(let i=0;i<r.elts.length;i++){let o=r.elts[i];if(o.pos==t)return o}else bb.set(e,r=new uF);let s=r.elts[r.i]=Ul.resolve(e,t);return r.i=(r.i+1)%cF,s}}class uF{constructor(){this.elts=[],this.i=0}}const cF=12,bb=new WeakMap;class Kc{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const dF=Object.create(null);let Js=class Fp{constructor(e,t,r,s=ut.none){this.type=e,this.attrs=t,this.marks=s,this.content=r||Z.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,s=0){this.content.nodesBetween(e,t,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,s){return this.content.textBetween(e,t,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&qc(this.attrs,t||e.defaultAttrs||dF)&&ut.sameSet(this.marks,r||ut.none)}copy(e=null){return e==this.content?this:new Fp(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Fp(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return pe.empty;let s=this.resolve(e),i=this.resolve(t),o=r?0:s.sharedDepth(t),a=s.start(o),c=s.node(o).content.cut(s.pos-a,i.pos-a);return new pe(c,s.depth-o,i.depth-o)}replace(e,t,r){return aF(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:s}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(s==e||t.isText)return t;e-=s+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let s=this.content.child(t-1);return{node:s,index:t-1,offset:r-s.nodeSize}}resolve(e){return Ul.resolveCached(this,e)}resolveNoCache(e){return Ul.resolve(this,e)}rangeHasMark(e,t,r){let s=!1;return t>e&&this.nodesBetween(e,t,i=>(r.isInSet(i.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),c_(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=Z.empty,s=0,i=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,s,i),a=o&&o.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=s;l<i;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,t,r,s){if(s&&!this.type.allowsMarks(s))return!1;let i=this.contentMatchAt(e).matchType(r),o=i&&i.matchFragment(this.content,t);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=ut.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!ut.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let s=Z.fromJSON(e,t.content),i=e.nodeType(t.type).create(t.attrs,s,r);return i.type.checkAttrs(i.attrs),i}};Js.prototype.text=void 0;class Jc extends Js{constructor(e,t,r,s){if(super(e,t,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):c_(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Jc(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Jc(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function c_(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class ro{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new fF(e,t);if(r.next==null)return ro.empty;let s=d_(r);r.next&&r.err("Unexpected trailing text");let i=bF(vF(s));return wF(i,r),i}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let s=this;for(let i=t;s&&i<r;i++)s=s.matchType(e.child(i).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let s=[this];function i(o,a){let l=o.matchFragment(e,r);if(l&&(!t||l.validEnd))return Z.from(a.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&s.indexOf(d)==-1){s.push(d);let h=i(d,a.concat(u));if(h)return h}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),i=s.match;if(i.matchType(e)){let o=[];for(let a=s;a.type;a=a.via)o.push(a.type);return o.reverse()}for(let o=0;o<i.next.length;o++){let{type:a,next:l}=i.next[o];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!s.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:s}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&t(r.next[s].next)}return t(this),e.map((r,s)=>{let i=s+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)i+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return i}).join(`
`)}}ro.empty=new ro(!0);class fF{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function d_(n){let e=[];do e.push(hF(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function hF(n){let e=[];do e.push(pF(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function pF(n){let e=yF(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=mF(n,e);else break;return e}function wb(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function mF(n,e){let t=wb(n),r=t;return n.eat(",")&&(n.next!="}"?r=wb(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function gF(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let s=[];for(let i in t){let o=t[i];o.isInGroup(e)&&s.push(o)}return s.length==0&&n.err("No node type or group '"+e+"' found"),s}function yF(n){if(n.eat("(")){let e=d_(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=gF(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function vF(n){let e=[[]];return s(i(n,0),t()),e;function t(){return e.push([])-1}function r(o,a,l){let c={term:l,to:a};return e[o].push(c),c}function s(o,a){o.forEach(l=>l.to=a)}function i(o,a){if(o.type=="choice")return o.exprs.reduce((l,c)=>l.concat(i(c,a)),[]);if(o.type=="seq")for(let l=0;;l++){let c=i(o.exprs[l],a);if(l==o.exprs.length-1)return c;s(c,a=t())}else if(o.type=="star"){let l=t();return r(a,l),s(i(o.expr,l),l),[r(l)]}else if(o.type=="plus"){let l=t();return s(i(o.expr,a),l),s(i(o.expr,l),l),[r(l)]}else{if(o.type=="opt")return[r(a)].concat(i(o.expr,a));if(o.type=="range"){let l=a;for(let c=0;c<o.min;c++){let u=t();s(i(o.expr,l),u),l=u}if(o.max==-1)s(i(o.expr,l),l);else for(let c=o.min;c<o.max;c++){let u=t();r(l,u),s(i(o.expr,l),u),l=u}return[r(l)]}else{if(o.type=="name")return[r(a,void 0,o.value)];throw new Error("Unknown expr type")}}}}function f_(n,e){return e-n}function Tb(n,e){let t=[];return r(e),t.sort(f_);function r(s){let i=n[s];if(i.length==1&&!i[0].term)return r(i[0].to);t.push(s);for(let o=0;o<i.length;o++){let{term:a,to:l}=i[o];!a&&t.indexOf(l)==-1&&r(l)}}}function bF(n){let e=Object.create(null);return t(Tb(n,0));function t(r){let s=[];r.forEach(o=>{n[o].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<s.length;u++)s[u][0]==a&&(c=s[u][1]);Tb(n,l).forEach(u=>{c||s.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let i=e[r.join(",")]=new ro(r.indexOf(n.length-1)>-1);for(let o=0;o<s.length;o++){let a=s[o][1].sort(f_);i.next.push({type:s[o][0],next:e[a.join(",")]||t(a)})}return i}}function wF(n,e){for(let t=0,r=[n];t<r.length;t++){let s=r[t],i=!s.validEnd,o=[];for(let a=0;a<s.next.length;a++){let{type:l,next:c}=s.next[a];o.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),r.indexOf(c)==-1&&r.push(c)}i&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function h_(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function p_(n,e){let t=Object.create(null);for(let r in n){let s=e&&e[r];if(s===void 0){let i=n[r];if(i.hasDefault)s=i.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=s}return t}function m_(n,e,t,r){for(let s in e)if(!(s in n))throw new RangeError(`Unsupported attribute ${s} for ${t} of type ${s}`);for(let s in n){let i=n[s];i.validate&&i.validate(e[s])}}function g_(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new EF(n,r,e[r]);return t}let Eb=class y_{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=g_(e,r.attrs),this.defaultAttrs=h_(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ro.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:p_(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Js(this,this.computeAttrs(e),Z.from(t),ut.setFrom(r))}createChecked(e=null,t,r){return t=Z.from(t),this.checkContent(t),new Js(this,this.computeAttrs(e),t,ut.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=Z.from(t),t.size){let o=this.contentMatch.fillBefore(t);if(!o)return null;t=o.append(t)}let s=this.contentMatch.matchFragment(t),i=s&&s.fillBefore(Z.empty,!0);return i?new Js(this,e,t.append(i),ut.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){m_(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:ut.none:e}static compile(e,t){let r=Object.create(null);e.forEach((i,o)=>r[i]=new y_(i,t,o));let s=t.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function TF(n,e,t){let r=t.split("|");return s=>{let i=s===null?"null":typeof s;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${i}`)}}class EF{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?TF(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class bf{constructor(e,t,r,s){this.name=e,this.rank=t,this.schema=r,this.spec=s,this.attrs=g_(e,s.attrs),this.excluded=null;let i=h_(this.attrs);this.instance=i?new ut(this,i):null}create(e=null){return!e&&this.instance?this.instance:new ut(this,p_(this.attrs,e))}static compile(e,t){let r=Object.create(null),s=0;return e.forEach((i,o)=>r[i]=new bf(i,s++,t,o)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){m_(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class v_{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let s in e)t[s]=e[s];t.nodes=Yt.from(e.nodes),t.marks=Yt.from(e.marks||{}),this.nodes=Eb.compile(this.spec.nodes,this),this.marks=bf.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let i=this.nodes[s],o=i.spec.content||"",a=i.spec.marks;if(i.contentMatch=r[o]||(r[o]=ro.parse(o,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=a=="_"?null:a?Sb(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let s in this.marks){let i=this.marks[s],o=i.spec.excludes;i.excluded=o==null?[i]:o==""?[]:Sb(this,o.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Eb){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,s)}text(e,t){let r=this.nodes.text;return new Jc(r,r.defaultAttrs,e,ut.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return Js.fromJSON(this,e)}markFromJSON(e){return ut.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Sb(n,e){let t=[];for(let r=0;r<e.length;r++){let s=e[r],i=n.marks[s],o=i;if(i)t.push(i);else for(let a in n.marks){let l=n.marks[a];(s=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(s)>-1)&&t.push(o=l)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function SF(n){return n.tag!=null}function _F(n){return n.style!=null}class Qs{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(s=>{if(SF(s))this.tags.push(s);else if(_F(s)){let i=/[^=]*/.exec(s.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let i=e.nodes[s.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new xb(this,t,!1);return r.addAll(e,ut.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new xb(this,t,!0);return r.addAll(e,ut.none,t.from,t.to),pe.maxOpen(r.finish())}matchTag(e,t,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let i=this.tags[s];if(AF(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||t.matchesContext(i.context))){if(i.getAttrs){let o=i.getAttrs(e);if(o===!1)continue;i.attrs=o||void 0}return i}}}matchStyle(e,t,r,s){for(let i=s?this.styles.indexOf(s)+1:0;i<this.styles.length;i++){let o=this.styles[i],a=o.style;if(!(a.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(o.getAttrs){let l=o.getAttrs(t);if(l===!1)continue;o.attrs=l||void 0}return o}}}static schemaRules(e){let t=[];function r(s){let i=s.priority==null?50:s.priority,o=0;for(;o<t.length;o++){let a=t[o];if((a.priority==null?50:a.priority)<i)break}t.splice(o,0,s)}for(let s in e.marks){let i=e.marks[s].spec.parseDOM;i&&i.forEach(o=>{r(o=Cb(o)),o.mark||o.ignore||o.clearMark||(o.mark=s)})}for(let s in e.nodes){let i=e.nodes[s].spec.parseDOM;i&&i.forEach(o=>{r(o=Cb(o)),o.node||o.ignore||o.mark||(o.node=s)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Qs(e,Qs.schemaRules(e)))}}const b_={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},xF={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},w_={ol:!0,ul:!0},ql=1,zp=2,uc=4;function _b(n,e,t){return e!=null?(e?ql:0)|(e==="full"?zp:0):n&&n.whitespace=="pre"?ql|zp:t&-5}class Bu{constructor(e,t,r,s,i,o){this.type=e,this.attrs=t,this.marks=r,this.solid=s,this.options=o,this.content=[],this.activeMarks=ut.none,this.match=i||(o&uc?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(Z.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ql)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-s[0].length))}}let t=Z.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(Z.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!b_.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class xb{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=t.topNode,i,o=_b(null,t.preserveWhitespace,0)|(r?uc:0);s?i=new Bu(s.type,s.attrs,ut.none,!0,t.topMatch||s.type.contentMatch,o):r?i=new Bu(null,null,ut.none,!0,null,o):i=new Bu(e.schema.topNodeType,null,ut.none,!0,null,o),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,s=this.top,i=s.options&zp?"full":this.localPreserveWS||(s.options&ql)>0;if(i==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)i!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=s.content[s.content.length-1],a=e.previousSibling;(!o||a&&a.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let s=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),a;w_.hasOwnProperty(o)&&this.parser.normalizeLists&&CF(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:xF.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,t);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(b_.hasOwnProperty(o))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),c=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let d=l&&l.skip?t:this.readStyles(e,t);d&&this.addAll(e,d),c&&this.sync(i),this.needsBlock=u}else{let c=this.readStyles(e,t);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=s}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let i=this.parser.matchedStyles[s],o=r.getPropertyValue(i);if(o)for(let a=void 0;;){let l=this.parser.matchStyle(i,o,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?t=t.filter(c=>!l.clearMark(c)):t=t.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return t}addElementByRule(e,t,r,s){let i,o;if(t.node)if(o=this.parser.schema.nodes[t.node],o.isLeaf)this.insertNode(o.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(o,t.attrs||null,r,t.preserveWhitespace);l&&(i=!0,r=l)}else{let l=this.parser.schema.marks[t.mark];r=r.concat(l.create(t.attrs))}let a=this.top;if(o&&o.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}i&&this.sync(a)&&this.open--}addAll(e,t,r,s){let i=r||0;for(let o=r?e.childNodes[r]:e.firstChild,a=s==null?null:e.childNodes[s];o!=a;o=o.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(o,t);this.findAtPoint(e,i)}findPlace(e,t,r){let s,i;for(let o=this.open,a=0;o>=0;o--){let l=this.nodes[o],c=l.findWrapping(e);if(c&&(!s||s.length>c.length+a)&&(s=c,i=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!s)return null;this.sync(i);for(let o=0;o<s.length;o++)t=this.enterInner(s[o],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(t=this.enterInner(i,null,t))}let s=this.findPlace(e,t,r);if(s){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let o=ut.none;for(let a of s.concat(e.marks))(i.type?i.type.allowsMarkType(a.type):Ab(a.type,e.type))&&(o=a.addToSet(o));return i.content.push(e.mark(o)),!0}return!1}enter(e,t,r,s){let i=this.findPlace(e.create(t),r,!1);return i&&(i=this.enterInner(e,t,r,!0,s)),i}enterInner(e,t,r,s=!1,i){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let a=_b(e,i,o.options);o.options&uc&&o.content.length==0&&(a|=uc);let l=ut.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):Ab(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new Bu(e,t,l,s,null,a)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=ql)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&t.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(s?0:1),o=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=i;l--)if(o(a-1,l))return!0;return!1}else{let u=l>0||l==0&&s?this.nodes[l].type:r&&l>=i?r.node(l-i).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return o(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function CF(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&w_.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function AF(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function Cb(n){let e={};for(let t in n)e[t]=n[t];return e}function Ab(n,e){let t=e.schema.nodes;for(let r in t){let s=t[r];if(!s.allowsMarkType(n))continue;let i=[],o=a=>{i.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||i.indexOf(u)<0&&o(u))return!0}};if(o(s.contentMatch))return!0}}class mo{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=_h(t).createDocumentFragment());let s=r,i=[];return e.forEach(o=>{if(i.length||o.marks.length){let a=0,l=0;for(;a<i.length&&l<o.marks.length;){let c=o.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(i[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<i.length;)s=i.pop()[1];for(;l<o.marks.length;){let c=o.marks[l++],u=this.serializeMark(c,o.isInline,t);u&&(i.push([c,s]),s.appendChild(u.dom),s=u.contentDOM||u.dom)}}s.appendChild(this.serializeNodeInner(o,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:s}=cc(_h(t),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,s)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let s=e.marks.length-1;s>=0;s--){let i=this.serializeMark(e.marks[s],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,t,r={}){let s=this.marks[e.type.name];return s&&cc(_h(r),s(e,t),null,e.attrs)}static renderSpec(e,t,r=null,s){return cc(e,t,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new mo(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=kb(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return kb(e.marks)}}function kb(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function _h(n){return n.document||window.document}const Ib=new WeakMap;function kF(n){let e=Ib.get(n);return e===void 0&&Ib.set(n,e=IF(n)),e}function IF(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)t(r[s]);else for(let s in r)t(r[s])}return t(n),e}function cc(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],i;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=kF(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=s.indexOf(" ");o>0&&(t=s.slice(0,o),s=s.slice(o+1));let a,l=t?n.createElementNS(t,s):n.createElement(s),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let h=d.indexOf(" ");h>0?l.setAttributeNS(d.slice(0,h),d.slice(h+1),c[d]):l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let h=e[d];if(h===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:p,contentDOM:m}=cc(n,h,t,r);if(l.appendChild(p),m){if(a)throw new RangeError("Multiple content holes");a=m}}}return{dom:l,contentDOM:a}}const T_=65535,E_=Math.pow(2,16);function MF(n,e){return n+e*E_}function Mb(n){return n&T_}function PF(n){return(n-(n&T_))/E_}const S_=1,__=2,dc=4,x_=8;class jp{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&x_)>0}get deletedBefore(){return(this.delInfo&(S_|dc))>0}get deletedAfter(){return(this.delInfo&(__|dc))>0}get deletedAcross(){return(this.delInfo&dc)>0}}class zn{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&zn.empty)return zn.empty}recover(e){let t=0,r=Mb(e);if(!this.inverted)for(let s=0;s<r;s++)t+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+t+PF(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let s=0,i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?s:0);if(l>e)break;let c=this.ranges[a+i],u=this.ranges[a+o],d=l+c;if(e<=d){let h=c?e==l?-1:e==d?1:t:t,p=l+s+(h<0?0:u);if(r)return p;let m=e==(t<0?l:d)?null:MF(a/3,e-l),y=e==l?__:e==d?S_:dc;return(t<0?e!=l:e!=d)&&(y|=x_),new jp(p,y,m)}s+=u-c}return r?e+s:new jp(e+s,0,null)}touches(e,t){let r=0,s=Mb(t),i=this.inverted?2:1,o=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+i],u=l+c;if(e<=u&&a==s*3)return!0;r+=this.ranges[a+o]-c}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,i=0;s<this.ranges.length;s+=3){let o=this.ranges[s],a=o-(this.inverted?i:0),l=o+(this.inverted?0:i),c=this.ranges[s+t],u=this.ranges[s+r];e(a,a+c,l,l+u),i+=u-c}}invert(){return new zn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?zn.empty:new zn(e<0?[0,-e,0]:[0,0,e])}}zn.empty=new zn([]);class Wl{constructor(e,t,r=0,s=e?e.length:0){this.mirror=t,this.from=r,this.to=s,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Wl(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let s=e.getMirror(t);this.appendMap(e._maps[t],s!=null&&s<t?r+s:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let s=e.getMirror(t);this.appendMap(e._maps[t].invert(),s!=null&&s>t?r-s-1:void 0)}}invert(){let e=new Wl;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let s=0;for(let i=this.from;i<this.to;i++){let o=this._maps[i],a=o.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,e=this._maps[l].recover(a.recover);continue}}s|=a.delInfo,e=a.pos}return r?e:new jp(e,s,null)}}const xh=Object.create(null);class bn{getMap(){return zn.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=xh[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in xh)throw new RangeError("Duplicate use of step JSON ID "+e);return xh[e]=t,t.prototype.jsonID=e,t}}class Pt{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Pt(e,null)}static fail(e){return new Pt(null,e)}static fromReplace(e,t,r,s){try{return Pt.ok(e.replace(t,r,s))}catch(i){if(i instanceof Wc)return Pt.fail(i.message);throw i}}}function Og(n,e,t){let r=[];for(let s=0;s<n.childCount;s++){let i=n.child(s);i.content.size&&(i=i.copy(Og(i.content,e,i))),i.isInline&&(i=e(i,t,s)),r.push(i)}return Z.fromArray(r)}class Bs extends bn{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),i=new pe(Og(t.content,(o,a)=>!o.isAtom||!a.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),s),t.openStart,t.openEnd);return Pt.fromReplace(e,this.from,this.to,i)}invert(){return new kr(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new Bs(t.pos,r.pos,this.mark)}merge(e){return e instanceof Bs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Bs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Bs(t.from,t.to,e.markFromJSON(t.mark))}}bn.jsonID("addMark",Bs);class kr extends bn{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new pe(Og(t.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),t.openStart,t.openEnd);return Pt.fromReplace(e,this.from,this.to,r)}invert(){return new Bs(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new kr(t.pos,r.pos,this.mark)}merge(e){return e instanceof kr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new kr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new kr(t.from,t.to,e.markFromJSON(t.mark))}}bn.jsonID("removeMark",kr);class Fs extends bn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Pt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Pt.fromReplace(e,this.pos,this.pos+1,new pe(Z.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let s=0;s<t.marks.length;s++)if(!t.marks[s].isInSet(r))return new Fs(this.pos,t.marks[s]);return new Fs(this.pos,this.mark)}}return new so(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new Fs(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Fs(t.pos,e.markFromJSON(t.mark))}}bn.jsonID("addNodeMark",Fs);class so extends bn{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Pt.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Pt.fromReplace(e,this.pos,this.pos+1,new pe(Z.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new Fs(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new so(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new so(t.pos,e.markFromJSON(t.mark))}}bn.jsonID("removeNodeMark",so);class Ht extends bn{constructor(e,t,r,s=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=s}apply(e){return this.structure&&Hp(e,this.from,this.to)?Pt.fail("Structure replace would overwrite content"):Pt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new zn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Ht(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new Ht(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Ht)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?pe.empty:new pe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Ht(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?pe.empty:new pe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Ht(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Ht(t.from,t.to,pe.fromJSON(e,t.slice),!!t.structure)}}bn.jsonID("replace",Ht);class qt extends bn{constructor(e,t,r,s,i,o,a=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=s,this.slice=i,this.insert=o,this.structure=a}apply(e){if(this.structure&&(Hp(e,this.from,this.gapFrom)||Hp(e,this.gapTo,this.to)))return Pt.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Pt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Pt.fromReplace(e,this.from,this.to,r):Pt.fail("Content does not fit in gap")}getMap(){return new zn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new qt(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||s<t.pos||i>r.pos?null:new qt(t.pos,r.pos,s,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new qt(t.from,t.to,t.gapFrom,t.gapTo,pe.fromJSON(e,t.slice),t.insert,!!t.structure)}}bn.jsonID("replaceAround",qt);function Hp(n,e,t){let r=n.resolve(e),s=t-e,i=r.depth;for(;s>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,s--;if(s>0){let o=r.node(i).maybeChild(r.indexAfter(i));for(;s>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,s--}}return!1}function RF(n,e,t,r){let s=[],i=[],o,a;n.doc.nodesBetween(e,t,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,e),p=Math.min(c+l.nodeSize,t),m=r.addToSet(d);for(let y=0;y<d.length;y++)d[y].isInSet(m)||(o&&o.to==h&&o.mark.eq(d[y])?o.to=p:s.push(o=new kr(h,p,d[y])));a&&a.to==h?a.to=p:i.push(a=new Bs(h,p,r))}}),s.forEach(l=>n.step(l)),i.forEach(l=>n.step(l))}function OF(n,e,t,r){let s=[],i=0;n.doc.nodesBetween(e,t,(o,a)=>{if(!o.isInline)return;i++;let l=null;if(r instanceof bf){let c=o.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(l=[r]):l=o.marks;if(l&&l.length){let c=Math.min(a+o.nodeSize,t);for(let u=0;u<l.length;u++){let d=l[u],h;for(let p=0;p<s.length;p++){let m=s[p];m.step==i-1&&d.eq(s[p].style)&&(h=m)}h?(h.to=c,h.step=i):s.push({style:d,from:Math.max(a,e),to:c,step:i})}}}),s.forEach(o=>n.step(new kr(o.from,o.to,o.style)))}function Dg(n,e,t,r=t.contentMatch,s=!0){let i=n.doc.nodeAt(e),o=[],a=e+1;for(let l=0;l<i.childCount;l++){let c=i.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)o.push(new Ht(a,u,pe.empty));else{r=d;for(let h=0;h<c.marks.length;h++)t.allowsMarkType(c.marks[h].type)||n.step(new kr(a,u,c.marks[h]));if(s&&c.isText&&t.whitespace!="pre"){let h,p=/\r?\n|\r/g,m;for(;h=p.exec(c.text);)m||(m=new pe(Z.from(t.schema.text(" ",t.allowedMarks(c.marks))),0,0)),o.push(new Ht(a+h.index,a+h.index+h[0].length,m))}}a=u}if(!r.validEnd){let l=r.fillBefore(Z.empty,!0);n.replace(a,a,new pe(l,0,0))}for(let l=o.length-1;l>=0;l--)n.step(o[l])}function DF(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function Ia(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let s=n.$from.node(r),i=n.$from.index(r),o=n.$to.indexAfter(r);if(r<n.depth&&s.canReplace(i,o,t))return r;if(r==0||s.type.spec.isolating||!DF(s,i,o))break}return null}function NF(n,e,t){let{$from:r,$to:s,depth:i}=e,o=r.before(i+1),a=s.after(i+1),l=o,c=a,u=Z.empty,d=0;for(let m=i,y=!1;m>t;m--)y||r.index(m)>0?(y=!0,u=Z.from(r.node(m).copy(u)),d++):l--;let h=Z.empty,p=0;for(let m=i,y=!1;m>t;m--)y||s.after(m+1)<s.end(m)?(y=!0,h=Z.from(s.node(m).copy(h)),p++):c++;n.step(new qt(l,c,o,a,new pe(u.append(h),d,p),u.size-d,!0))}function Ng(n,e,t=null,r=n){let s=LF(n,e),i=s&&VF(r,e);return i?s.map(Pb).concat({type:e,attrs:t}).concat(i.map(Pb)):null}function Pb(n){return{type:n,attrs:null}}function LF(n,e){let{parent:t,startIndex:r,endIndex:s}=n,i=t.contentMatchAt(r).findWrapping(e);if(!i)return null;let o=i.length?i[0]:e;return t.canReplaceWith(r,s,o)?i:null}function VF(n,e){let{parent:t,startIndex:r,endIndex:s}=n,i=t.child(r),o=e.contentMatch.findWrapping(i.type);if(!o)return null;let l=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;l&&c<s;c++)l=l.matchType(t.child(c).type);return!l||!l.validEnd?null:o}function $F(n,e,t){let r=Z.empty;for(let o=t.length-1;o>=0;o--){if(r.size){let a=t[o].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Z.from(t[o].type.create(t[o].attrs,r))}let s=e.start,i=e.end;n.step(new qt(s,i,s,i,new pe(r,0,0),t.length,!0))}function BF(n,e,t,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=n.steps.length;n.doc.nodesBetween(e,t,(o,a)=>{let l=typeof s=="function"?s(o):s;if(o.isTextblock&&!o.hasMarkup(r,l)&&FF(n.doc,n.mapping.slice(i).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!m?c=!1:!p&&m&&(c=!0)}c===!1&&A_(n,o,a,i),Dg(n,n.mapping.slice(i).map(a,1),r,void 0,c===null);let u=n.mapping.slice(i),d=u.map(a,1),h=u.map(a+o.nodeSize,1);return n.step(new qt(d,h,d+1,h-1,new pe(Z.from(r.create(l,null,o.marks)),0,0),1,!0)),c===!0&&C_(n,o,a,i),!1}})}function C_(n,e,t,r){e.forEach((s,i)=>{if(s.isText){let o,a=/\r?\n|\r/g;for(;o=a.exec(s.text);){let l=n.mapping.slice(r).map(t+1+i+o.index);n.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function A_(n,e,t,r){e.forEach((s,i)=>{if(s.type==s.type.schema.linebreakReplacement){let o=n.mapping.slice(r).map(t+1+i);n.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function FF(n,e,t){let r=n.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,t)}function zF(n,e,t,r,s){let i=n.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");t||(t=i.type);let o=t.create(r,null,s||i.marks);if(i.isLeaf)return n.replaceWith(e,e+i.nodeSize,o);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new qt(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new pe(Z.from(o),0,0),1,!0))}function cs(n,e,t=1,r){let s=n.resolve(e),i=s.depth-t,o=r&&r[r.length-1]||s.parent;if(i<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!o.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let c=s.depth-1,u=t-2;c>i;c--,u--){let d=s.node(c),h=s.index(c);if(d.type.spec.isolating)return!1;let p=d.content.cutByIndex(h,d.childCount),m=r&&r[u+1];m&&(p=p.replaceChild(0,m.type.create(m.attrs)));let y=r&&r[u]||d;if(!d.canReplace(h+1,d.childCount)||!y.type.validContent(p))return!1}let a=s.indexAfter(i),l=r&&r[0];return s.node(i).canReplaceWith(a,a,l?l.type:s.node(i+1).type)}function jF(n,e,t=1,r){let s=n.doc.resolve(e),i=Z.empty,o=Z.empty;for(let a=s.depth,l=s.depth-t,c=t-1;a>l;a--,c--){i=Z.from(s.node(a).copy(i));let u=r&&r[c];o=Z.from(u?u.type.create(u.attrs,o):s.node(a).copy(o))}n.step(new Ht(e,e,new pe(i.append(o),t,t),!0))}function bi(n,e){let t=n.resolve(e),r=t.index();return k_(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function HF(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let s=0;s<e.childCount;s++){let i=e.child(s),o=i.type==r?n.type.schema.nodes.text:i.type;if(t=t.matchType(o),!t||!n.type.allowsMarks(i.marks))return!1}return t.validEnd}function k_(n,e){return!!(n&&e&&!n.isLeaf&&HF(n,e))}function wf(n,e,t=-1){let r=n.resolve(e);for(let s=r.depth;;s--){let i,o,a=r.index(s);if(s==r.depth?(i=r.nodeBefore,o=r.nodeAfter):t>0?(i=r.node(s+1),a++,o=r.node(s).maybeChild(a)):(i=r.node(s).maybeChild(a-1),o=r.node(s+1)),i&&!i.isTextblock&&k_(i,o)&&r.node(s).canReplace(a,a+1))return e;if(s==0)break;e=t<0?r.before(s):r.after(s)}}function UF(n,e,t){let r=null,{linebreakReplacement:s}=n.doc.type.schema,i=n.doc.resolve(e-t),o=i.node().type;if(s&&o.inlineContent){let u=o.whitespace=="pre",d=!!o.contentMatch.matchType(s);u&&!d?r=!1:!u&&d&&(r=!0)}let a=n.steps.length;if(r===!1){let u=n.doc.resolve(e+t);A_(n,u.node(),u.before(),a)}o.inlineContent&&Dg(n,e+t-1,o,i.node().contentMatchAt(i.index()),r==null);let l=n.mapping.slice(a),c=l.map(e-t);if(n.step(new Ht(c,l.map(e+t,-1),pe.empty,!0)),r===!0){let u=n.doc.resolve(c);C_(n,u.node(),u.before(),n.steps.length)}return n}function qF(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let i=r.index(s);if(r.node(s).canReplaceWith(i,i,t))return r.before(s+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let i=r.indexAfter(s);if(r.node(s).canReplaceWith(i,i,t))return r.after(s+1);if(i<r.node(s).childCount)return null}return null}function I_(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let s=t.content;for(let i=0;i<t.openStart;i++)s=s.firstChild.content;for(let i=1;i<=(t.openStart==0&&t.size?2:1);i++)for(let o=r.depth;o>=0;o--){let a=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,l=r.index(o)+(a>0?1:0),c=r.node(o),u=!1;if(i==1)u=c.canReplace(l,l,s);else{let d=c.contentMatchAt(l).findWrapping(s.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(o+1):r.after(o+1)}return null}function Tf(n,e,t=e,r=pe.empty){if(e==t&&!r.size)return null;let s=n.resolve(e),i=n.resolve(t);return M_(s,i,r)?new Ht(e,t,r):new WF(s,i,r).fit()}function M_(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class WF{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=Z.empty;for(let s=0;s<=e.depth;s++){let i=e.node(s);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=Z.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let i=this.placed,o=r.depth,a=s.depth;for(;o&&a&&i.childCount==1;)i=i.firstChild.content,o--,a--;let l=new pe(i,o,a);return e>-1?new qt(r.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||r.pos!=this.$to.pos?new Ht(r.pos,s.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let i=t.firstChild;if(t.childCount>1&&(s=0),i.type.spec.isolating&&s<=r){e=r;break}t=i.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let s,i=null;r?(i=Ch(this.unplaced.content,r-1).firstChild,s=i.content):s=this.unplaced.content;let o=s.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(t==1&&(o?c.matchType(o.type)||(d=c.fillBefore(Z.from(o),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:a,parent:i,inject:d};if(t==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:a,parent:i,wrap:u};if(i&&c.matchType(i.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=Ch(e,t);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new pe(e,t+1,Math.max(r,s.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,s=Ch(e,t);if(s.childCount<=1&&t>0){let i=e.size-t<=t+s.size;this.unplaced=new pe(el(e,t-1,1),t-1,i?t-1:r)}else this.unplaced=new pe(el(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:s,wrap:i}){for(;this.depth>t;)this.closeFrontierNode();if(i)for(let y=0;y<i.length;y++)this.openFrontierNode(i[y]);let o=this.unplaced,a=r?r.content:o.content,l=o.openStart-e,c=0,u=[],{match:d,type:h}=this.frontier[t];if(s){for(let y=0;y<s.childCount;y++)u.push(s.child(y));d=d.matchFragment(s)}let p=a.size+e-(o.content.size-o.openEnd);for(;c<a.childCount;){let y=a.child(c),v=d.matchType(y.type);if(!v)break;c++,(c>1||l==0||y.content.size)&&(d=v,u.push(P_(y.mark(h.allowedMarks(y.marks)),c==1?l:0,c==a.childCount?p:-1)))}let m=c==a.childCount;m||(p=-1),this.placed=tl(this.placed,t,Z.from(u)),this.frontier[t].match=d,m&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,v=a;y<p;y++){let S=v.lastChild;this.frontier.push({type:S.type,match:S.contentMatchAt(S.childCount)}),v=S.content}this.unplaced=m?e==0?pe.empty:new pe(el(o.content,e-1,1),e-1,p<0?o.openEnd:e-1):new pe(el(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!Ah(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:s}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),o=Ah(e,t,s,r,i);if(o){for(let a=t-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=Ah(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:t,fit:o,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=tl(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let s=e.node(r),i=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,i)}return e}openFrontierNode(e,t=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=tl(this.placed,this.depth,Z.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(Z.empty,!0);t.childCount&&(this.placed=tl(this.placed,this.frontier.length,t))}}function el(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(el(n.firstChild.content,e-1,t)))}function tl(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(tl(n.lastChild.content,e-1,t)))}function Ch(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function P_(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,P_(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(Z.empty,!0)))),n.copy(r)}function Ah(n,e,t,r,s){let i=n.node(e),o=s?n.indexAfter(e):n.index(e);if(o==i.childCount&&!t.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,o);return a&&!GF(t,i.content,o)?a:null}function GF(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function KF(n){return n.spec.defining||n.spec.definingForContent}function JF(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let s=n.doc.resolve(e),i=n.doc.resolve(t);if(M_(s,i,r))return n.step(new Ht(e,t,r));let o=O_(s,n.doc.resolve(t));o[o.length-1]==0&&o.pop();let a=-(s.depth+1);o.unshift(a);for(let h=s.depth,p=s.pos-1;h>0;h--,p--){let m=s.node(h).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(h)>-1?a=h:s.before(h)==p&&o.splice(1,0,-h)}let l=o.indexOf(a),c=[],u=r.openStart;for(let h=r.content,p=0;;p++){let m=h.firstChild;if(c.push(m),p==r.openStart)break;h=m.content}for(let h=u-1;h>=0;h--){let p=c[h],m=KF(p.type);if(m&&!p.sameMarkup(s.node(Math.abs(a)-1)))u=h;else if(m||!p.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let p=(h+u+1)%(r.openStart+1),m=c[p];if(m)for(let y=0;y<o.length;y++){let v=o[(y+l)%o.length],S=!0;v<0&&(S=!1,v=-v);let T=s.node(v-1),b=s.index(v-1);if(T.canReplaceWith(b,b,m.type,m.marks))return n.replace(s.before(v),S?i.after(v):t,new pe(R_(r.content,0,r.openStart,p),p,r.openEnd))}}let d=n.steps.length;for(let h=o.length-1;h>=0&&(n.replace(e,t,r),!(n.steps.length>d));h--){let p=o[h];p<0||(e=s.before(p),t=i.after(p))}}function R_(n,e,t,r,s){if(e<t){let i=n.firstChild;n=n.replaceChild(0,i.copy(R_(i.content,e+1,t,r,i)))}if(e>r){let i=s.contentMatchAt(0),o=i.fillBefore(n).append(n);n=o.append(i.matchFragment(o).fillBefore(Z.empty,!0))}return n}function QF(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let s=qF(n.doc,e,r.type);s!=null&&(e=t=s)}n.replaceRange(e,t,new pe(Z.from(r),0,0))}function YF(n,e,t){let r=n.doc.resolve(e),s=n.doc.resolve(t),i=O_(r,s);for(let o=0;o<i.length;o++){let a=i[o],l=o==i.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return n.delete(r.start(a),s.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),s.indexAfter(a-1))))return n.delete(r.before(a),s.after(a))}for(let o=1;o<=r.depth&&o<=s.depth;o++)if(e-r.start(o)==r.depth-o&&t>r.end(o)&&s.end(o)-t!=s.depth-o&&r.start(o-1)==s.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),s.index(o-1)))return n.delete(r.before(o),t);n.delete(e,t)}function O_(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let s=r;s>=0;s--){let i=n.start(s);if(i<n.pos-(n.depth-s)||e.end(s)>e.pos+(e.depth-s)||n.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(i==e.start(s)||s==n.depth&&s==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==i-1)&&t.push(s)}return t}class ea extends bn{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Pt.fail("No node at attribute step's position");let r=Object.create(null);for(let i in t.attrs)r[i]=t.attrs[i];r[this.attr]=this.value;let s=t.type.create(r,null,t.marks);return Pt.fromReplace(e,this.pos,this.pos+1,new pe(Z.from(s),0,t.isLeaf?0:1))}getMap(){return zn.empty}invert(e){return new ea(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ea(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ea(t.pos,t.attr,t.value)}}bn.jsonID("attr",ea);class Gl extends bn{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let s in e.attrs)t[s]=e.attrs[s];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return Pt.ok(r)}getMap(){return zn.empty}invert(e){return new Gl(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Gl(t.attr,t.value)}}bn.jsonID("docAttr",Gl);let ga=class extends Error{};ga=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};ga.prototype=Object.create(Error.prototype);ga.prototype.constructor=ga;ga.prototype.name="TransformError";class D_{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Wl}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new ga(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=pe.empty){let s=Tf(this.doc,e,t,r);return s&&this.step(s),this}replaceWith(e,t,r){return this.replace(e,t,new pe(Z.from(r),0,0))}delete(e,t){return this.replace(e,t,pe.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return JF(this,e,t,r),this}replaceRangeWith(e,t,r){return QF(this,e,t,r),this}deleteRange(e,t){return YF(this,e,t),this}lift(e,t){return NF(this,e,t),this}join(e,t=1){return UF(this,e,t),this}wrap(e,t){return $F(this,e,t),this}setBlockType(e,t=e,r,s=null){return BF(this,e,t,r,s),this}setNodeMarkup(e,t,r=null,s){return zF(this,e,t,r,s),this}setNodeAttribute(e,t,r){return this.step(new ea(e,t,r)),this}setDocAttribute(e,t){return this.step(new Gl(e,t)),this}addNodeMark(e,t){return this.step(new Fs(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof ut)t.isInSet(r.marks)&&this.step(new so(e,t));else{let s=r.marks,i,o=[];for(;i=t.isInSet(s);)o.push(new so(e,i)),s=i.removeFromSet(s);for(let a=o.length-1;a>=0;a--)this.step(o[a])}return this}split(e,t=1,r){return jF(this,e,t,r),this}addMark(e,t,r){return RF(this,e,t,r),this}removeMark(e,t,r){return OF(this,e,t,r),this}clearIncompatible(e,t,r){return Dg(this,e,t,r),this}}const kh=Object.create(null);class je{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new XF(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=pe.empty){let r=t.content.lastChild,s=null;for(let a=0;a<t.openEnd;a++)s=r,r=r.lastChild;let i=e.steps.length,o=this.ranges;for(let a=0;a<o.length;a++){let{$from:l,$to:c}=o[a],u=e.mapping.slice(i);e.replaceRange(u.map(l.pos),u.map(c.pos),a?pe.empty:t),a==0&&Db(e,i,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,s=this.ranges;for(let i=0;i<s.length;i++){let{$from:o,$to:a}=s[i],l=e.mapping.slice(r),c=l.map(o.pos),u=l.map(a.pos);i?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),Db(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let s=e.parent.inlineContent?new Le(e):Fo(e.node(0),e.parent,e.pos,e.index(),t,r);if(s)return s;for(let i=e.depth-1;i>=0;i--){let o=t<0?Fo(e.node(0),e.node(i),e.before(i+1),e.index(i),t,r):Fo(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,r);if(o)return o}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new qn(e.node(0))}static atStart(e){return Fo(e,e,0,0,1)||new qn(e)}static atEnd(e){return Fo(e,e,e.content.size,e.childCount,-1)||new qn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=kh[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in kh)throw new RangeError("Duplicate use of selection JSON ID "+e);return kh[e]=t,t.prototype.jsonID=e,t}getBookmark(){return Le.between(this.$anchor,this.$head).getBookmark()}}je.prototype.visible=!0;class XF{constructor(e,t){this.$from=e,this.$to=t}}let Rb=!1;function Ob(n){!Rb&&!n.parent.inlineContent&&(Rb=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class Le extends je{constructor(e,t=e){Ob(e),Ob(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return je.near(r);let s=e.resolve(t.map(this.anchor));return new Le(s.parent.inlineContent?s:r,r)}replace(e,t=pe.empty){if(super.replace(e,t),t==pe.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Le&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Ef(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Le(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let s=e.resolve(t);return new this(s,r==t?s:e.resolve(r))}static between(e,t,r){let s=e.pos-t.pos;if((!r||s)&&(r=s>=0?1:-1),!t.parent.inlineContent){let i=je.findFrom(t,r,!0)||je.findFrom(t,-r,!0);if(i)t=i.$head;else return je.near(t,r)}return e.parent.inlineContent||(s==0?e=t:(e=(je.findFrom(e,-r,!0)||je.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=s<0&&(e=t))),new Le(e,t)}}je.jsonID("text",Le);class Ef{constructor(e,t){this.anchor=e,this.head=t}map(e){return new Ef(e.map(this.anchor),e.map(this.head))}resolve(e){return Le.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ae extends je{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:s}=t.mapResult(this.anchor),i=e.resolve(s);return r?je.near(i):new Ae(i)}content(){return new pe(Z.from(this.node),0,0)}eq(e){return e instanceof Ae&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Lg(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ae(e.resolve(t.anchor))}static create(e,t){return new Ae(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ae.prototype.visible=!1;je.jsonID("node",Ae);class Lg{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new Ef(r,r):new Lg(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&Ae.isSelectable(r)?new Ae(t):je.near(t)}}class qn extends je{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=pe.empty){if(t==pe.empty){e.delete(0,e.doc.content.size);let r=je.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new qn(e)}map(e){return new qn(e)}eq(e){return e instanceof qn}getBookmark(){return ZF}}je.jsonID("all",qn);const ZF={map(){return this},resolve(n){return new qn(n)}};function Fo(n,e,t,r,s,i=!1){if(e.inlineContent)return Le.create(n,t);for(let o=r-(s>0?0:1);s>0?o<e.childCount:o>=0;o+=s){let a=e.child(o);if(a.isAtom){if(!i&&Ae.isSelectable(a))return Ae.create(n,t-(s<0?a.nodeSize:0))}else{let l=Fo(n,a,t+s,s<0?a.childCount:0,s,i);if(l)return l}t+=a.nodeSize*s}return null}function Db(n,e,t){let r=n.steps.length-1;if(r<e)return;let s=n.steps[r];if(!(s instanceof Ht||s instanceof qt))return;let i=n.mapping.maps[r],o;i.forEach((a,l,c,u)=>{o==null&&(o=u)}),n.setSelection(je.near(n.doc.resolve(o),t))}const Nb=1,Lb=2,Vb=4;class e6 extends D_{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Nb)&-3,this.storedMarks=null,this}get selectionSet(){return(this.updated&Nb)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Lb,this}ensureMarks(e){return ut.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Lb)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&-3,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ut.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let s=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let i=this.storedMarks;if(!i){let o=this.doc.resolve(t);i=r==t?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,s.text(e,i)),this.selection.empty||this.setSelection(je.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Vb,this}get scrolledIntoView(){return(this.updated&Vb)>0}}function $b(n,e){return!e||!n?n:n.bind(e)}class nl{constructor(e,t,r){this.name=e,this.init=$b(t.init,r),this.apply=$b(t.apply,r)}}const t6=[new nl("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new nl("selection",{init(n,e){return n.selection||je.atStart(e.doc)},apply(n){return n.selection}}),new nl("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new nl("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class Ih{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=t6.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new nl(r.key,r.spec.state,r))})}}class Ho{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),s=null;for(;;){let i=!1;for(let o=0;o<this.config.plugins.length;o++){let a=this.config.plugins[o];if(a.spec.appendTransaction){let l=s?s[o].n:0,c=s?s[o].state:this,u=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!s){s=[];for(let d=0;d<this.config.plugins.length;d++)s.push(d<o?{state:r,n:t.length}:{state:this,n:0})}t.push(u),r=r.applyInner(u),i=!0}s&&(s[o]={state:r,n:t.length})}}if(!i)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new Ho(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let i=r[s];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new e6(this)}static create(e){let t=new Ih(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Ho(t);for(let s=0;s<t.fields.length;s++)r[t.fields[s].name]=t.fields[s].init(e,r);return r}reconfigure(e){let t=new Ih(this.schema,e.plugins),r=t.fields,s=new Ho(t);for(let i=0;i<r.length;i++){let o=r[i].name;s[o]=this.hasOwnProperty(o)?this[o]:r[i].init(e,s)}return s}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],i=s.spec.state;i&&i.toJSON&&(t[r]=i.toJSON.call(s,this[s.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new Ih(e.schema,e.plugins),i=new Ho(s);return s.fields.forEach(o=>{if(o.name=="doc")i.doc=Js.fromJSON(e.schema,t.doc);else if(o.name=="selection")i.selection=je.fromJSON(i.doc,t.selection);else if(o.name=="storedMarks")t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){i[o.name]=c.fromJSON.call(l,e,t[a],i);return}}i[o.name]=o.init(e,i)}}),i}}function N_(n,e,t){for(let r in n){let s=n[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=N_(s,e,{})),t[r]=s}return t}class on{constructor(e){this.spec=e,this.props={},e.props&&N_(e.props,this,this.props),this.key=e.key?e.key.key:L_("plugin")}getState(e){return e[this.key]}}const Mh=Object.create(null);function L_(n){return n in Mh?n+"$"+ ++Mh[n]:(Mh[n]=0,n+"$")}class Kn{constructor(e="key"){this.key=L_(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Zt=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},ya=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Up=null;const ns=function(n,e,t){let r=Up||(Up=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},n6=function(){Up=null},io=function(n,e,t,r){return t&&(Bb(n,e,t,r,-1)||Bb(n,e,t,r,1))},r6=/^(img|br|input|textarea|hr)$/i;function Bb(n,e,t,r,s){for(;;){if(n==t&&e==r)return!0;if(e==(s<0?0:Zn(n))){let i=n.parentNode;if(!i||i.nodeType!=1||du(n)||r6.test(n.nodeName)||n.contentEditable=="false")return!1;e=Zt(n)+(s<0?0:1),n=i}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.contentEditable=="false")return!1;e=s<0?Zn(n):0}else return!1}}function Zn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function s6(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=Zn(n)}else if(n.parentNode&&!du(n))e=Zt(n),n=n.parentNode;else return null}}function i6(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!du(n))e=Zt(n)+1,n=n.parentNode;else return null}}function o6(n,e,t){for(let r=e==0,s=e==Zn(n);r||s;){if(n==t)return!0;let i=Zt(n);if(n=n.parentNode,!n)return!1;r=r&&i==0,s=s&&i==Zn(n)}}function du(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const Sf=function(n){return n.focusNode&&io(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Ni(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function a6(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function l6(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(Zn(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(Zn(r.startContainer),r.startOffset)}}}const Fr=typeof navigator<"u"?navigator:null,Fb=typeof document<"u"?document:null,wi=Fr&&Fr.userAgent||"",qp=/Edge\/(\d+)/.exec(wi),V_=/MSIE \d/.exec(wi),Wp=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(wi),Dn=!!(V_||Wp||qp),Ys=V_?document.documentMode:Wp?+Wp[1]:qp?+qp[1]:0,pr=!Dn&&/gecko\/(\d+)/i.test(wi);pr&&+(/Firefox\/(\d+)/.exec(wi)||[0,0])[1];const Gp=!Dn&&/Chrome\/(\d+)/.exec(wi),yn=!!Gp,$_=Gp?+Gp[1]:0,xn=!Dn&&!!Fr&&/Apple Computer/.test(Fr.vendor),va=xn&&(/Mobile\/\w+/.test(wi)||!!Fr&&Fr.maxTouchPoints>2),Xn=va||(Fr?/Mac/.test(Fr.platform):!1),u6=Fr?/Win/.test(Fr.platform):!1,is=/Android \d/.test(wi),fu=!!Fb&&"webkitFontSmoothing"in Fb.documentElement.style,c6=fu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function d6(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function Qr(n,e){return typeof n=="number"?n:n[e]}function f6(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function zb(n,e,t){let r=n.someProp("scrollThreshold")||0,s=n.someProp("scrollMargin")||5,i=n.dom.ownerDocument;for(let o=t||n.dom;o;){if(o.nodeType!=1){o=ya(o);continue}let a=o,l=a==i.body,c=l?d6(i):f6(a),u=0,d=0;if(e.top<c.top+Qr(r,"top")?d=-(c.top-e.top+Qr(s,"top")):e.bottom>c.bottom-Qr(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Qr(s,"top")-c.top:e.bottom-c.bottom+Qr(s,"bottom")),e.left<c.left+Qr(r,"left")?u=-(c.left-e.left+Qr(s,"left")):e.right>c.right-Qr(r,"right")&&(u=e.right-c.right+Qr(s,"right")),u||d)if(l)i.defaultView.scrollBy(u,d);else{let p=a.scrollLeft,m=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let y=a.scrollLeft-p,v=a.scrollTop-m;e={left:e.left-y,top:e.top-v,right:e.right-y,bottom:e.bottom-v}}let h=l?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(h))break;o=h=="absolute"?o.offsetParent:ya(o)}}function h6(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,s;for(let i=(e.left+e.right)/2,o=t+1;o<Math.min(innerHeight,e.bottom);o+=5){let a=n.root.elementFromPoint(i,o);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=t-20){r=a,s=l.top;break}}return{refDOM:r,refTop:s,stack:B_(n.dom)}}function B_(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=ya(r));return e}function p6({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;F_(t,r==0?0:r-e)}function F_(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:s,left:i}=n[t];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let Po=null;function m6(n){if(n.setActive)return n.setActive();if(Po)return n.focus(Po);let e=B_(n);n.focus(Po==null?{get preventScroll(){return Po={preventScroll:!0},!0}}:void 0),Po||(Po=!1,F_(e,0))}function z_(n,e){let t,r=2e8,s,i=0,o=e.top,a=e.top,l,c;for(let u=n.firstChild,d=0;u;u=u.nextSibling,d++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=ns(u).getClientRects();else continue;for(let p=0;p<h.length;p++){let m=h[p];if(m.top<=o&&m.bottom>=a){o=Math.max(m.bottom,o),a=Math.min(m.top,a);let y=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(y<r){t=u,r=y,s=y&&t.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,u.nodeType==1&&y&&(i=d+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!l&&m.left<=e.left&&m.right>=e.left&&(l=u,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!t&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(i=d+1)}}return!t&&l&&(t=l,s=c,r=0),t&&t.nodeType==3?g6(t,s):!t||r&&t.nodeType==1?{node:n,offset:i}:z_(t,s)}function g6(n,e){let t=n.nodeValue.length,r=document.createRange();for(let s=0;s<t;s++){r.setEnd(n,s+1),r.setStart(n,s);let i=ks(r,1);if(i.top!=i.bottom&&Vg(e,i))return{node:n,offset:s+(e.left>=(i.left+i.right)/2?1:0)}}return{node:n,offset:0}}function Vg(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function y6(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function v6(n,e,t){let{node:r,offset:s}=z_(e,t),i=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();i=o.left!=o.right&&t.left>(o.left+o.right)/2?1:-1}return n.docView.posFromDOM(r,s,i)}function b6(n,e,t,r){let s=-1;for(let i=e,o=!1;i!=n.dom;){let a=n.docView.nearestDesc(i,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!o&&l.left>r.left||l.top>r.top?s=a.posBefore:(!o&&l.right<r.left||l.bottom<r.top)&&(s=a.posAfter),o=!0),!a.contentDOM&&s<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;i=a.dom.parentNode}return s>-1?s:n.docView.posFromDOM(e,t,-1)}function j_(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),i=s;;){let o=n.childNodes[i];if(o.nodeType==1){let a=o.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(Vg(e,c))return j_(o,e,c)}}if((i=(i+1)%r)==s)break}return n}function w6(n,e){let t=n.dom.ownerDocument,r,s=0,i=l6(t,e.left,e.top);i&&({node:r,offset:s}=i);let o=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),a;if(!o||!n.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=n.dom.getBoundingClientRect();if(!Vg(e,c)||(o=j_(n.dom,e,c),!o))return null}if(xn)for(let c=o;r&&c;c=ya(c))c.draggable&&(r=void 0);if(o=y6(o,e),r){if(pr&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let u=r.childNodes[s],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&s++}let c;fu&&s&&r.nodeType==1&&(c=r.childNodes[s-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&s--,r==n.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(a=b6(n,r,s,e))}a==null&&(a=v6(n,o,e));let l=n.docView.nearestDesc(o,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function jb(n){return n.top<n.bottom||n.left<n.right}function ks(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(jb(r))return r}return Array.prototype.find.call(t,jb)||n.getBoundingClientRect()}const T6=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function H_(n,e,t){let{node:r,offset:s,atom:i}=n.docView.domFromPos(e,t<0?-1:1),o=fu||pr;if(r.nodeType==3)if(o&&(T6.test(r.nodeValue)||(t<0?!s:s==r.nodeValue.length))){let l=ks(ns(r,s,s),t);if(pr&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let c=ks(ns(r,s-1,s-1),-1);if(c.top==l.top){let u=ks(ns(r,s,s+1),-1);if(u.top!=l.top)return Ga(u,u.left<c.left)}}return l}else{let l=s,c=s,u=t<0?1:-1;return t<0&&!s?(c++,u=-1):t>=0&&s==r.nodeValue.length?(l--,u=1):t<0?l--:c++,Ga(ks(ns(r,l,c),u),u<0)}if(!n.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&s&&(t<0||s==Zn(r))){let l=r.childNodes[s-1];if(l.nodeType==1)return Ph(l.getBoundingClientRect(),!1)}if(i==null&&s<Zn(r)){let l=r.childNodes[s];if(l.nodeType==1)return Ph(l.getBoundingClientRect(),!0)}return Ph(r.getBoundingClientRect(),t>=0)}if(i==null&&s&&(t<0||s==Zn(r))){let l=r.childNodes[s-1],c=l.nodeType==3?ns(l,Zn(l)-(o?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Ga(ks(c,1),!1)}if(i==null&&s<Zn(r)){let l=r.childNodes[s];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?ns(l,0,o?0:1):l.nodeType==1?l:null:null;if(c)return Ga(ks(c,-1),!0)}return Ga(ks(r.nodeType==3?ns(r):r,-t),t>=0)}function Ga(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function Ph(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function U_(n,e,t){let r=n.state,s=n.root.activeElement;r!=e&&n.updateState(e),s!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),s!=n.dom&&s&&s.focus()}}function E6(n,e,t){let r=e.selection,s=t=="up"?r.$from:r.$to;return U_(n,e,()=>{let{node:i}=n.docView.domFromPos(s.pos,t=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let o=H_(n,s.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=ns(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(t=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const S6=/[\u0590-\u08ac]/;function _6(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,i=!s,o=s==r.parent.content.size,a=n.domSelection();return a?!S6.test(r.parent.textContent)||!a.modify?t=="left"||t=="backward"?i:o:U_(n,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=n.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",t,"character");let p=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:m,focusOffset:y}=n.domSelectionRange(),v=m&&!p.contains(m.nodeType==1?m:m.parentNode)||l==m&&c==y;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),v}):r.pos==r.start()||r.pos==r.end()}let Hb=null,Ub=null,qb=!1;function x6(n,e,t){return Hb==e&&Ub==t?qb:(Hb=e,Ub=t,qb=t=="up"||t=="down"?E6(n,e,t):_6(n,e,t))}const rr=0,Wb=1,Bi=2,zr=3;class hu{constructor(e,t,r,s){this.parent=e,this.children=t,this.dom=r,this.contentDOM=s,this.dirty=rr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let s=this.children[t];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,o;if(e==this.contentDOM)i=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(o)+o.size:this.posAtStart}else{let i,o;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((o=i.pmViewDesc)&&o.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(o):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=t>Zt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!1;break}if(i.previousSibling)break}if(s==null&&t==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){s=!0;break}if(i.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,s=e;s;s=s.parentNode){let i=this.getDesc(s),o;if(i&&(!t||i.node))if(r&&(o=i.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return i}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let s=e;s;s=s.parentNode){let i=this.getDesc(s);if(i)return i.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let s=this.children[t],i=r+s.size;if(r==e&&i!=r){for(;!s.border&&s.children.length;)for(let o=0;o<s.children.length;o++){let a=s.children[o];if(a.size){s=a;break}}return s}if(e<i)return s.descAt(e-r-s.border);r=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let i=0;r<this.children.length;r++){let o=this.children[r],a=i+o.size;if(a>e||o instanceof W_){s=e-i;break}i=a}if(s)return this.children[r].domFromPos(s-this.children[r].border,t);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof q_&&i.side>=0;r--);if(t<=0){let i,o=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,o=!1);return i&&t&&o&&!i.border&&!i.domAtom?i.domFromPos(i.size,t):{node:this.contentDOM,offset:i?Zt(i.dom)+1:0}}else{let i,o=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,o=!1);return i&&o&&!i.border&&!i.domAtom?i.domFromPos(0,t):{node:this.contentDOM,offset:i?Zt(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,i=-1;for(let o=r,a=0;;a++){let l=this.children[a],c=o+l.size;if(s==-1&&e<=c){let u=o+l.border;if(e>=u&&t<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,t,u);e=o;for(let d=a;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){s=Zt(h.dom)+1;break}e-=h.size}s==-1&&(s=0)}if(s>-1&&(c>t||a==this.children.length-1)){t=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=Zt(d.dom);break}t+=d.size}i==-1&&(i=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:t,fromOffset:s,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,s=!1){let i=Math.min(e,t),o=Math.max(e,t);for(let p=0,m=0;p<this.children.length;p++){let y=this.children[p],v=m+y.size;if(i>m&&o<v)return y.setSelection(e-m-y.border,t-m-y.border,r,s);m=v}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((pr||xn)&&e==t){let{node:p,offset:m}=a;if(p.nodeType==3){if(d=!!(m&&p.nodeValue[m-1]==`
`),d&&m==p.nodeValue.length)for(let y=p,v;y;y=y.parentNode){if(v=y.nextSibling){v.nodeName=="BR"&&(a=l={node:v.parentNode,offset:Zt(v)+1});break}let S=y.pmViewDesc;if(S&&S.node&&S.node.isBlock)break}}else{let y=p.childNodes[m-1];d=y&&(y.nodeName=="BR"||y.contentEditable=="false")}}if(pr&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let p=u.focusNode.childNodes[u.focusOffset];p&&p.contentEditable=="false"&&(s=!0)}if(!(s||d&&xn)&&io(a.node,a.offset,u.anchorNode,u.anchorOffset)&&io(l.node,l.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||e==t)&&!d){c.collapse(a.node,a.offset);try{e!=t&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>t){let m=a;a=l,l=m}let p=document.createRange();p.setEnd(l.node,l.offset),p.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,s=0;s<this.children.length;s++){let i=this.children[s],o=r+i.size;if(r==o?e<=o&&t>=r:e<o&&t>r){let a=r+i.border,l=o-i.border;if(e>=a&&t<=l){this.dirty=e==r||t==o?Bi:Wb,e==a&&t==l&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=zr:i.markDirty(e-a,t-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?Bi:zr}r=o}this.dirty=Bi}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Bi:Wb;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(e){return!1}}class q_ extends hu{constructor(e,t,r,s){let i,o=t.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!i)return s;if(i.parent)return i.parent.posBeforeChild(i)})),!t.type.spec.raw){if(o.nodeType!=1){let a=document.createElement("span");a.appendChild(o),o=a}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=t,this.widget=t,i=this}matchesWidget(e){return this.dirty==rr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class C6 extends hu{constructor(e,t,r,s){super(e,[],t,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class oo extends hu{constructor(e,t,r,s,i){super(e,[],r,s),this.mark=t,this.spec=i}static create(e,t,r,s){let i=s.nodeViews[t.type.name],o=i&&i(t,s,r);return(!o||!o.dom)&&(o=mo.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new oo(e,t,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&zr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=zr&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=rr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=rr}}slice(e,t,r){let s=oo.create(this.parent,this.mark,!0,r),i=this.children,o=this.size;t<o&&(i=Jp(i,t,o,r)),e>0&&(i=Jp(i,0,e,r));for(let a=0;a<i.length;a++)i[a].parent=s;return s.children=i,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Xs extends hu{constructor(e,t,r,s,i,o,a,l,c){super(e,[],i,o),this.node=t,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=a}static create(e,t,r,s,i,o){let a=i.nodeViews[t.type.name],l,c=a&&a(t,i,()=>{if(!l)return o;if(l.parent)return l.parent.posBeforeChild(l)},r,s),u=c&&c.dom,d=c&&c.contentDOM;if(t.isText){if(!u)u=document.createTextNode(t.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=mo.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!d&&!t.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),t.type.spec.draggable&&(u.draggable=!0));let h=u;return u=J_(u,r,t),c?l=new A6(e,t,r,s,u,d||null,h,c,i,o+1):t.isText?new _f(e,t,r,s,u,h,i):new Xs(e,t,r,s,u,d||null,h,i,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Z.empty)}return e}matchesNode(e,t,r){return this.dirty==rr&&e.eq(this.node)&&Qc(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,s=t,i=e.composing?this.localCompositionInfo(e,t):null,o=i&&i.pos>-1?i:null,a=i&&i.pos<0,l=new I6(this,o&&o.node,e);R6(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?ut.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,s)},(c,u,d,h)=>{l.syncToMarks(c.marks,r,e);let p;l.findNodeMatch(c,u,d,h)||a&&e.state.selection.from>s&&e.state.selection.to<s+c.nodeSize&&(p=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(c,u,d,p,e)||l.updateNextNode(c,u,d,e,h,s)||l.addNode(c,u,d,e,s),s+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Bi)&&(o&&this.protectLocalComposition(e,o),G_(this.contentDOM,this.children,e),va&&O6(this.dom))}localCompositionInfo(e,t){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof Le)||r<t||s>t+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let o=i.nodeValue,a=D6(this.node.content,o,r-t,s-t);return a<0?null:{node:i,pos:a,text:o}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:s}){if(this.getDesc(t))return;let i=t;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let o=new C6(this,i,t,s);e.input.compositionNodes.push(o),this.children=Jp(this.children,r,r+s.length,e,o)}update(e,t,r,s){return this.dirty==zr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,s),!0)}updateInner(e,t,r,s){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=rr}updateOuterDeco(e){if(Qc(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=K_(this.dom,this.nodeDOM,Kp(this.outerDeco,this.node,t),Kp(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Gb(n,e,t,r,s){J_(r,e,n);let i=new Xs(void 0,n,e,t,r,r,r,s,0);return i.contentDOM&&i.updateChildren(s,0),i}class _f extends Xs{constructor(e,t,r,s,i,o,a){super(e,t,r,s,i,null,o,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,s){return this.dirty==zr||this.dirty!=rr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=rr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=rr,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let s=this.node.cut(e,t),i=document.createTextNode(s.text);return new _f(this.parent,s,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=zr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class W_ extends hu{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==rr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class A6 extends Xs{constructor(e,t,r,s,i,o,a,l,c,u){super(e,t,r,s,i,o,a,c,u),this.spec=l}update(e,t,r,s){if(this.dirty==zr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,t,r);return i&&this.updateInner(e,t,r,s),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,s){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function G_(n,e,t){let r=n.firstChild,s=!1;for(let i=0;i<e.length;i++){let o=e[i],a=o.dom;if(a.parentNode==n){for(;a!=r;)r=Kb(r),s=!0;r=r.nextSibling}else s=!0,n.insertBefore(a,r);if(o instanceof oo){let l=r?r.previousSibling:n.lastChild;G_(o.contentDOM,o.children,t),r=l?l.nextSibling:n.firstChild}}for(;r;)r=Kb(r),s=!0;s&&t.trackWrites==n&&(t.trackWrites=null)}const bl=function(n){n&&(this.nodeName=n)};bl.prototype=Object.create(null);const Fi=[new bl];function Kp(n,e,t){if(n.length==0)return Fi;let r=t?Fi[0]:new bl,s=[r];for(let i=0;i<n.length;i++){let o=n[i].type.attrs;if(o){o.nodeName&&s.push(r=new bl(o.nodeName));for(let a in o){let l=o[a];l!=null&&(t&&s.length==1&&s.push(r=new bl(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return s}function K_(n,e,t,r){if(t==Fi&&r==Fi)return e;let s=e;for(let i=0;i<r.length;i++){let o=r[i],a=t[i];if(i){let l;a&&a.nodeName==o.nodeName&&s!=n&&(l=s.parentNode)&&l.nodeName.toLowerCase()==o.nodeName||(l=document.createElement(o.nodeName),l.pmIsDeco=!0,l.appendChild(s),a=Fi[0]),s=l}k6(s,a||Fi[0],o)}return s}function k6(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=t.class?t.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)s.indexOf(r[i])==-1&&n.classList.remove(r[i]);for(let i=0;i<s.length;i++)r.indexOf(s[i])==-1&&n.classList.add(s[i]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)n.style.removeProperty(s[1])}t.style&&(n.style.cssText+=t.style)}}function J_(n,e,t){return K_(n,n,Fi,Kp(e,t,n.nodeType!=1))}function Qc(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function Kb(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class I6{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=M6(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let s=0,i=this.stack.length>>1,o=Math.min(i,e.length);for(;s<o&&(s==i-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<i;)this.destroyRest(),this.top.dirty=rr,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[i])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=oo.create(this.top,e[i],t,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,r,s){let i=-1,o;if(s>=this.preMatch.index&&(o=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&o.matchesNode(e,t,r))i=this.top.children.indexOf(o,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,t,r)&&!this.preMatch.matched.has(c)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,r,s,i){let o=this.top.children[s];return o.dirty==zr&&o.dom==o.contentDOM&&(o.dirty=Bi),o.update(e,t,r,i)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=t}}updateNextNode(e,t,r,s,i,o){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Xs){let c=this.preMatch.matched.get(l);if(c!=null&&c!=i)return!1;let u=l.dom,d,h=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=zr&&Qc(t,l.outerDeco));if(!h&&l.update(e,t,r,s))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(l,e,t,r,s,o)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Bi,d.updateChildren(s,o+1),d.dirty=rr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,s,i,o){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!Qc(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let a=Xs.create(this.top,t,r,s,i,o);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,t,r,s,i){let o=Xs.create(this.top,e,t,r,s,i);o.contentDOM&&o.updateChildren(s,i+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,t,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let i=new q_(this.top,e,t,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof oo;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof _f)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((xn||yn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new W_(this.top,[],r,null);t!=this.top?t.children.push(s):t.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function M6(n,e){let t=e,r=t.children.length,s=n.childCount,i=new Map,o=[];e:for(;s>0;){let a;for(;;)if(r){let c=t.children[r-1];if(c instanceof oo)t=c,r=c.children.length;else{a=c,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(l){if(l!=n.child(s-1))break;--s,i.set(a,s),o.push(a)}}return{index:s,matched:i,matches:o.reverse()}}function P6(n,e){return n.type.side-e.type.side}function R6(n,e,t,r){let s=e.locals(n),i=0;if(s.length==0){for(let c=0;c<n.childCount;c++){let u=n.child(c);r(u,s,e.forChild(i,u),c),i+=u.nodeSize}return}let o=0,a=[],l=null;for(let c=0;;){let u,d;for(;o<s.length&&s[o].to==i;){let v=s[o++];v.widget&&(u?(d||(d=[u])).push(v):u=v)}if(u)if(d){d.sort(P6);for(let v=0;v<d.length;v++)t(d[v],c,!!l)}else t(u,c,!!l);let h,p;if(l)p=-1,h=l,l=null;else if(c<n.childCount)p=c,h=n.child(c++);else break;for(let v=0;v<a.length;v++)a[v].to<=i&&a.splice(v--,1);for(;o<s.length&&s[o].from<=i&&s[o].to>i;)a.push(s[o++]);let m=i+h.nodeSize;if(h.isText){let v=m;o<s.length&&s[o].from<v&&(v=s[o].from);for(let S=0;S<a.length;S++)a[S].to<v&&(v=a[S].to);v<m&&(l=h.cut(v-i),h=h.cut(0,v-i),m=v,p=-1)}else for(;o<s.length&&s[o].to<m;)o++;let y=h.isInline&&!h.isLeaf?a.filter(v=>!v.inline):a.slice();r(h,y,e.forChild(i,h),p),i=m}}function O6(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function D6(n,e,t,r){for(let s=0,i=0;s<n.childCount&&i<=r;){let o=n.child(s++),a=i;if(i+=o.nodeSize,!o.isText)continue;let l=o.text;for(;s<n.childCount;){let c=n.child(s++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=t){if(i>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=t)return a+c;if(t==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function Jp(n,e,t,r,s){let i=[];for(let o=0,a=0;o<n.length;o++){let l=n[o],c=a,u=a+=l.size;c>=t||u<=e?i.push(l):(c<e&&i.push(l.slice(0,e-c,r)),s&&(i.push(s),s=void 0),u>t&&i.push(l.slice(t-c,l.size,r)))}return i}function $g(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let s=n.docView.nearestDesc(t.focusNode),i=s&&s.size==0,o=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(o<0)return null;let a=r.resolve(o),l,c;if(Sf(t)){for(l=o;s&&!s.node;)s=s.parent;let d=s.node;if(s&&d.isAtom&&Ae.isSelectable(d)&&s.parent&&!(d.isInline&&o6(t.focusNode,t.focusOffset,s.dom))){let h=s.posBefore;c=new Ae(o==h?a:r.resolve(h))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let d=o,h=o;for(let p=0;p<t.rangeCount;p++){let m=t.getRangeAt(p);d=Math.min(d,n.docView.posFromDOM(m.startContainer,m.startOffset,1)),h=Math.max(h,n.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(d<0)return null;[l,o]=h==n.state.selection.anchor?[h,d]:[d,h],a=r.resolve(o)}else l=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||n.state.selection.head<a.pos&&!i?1:-1;c=Bg(n,u,a,d)}return c}function Q_(n){return n.editable?n.hasFocus():X_(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function ds(n,e=!1){let t=n.state.selection;if(Y_(n,t),!!Q_(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&yn){let r=n.domSelectionRange(),s=n.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&io(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)L6(n);else{let{anchor:r,head:s}=t,i,o;Jb&&!(t instanceof Le)&&(t.$from.parent.inlineContent||(i=Qb(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(o=Qb(n,t.to))),n.docView.setSelection(r,s,n,e),Jb&&(i&&Yb(i),o&&Yb(o)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&N6(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const Jb=xn||yn&&$_<63;function Qb(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),s=r<t.childNodes.length?t.childNodes[r]:null,i=r?t.childNodes[r-1]:null;if(xn&&s&&s.contentEditable=="false")return Rh(s);if((!s||s.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(s)return Rh(s);if(i)return Rh(i)}}function Rh(n){return n.contentEditable="true",xn&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function Yb(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function N6(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,s=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=s)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!Q_(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function L6(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,s=r.nodeName=="IMG";s?t.setStart(r.parentNode,Zt(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!s&&!n.state.selection.visible&&Dn&&Ys<=11&&(r.disabled=!0,r.disabled=!1)}function Y_(n,e){if(e instanceof Ae){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(Xb(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else Xb(n)}function Xb(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function Bg(n,e,t,r){return n.someProp("createSelectionBetween",s=>s(n,e,t))||Le.between(e,t,r)}function Zb(n){return n.editable&&!n.hasFocus()?!1:X_(n)}function X_(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function V6(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return io(e.node,e.offset,t.anchorNode,t.anchorOffset)}function Qp(n,e){let{$anchor:t,$head:r}=n.selection,s=e>0?t.max(r):t.min(r),i=s.parent.inlineContent?s.depth?n.doc.resolve(e>0?s.after():s.before()):null:s;return i&&je.findFrom(i,e)}function Rs(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function ew(n,e,t){let r=n.state.selection;if(r instanceof Le)if(t.indexOf("s")>-1){let{$head:s}=r,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let o=n.state.doc.resolve(s.pos+i.nodeSize*(e<0?-1:1));return Rs(n,new Le(r.$anchor,o))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let s=Qp(n.state,e);return s&&s instanceof Ae?Rs(n,s):!1}else if(!(Xn&&t.indexOf("m")>-1)){let s=r.$head,i=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,o;if(!i||i.isText)return!1;let a=e<0?s.pos-i.nodeSize:s.pos;return i.isAtom||(o=n.docView.descAt(a))&&!o.contentDOM?Ae.isSelectable(i)?Rs(n,new Ae(e<0?n.state.doc.resolve(s.pos-i.nodeSize):s)):fu?Rs(n,new Le(n.state.doc.resolve(e<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Ae&&r.node.isInline)return Rs(n,new Le(e>0?r.$to:r.$from));{let s=Qp(n.state,e);return s?Rs(n,s):!1}}}function Yc(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function wl(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Ro(n,e){return e<0?$6(n):B6(n)}function $6(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s,i,o=!1;for(pr&&t.nodeType==1&&r<Yc(t)&&wl(t.childNodes[r],-1)&&(o=!0);;)if(r>0){if(t.nodeType!=1)break;{let a=t.childNodes[r-1];if(wl(a,-1))s=t,i=--r;else if(a.nodeType==3)t=a,r=t.nodeValue.length;else break}}else{if(Z_(t))break;{let a=t.previousSibling;for(;a&&wl(a,-1);)s=t.parentNode,i=Zt(a),a=a.previousSibling;if(a)t=a,r=Yc(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}o?Yp(n,t,r):s&&Yp(n,s,i)}function B6(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let s=Yc(t),i,o;for(;;)if(r<s){if(t.nodeType!=1)break;let a=t.childNodes[r];if(wl(a,1))i=t,o=++r;else break}else{if(Z_(t))break;{let a=t.nextSibling;for(;a&&wl(a,1);)i=a.parentNode,o=Zt(a)+1,a=a.nextSibling;if(a)t=a,r=0,s=Yc(t);else{if(t=t.parentNode,t==n.dom)break;r=s=0}}}i&&Yp(n,i,o)}function Z_(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function F6(n,e){for(;n&&e==n.childNodes.length&&!du(n);)e=Zt(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function z6(n,e){for(;n&&!e&&!du(n);)e=Zt(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function Yp(n,e,t){if(e.nodeType!=3){let i,o;(o=F6(e,t))?(e=o,t=0):(i=z6(e,t))&&(e=i,t=i.nodeValue.length)}let r=n.domSelection();if(!r)return;if(Sf(r)){let i=document.createRange();i.setEnd(e,t),i.setStart(e,t),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:s}=n;setTimeout(()=>{n.state==s&&ds(n)},50)}function tw(n,e){let t=n.state.doc.resolve(e);if(!(yn||u6)&&t.parent.inlineContent){let s=n.coordsAtPos(e);if(e>t.start()){let i=n.coordsAtPos(e-1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left<s.left?"ltr":"rtl"}if(e<t.end()){let i=n.coordsAtPos(e+1),o=(i.top+i.bottom)/2;if(o>s.top&&o<s.bottom&&Math.abs(i.left-s.left)>1)return i.left>s.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function nw(n,e,t){let r=n.state.selection;if(r instanceof Le&&!r.empty||t.indexOf("s")>-1||Xn&&t.indexOf("m")>-1)return!1;let{$from:s,$to:i}=r;if(!s.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let o=Qp(n.state,e);if(o&&o instanceof Ae)return Rs(n,o)}if(!s.parent.inlineContent){let o=e<0?s:i,a=r instanceof qn?je.near(o,e):je.findFrom(o,e);return a?Rs(n,a):!1}return!1}function rw(n,e){if(!(n.state.selection instanceof Le))return!0;let{$head:t,$anchor:r,empty:s}=n.state.selection;if(!t.sameParent(r))return!0;if(!s)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(i&&!i.isText){let o=n.state.tr;return e<0?o.delete(t.pos-i.nodeSize,t.pos):o.delete(t.pos,t.pos+i.nodeSize),n.dispatch(o),!0}return!1}function sw(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function j6(n){if(!xn||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;sw(n,r,"true"),setTimeout(()=>sw(n,r,"false"),20)}return!1}function H6(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function U6(n,e){let t=e.keyCode,r=H6(e);if(t==8||Xn&&t==72&&r=="c")return rw(n,-1)||Ro(n,-1);if(t==46&&!e.shiftKey||Xn&&t==68&&r=="c")return rw(n,1)||Ro(n,1);if(t==13||t==27)return!0;if(t==37||Xn&&t==66&&r=="c"){let s=t==37?tw(n,n.state.selection.from)=="ltr"?-1:1:-1;return ew(n,s,r)||Ro(n,s)}else if(t==39||Xn&&t==70&&r=="c"){let s=t==39?tw(n,n.state.selection.from)=="ltr"?1:-1:1;return ew(n,s,r)||Ro(n,s)}else{if(t==38||Xn&&t==80&&r=="c")return nw(n,-1,r)||Ro(n,-1);if(t==40||Xn&&t==78&&r=="c")return j6(n)||nw(n,1,r)||Ro(n,1);if(r==(Xn?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function Fg(n,e){n.someProp("transformCopied",p=>{e=p(e,n)});let t=[],{content:r,openStart:s,openEnd:i}=e;for(;s>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,i--;let p=r.firstChild;t.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let o=n.someProp("clipboardSerializer")||mo.fromSchema(n.state.schema),a=ix(),l=a.createElement("div");l.appendChild(o.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=sx[c.nodeName.toLowerCase()]);){for(let p=u.length-1;p>=0;p--){let m=a.createElement(u[p]);for(;l.firstChild;)m.appendChild(l.firstChild);l.appendChild(m),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${s} ${i}${d?` -${d}`:""} ${JSON.stringify(t)}`);let h=n.someProp("clipboardTextSerializer",p=>p(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function ex(n,e,t,r,s){let i=s.parent.type.spec.code,o,a;if(!t&&!e)return null;let l=e&&(r||i||!t);if(l){if(n.someProp("transformPastedText",h=>{e=h(e,i||r,n)}),i)return e?new pe(Z.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):pe.empty;let d=n.someProp("clipboardTextParser",h=>h(e,s,r,n));if(d)a=d;else{let h=s.marks(),{schema:p}=n.state,m=mo.fromSchema(p);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(y=>{let v=o.appendChild(document.createElement("p"));y&&v.appendChild(m.serializeNode(p.text(y,h)))})}}else n.someProp("transformPastedHTML",d=>{t=d(t,n)}),o=K6(t),fu&&J6(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=o.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;o=h}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||Qs.fromSchema(n.state.schema)).parseSlice(o,{preserveWhitespace:!!(l||u),context:s,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!q6.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)a=Q6(iw(a,+u[1],+u[2]),u[4]);else if(a=pe.maxOpen(W6(a.content,s),!0),a.openStart||a.openEnd){let d=0,h=0;for(let p=a.content.firstChild;d<a.openStart&&!p.type.spec.isolating;d++,p=p.firstChild);for(let p=a.content.lastChild;h<a.openEnd&&!p.type.spec.isolating;h++,p=p.lastChild);a=iw(a,d,h)}return n.someProp("transformPasted",d=>{a=d(a,n)}),a}const q6=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function W6(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let s=e.node(t).contentMatchAt(e.index(t)),i,o=[];if(n.forEach(a=>{if(!o)return;let l=s.findWrapping(a.type),c;if(!l)return o=null;if(c=o.length&&i.length&&nx(l,i,a,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=rx(o[o.length-1],i.length));let u=tx(a,l);o.push(u),s=s.matchType(u.type),i=l}}),o)return Z.from(o)}return n}function tx(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,Z.from(n));return n}function nx(n,e,t,r,s){if(s<n.length&&s<e.length&&n[s]==e[s]){let i=nx(n,e,t,r.lastChild,s+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(s==n.length-1?t.type:n[s+1]))return r.copy(r.content.append(Z.from(tx(t,n,s+1))))}}function rx(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,rx(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(Z.empty,!0);return n.copy(t.append(r))}function Xp(n,e,t,r,s,i){let o=e<0?n.firstChild:n.lastChild,a=o.content;return n.childCount>1&&(i=0),s<r-1&&(a=Xp(a,e,t,r,s+1,i)),s>=t&&(a=e<0?o.contentMatchAt(0).fillBefore(a,i<=s).append(a):a.append(o.contentMatchAt(o.childCount).fillBefore(Z.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,o.copy(a))}function iw(n,e,t){return e<n.openStart&&(n=new pe(Xp(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new pe(Xp(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const sx={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let ow=null;function ix(){return ow||(ow=document.implementation.createHTMLDocument("title"))}let Oh=null;function G6(n){let e=window.trustedTypes;return e?(Oh||(Oh=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),Oh.createHTML(n)):n}function K6(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=ix().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),s;if((s=r&&sx[r[1].toLowerCase()])&&(n=s.map(i=>"<"+i+">").join("")+n+s.map(i=>"</"+i+">").reverse().join("")),t.innerHTML=G6(n),s)for(let i=0;i<s.length;i++)t=t.querySelector(s[i])||t;return t}function J6(n){let e=n.querySelectorAll(yn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function Q6(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:s,openStart:i,openEnd:o}=n;for(let a=r.length-2;a>=0;a-=2){let l=t.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;s=Z.from(l.create(r[a+1],s)),i++,o++}return new pe(s,i,o)}const Cn={},An={},Y6={touchstart:!0,touchmove:!0};class X6{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function Z6(n){for(let e in Cn){let t=Cn[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{t5(n,r)&&!zg(n,r)&&(n.editable||!(r.type in An))&&t(n,r)},Y6[e]?{passive:!0}:void 0)}xn&&n.dom.addEventListener("input",()=>null),Zp(n)}function zs(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function e5(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function Zp(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>zg(n,r))})}function zg(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function t5(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function n5(n,e){!zg(n,e)&&Cn[e.type]&&(n.editable||!(e.type in An))&&Cn[e.type](n,e)}An.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!ax(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(is&&yn&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),va&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",s=>s(n,Ni(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||U6(n,t)?t.preventDefault():zs(n,"key")};An.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};An.keypress=(n,e)=>{let t=e;if(ax(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||Xn&&t.metaKey)return;if(n.someProp("handleKeyPress",s=>s(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof Le)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(t.charCode);!/[\r\n]/.test(s)&&!n.someProp("handleTextInput",i=>i(n,r.$from.pos,r.$to.pos,s))&&n.dispatch(n.state.tr.insertText(s).scrollIntoView()),t.preventDefault()}};function xf(n){return{left:n.clientX,top:n.clientY}}function r5(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function jg(n,e,t,r,s){if(r==-1)return!1;let i=n.state.doc.resolve(r);for(let o=i.depth+1;o>0;o--)if(n.someProp(e,a=>o>i.depth?a(n,t,i.nodeAfter,i.before(o),s,!0):a(n,t,i.node(o),i.before(o),s,!1)))return!0;return!1}function ta(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function s5(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&Ae.isSelectable(r)?(ta(n,new Ae(t)),!0):!1}function i5(n,e){if(e==-1)return!1;let t=n.state.selection,r,s;t instanceof Ae&&(r=t.node);let i=n.state.doc.resolve(e);for(let o=i.depth+1;o>0;o--){let a=o>i.depth?i.nodeAfter:i.node(o);if(Ae.isSelectable(a)){r&&t.$from.depth>0&&o>=t.$from.depth&&i.before(t.$from.depth+1)==t.$from.pos?s=i.before(t.$from.depth):s=i.before(o);break}}return s!=null?(ta(n,Ae.create(n.state.doc,s)),!0):!1}function o5(n,e,t,r,s){return jg(n,"handleClickOn",e,t,r)||n.someProp("handleClick",i=>i(n,e,r))||(s?i5(n,t):s5(n,t))}function a5(n,e,t,r){return jg(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",s=>s(n,e,r))}function l5(n,e,t,r){return jg(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",s=>s(n,e,r))||u5(n,t,r)}function u5(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(ta(n,Le.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let i=s.depth+1;i>0;i--){let o=i>s.depth?s.nodeAfter:s.node(i),a=s.before(i);if(o.inlineContent)ta(n,Le.create(r,a+1,a+1+o.content.size));else if(Ae.isSelectable(o))ta(n,Ae.create(r,a));else continue;return!0}}function Hg(n){return Xc(n)}const ox=Xn?"metaKey":"ctrlKey";Cn.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=Hg(n),s=Date.now(),i="singleClick";s-n.input.lastClick.time<500&&r5(t,n.input.lastClick)&&!t[ox]&&(n.input.lastClick.type=="singleClick"?i="doubleClick":n.input.lastClick.type=="doubleClick"&&(i="tripleClick")),n.input.lastClick={time:s,x:t.clientX,y:t.clientY,type:i};let o=n.posAtCoords(xf(t));o&&(i=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new c5(n,o,t,!!r)):(i=="doubleClick"?a5:l5)(n,o.pos,o.inside,t)?t.preventDefault():zs(n,"pointer"))};class c5{constructor(e,t,r,s){this.view=e,this.pos=t,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[ox],this.allowDefault=r.shiftKey;let i,o;if(t.inside>-1)i=e.state.doc.nodeAt(t.inside),o=t.inside;else{let u=e.state.doc.resolve(t.pos);i=u.parent,o=u.depth?u.before():0}const a=s?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||c instanceof Ae&&c.from<=o&&c.to>o)&&(this.mightDrag={node:i,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&pr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),zs(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ds(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(xf(e))),this.updateAllowDefault(e),this.allowDefault||!t?zs(this.view,"pointer"):o5(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||xn&&this.mightDrag&&!this.mightDrag.node.isAtom||yn&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(ta(this.view,je.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):zs(this.view,"pointer")}move(e){this.updateAllowDefault(e),zs(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Cn.touchstart=n=>{n.input.lastTouch=Date.now(),Hg(n),zs(n,"pointer")};Cn.touchmove=n=>{n.input.lastTouch=Date.now(),zs(n,"pointer")};Cn.contextmenu=n=>Hg(n);function ax(n,e){return n.composing?!0:xn&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const d5=is?5e3:-1;An.compositionstart=An.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof Le&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),Xc(n,!0),n.markCursor=null;else if(Xc(n,!e.selection.empty),pr&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let s=r.focusNode,i=r.focusOffset;s&&s.nodeType==1&&i!=0;){let o=i<0?s.lastChild:s.childNodes[i-1];if(!o)break;if(o.nodeType==3){let a=n.domSelection();a&&a.collapse(o,o.nodeValue.length);break}else s=o,i=-1}}n.input.composing=!0}lx(n,d5)};An.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,lx(n,20))};function lx(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>Xc(n),e))}function ux(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=h5());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function f5(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=s6(e.focusNode,e.focusOffset),r=i6(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let s=r.pmViewDesc,i=n.domObserver.lastChangedTextNode;if(t==i||r==i)return i;if(!s||!s.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let o=t.pmViewDesc;if(!(!o||!o.isText(t.nodeValue)))return r}}return t||r}function h5(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function Xc(n,e=!1){if(!(is&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),ux(n),e||n.docView&&n.docView.dirty){let t=$g(n);return t&&!t.eq(n.state.selection)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!n.state.selection.empty?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function p5(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Kl=Dn&&Ys<15||va&&c6<604;Cn.copy=An.cut=(n,e)=>{let t=e,r=n.state.selection,s=t.type=="cut";if(r.empty)return;let i=Kl?null:t.clipboardData,o=r.content(),{dom:a,text:l}=Fg(n,o);i?(t.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):p5(n,a),s&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function m5(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function g5(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Jl(n,r.value,null,s,e):Jl(n,r.textContent,r.innerHTML,s,e)},50)}function Jl(n,e,t,r,s){let i=ex(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,s,i||pe.empty)))return!0;if(!i)return!1;let o=m5(i),a=o?n.state.tr.replaceSelectionWith(o,r):n.state.tr.replaceSelection(i);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function cx(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}An.paste=(n,e)=>{let t=e;if(n.composing&&!is)return;let r=Kl?null:t.clipboardData,s=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&Jl(n,cx(r),r.getData("text/html"),s,t)?t.preventDefault():g5(n,t)};class dx{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const y5=Xn?"altKey":"ctrlKey";function fx(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[y5]}Cn.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let s=n.state.selection,i=s.empty?null:n.posAtCoords(xf(t)),o;if(!(i&&i.pos>=s.from&&i.pos<=(s instanceof Ae?s.to-1:s.to))){if(r&&r.mightDrag)o=Ae.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let d=n.docView.nearestDesc(t.target,!0);d&&d.node.type.spec.draggable&&d!=n.docView&&(o=Ae.create(n.state.doc,d.posBefore))}}let a=(o||n.state.selection).content(),{dom:l,text:c,slice:u}=Fg(n,a);(!t.dataTransfer.files.length||!yn||$_>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Kl?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",Kl||t.dataTransfer.setData("text/plain",c),n.dragging=new dx(u,fx(n,t),o)};Cn.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};An.dragover=An.dragenter=(n,e)=>e.preventDefault();An.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let s=n.posAtCoords(xf(t));if(!s)return;let i=n.state.doc.resolve(s.pos),o=r&&r.slice;o?n.someProp("transformPasted",m=>{o=m(o,n)}):o=ex(n,cx(t.dataTransfer),Kl?null:t.dataTransfer.getData("text/html"),!1,i);let a=!!(r&&fx(n,t));if(n.someProp("handleDrop",m=>m(n,t,o||pe.empty,a))){t.preventDefault();return}if(!o)return;t.preventDefault();let l=o?I_(n.state.doc,i.pos,o):i.pos;l==null&&(l=i.pos);let c=n.state.tr;if(a){let{node:m}=r;m?m.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,o.content.firstChild):c.replaceRange(u,u,o),c.doc.eq(h))return;let p=c.doc.resolve(u);if(d&&Ae.isSelectable(o.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(o.content.firstChild))c.setSelection(new Ae(p));else{let m=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((y,v,S,T)=>m=T),c.setSelection(Bg(n,p,c.doc.resolve(m)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};Cn.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&ds(n)},20))};Cn.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Cn.beforeinput=(n,e)=>{if(yn&&is&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",i=>i(n,Ni(8,"Backspace")))))return;let{$cursor:s}=n.state.selection;s&&s.pos>0&&n.dispatch(n.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let n in An)Cn[n]=An[n];function Ql(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class Zc{constructor(e,t){this.toDOM=e,this.spec=t||Gi,this.side=this.spec.side||0}map(e,t,r,s){let{pos:i,deleted:o}=e.mapResult(t.from+s,this.side<0?-1:1);return o?null:new er(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Zc&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ql(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Zs{constructor(e,t){this.attrs=e,this.spec=t||Gi}map(e,t,r,s){let i=e.map(t.from+s,this.spec.inclusiveStart?-1:1)-r,o=e.map(t.to+s,this.spec.inclusiveEnd?1:-1)-r;return i>=o?null:new er(i,o,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof Zs&&Ql(this.attrs,e.attrs)&&Ql(this.spec,e.spec)}static is(e){return e.type instanceof Zs}destroy(){}}class Ug{constructor(e,t){this.attrs=e,this.spec=t||Gi}map(e,t,r,s){let i=e.mapResult(t.from+s,1);if(i.deleted)return null;let o=e.mapResult(t.to+s,-1);return o.deleted||o.pos<=i.pos?null:new er(i.pos-r,o.pos-r,this)}valid(e,t){let{index:r,offset:s}=e.content.findIndex(t.from),i;return s==t.from&&!(i=e.child(r)).isText&&s+i.nodeSize==t.to}eq(e){return this==e||e instanceof Ug&&Ql(this.attrs,e.attrs)&&Ql(this.spec,e.spec)}destroy(){}}class er{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new er(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new er(e,e,new Zc(t,r))}static inline(e,t,r,s){return new er(e,t,new Zs(r,s))}static node(e,t,r,s){return new er(e,t,new Ug(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof Zs}get widget(){return this.type instanceof Zc}}const zo=[],Gi={};class Ot{constructor(e,t){this.local=e.length?e:zo,this.children=t.length?t:zo}static create(e,t){return t.length?ed(t,e,0,Gi):fn}find(e,t,r){let s=[];return this.findInner(e??0,t??1e9,s,0,r),s}findInner(e,t,r,s,i){for(let o=0;o<this.local.length;o++){let a=this.local[o];a.from<=t&&a.to>=e&&(!i||i(a.spec))&&r.push(a.copy(a.from+s,a.to+s))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<t&&this.children[o+1]>e){let a=this.children[o]+1;this.children[o+2].findInner(e-a,t-a,r,s+a,i)}}map(e,t,r){return this==fn||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Gi)}mapInner(e,t,r,s,i){let o;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,s);l&&l.type.valid(t,l)?(o||(o=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?v5(this.children,o||[],e,t,r,s,i):o?new Ot(o.sort(Ki),zo):fn}add(e,t){return t.length?this==fn?Ot.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let s,i=0;e.forEach((a,l)=>{let c=l+r,u;if(u=px(t,a,c)){for(s||(s=this.children.slice());i<s.length&&s[i]<l;)i+=3;s[i]==l?s[i+2]=s[i+2].addInner(a,u,c+1):s.splice(i,0,l,l+a.nodeSize,ed(u,a,c+1,Gi)),i+=3}});let o=hx(i?mx(t):t,-r);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||o.splice(a--,1);return new Ot(o.length?this.local.concat(o).sort(Ki):this.local,s||this.children)}remove(e){return e.length==0||this==fn?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,s=this.local;for(let i=0;i<r.length;i+=3){let o,a=r[i]+t,l=r[i+1]+t;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[i+2].removeInner(o,a+1);c!=fn?r[i+2]=c:(r.splice(i,3),i-=3)}if(s.length){for(let i=0,o;i<e.length;i++)if(o=e[i])for(let a=0;a<s.length;a++)s[a].eq(o,t)&&(s==this.local&&(s=this.local.slice()),s.splice(a--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new Ot(s,r):fn}forChild(e,t){if(this==fn)return this;if(t.isLeaf)return Ot.empty;let r,s;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let i=e+1,o=i+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<o&&l.to>i&&l.type instanceof Zs){let c=Math.max(i,l.from)-i,u=Math.min(o,l.to)-i;c<u&&(s||(s=[])).push(l.copy(c,u))}}if(s){let a=new Ot(s.sort(Ki),zo);return r?new Ns([a,r]):a}return r||fn}eq(e){if(this==e)return!0;if(!(e instanceof Ot)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return qg(this.localsInner(e))}localsInner(e){if(this==fn)return zo;if(e.inlineContent||!this.local.some(Zs.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Zs||t.push(this.local[r]);return t}forEachSet(e){e(this)}}Ot.empty=new Ot([],[]);Ot.removeOverlap=qg;const fn=Ot.empty;class Ns{constructor(e){this.members=e}map(e,t){const r=this.members.map(s=>s.map(e,t,Gi));return Ns.from(r)}forChild(e,t){if(t.isLeaf)return Ot.empty;let r=[];for(let s=0;s<this.members.length;s++){let i=this.members[s].forChild(e,t);i!=fn&&(i instanceof Ns?r=r.concat(i.members):r.push(i))}return Ns.from(r)}eq(e){if(!(e instanceof Ns)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let s=0;s<this.members.length;s++){let i=this.members[s].localsInner(e);if(i.length)if(!t)t=i;else{r&&(t=t.slice(),r=!1);for(let o=0;o<i.length;o++)t.push(i[o])}}return t?qg(r?t:t.sort(Ki)):zo}static from(e){switch(e.length){case 0:return fn;case 1:return e[0];default:return new Ns(e.every(t=>t instanceof Ot)?e:e.reduce((t,r)=>t.concat(r instanceof Ot?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function v5(n,e,t,r,s,i,o){let a=n.slice();for(let c=0,u=i;c<t.maps.length;c++){let d=0;t.maps[c].forEach((h,p,m,y)=>{let v=y-m-(p-h);for(let S=0;S<a.length;S+=3){let T=a[S+1];if(T<0||h>T+u-d)continue;let b=a[S]+u-d;p>=b?a[S+1]=h<=b?-2:-1:h>=u&&v&&(a[S]+=v,a[S+1]+=v)}d+=v}),u=t.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=t.map(n[c]+i),d=u-s;if(d<0||d>=r.content.size){l=!0;continue}let h=t.map(n[c+1]+i,-1),p=h-s,{index:m,offset:y}=r.content.findIndex(d),v=r.maybeChild(m);if(v&&y==d&&y+v.nodeSize==p){let S=a[c+2].mapInner(t,v,u+1,n[c]+i+1,o);S!=fn?(a[c]=d,a[c+1]=p,a[c+2]=S):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=b5(a,n,e,t,s,i,o),u=ed(c,r,0,o);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let p=u.children[d];for(;h<a.length&&a[h]<p;)h+=3;a.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new Ot(e.sort(Ki),a)}function hx(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let s=n[r];t.push(new er(s.from+e,s.to+e,s.type))}return t}function b5(n,e,t,r,s,i,o){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,s,c);d?t.push(d):o.onRemove&&o.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],e[l]+i+1);return t}function px(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,s=null;for(let i=0,o;i<n.length;i++)(o=n[i])&&o.from>t&&o.to<r&&((s||(s=[])).push(o),n[i]=null);return s}function mx(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function ed(n,e,t,r){let s=[],i=!1;e.forEach((a,l)=>{let c=px(n,a,l+t);if(c){i=!0;let u=ed(c,a,t+l+1,r);u!=fn&&s.push(l,l+a.nodeSize,u)}});let o=hx(i?mx(n):n,-t).sort(Ki);for(let a=0;a<o.length;a++)o[a].type.valid(e,o[a])||(r.onRemove&&r.onRemove(o[a].spec),o.splice(a--,1));return o.length||s.length?new Ot(o,s):fn}function Ki(n,e){return n.from-e.from||n.to-e.to}function qg(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let s=t+1;s<e.length;s++){let i=e[s];if(i.from==r.from){i.to!=r.to&&(e==n&&(e=n.slice()),e[s]=i.copy(i.from,r.to),aw(e,s+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,i.from),aw(e,s,r.copy(i.from,r.to)));break}}}return e}function aw(n,e,t){for(;e<n.length&&Ki(t,n[e])>0;)e++;n.splice(e,0,t)}function Dh(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=fn&&e.push(r)}),n.cursorWrapper&&e.push(Ot.create(n.state.doc,[n.cursorWrapper.deco])),Ns.from(e)}const w5={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},T5=Dn&&Ys<=11;class E5{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class S5{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new E5,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);Dn&&Ys<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),T5&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,w5)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(Zb(this.view)){if(this.suppressingSelectionUpdates)return ds(this.view);if(Dn&&Ys<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&io(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let i=e.focusNode;i;i=ya(i))t.add(i);for(let i=e.anchorNode;i;i=ya(i))if(t.has(i)){r=i;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&Zb(e)&&!this.ignoreSelectionChange(r),i=-1,o=-1,a=!1,l=[];if(e.editable)for(let u=0;u<t.length;u++){let d=this.registerMutation(t[u],l);d&&(i=i<0?d.from:Math.min(d.from,i),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(a=!0))}if(pr&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,h]=u;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of u){let p=h.parentNode;p&&p.nodeName=="LI"&&(!d||C5(e,d)!=p)&&h.remove()}}}let c=null;i<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Sf(r)&&(c=$g(e))&&c.eq(je.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,ds(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||s)&&(i>-1&&(e.docView.markDirty(i,o),_5(e)),this.handleDOMChange(i,o,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||ds(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];t.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,i=e.nextSibling;if(Dn&&Ys<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h)}let o=s&&s.parentNode==e.target?Zt(s)+1:0,a=r.localPosFromDOM(e.target,o,-1),l=i&&i.parentNode==e.target?Zt(i):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let lw=new WeakMap,uw=!1;function _5(n){if(!lw.has(n)&&(lw.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=pr,uw)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),uw=!0}}function cw(n,e){let t=e.startContainer,r=e.startOffset,s=e.endContainer,i=e.endOffset,o=n.domAtPos(n.state.selection.anchor);return io(o.node,o.offset,s,i)&&([t,r,s,i]=[s,i,t,r]),{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:i}}function x5(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return cw(n,s)}let t;function r(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?cw(n,t):null}function C5(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function A5(n,e,t){let{node:r,fromOffset:s,toOffset:i,from:o,to:a}=n.docView.parseRange(e,t),l=n.domSelectionRange(),c,u=l.anchorNode;if(u&&n.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],Sf(l)||c.push({node:l.focusNode,offset:l.focusOffset})),yn&&n.input.lastKeyCode===8)for(let v=i;v>s;v--){let S=r.childNodes[v-1],T=S.pmViewDesc;if(S.nodeName=="BR"&&!T){i=v;break}if(!T||T.size)break}let d=n.state.doc,h=n.someProp("domParser")||Qs.fromSchema(n.state.schema),p=d.resolve(o),m=null,y=h.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:s,to:i,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:k5,context:p});if(c&&c[0].pos!=null){let v=c[0].pos,S=c[1]&&c[1].pos;S==null&&(S=v),m={anchor:v+o,head:S+o}}return{doc:y,sel:m,from:o,to:a}}function k5(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(xn&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||xn&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const I5=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function M5(n,e,t,r,s){let i=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let _=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,M=$g(n,_);if(M&&!n.state.selection.eq(M)){if(yn&&is&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",P=>P(n,Ni(13,"Enter"))))return;let I=n.state.tr.setSelection(M);_=="pointer"?I.setMeta("pointer",!0):_=="key"&&I.scrollIntoView(),i&&I.setMeta("composition",i),n.dispatch(I)}return}let o=n.state.doc.resolve(e),a=o.sharedDepth(t);e=o.before(a+1),t=n.state.doc.resolve(t).after(a+1);let l=n.state.selection,c=A5(n,e,t),u=n.state.doc,d=u.slice(c.from,c.to),h,p;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(h=n.state.selection.to,p="end"):(h=n.state.selection.from,p="start"),n.input.lastKeyCode=null;let m=O5(d.content,c.doc.content,c.from,h,p);if(m&&n.input.domChangeCount++,(va&&n.input.lastIOSEnter>Date.now()-225||is)&&s.some(_=>_.nodeType==1&&!I5.test(_.nodeName))&&(!m||m.endA>=m.endB)&&n.someProp("handleKeyDown",_=>_(n,Ni(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!m)if(r&&l instanceof Le&&!l.empty&&l.$head.sameParent(l.$anchor)&&!n.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let _=dw(n,n.state.doc,c.sel);if(_&&!_.eq(n.state.selection)){let M=n.state.tr.setSelection(_);i&&M.setMeta("composition",i),n.dispatch(M)}}return}n.state.selection.from<n.state.selection.to&&m.start==m.endB&&n.state.selection instanceof Le&&(m.start>n.state.selection.from&&m.start<=n.state.selection.from+2&&n.state.selection.from>=c.from?m.start=n.state.selection.from:m.endA<n.state.selection.to&&m.endA>=n.state.selection.to-2&&n.state.selection.to<=c.to&&(m.endB+=n.state.selection.to-m.endA,m.endA=n.state.selection.to)),Dn&&Ys<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let y=c.doc.resolveNoCache(m.start-c.from),v=c.doc.resolveNoCache(m.endB-c.from),S=u.resolve(m.start),T=y.sameParent(v)&&y.parent.inlineContent&&S.end()>=m.endA,b;if((va&&n.input.lastIOSEnter>Date.now()-225&&(!T||s.some(_=>_.nodeName=="DIV"||_.nodeName=="P"))||!T&&y.pos<c.doc.content.size&&(!y.sameParent(v)||!y.parent.inlineContent)&&!/\S/.test(c.doc.textBetween(y.pos,v.pos,"",""))&&(b=je.findFrom(c.doc.resolve(y.pos+1),1,!0))&&b.head>y.pos)&&n.someProp("handleKeyDown",_=>_(n,Ni(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>m.start&&R5(u,m.start,m.endA,y,v)&&n.someProp("handleKeyDown",_=>_(n,Ni(8,"Backspace")))){is&&yn&&n.domObserver.suppressSelectionUpdates();return}yn&&m.endB==m.start&&(n.input.lastChromeDelete=Date.now()),is&&!T&&y.start()!=v.start()&&v.parentOffset==0&&y.depth==v.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,v=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{n.someProp("handleKeyDown",function(_){return _(n,Ni(13,"Enter"))})},20));let C=m.start,O=m.endA,N,A,x;if(T){if(y.pos==v.pos)Dn&&Ys<=11&&y.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>ds(n),20)),N=n.state.tr.delete(C,O),A=u.resolve(m.start).marksAcross(u.resolve(m.endA));else if(m.endA==m.endB&&(x=P5(y.parent.content.cut(y.parentOffset,v.parentOffset),S.parent.content.cut(S.parentOffset,m.endA-S.start()))))N=n.state.tr,x.type=="add"?N.addMark(C,O,x.mark):N.removeMark(C,O,x.mark);else if(y.parent.child(y.index()).isText&&y.index()==v.index()-(v.textOffset?0:1)){let _=y.parent.textBetween(y.parentOffset,v.parentOffset);if(n.someProp("handleTextInput",M=>M(n,C,O,_)))return;N=n.state.tr.insertText(_,C,O)}}if(N||(N=n.state.tr.replace(C,O,c.doc.slice(m.start-c.from,m.endB-c.from))),c.sel){let _=dw(n,N.doc,c.sel);_&&!(yn&&n.composing&&_.empty&&(m.start!=m.endB||n.input.lastChromeDelete<Date.now()-100)&&(_.head==C||_.head==N.mapping.map(O)-1)||Dn&&_.empty&&_.head==C)&&N.setSelection(_)}A&&N.ensureMarks(A),i&&N.setMeta("composition",i),n.dispatch(N.scrollIntoView())}function dw(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:Bg(n,e.resolve(t.anchor),e.resolve(t.head))}function P5(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,s=t,i=r,o,a,l;for(let u=0;u<r.length;u++)s=r[u].removeFromSet(s);for(let u=0;u<t.length;u++)i=t[u].removeFromSet(i);if(s.length==1&&i.length==0)a=s[0],o="add",l=u=>u.mark(a.addToSet(u.marks));else if(s.length==0&&i.length==1)a=i[0],o="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(Z.from(c).eq(n))return{mark:a,type:o}}function R5(n,e,t,r,s){if(t-e<=s.pos-r.pos||Nh(r,!0,!1)<s.pos)return!1;let i=n.resolve(e);if(!r.parent.isTextblock){let a=i.nodeAfter;return a!=null&&t==e+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let o=n.resolve(Nh(i,!0,!0));return!o.parent.isTextblock||o.pos>t||Nh(o,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function Nh(n,e,t){let r=n.depth,s=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,s++,e=!1;if(t){let i=n.node(r).maybeChild(n.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,s++}return s}function O5(n,e,t,r,s){let i=n.findDiffStart(e,t);if(i==null)return null;let{a:o,b:a}=n.findDiffEnd(e,t+n.size,t+e.size);if(s=="end"){let l=Math.max(0,i-Math.min(o,a));r-=o+l-i}if(o<i&&n.size<e.size){let l=r<=i&&r>=o?i-r:0;i-=l,i&&i<e.size&&fw(e.textBetween(i-1,i+1))&&(i+=l?1:-1),a=i+(a-o),o=i}else if(a<i){let l=r<=i&&r>=a?i-r:0;i-=l,i&&i<n.size&&fw(n.textBetween(i-1,i+1))&&(i+=l?1:-1),o=i+(o-a),a=i}return{start:i,endA:o,endB:a}}function fw(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class D5{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new X6,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(yw),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=mw(this),pw(this),this.nodeViews=gw(this),this.docView=Gb(this.state.doc,hw(this),Dh(this),this.dom,this),this.domObserver=new S5(this,(r,s,i,o)=>M5(this,r,s,i,o)),this.domObserver.start(),Z6(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Zp(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(yw),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let s=this.state,i=!1,o=!1;e.storedMarks&&this.composing&&(ux(this),o=!0),this.state=e;let a=s.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let p=gw(this);L5(p,this.nodeViews)&&(this.nodeViews=p,i=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&Zp(this),this.editable=mw(this),pw(this);let l=Dh(this),c=hw(this),u=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",d=i||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(s.selection))&&(o=!0);let h=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&h6(this);if(o){this.domObserver.stop();let p=d&&(Dn||yn)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&N5(s.selection,e.selection);if(d){let m=yn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=f5(this)),(i||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=Gb(e.doc,c,l,this.dom,this)),m&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&V6(this))?ds(this,p):(Y_(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&p6(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof Ae){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&zb(this,t.getBoundingClientRect(),e)}else zb(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let i=r.from+(this.state.doc.content.size-t.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(s=i)}this.dragging=new dx(e.slice,e.move,s<0?void 0:Ae.create(this.state.doc,s))}someProp(e,t){let r=this._props&&this._props[e],s;if(r!=null&&(s=t?t(r):r))return s;for(let o=0;o<this.directPlugins.length;o++){let a=this.directPlugins[o].props[e];if(a!=null&&(s=t?t(a):a))return s}let i=this.state.plugins;if(i)for(let o=0;o<i.length;o++){let a=i[o].props[e];if(a!=null&&(s=t?t(a):a))return s}}hasFocus(){if(Dn){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&m6(this.dom),ds(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return w6(this,e)}coordsAtPos(e,t=1){return H_(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let s=this.docView.posFromDOM(e,t,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,t){return x6(this,t||this.state,e)}pasteHTML(e,t){return Jl(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Jl(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return Fg(this,e)}destroy(){this.docView&&(e5(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Dh(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,n6())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return n5(this,e)}dispatch(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))}domSelectionRange(){let e=this.domSelection();return e?xn&&this.root.nodeType===11&&a6(this.dom.ownerDocument)==this.dom&&x5(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function hw(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[er.node(0,n.state.doc.content.size,e)]}function pw(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:er.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function mw(n){return!n.someProp("editable",e=>e(n.state)===!1)}function N5(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function gw(n){let e=Object.create(null);function t(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function L5(n,e){let t=0,r=0;for(let s in n){if(n[s]!=e[s])return!0;t++}for(let s in e)r++;return t!=r}function yw(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var ui={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},td={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},V5=typeof navigator<"u"&&/Mac/.test(navigator.platform),$5=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var en=0;en<10;en++)ui[48+en]=ui[96+en]=String(en);for(var en=1;en<=24;en++)ui[en+111]="F"+en;for(var en=65;en<=90;en++)ui[en]=String.fromCharCode(en+32),td[en]=String.fromCharCode(en);for(var Lh in ui)td.hasOwnProperty(Lh)||(td[Lh]=ui[Lh]);function B5(n){var e=V5&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||$5&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?td:ui)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const F5=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),z5=typeof navigator<"u"&&/Win/.test(navigator.platform);function j5(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,s,i,o;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))F5?o=!0:s=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(t="Alt-"+t),s&&(t="Ctrl-"+t),o&&(t="Meta-"+t),i&&(t="Shift-"+t),t}function H5(n){let e=Object.create(null);for(let t in n)e[j5(t)]=n[t];return e}function Vh(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function U5(n){return new on({props:{handleKeyDown:gx(n)}})}function gx(n){let e=H5(n);return function(t,r){let s=B5(r),i,o=e[Vh(s,r)];if(o&&o(t.state,t.dispatch,t))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let a=e[Vh(s,r,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(z5&&r.ctrlKey&&r.altKey)&&(i=ui[r.keyCode])&&i!=s){let a=e[Vh(i,r)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}const Wg=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function yx(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const vx=(n,e,t)=>{let r=yx(n,t);if(!r)return!1;let s=Gg(r);if(!s){let o=r.blockRange(),a=o&&Ia(o);return a==null?!1:(e&&e(n.tr.lift(o,a).scrollIntoView()),!0)}let i=s.nodeBefore;if(Ax(n,s,e,-1))return!0;if(r.parent.content.size==0&&(ba(i,"end")||Ae.isSelectable(i)))for(let o=r.depth;;o--){let a=Tf(n.doc,r.before(o),r.after(o),pe.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=n.tr.step(a);l.setSelection(ba(i,"end")?je.findFrom(l.doc.resolve(l.mapping.map(s.pos,-1)),-1):Ae.create(l.doc,s.pos-i.nodeSize)),e(l.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return i.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos-i.nodeSize,s.pos).scrollIntoView()),!0):!1},q5=(n,e,t)=>{let r=yx(n,t);if(!r)return!1;let s=Gg(r);return s?bx(n,s,e):!1},W5=(n,e,t)=>{let r=Tx(n,t);if(!r)return!1;let s=Kg(r);return s?bx(n,s,e):!1};function bx(n,e,t){let r=e.nodeBefore,s=r,i=e.pos-1;for(;!s.isTextblock;i--){if(s.type.spec.isolating)return!1;let u=s.lastChild;if(!u)return!1;s=u}let o=e.nodeAfter,a=o,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=Tf(n.doc,i,l,pe.empty);if(!c||c.from!=i||c instanceof Ht&&c.slice.size>=l-i)return!1;if(t){let u=n.tr.step(c);u.setSelection(Le.create(u.doc,i)),t(u.scrollIntoView())}return!0}function ba(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const wx=(n,e,t)=>{let{$head:r,empty:s}=n.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;i=Gg(r)}let o=i&&i.nodeBefore;return!o||!Ae.isSelectable(o)?!1:(e&&e(n.tr.setSelection(Ae.create(n.doc,i.pos-o.nodeSize)).scrollIntoView()),!0)};function Gg(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function Tx(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const Ex=(n,e,t)=>{let r=Tx(n,t);if(!r)return!1;let s=Kg(r);if(!s)return!1;let i=s.nodeAfter;if(Ax(n,s,e,1))return!0;if(r.parent.content.size==0&&(ba(i,"start")||Ae.isSelectable(i))){let o=Tf(n.doc,r.before(),r.after(),pe.empty);if(o&&o.slice.size<o.to-o.from){if(e){let a=n.tr.step(o);a.setSelection(ba(i,"start")?je.findFrom(a.doc.resolve(a.mapping.map(s.pos)),1):Ae.create(a.doc,a.mapping.map(s.pos))),e(a.scrollIntoView())}return!0}}return i.isAtom&&s.depth==r.depth-1?(e&&e(n.tr.delete(s.pos,s.pos+i.nodeSize).scrollIntoView()),!0):!1},Sx=(n,e,t)=>{let{$head:r,empty:s}=n.selection,i=r;if(!s)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;i=Kg(r)}let o=i&&i.nodeAfter;return!o||!Ae.isSelectable(o)?!1:(e&&e(n.tr.setSelection(Ae.create(n.doc,i.pos)).scrollIntoView()),!0)};function Kg(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const G5=(n,e)=>{let t=n.selection,r=t instanceof Ae,s;if(r){if(t.node.isTextblock||!bi(n.doc,t.from))return!1;s=t.from}else if(s=wf(n.doc,t.from,-1),s==null)return!1;if(e){let i=n.tr.join(s);r&&i.setSelection(Ae.create(i.doc,s-n.doc.resolve(s).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},K5=(n,e)=>{let t=n.selection,r;if(t instanceof Ae){if(t.node.isTextblock||!bi(n.doc,t.to))return!1;r=t.to}else if(r=wf(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},J5=(n,e)=>{let{$from:t,$to:r}=n.selection,s=t.blockRange(r),i=s&&Ia(s);return i==null?!1:(e&&e(n.tr.lift(s,i).scrollIntoView()),!0)},_x=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function Jg(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const Q5=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let s=t.node(-1),i=t.indexAfter(-1),o=Jg(s.contentMatchAt(i));if(!o||!s.canReplaceWith(i,i,o))return!1;if(e){let a=t.after(),l=n.tr.replaceWith(a,a,o.createAndFill());l.setSelection(je.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},xx=(n,e)=>{let t=n.selection,{$from:r,$to:s}=t;if(t instanceof qn||r.parent.inlineContent||s.parent.inlineContent)return!1;let i=Jg(s.parent.contentMatchAt(s.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let o=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,a=n.tr.insert(o,i.createAndFill());a.setSelection(Le.create(a.doc,o+1)),e(a.scrollIntoView())}return!0},Cx=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let i=t.before();if(cs(n.doc,i))return e&&e(n.tr.split(i).scrollIntoView()),!0}let r=t.blockRange(),s=r&&Ia(r);return s==null?!1:(e&&e(n.tr.lift(r,s).scrollIntoView()),!0)};function Y5(n){return(e,t)=>{let{$from:r,$to:s}=e.selection;if(e.selection instanceof Ae&&e.selection.node.isBlock)return!r.parentOffset||!cs(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],o,a,l=!1,c=!1;for(let p=r.depth;;p--)if(r.node(p).isBlock){l=r.end(p)==r.pos+(r.depth-p),c=r.start(p)==r.pos-(r.depth-p),a=Jg(r.node(p-1).contentMatchAt(r.indexAfter(p-1))),i.unshift(l&&a?{type:a}:null),o=p;break}else{if(p==1)return!1;i.unshift(null)}let u=e.tr;(e.selection instanceof Le||e.selection instanceof qn)&&u.deleteSelection();let d=u.mapping.map(r.pos),h=cs(u.doc,d,i.length,i);if(h||(i[0]=a?{type:a}:null,h=cs(u.doc,d,i.length,i)),!h)return!1;if(u.split(d,i.length,i),!l&&c&&r.node(o).type!=a){let p=u.mapping.map(r.before(o)),m=u.doc.resolve(p);a&&r.node(o-1).canReplaceWith(m.index(),m.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(o)),a)}return t&&t(u.scrollIntoView()),!0}}const X5=Y5(),Z5=(n,e)=>{let{$from:t,to:r}=n.selection,s,i=t.sharedDepth(r);return i==0?!1:(s=t.before(i),e&&e(n.tr.setSelection(Ae.create(n.doc,s))),!0)};function e9(n,e,t){let r=e.nodeBefore,s=e.nodeAfter,i=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(s.isTextblock||bi(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function Ax(n,e,t,r){let s=e.nodeBefore,i=e.nodeAfter,o,a,l=s.type.spec.isolating||i.type.spec.isolating;if(!l&&e9(n,e,t))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(a=s.contentMatchAt(s.childCount)).findWrapping(i.type))&&a.matchType(o[0]||i.type).validEnd){if(t){let p=e.pos+i.nodeSize,m=Z.empty;for(let S=o.length-1;S>=0;S--)m=Z.from(o[S].create(null,m));m=Z.from(s.copy(m));let y=n.tr.step(new qt(e.pos-1,p,e.pos,p,new pe(m,1,0),o.length,!0)),v=y.doc.resolve(p+2*o.length);v.nodeAfter&&v.nodeAfter.type==s.type&&bi(y.doc,v.pos)&&y.join(v.pos),t(y.scrollIntoView())}return!0}let u=i.type.spec.isolating||r>0&&l?null:je.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),h=d&&Ia(d);if(h!=null&&h>=e.depth)return t&&t(n.tr.lift(d,h).scrollIntoView()),!0;if(c&&ba(i,"start",!0)&&ba(s,"end")){let p=s,m=[];for(;m.push(p),!p.isTextblock;)p=p.lastChild;let y=i,v=1;for(;!y.isTextblock;y=y.firstChild)v++;if(p.canReplace(p.childCount,p.childCount,y.content)){if(t){let S=Z.empty;for(let b=m.length-1;b>=0;b--)S=Z.from(m[b].copy(S));let T=n.tr.step(new qt(e.pos-m.length,e.pos+i.nodeSize,e.pos+v,e.pos+i.nodeSize-v,new pe(S,m.length,0),0,!0));t(T.scrollIntoView())}return!0}}return!1}function kx(n){return function(e,t){let r=e.selection,s=n<0?r.$from:r.$to,i=s.depth;for(;s.node(i).isInline;){if(!i)return!1;i--}return s.node(i).isTextblock?(t&&t(e.tr.setSelection(Le.create(e.doc,n<0?s.start(i):s.end(i)))),!0):!1}}const t9=kx(-1),n9=kx(1);function r9(n,e=null){return function(t,r){let{$from:s,$to:i}=t.selection,o=s.blockRange(i),a=o&&Ng(o,n,e);return a?(r&&r(t.tr.wrap(o,a).scrollIntoView()),!0):!1}}function vw(n,e=null){return function(t,r){let s=!1;for(let i=0;i<t.selection.ranges.length&&!s;i++){let{$from:{pos:o},$to:{pos:a}}=t.selection.ranges[i];t.doc.nodesBetween(o,a,(l,c)=>{if(s)return!1;if(!(!l.isTextblock||l.hasMarkup(n,e)))if(l.type==n)s=!0;else{let u=t.doc.resolve(c),d=u.index();s=u.parent.canReplaceWith(d,d+1,n)}})}if(!s)return!1;if(r){let i=t.tr;for(let o=0;o<t.selection.ranges.length;o++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[o];i.setBlockType(a,l,n,e)}r(i.scrollIntoView())}return!0}}function Qg(...n){return function(e,t,r){for(let s=0;s<n.length;s++)if(n[s](e,t,r))return!0;return!1}}Qg(Wg,vx,wx);Qg(Wg,Ex,Sx);Qg(_x,xx,Cx,X5);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function s9(n,e=null){return function(t,r){let{$from:s,$to:i}=t.selection,o=s.blockRange(i);if(!o)return!1;let a=r?t.tr:null;return i9(a,o,n,e)?(r&&r(a.scrollIntoView()),!0):!1}}function i9(n,e,t,r=null){let s=!1,i=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=o.resolve(e.start-2);i=new Kc(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new Kc(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let a=Ng(i,t,r,e);return a?(n&&o9(n,e,a,s,t),!0):!1}function o9(n,e,t,r,s){let i=Z.empty;for(let u=t.length-1;u>=0;u--)i=Z.from(t[u].type.create(t[u].attrs,i));n.step(new qt(e.start-(r?2:0),e.end,e.start,e.end,new pe(i,0,0),t.length,!0));let o=0;for(let u=0;u<t.length;u++)t[u].type==s&&(o=u+1);let a=t.length-o,l=e.start+t.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,h=!0;u<d;u++,h=!1)!h&&cs(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return n}function a9(n){return function(e,t){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,o=>o.childCount>0&&o.firstChild.type==n);return i?t?r.node(i.depth-1).type==n?l9(e,t,n,i):u9(e,t,i):!0:!1}}function l9(n,e,t,r){let s=n.tr,i=r.end,o=r.$to.end(r.depth);i<o&&(s.step(new qt(i-1,o,i,o,new pe(Z.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new Kc(s.doc.resolve(r.$from.pos),s.doc.resolve(o),r.depth));const a=Ia(r);if(a==null)return!1;s.lift(r,a);let l=s.doc.resolve(s.mapping.map(i,-1)-1);return bi(s.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&s.join(l.pos),e(s.scrollIntoView()),!0}function u9(n,e,t){let r=n.tr,s=t.parent;for(let p=t.end,m=t.endIndex-1,y=t.startIndex;m>y;m--)p-=s.child(m).nodeSize,r.delete(p-1,p+1);let i=r.doc.resolve(t.start),o=i.nodeAfter;if(r.mapping.map(t.end)!=t.start+i.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,l=t.endIndex==s.childCount,c=i.node(-1),u=i.index(-1);if(!c.canReplace(u+(a?0:1),u+1,o.content.append(l?Z.empty:Z.from(s))))return!1;let d=i.pos,h=d+o.nodeSize;return r.step(new qt(d-(a?1:0),h+(l?1:0),d+1,h-1,new pe((a?Z.empty:Z.from(s.copy(Z.empty))).append(l?Z.empty:Z.from(s.copy(Z.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function c9(n){return function(e,t){let{$from:r,$to:s}=e.selection,i=r.blockRange(s,c=>c.childCount>0&&c.firstChild.type==n);if(!i)return!1;let o=i.startIndex;if(o==0)return!1;let a=i.parent,l=a.child(o-1);if(l.type!=n)return!1;if(t){let c=l.lastChild&&l.lastChild.type==a.type,u=Z.from(c?n.create():null),d=new pe(Z.from(n.create(null,Z.from(a.type.create(null,u)))),c?3:1,0),h=i.start,p=i.end;t(e.tr.step(new qt(h-(c?3:1),p,h,p,d,1,!0)).scrollIntoView())}return!0}}function Cf(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:s}=t,{storedMarks:i}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return s},get tr(){return r=t.selection,s=t.doc,i=t.storedMarks,t}}}class Af{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:s}=t,{tr:i}=r,o=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(o);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:s,state:i}=this,{view:o}=s,a=[],l=!!e,c=e||i.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),a.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,p])=>[h,(...y)=>{const v=this.buildProps(c,t),S=p(...y)(v);return a.push(S),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,s=!1,i=e||r.tr,o=this.buildProps(i,s);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(i,s)}}buildProps(e,t=!0){const{rawCommands:r,editor:s,state:i}=this,{view:o}=s,a={tr:e,editor:s,view:o,state:Cf({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class d9{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(s=>s.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(s=>s!==t):delete this.callbacks[e]),this}once(e,t){const r=(...s)=>{this.off(e,r),t.apply(this,s)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function ve(n,e,t){return n.config[e]===void 0&&n.parent?ve(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?ve(n.parent,e,t):null}):n.config[e]}function kf(n){const e=n.filter(s=>s.type==="extension"),t=n.filter(s=>s.type==="node"),r=n.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function Ix(n){const e=[],{nodeExtensions:t,markExtensions:r}=kf(n),s=[...t,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage,extensions:s},l=ve(o,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([h,p])=>{e.push({type:d,name:h,attribute:{...i,...p}})})})})}),s.forEach(o=>{const a={name:o.name,options:o.options,storage:o.storage},l=ve(o,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const h={...i,...d};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:o.name,name:u,attribute:h})})}),e}function Gt(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function Rt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([s,i])=>{if(!r[s]){r[s]=i;return}if(s==="class"){const a=i?String(i).split(" "):[],l=r[s]?r[s].split(" "):[],c=a.filter(u=>!l.includes(u));r[s]=[...l,...c].join(" ")}else if(s==="style"){const a=i?i.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[s]?r[s].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,h]=u.split(":").map(p=>p.trim());c.set(d,h)}),a.forEach(u=>{const[d,h]=u.split(":").map(p=>p.trim());c.set(d,h)}),r[s]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[s]=i}),r},{})}function em(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>Rt(t,r),{})}function Mx(n){return typeof n=="function"}function qe(n,e=void 0,...t){return Mx(n)?e?n.bind(e)(...t):n(...t):n}function f9(n={}){return Object.keys(n).length===0&&n.constructor===Object}function h9(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function bw(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const s=e.reduce((i,o)=>{const a=o.attribute.parseHTML?o.attribute.parseHTML(t):h9(t.getAttribute(o.name));return a==null?i:{...i,[o.name]:a}},{});return{...r,...s}}}}function ww(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&f9(t)?!1:t!=null))}function p9(n,e){var t;const r=Ix(n),{nodeExtensions:s,markExtensions:i}=kf(n),o=(t=s.find(c=>ve(c,"topNode")))===null||t===void 0?void 0:t.name,a=Object.fromEntries(s.map(c=>{const u=r.filter(S=>S.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=n.reduce((S,T)=>{const b=ve(T,"extendNodeSchema",d);return{...S,...b?b(c):{}}},{}),p=ww({...h,content:qe(ve(c,"content",d)),marks:qe(ve(c,"marks",d)),group:qe(ve(c,"group",d)),inline:qe(ve(c,"inline",d)),atom:qe(ve(c,"atom",d)),selectable:qe(ve(c,"selectable",d)),draggable:qe(ve(c,"draggable",d)),code:qe(ve(c,"code",d)),whitespace:qe(ve(c,"whitespace",d)),linebreakReplacement:qe(ve(c,"linebreakReplacement",d)),defining:qe(ve(c,"defining",d)),isolating:qe(ve(c,"isolating",d)),attrs:Object.fromEntries(u.map(S=>{var T;return[S.name,{default:(T=S==null?void 0:S.attribute)===null||T===void 0?void 0:T.default}]}))}),m=qe(ve(c,"parseHTML",d));m&&(p.parseDOM=m.map(S=>bw(S,u)));const y=ve(c,"renderHTML",d);y&&(p.toDOM=S=>y({node:S,HTMLAttributes:em(S,u)}));const v=ve(c,"renderText",d);return v&&(p.toText=v),[c.name,p]})),l=Object.fromEntries(i.map(c=>{const u=r.filter(v=>v.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=n.reduce((v,S)=>{const T=ve(S,"extendMarkSchema",d);return{...v,...T?T(c):{}}},{}),p=ww({...h,inclusive:qe(ve(c,"inclusive",d)),excludes:qe(ve(c,"excludes",d)),group:qe(ve(c,"group",d)),spanning:qe(ve(c,"spanning",d)),code:qe(ve(c,"code",d)),attrs:Object.fromEntries(u.map(v=>{var S;return[v.name,{default:(S=v==null?void 0:v.attribute)===null||S===void 0?void 0:S.default}]}))}),m=qe(ve(c,"parseHTML",d));m&&(p.parseDOM=m.map(v=>bw(v,u)));const y=ve(c,"renderHTML",d);return y&&(p.toDOM=v=>y({mark:v,HTMLAttributes:em(v,u)})),[c.name,p]}));return new v_({topNode:o,nodes:a,marks:l})}function $h(n,e){return e.nodes[n]||e.marks[n]||null}function Tw(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function Yg(n,e){const t=mo.fromSchema(e).serializeFragment(n),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(t),s.innerHTML}const m9=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(s,i,o,a)=>{var l,c;const u=((c=(l=s.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:s,pos:i,parent:o,index:a}))||s.textContent||"%leaf%";t+=s.isAtom&&!s.isText?u:u.slice(0,Math.max(0,r-i))}),t};function Xg(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class If{constructor(e){this.find=e.find,this.handler=e.handler}}const g9=(n,e)=>{if(Xg(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function Fu(n){var e;const{editor:t,from:r,to:s,text:i,rules:o,plugin:a}=n,{view:l}=t;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const d=m9(c)+i;return o.forEach(h=>{if(u)return;const p=g9(d,h.find);if(!p)return;const m=l.state.tr,y=Cf({state:l.state,transaction:m}),v={from:r-(p[0].length-i.length),to:s},{commands:S,chain:T,can:b}=new Af({editor:t,state:y});h.handler({state:y,range:v,match:p,commands:S,chain:T,can:b})===null||!m.steps.length||(m.setMeta(a,{transform:m,from:r,to:s,text:i}),l.dispatch(m),u=!0)}),u}function y9(n){const{editor:e,rules:t}=n,r=new on({state:{init(){return null},apply(s,i,o){const a=s.getMeta(r);if(a)return a;const l=s.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=Yg(Z.from(u),o.schema);const{from:d}=l,h=d+u.length;Fu({editor:e,from:d,to:h,text:u,rules:t,plugin:r})}),s.selectionSet||s.docChanged?null:i}},props:{handleTextInput(s,i,o,a){return Fu({editor:e,from:i,to:o,text:a,rules:t,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:i}=s.state.selection;i&&Fu({editor:e,from:i.pos,to:i.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(s,i){if(i.key!=="Enter")return!1;const{$cursor:o}=s.state.selection;return o?Fu({editor:e,from:o.pos,to:o.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function v9(n){return Object.prototype.toString.call(n).slice(8,-1)}function zu(n){return v9(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function Mf(n,e){const t={...n};return zu(n)&&zu(e)&&Object.keys(e).forEach(r=>{zu(e[r])&&zu(n[r])?t[r]=Mf(n[r],e[r]):t[r]=e[r]}),t}class ir{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=qe(ve(this,"addOptions",{name:this.name}))),this.storage=qe(ve(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new ir(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Mf(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new ir(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=qe(ve(t,"addOptions",{name:t.name})),t.storage=qe(ve(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const o=s.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const l=o.find(c=>(c==null?void 0:c.type.name)===t.name);return l&&r.removeStoredMark(l),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}}function b9(n){return typeof n=="number"}class w9{constructor(e){this.find=e.find,this.handler=e.handler}}const T9=(n,e,t)=>{if(Xg(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(s=>{const i=[s.text];return i.index=s.index,i.input=n,i.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(s.replaceWith)),i}):[]};function E9(n){const{editor:e,state:t,from:r,to:s,rule:i,pasteEvent:o,dropEvent:a}=n,{commands:l,chain:c,can:u}=new Af({editor:e,state:t}),d=[];return t.doc.nodesBetween(r,s,(p,m)=>{if(!p.isTextblock||p.type.spec.code)return;const y=Math.max(r,m),v=Math.min(s,m+p.content.size),S=p.textBetween(y-m,v-m,void 0,"");T9(S,i.find,o).forEach(b=>{if(b.index===void 0)return;const C=y+b.index+1,O=C+b[0].length,N={from:t.tr.mapping.map(C),to:t.tr.mapping.map(O)},A=i.handler({state:t,range:N,match:b,commands:l,chain:c,can:u,pasteEvent:o,dropEvent:a});d.push(A)})}),d.every(p=>p!==null)}let ju=null;const S9=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function _9(n){const{editor:e,rules:t}=n;let r=null,s=!1,i=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:h,rule:p,pasteEvt:m})=>{const y=u.tr,v=Cf({state:u,transaction:y});if(!(!E9({editor:e,state:v,from:Math.max(d-1,0),to:h.b-1,rule:p,pasteEvent:m,dropEvent:a})||!y.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,y}};return t.map(u=>new on({view(d){const h=m=>{var y;r=!((y=d.dom.parentElement)===null||y===void 0)&&y.contains(m.target)?d.dom.parentElement:null,r&&(ju=e)},p=()=>{ju&&(ju=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(d,h)=>{if(i=r===d.dom.parentElement,a=h,!i){const p=ju;p&&setTimeout(()=>{const m=p.state.selection;m&&p.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(d,h)=>{var p;const m=(p=h.clipboardData)===null||p===void 0?void 0:p.getData("text/html");return o=h,s=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(d,h,p)=>{const m=d[0],y=m.getMeta("uiEvent")==="paste"&&!s,v=m.getMeta("uiEvent")==="drop"&&!i,S=m.getMeta("applyPasteRules"),T=!!S;if(!y&&!v&&!T)return;if(T){let{text:O}=S;typeof O=="string"?O=O:O=Yg(Z.from(O),p.schema);const{from:N}=S,A=N+O.length,x=S9(O);return l({rule:u,state:p,from:N,to:{b:A},pasteEvt:x})}const b=h.doc.content.findDiffStart(p.doc.content),C=h.doc.content.findDiffEnd(p.doc.content);if(!(!b9(b)||!C||b===C.b))return l({rule:u,state:p,from:b,to:C,pasteEvt:o})}}))}function x9(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class Uo{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Uo.resolve(e),this.schema=p9(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Uo.sort(Uo.flatten(e)),r=x9(t.map(s=>s.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(s=>`'${s}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},s=ve(t,"addExtensions",r);return s?[t,...this.flatten(s())]:t}).flat(10)}static sort(e){return e.sort((r,s)=>{const i=ve(r,"priority")||100,o=ve(s,"priority")||100;return i>o?-1:i<o?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:$h(t.name,this.schema)},s=ve(t,"addCommands",r);return s?{...e,...s()}:e},{})}get plugins(){const{editor:e}=this,t=Uo.sort([...this.extensions].reverse()),r=[],s=[],i=t.map(o=>{const a={name:o.name,options:o.options,storage:o.storage,editor:e,type:$h(o.name,this.schema)},l=[],c=ve(o,"addKeyboardShortcuts",a);let u={};if(o.type==="mark"&&ve(o,"exitable",a)&&(u.ArrowRight=()=>ir.handleExit({editor:e,mark:o})),c){const y=Object.fromEntries(Object.entries(c()).map(([v,S])=>[v,()=>S({editor:e})]));u={...u,...y}}const d=U5(u);l.push(d);const h=ve(o,"addInputRules",a);Tw(o,e.options.enableInputRules)&&h&&r.push(...h());const p=ve(o,"addPasteRules",a);Tw(o,e.options.enablePasteRules)&&p&&s.push(...p());const m=ve(o,"addProseMirrorPlugins",a);if(m){const y=m();l.push(...y)}return l}).flat();return[y9({editor:e,rules:r}),..._9({editor:e,rules:s}),...i]}get attributes(){return Ix(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=kf(this.extensions);return Object.fromEntries(t.filter(r=>!!ve(r,"addNodeView")).map(r=>{const s=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:r.storage,editor:e,type:Gt(r.name,this.schema)},o=ve(r,"addNodeView",i);if(!o)return[];const a=(l,c,u,d,h)=>{const p=em(l,s);return o()({node:l,view:c,getPos:u,decorations:d,innerDecorations:h,editor:e,extension:r,HTMLAttributes:p})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:$h(e.name,this.schema)};e.type==="mark"&&(!((t=qe(ve(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const s=ve(e,"onBeforeCreate",r),i=ve(e,"onCreate",r),o=ve(e,"onUpdate",r),a=ve(e,"onSelectionUpdate",r),l=ve(e,"onTransaction",r),c=ve(e,"onFocus",r),u=ve(e,"onBlur",r),d=ve(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),i&&this.editor.on("create",i),o&&this.editor.on("update",o),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class Kt{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=qe(ve(this,"addOptions",{name:this.name}))),this.storage=qe(ve(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Kt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Mf(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Kt({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=qe(ve(t,"addOptions",{name:t.name})),t.storage=qe(ve(t,"addStorage",{name:t.name,options:t.options})),t}}function Px(n,e,t){const{from:r,to:s}=e,{blockSeparator:i=`

`,textSerializers:o={}}=t||{};let a="";return n.nodesBetween(r,s,(l,c,u,d)=>{var h;l.isBlock&&c>r&&(a+=i);const p=o==null?void 0:o[l.type.name];if(p)return u&&(a+=p({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,s-c))}),a}function Rx(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const C9=Kt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new on({key:new Kn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:s}=e,{ranges:i}=s,o=Math.min(...i.map(u=>u.$from.pos)),a=Math.max(...i.map(u=>u.$to.pos)),l=Rx(t);return Px(r,{from:o,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),A9=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),k9=(n=!1)=>({commands:e})=>e.setContent("",n),I9=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:s}=r;return t&&s.forEach(({$from:i,$to:o})=>{n.doc.nodesBetween(i.pos,o.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),h=c.resolve(u.map(l+a.nodeSize)),p=d.blockRange(h);if(!p)return;const m=Ia(p);if(a.type.isTextblock){const{defaultType:y}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(p.start,y)}(m||m===0)&&e.lift(p,m)})}),!0},M9=n=>e=>n(e),P9=()=>({state:n,dispatch:e})=>xx(n,e),R9=(n,e)=>({editor:t,tr:r})=>{const{state:s}=t,i=s.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const o=r.mapping.map(e);return r.insert(o,i.content),r.setSelection(new Le(r.doc.resolve(o-1))),!0},O9=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const s=n.selection.$anchor;for(let i=s.depth;i>0;i-=1)if(s.node(i).type===r.type){if(e){const a=s.before(i),l=s.after(i);n.delete(a,l).scrollIntoView()}return!0}return!1},D9=n=>({tr:e,state:t,dispatch:r})=>{const s=Gt(n,t.schema),i=e.selection.$anchor;for(let o=i.depth;o>0;o-=1)if(i.node(o).type===s){if(r){const l=i.before(o),c=i.after(o);e.delete(l,c).scrollIntoView()}return!0}return!1},N9=n=>({tr:e,dispatch:t})=>{const{from:r,to:s}=n;return t&&e.delete(r,s),!0},L9=()=>({state:n,dispatch:e})=>Wg(n,e),V9=()=>({commands:n})=>n.keyboardShortcut("Enter"),$9=()=>({state:n,dispatch:e})=>Q5(n,e);function nd(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>t.strict?e[s]===n[s]:Xg(e[s])?e[s].test(n[s]):e[s]===n[s]):!0}function Ox(n,e,t={}){return n.find(r=>r.type===e&&nd(Object.fromEntries(Object.keys(t).map(s=>[s,r.attrs[s]])),t))}function Ew(n,e,t={}){return!!Ox(n,e,t)}function Zg(n,e,t){var r;if(!n||!e)return;let s=n.parent.childAfter(n.parentOffset);if((!s.node||!s.node.marks.some(u=>u.type===e))&&(s=n.parent.childBefore(n.parentOffset)),!s.node||!s.node.marks.some(u=>u.type===e)||(t=t||((r=s.node.marks[0])===null||r===void 0?void 0:r.attrs),!Ox([...s.node.marks],e,t)))return;let o=s.index,a=n.start()+s.offset,l=o+1,c=a+s.node.nodeSize;for(;o>0&&Ew([...n.parent.child(o-1).marks],e,t);)o-=1,a-=n.parent.child(o).nodeSize;for(;l<n.parent.childCount&&Ew([...n.parent.child(l).marks],e,t);)c+=n.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Ti(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const B9=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const i=Ti(n,r.schema),{doc:o,selection:a}=t,{$from:l,from:c,to:u}=a;if(s){const d=Zg(l,i,e);if(d&&d.from<=c&&d.to>=u){const h=Le.create(o,d.from,d.to);t.setSelection(h)}}return!0},F9=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function Dx(n){return n instanceof Le}function zi(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function Nx(n,e=null){if(!e)return null;const t=je.atStart(n),r=je.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const s=t.from,i=r.to;return e==="all"?Le.create(n,zi(0,s,i),zi(n.content.size,s,i)):Le.create(n,zi(e,s,i),zi(e,s,i))}function z9(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function ey(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const j9=(n=null,e={})=>({editor:t,view:r,tr:s,dispatch:i})=>{e={scrollIntoView:!0,...e};const o=()=>{(ey()||z9())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(i&&n===null&&!Dx(t.state.selection))return o(),!0;const a=Nx(s.doc,n)||t.state.selection,l=t.state.selection.eq(a);return i&&(l||s.setSelection(a),l&&s.storedMarks&&s.setStoredMarks(s.storedMarks),o()),!0},H9=(n,e)=>t=>n.every((r,s)=>e(r,{...t,index:s})),U9=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),Lx=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&Lx(r)}return n};function Hu(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return Lx(t)}function rd(n,e,t){if(n instanceof Js||n instanceof Z)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,s=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return Z.fromArray(n.map(a=>e.nodeFromJSON(a)));const o=e.nodeFromJSON(n);return t.errorOnInvalidContent&&o.check(),o}catch(i){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",i),rd("",e,t)}if(s){if(t.errorOnInvalidContent){let o=!1,a="";const l=new v_({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(t.slice?Qs.fromSchema(l).parseSlice(Hu(n),t.parseOptions):Qs.fromSchema(l).parse(Hu(n),t.parseOptions),t.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const i=Qs.fromSchema(e);return t.slice?i.parseSlice(Hu(n),t.parseOptions).content:i.parse(Hu(n),t.parseOptions)}return rd("",e,t)}function q9(n,e,t){const r=n.steps.length-1;if(r<e)return;const s=n.steps[r];if(!(s instanceof Ht||s instanceof qt))return;const i=n.mapping.maps[r];let o=0;i.forEach((a,l,c,u)=>{o===0&&(o=u)}),n.setSelection(je.near(n.doc.resolve(o),t))}const W9=n=>!("type"in n),G9=(n,e,t)=>({tr:r,dispatch:s,editor:i})=>{var o;if(s){t={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let a;try{a=rd(e,i.schema,{parseOptions:{preserveWhitespace:"full",...t.parseOptions},errorOnInvalidContent:(o=t.errorOnInvalidContent)!==null&&o!==void 0?o:i.options.enableContentCheck})}catch(m){return i.emit("contentError",{editor:i,error:m,disableCollaboration:()=>{i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}}),!1}let{from:l,to:c}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},u=!0,d=!0;if((W9(a)?a:[a]).forEach(m=>{m.check(),u=u?m.isText&&m.marks.length===0:!1,d=d?m.isBlock:!1}),l===c&&d){const{parent:m}=r.doc.resolve(l);m.isTextblock&&!m.type.spec.code&&!m.childCount&&(l-=1,c+=1)}let p;if(u){if(Array.isArray(e))p=e.map(m=>m.text||"").join("");else if(e instanceof Z){let m="";e.forEach(y=>{y.text&&(m+=y.text)}),p=m}else typeof e=="object"&&e&&e.text?p=e.text:p=e;r.insertText(p,l,c)}else p=a,r.replaceWith(l,c,p);t.updateSelection&&q9(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:l,text:p}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:l,text:p})}return!0},K9=()=>({state:n,dispatch:e})=>G5(n,e),J9=()=>({state:n,dispatch:e})=>K5(n,e),Q9=()=>({state:n,dispatch:e})=>vx(n,e),Y9=()=>({state:n,dispatch:e})=>Ex(n,e),X9=()=>({state:n,dispatch:e,tr:t})=>{try{const r=wf(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},Z9=()=>({state:n,dispatch:e,tr:t})=>{try{const r=wf(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},ez=()=>({state:n,dispatch:e})=>q5(n,e),tz=()=>({state:n,dispatch:e})=>W5(n,e);function Vx(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function nz(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,s,i,o;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))s=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))ey()||Vx()?o=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),s&&(t=`Ctrl-${t}`),o&&(t=`Meta-${t}`),i&&(t=`Shift-${t}`),t}const rz=n=>({editor:e,view:t,tr:r,dispatch:s})=>{const i=nz(n).split(/-(?!$)/),o=i.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&s&&r.maybeStep(u)}),!0};function Yl(n,e,t={}){const{from:r,to:s,empty:i}=n.selection,o=e?Gt(e,n.schema):null,a=[];n.doc.nodesBetween(r,s,(d,h)=>{if(d.isText)return;const p=Math.max(r,h),m=Math.min(s,h+d.nodeSize);a.push({node:d,from:p,to:m})});const l=s-r,c=a.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>nd(d.node.attrs,t,{strict:!1}));return i?!!c.length:c.reduce((d,h)=>d+h.to-h.from,0)>=l}const sz=(n,e={})=>({state:t,dispatch:r})=>{const s=Gt(n,t.schema);return Yl(t,s,e)?J5(t,r):!1},iz=()=>({state:n,dispatch:e})=>Cx(n,e),oz=n=>({state:e,dispatch:t})=>{const r=Gt(n,e.schema);return a9(r)(e,t)},az=()=>({state:n,dispatch:e})=>_x(n,e);function Pf(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function Sw(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,s)=>(t.includes(s)||(r[s]=n[s]),r),{})}const lz=(n,e)=>({tr:t,state:r,dispatch:s})=>{let i=null,o=null;const a=Pf(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(i=Gt(n,r.schema)),a==="mark"&&(o=Ti(n,r.schema)),s&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{i&&i===c.type&&t.setNodeMarkup(u,void 0,Sw(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&t.addMark(u,u+c.nodeSize,o.create(Sw(d.attrs,e)))})})}),!0):!1},uz=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),cz=()=>({tr:n,dispatch:e})=>{if(e){const t=new qn(n.doc);n.setSelection(t)}return!0},dz=()=>({state:n,dispatch:e})=>wx(n,e),fz=()=>({state:n,dispatch:e})=>Sx(n,e),hz=()=>({state:n,dispatch:e})=>Z5(n,e),pz=()=>({state:n,dispatch:e})=>n9(n,e),mz=()=>({state:n,dispatch:e})=>t9(n,e);function tm(n,e,t={},r={}){return rd(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const gz=(n,e=!1,t={},r={})=>({editor:s,tr:i,dispatch:o,commands:a})=>{var l,c;const{doc:u}=i;if(t.preserveWhitespace!=="full"){const d=tm(n,s.schema,t,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:s.options.enableContentCheck});return o&&i.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return o&&i.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},n,{parseOptions:t,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:s.options.enableContentCheck})};function $x(n,e){const t=Ti(e,n.schema),{from:r,to:s,empty:i}=n.selection,o=[];i?(n.storedMarks&&o.push(...n.storedMarks),o.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,s,l=>{o.push(...l.marks)});const a=o.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function yz(n,e){const t=new D_(n);return e.forEach(r=>{r.steps.forEach(s=>{t.step(s)})}),t}function vz(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function bz(n,e,t){const r=[];return n.nodesBetween(e.from,e.to,(s,i)=>{t(s)&&r.push({node:s,pos:i})}),r}function wz(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function ty(n){return e=>wz(e.$from,n)}function Tz(n,e){const t={from:0,to:n.content.size};return Px(n,t,e)}function Ez(n,e){const t=Gt(e,n.schema),{from:r,to:s}=n.selection,i=[];n.doc.nodesBetween(r,s,a=>{i.push(a)});const o=i.reverse().find(a=>a.type.name===t.name);return o?{...o.attrs}:{}}function Bx(n,e){const t=Pf(typeof e=="string"?e:e.name,n.schema);return t==="node"?Ez(n,e):t==="mark"?$x(n,e):{}}function Sz(n,e=JSON.stringify){const t={};return n.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(t,s)?!1:t[s]=!0})}function _z(n){const e=Sz(n);return e.length===1?e:e.filter((t,r)=>!e.filter((i,o)=>o!==r).some(i=>t.oldRange.from>=i.oldRange.from&&t.oldRange.to<=i.oldRange.to&&t.newRange.from>=i.newRange.from&&t.newRange.to<=i.newRange.to))}function xz(n){const{mapping:e,steps:t}=n,r=[];return e.maps.forEach((s,i)=>{const o=[];if(s.ranges.length)s.forEach((a,l)=>{o.push({from:a,to:l})});else{const{from:a,to:l}=t[i];if(a===void 0||l===void 0)return;o.push({from:a,to:l})}o.forEach(({from:a,to:l})=>{const c=e.slice(i).map(a,-1),u=e.slice(i).map(l),d=e.invert().map(c,-1),h=e.invert().map(u);r.push({oldRange:{from:d,to:h},newRange:{from:c,to:u}})})}),_z(r)}function ny(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(s=>{const i=t.resolve(n),o=Zg(i,s.type);o&&r.push({mark:s,...o})}):t.nodesBetween(n,e,(s,i)=>{!s||(s==null?void 0:s.nodeSize)===void 0||r.push(...s.marks.map(o=>({from:i,to:i+s.nodeSize,mark:o})))}),r}function fc(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const s=n.find(i=>i.type===e&&i.name===r);return s?s.attribute.keepOnSplit:!1}))}function nm(n,e,t={}){const{empty:r,ranges:s}=n.selection,i=e?Ti(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>i?i.name===d.type.name:!0).find(d=>nd(d.attrs,t,{strict:!1}));let o=0;const a=[];if(s.forEach(({$from:d,$to:h})=>{const p=d.pos,m=h.pos;n.doc.nodesBetween(p,m,(y,v)=>{if(!y.isText&&!y.marks.length)return;const S=Math.max(p,v),T=Math.min(m,v+y.nodeSize),b=T-S;o+=b,a.push(...y.marks.map(C=>({mark:C,from:S,to:T})))})}),o===0)return!1;const l=a.filter(d=>i?i.name===d.mark.type.name:!0).filter(d=>nd(d.mark.attrs,t,{strict:!1})).reduce((d,h)=>d+h.to-h.from,0),c=a.filter(d=>i?d.mark.type!==i&&d.mark.type.excludes(i):!0).reduce((d,h)=>d+h.to-h.from,0);return(l>0?l+c:l)>=o}function Cz(n,e,t={}){if(!e)return Yl(n,null,t)||nm(n,null,t);const r=Pf(e,n.schema);return r==="node"?Yl(n,e,t):r==="mark"?nm(n,e,t):!1}function _w(n,e){const{nodeExtensions:t}=kf(e),r=t.find(o=>o.name===n);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},i=qe(ve(r,"group",s));return typeof i!="string"?!1:i.split(" ").includes("list")}function ry(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let s=!0;return n.content.forEach(i=>{s!==!1&&(ry(i,{ignoreWhitespace:t,checkChildren:e})||(s=!1))}),s}return!1}function Az(n){return n instanceof Ae}function kz(n,e,t){var r;const{selection:s}=e;let i=null;if(Dx(s)&&(i=s.$cursor),i){const a=(r=n.storedMarks)!==null&&r!==void 0?r:i.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:o}=s;return o.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,h)=>{if(c)return!1;if(u.isInline){const p=!h||h.type.allowsMarkType(t),m=!!t.isInSet(u.marks)||!u.marks.some(y=>y.type.excludes(t));c=p&&m}return!c}),c})}const Iz=(n,e={})=>({tr:t,state:r,dispatch:s})=>{const{selection:i}=t,{empty:o,ranges:a}=i,l=Ti(n,r.schema);if(s)if(o){const c=$x(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(h,p)=>{const m=Math.max(p,u),y=Math.min(p+h.nodeSize,d);h.marks.find(S=>S.type===l)?h.marks.forEach(S=>{l===S.type&&t.addMark(m,y,l.create({...S.attrs,...e}))}):t.addMark(m,y,l.create(e))})});return kz(r,t,l)},Mz=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),Pz=(n,e={})=>({state:t,dispatch:r,chain:s})=>{const i=Gt(n,t.schema);let o;return t.selection.$anchor.sameParent(t.selection.$head)&&(o=t.selection.$anchor.parent.attrs),i.isTextblock?s().command(({commands:a})=>vw(i,{...o,...e})(t)?!0:a.clearNodes()).command(({state:a})=>vw(i,{...o,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},Rz=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,s=zi(n,0,r.content.size),i=Ae.create(r,s);e.setSelection(i)}return!0},Oz=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:s,to:i}=typeof n=="number"?{from:n,to:n}:n,o=Le.atStart(r).from,a=Le.atEnd(r).to,l=zi(s,o,a),c=zi(i,o,a),u=Le.create(r,l,c);e.setSelection(u)}return!0},Dz=n=>({state:e,dispatch:t})=>{const r=Gt(n,e.schema);return c9(r)(e,t)};function xw(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(s=>e==null?void 0:e.includes(s.type.name));n.tr.ensureMarks(r)}}const Nz=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:s})=>{const{selection:i,doc:o}=e,{$from:a,$to:l}=i,c=s.extensionManager.attributes,u=fc(c,a.node().type.name,a.node().attrs);if(i instanceof Ae&&i.node.isBlock)return!a.parentOffset||!cs(o,a.pos)?!1:(r&&(n&&xw(t,s.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:vz(a.node(-1).contentMatchAt(a.indexAfter(-1)));let p=d&&h?[{type:h,attrs:u}]:void 0,m=cs(e.doc,e.mapping.map(a.pos),1,p);if(!p&&!m&&cs(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(m=!0,p=h?[{type:h,attrs:u}]:void 0),r){if(m&&(i instanceof Le&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,p),h&&!d&&!a.parentOffset&&a.parent.type!==h)){const y=e.mapping.map(a.before()),v=e.doc.resolve(y);a.node(-1).canReplaceWith(v.index(),v.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}n&&xw(t,s.extensionManager.splittableMarks),e.scrollIntoView()}return m},Lz=(n,e={})=>({tr:t,state:r,dispatch:s,editor:i})=>{var o;const a=Gt(n,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const h=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(s){let S=Z.empty;const T=l.index(-1)?1:l.index(-2)?2:3;for(let x=l.depth-T;x>=l.depth-3;x-=1)S=Z.from(l.node(x).copy(S));const b=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,C={...fc(h,l.node().type.name,l.node().attrs),...e},O=((o=a.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(C))||void 0;S=S.append(Z.from(a.createAndFill(null,O)||void 0));const N=l.before(l.depth-(T-1));t.replace(N,l.after(-b),new pe(S,4-T,0));let A=-1;t.doc.nodesBetween(N,t.doc.content.size,(x,_)=>{if(A>-1)return!1;x.isTextblock&&x.content.size===0&&(A=_+1)}),A>-1&&t.setSelection(Le.near(t.doc.resolve(A))),t.scrollIntoView()}return!0}const p=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,m={...fc(h,d.type.name,d.attrs),...e},y={...fc(h,l.node().type.name,l.node().attrs),...e};t.delete(l.pos,c.pos);const v=p?[{type:a,attrs:m},{type:p,attrs:y}]:[{type:a,attrs:m}];if(!cs(t.doc,l.pos,2))return!1;if(s){const{selection:S,storedMarks:T}=r,{splittableMarks:b}=i.extensionManager,C=T||S.$to.parentOffset&&S.$from.marks();if(t.split(l.pos,2,v).scrollIntoView(),!C||!s)return!0;const O=C.filter(N=>b.includes(N.type.name));t.ensureMarks(O)}return!0},Bh=(n,e)=>{const t=ty(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&bi(n.doc,t.pos)&&n.join(t.pos),!0},Fh=(n,e)=>{const t=ty(o=>o.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const s=n.doc.nodeAt(r);return t.node.type===(s==null?void 0:s.type)&&bi(n.doc,r)&&n.join(r),!0},Vz=(n,e,t,r={})=>({editor:s,tr:i,state:o,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=s.extensionManager,p=Gt(n,o.schema),m=Gt(e,o.schema),{selection:y,storedMarks:v}=o,{$from:S,$to:T}=y,b=S.blockRange(T),C=v||y.$to.parentOffset&&y.$from.marks();if(!b)return!1;const O=ty(N=>_w(N.type.name,d))(y);if(b.depth>=1&&O&&b.depth-O.depth<=1){if(O.node.type===p)return c.liftListItem(m);if(_w(O.node.type.name,d)&&p.validContent(O.node.content)&&a)return l().command(()=>(i.setNodeMarkup(O.pos,p),!0)).command(()=>Bh(i,p)).command(()=>Fh(i,p)).run()}return!t||!C||!a?l().command(()=>u().wrapInList(p,r)?!0:c.clearNodes()).wrapInList(p,r).command(()=>Bh(i,p)).command(()=>Fh(i,p)).run():l().command(()=>{const N=u().wrapInList(p,r),A=C.filter(x=>h.includes(x.type.name));return i.ensureMarks(A),N?!0:c.clearNodes()}).wrapInList(p,r).command(()=>Bh(i,p)).command(()=>Fh(i,p)).run()},$z=(n,e={},t={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:i=!1}=t,o=Ti(n,r.schema);return nm(r,o,e)?s.unsetMark(o,{extendEmptyMarkRange:i}):s.setMark(o,e)},Bz=(n,e,t={})=>({state:r,commands:s})=>{const i=Gt(n,r.schema),o=Gt(e,r.schema),a=Yl(r,i,t);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?s.setNode(o,l):s.setNode(i,{...l,...t})},Fz=(n,e={})=>({state:t,commands:r})=>{const s=Gt(n,t.schema);return Yl(t,s,e)?r.lift(s):r.wrapIn(s,e)},zz=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const s=t[r];let i;if(s.spec.isInputRules&&(i=s.getState(n))){if(e){const o=n.tr,a=i.transform;for(let l=a.steps.length-1;l>=0;l-=1)o.step(a.steps[l].invert(a.docs[l]));if(i.text){const l=o.doc.resolve(i.from).marks();o.replaceWith(i.from,i.to,n.schema.text(i.text,l))}else o.delete(i.from,i.to)}return!0}}return!1},jz=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:s}=t;return r||e&&s.forEach(i=>{n.removeMark(i.$from.pos,i.$to.pos)}),!0},Hz=(n,e={})=>({tr:t,state:r,dispatch:s})=>{var i;const{extendEmptyMarkRange:o=!1}=e,{selection:a}=t,l=Ti(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!s)return!0;if(u&&o){let{from:h,to:p}=a;const m=(i=c.marks().find(v=>v.type===l))===null||i===void 0?void 0:i.attrs,y=Zg(c,l,m);y&&(h=y.from,p=y.to),t.removeMark(h,p,l)}else d.forEach(h=>{t.removeMark(h.$from.pos,h.$to.pos,l)});return t.removeStoredMark(l),!0},Uz=(n,e={})=>({tr:t,state:r,dispatch:s})=>{let i=null,o=null;const a=Pf(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(i=Gt(n,r.schema)),a==="mark"&&(o=Ti(n,r.schema)),s&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let d,h,p,m;t.selection.empty?r.doc.nodesBetween(c,u,(y,v)=>{i&&i===y.type&&(p=Math.max(v,c),m=Math.min(v+y.nodeSize,u),d=v,h=y)}):r.doc.nodesBetween(c,u,(y,v)=>{v<c&&i&&i===y.type&&(p=Math.max(v,c),m=Math.min(v+y.nodeSize,u),d=v,h=y),v>=c&&v<=u&&(i&&i===y.type&&t.setNodeMarkup(v,void 0,{...y.attrs,...e}),o&&y.marks.length&&y.marks.forEach(S=>{if(o===S.type){const T=Math.max(v,c),b=Math.min(v+y.nodeSize,u);t.addMark(T,b,o.create({...S.attrs,...e}))}}))}),h&&(d!==void 0&&t.setNodeMarkup(d,void 0,{...h.attrs,...e}),o&&h.marks.length&&h.marks.forEach(y=>{o===y.type&&t.addMark(p,m,o.create({...y.attrs,...e}))}))}),!0):!1},qz=(n,e={})=>({state:t,dispatch:r})=>{const s=Gt(n,t.schema);return r9(s,e)(t,r)},Wz=(n,e={})=>({state:t,dispatch:r})=>{const s=Gt(n,t.schema);return s9(s,e)(t,r)};var Gz=Object.freeze({__proto__:null,blur:A9,clearContent:k9,clearNodes:I9,command:M9,createParagraphNear:P9,cut:R9,deleteCurrentNode:O9,deleteNode:D9,deleteRange:N9,deleteSelection:L9,enter:V9,exitCode:$9,extendMarkRange:B9,first:F9,focus:j9,forEach:H9,insertContent:U9,insertContentAt:G9,joinBackward:Q9,joinDown:J9,joinForward:Y9,joinItemBackward:X9,joinItemForward:Z9,joinTextblockBackward:ez,joinTextblockForward:tz,joinUp:K9,keyboardShortcut:rz,lift:sz,liftEmptyBlock:iz,liftListItem:oz,newlineInCode:az,resetAttributes:lz,scrollIntoView:uz,selectAll:cz,selectNodeBackward:dz,selectNodeForward:fz,selectParentNode:hz,selectTextblockEnd:pz,selectTextblockStart:mz,setContent:gz,setMark:Iz,setMeta:Mz,setNode:Pz,setNodeSelection:Rz,setTextSelection:Oz,sinkListItem:Dz,splitBlock:Nz,splitListItem:Lz,toggleList:Vz,toggleMark:$z,toggleNode:Bz,toggleWrap:Fz,undoInputRule:zz,unsetAllMarks:jz,unsetMark:Hz,updateAttributes:Uz,wrapIn:qz,wrapInList:Wz});const Kz=Kt.create({name:"commands",addCommands(){return{...Gz}}}),Jz=Kt.create({name:"drop",addProseMirrorPlugins(){return[new on({key:new Kn("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),Qz=Kt.create({name:"editable",addProseMirrorPlugins(){return[new on({key:new Kn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Yz=new Kn("focusEvents"),Xz=Kt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new on({key:Yz,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),Zz=Kt.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:h,parent:p}=d,m=d.parent.isTextblock&&h>0?a.doc.resolve(h-1):d,y=m.parent.type.spec.isolating,v=d.pos-d.parentOffset,S=y&&m.parent.childCount===1?v===d.pos:je.atStart(c).from===h;return!u||!p.type.isTextblock||p.textContent.length||!S||S&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},i={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return ey()||Vx()?i:s},addProseMirrorPlugins(){return[new on({key:new Kn("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(y=>y.getMeta("composition")))return;const r=n.some(y=>y.docChanged)&&!e.doc.eq(t.doc),s=n.some(y=>y.getMeta("preventClearDocument"));if(!r||s)return;const{empty:i,from:o,to:a}=e.selection,l=je.atStart(e.doc).from,c=je.atEnd(e.doc).to;if(i||!(o===l&&a===c)||!ry(t.doc))return;const h=t.tr,p=Cf({state:t,transaction:h}),{commands:m}=new Af({editor:this.editor,state:p});if(m.clearNodes(),!!h.steps.length)return h}})]}}),ej=Kt.create({name:"paste",addProseMirrorPlugins(){return[new on({key:new Kn("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),tj=Kt.create({name:"tabindex",addProseMirrorPlugins(){return[new on({key:new Kn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Li{get name(){return this.node.type.name}constructor(e,t,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=s}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new Li(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Li(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Li(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const s=t.isBlock&&!t.isTextblock,i=t.isAtom&&!t.isText,o=this.pos+r+(i?0:1),a=this.resolvedPos.doc.resolve(o);if(!s&&a.depth<=this.depth)return;const l=new Li(a,this.editor,s,s?t:null);s&&(l.actualDepth=this.depth+1),e.push(new Li(a,this.editor,s,s?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(t).length>0){const i=s.node.attrs,o=Object.keys(t);for(let a=0;a<o.length;a+=1){const l=o[a];if(i[l]!==t[l])break}}else r=s;s=s.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const i=Object.keys(t);return this.children.forEach(o=>{r&&s.length>0||(o.node.type.name===e&&i.every(l=>t[l]===o.node.attrs[l])&&s.push(o),!(r&&s.length>0)&&(s=s.concat(o.querySelectorAll(e,t,r))))}),s}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const nj=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function rj(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(s),s}let sj=class extends d9{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:s})=>this.options.onDrop(t,r,s)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=rj(nj,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=Mx(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(i=>{const o=typeof i=="string"?`${i}$`:i.key;r=r.filter(a=>!a.key.startsWith(o))}),t.length===r.length)return;const s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}createExtensionManager(){var e,t;const s=[...this.options.enableCoreExtensions?[Qz,C9.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),Kz,Xz,Zz,tj,Jz,ej].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new Uo(s,this)}createCommandManager(){this.commandManager=new Af({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=tm(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(o){if(!(o instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(o.message))throw o;this.emit("contentError",{editor:this,error:o,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),t=tm(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=Nx(t,this.options.autofocus);this.view=new D5(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Ho.create({doc:t,selection:r||void 0})});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(o)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const s=e.getMeta("focus"),i=e.getMeta("blur");s&&this.emit("focus",{editor:this,event:s.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return Bx(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,s=typeof e=="string"?t:e;return Cz(this.state,r,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Yg(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return Tz(this.state.doc,{blockSeparator:t,textSerializers:{...Rx(this.schema),...r}})}get isEmpty(){return ry(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new Li(t,this)}get $doc(){return this.$pos(0)}};function ao(n){return new If({find:n.find,handler:({state:e,range:t,match:r})=>{const s=qe(n.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:i}=e,o=r[r.length-1],a=r[0];if(o){const l=a.search(/\S/),c=t.from+a.indexOf(o),u=c+o.length;if(ny(t.from,t.to,e.doc).filter(p=>p.mark.type.excluded.find(y=>y===n.type&&y!==p.mark.type)).filter(p=>p.to>c).length)return null;u<t.to&&i.delete(u,t.to),c>t.from&&i.delete(t.from+l,c);const h=t.from+l+o.length;i.addMark(t.from+l,h,n.type.create(s||{})),i.removeStoredMark(n.type)}}})}function ij(n){return new If({find:n.find,handler:({state:e,range:t,match:r})=>{const s=qe(n.getAttributes,void 0,r)||{},{tr:i}=e,o=t.from;let a=t.to;const l=n.type.create(s);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];i.insertText(d,o+r[0].length-1),i.replaceWith(u,a,l)}else if(r[0]){const c=n.type.isInline?o:o-1;i.insert(c,n.type.create(s)).delete(i.mapping.map(o),i.mapping.map(a))}i.scrollIntoView()}})}function rm(n){return new If({find:n.find,handler:({state:e,range:t,match:r})=>{const s=e.doc.resolve(t.from),i=qe(n.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,i)}})}function Xl(n){return new If({find:n.find,handler:({state:e,range:t,match:r,chain:s})=>{const i=qe(n.getAttributes,void 0,r)||{},o=e.tr.delete(t.from,t.to),l=o.doc.resolve(t.from).blockRange(),c=l&&Ng(l,n.type,i);if(!c)return null;if(o.wrap(l,c),n.keepMarks&&n.editor){const{selection:d,storedMarks:h}=e,{splittableMarks:p}=n.editor.extensionManager,m=h||d.$to.parentOffset&&d.$from.marks();if(m){const y=m.filter(v=>p.includes(v.type.name));o.ensureMarks(y)}}if(n.keepAttributes){const d=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(d,i).run()}const u=o.doc.resolve(t.from-1).nodeBefore;u&&u.type===n.type&&bi(o.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,u))&&o.join(t.from-1)}})}class Nn{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=qe(ve(this,"addOptions",{name:this.name}))),this.storage=qe(ve(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Nn(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>Mf(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Nn(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=qe(ve(t,"addOptions",{name:t.name})),t.storage=qe(ve(t,"addStorage",{name:t.name,options:t.options})),t}}function ci(n){return new w9({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:s})=>{const i=qe(n.getAttributes,void 0,r,s);if(i===!1||i===null)return null;const{tr:o}=e,a=r[r.length-1],l=r[0];let c=t.to;if(a){const u=l.search(/\S/),d=t.from+l.indexOf(a),h=d+a.length;if(ny(t.from,t.to,e.doc).filter(m=>m.mark.type.excluded.find(v=>v===n.type&&v!==m.mark.type)).filter(m=>m.to>d).length)return null;h<t.to&&o.delete(h,t.to),d>t.from&&o.delete(t.from+u,d),c=t.from+u+a.length,o.addMark(t.from+u,c,n.type.create(i||{})),o.removeStoredMark(n.type)}}})}function Cw(n){return h1((e,t)=>({get(){return e(),n},set(r){n=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{t()})})}}))}let oj=class extends sj{constructor(e={}){return super(e),this.contentComponent=null,this.appContext=null,this.reactiveState=Cw(this.view.state),this.reactiveExtensionStorage=Cw(this.extensionStorage),this.on("beforeTransaction",({nextState:t})=>{this.reactiveState.value=t,this.reactiveExtensionStorage.value=this.extensionStorage}),c1(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(e,t){const r=super.registerPlugin(e,t);return this.reactiveState&&(this.reactiveState.value=r),r}unregisterPlugin(e){const t=super.unregisterPlugin(e);return this.reactiveState&&t&&(this.reactiveState.value=t),t}};const aj=_m({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(n){const e=fe(),t=Ea();return $A(()=>{const r=n.editor;r&&r.options.element&&e.value&&as(()=>{if(!e.value||!r.options.element.firstChild)return;const s=_n(e.value);e.value.append(...r.options.element.childNodes),r.contentComponent=t.ctx._,t&&(r.appContext={...t.appContext,provides:t.provides}),r.setOptions({element:s}),r.createNodeViews()})}),lo(()=>{const r=n.editor;r&&(r.contentComponent=null,r.appContext=null)}),{rootEl:e}},render(){return Sn("div",{ref:n=>{this.rootEl=n}})}}),lj=/^\s*>\s$/,uj=Nn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",Rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Xl({find:lj,type:this.type})]}}),cj=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,dj=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,fj=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,hj=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,pj=ir.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",Rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ao({find:cj,type:this.type}),ao({find:fj,type:this.type})]},addPasteRules(){return[ci({find:dj,type:this.type}),ci({find:hj,type:this.type})]}}),mj="listItem",Aw="textStyle",kw=/^\s*([-+*])\s$/,gj=Nn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Rt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(mj,this.editor.getAttributes(Aw)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=Xl({find:kw,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Xl({find:kw,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Aw),editor:this.editor})),[n]}}),yj=/(^|[^`])`([^`]+)`(?!`)/,vj=/(^|[^`])`([^`]+)`(?!`)/g,bj=ir.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ao({find:yj,type:this.type})]},addPasteRules(){return[ci({find:vj,type:this.type})]}}),wj=/^```([a-z]+)?[\s\n]$/,Tj=/^~~~([a-z]+)?[\s\n]$/,Ej=Nn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,i=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(t)).map(o=>o.replace(t,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Rt(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:s}=t;if(!s||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!i||!o?!1:n.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:s,empty:i}=t;if(!i||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const a=s.after();return a===void 0?!1:r.nodeAt(a)?n.commands.command(({tr:c})=>(c.setSelection(je.near(r.resolve(a))),!0)):n.commands.exitCode()}}},addInputRules(){return[rm({find:wj,type:this.type,getAttributes:n=>({language:n[1]})}),rm({find:Tj,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new on({key:new Kn("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,i=s==null?void 0:s.mode;if(!t||!i)return!1;const{tr:o,schema:a}=n.state,l=a.text(t.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:i},l)),o.selection.$from.parent.type!==this.type&&o.setSelection(Le.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),n.dispatch(o),!0}}})]}}),Sj=Nn.create({name:"doc",topNode:!0,content:"block+"});function _j(n={}){return new on({view(e){return new xj(e,n)}})}class xj{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let i=o=>{this[s](o)};return e.dom.addEventListener(s,i),{name:s,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,s=this.editorView.dom,i=s.getBoundingClientRect(),o=i.width/s.offsetWidth,a=i.height/s.offsetHeight;if(t){let d=e.nodeBefore,h=e.nodeAfter;if(d||h){let p=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(p){let m=p.getBoundingClientRect(),y=d?m.bottom:m.top;d&&h&&(y=(y+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*a;r={left:m.left,right:m.right,top:y-v,bottom:y+v}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*o;r={left:d.left-h,right:d.left+h,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let d=l.getBoundingClientRect(),h=d.width/l.offsetWidth,p=d.height/l.offsetHeight;c=d.left-l.scrollLeft*h,u=d.top-l.scrollTop*p}this.element.style.left=(r.left-c)/o+"px",this.element.style.top=(r.top-u)/a+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),s=r&&r.type.spec.disableDropCursor,i=typeof s=="function"?s(this.editorView,t,e):s;if(t&&!i){let o=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=I_(this.editorView.state.doc,o,this.editorView.dragging.slice);a!=null&&(o=a)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const Cj=Kt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[_j(this.options)]}});class Et extends je{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return Et.valid(r)?new Et(r):je.near(r)}content(){return pe.empty}eq(e){return e instanceof Et&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Et(e.resolve(t.pos))}getBookmark(){return new sy(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!Aj(e)||!kj(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let s=t.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&Et.valid(e))return e;let s=e.pos,i=null;for(let o=e.depth;;o--){let a=e.node(o);if(t>0?e.indexAfter(o)<a.childCount:e.index(o)>0){i=a.child(t>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;s+=t;let l=e.doc.resolve(s);if(Et.valid(l))return l}for(;;){let o=t>0?i.firstChild:i.lastChild;if(!o){if(i.isAtom&&!i.isText&&!Ae.isSelectable(i)){e=e.doc.resolve(s+i.nodeSize*t),r=!1;continue e}break}i=o,s+=t;let a=e.doc.resolve(s);if(Et.valid(a))return a}return null}}}Et.prototype.visible=!1;Et.findFrom=Et.findGapCursorFrom;je.jsonID("gapcursor",Et);class sy{constructor(e){this.pos=e}map(e){return new sy(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return Et.valid(t)?new Et(t):je.near(t)}}function Aj(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function kj(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(t);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||s.isAtom||s.type.spec.isolating)return!0;if(s.inlineContent)return!1}}return!0}function Ij(){return new on({props:{decorations:Oj,createSelectionBetween(n,e,t){return e.pos==t.pos&&Et.valid(t)?new Et(t):null},handleClick:Pj,handleKeyDown:Mj,handleDOMEvents:{beforeinput:Rj}}})}const Mj=gx({ArrowLeft:Uu("horiz",-1),ArrowRight:Uu("horiz",1),ArrowUp:Uu("vert",-1),ArrowDown:Uu("vert",1)});function Uu(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,i){let o=r.selection,a=e>0?o.$to:o.$from,l=o.empty;if(o instanceof Le){if(!i.endOfTextblock(t)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=Et.findGapCursorFrom(a,e,l);return c?(s&&s(r.tr.setSelection(new Et(c))),!0):!1}}function Pj(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!Et.valid(r))return!1;let s=n.posAtCoords({left:t.clientX,top:t.clientY});return s&&s.inside>-1&&Ae.isSelectable(n.state.doc.nodeAt(s.inside))?!1:(n.dispatch(n.state.tr.setSelection(new Et(r))),!0)}function Rj(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof Et))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let s=Z.empty;for(let o=r.length-1;o>=0;o--)s=Z.from(r[o].createAndFill(null,s));let i=n.state.tr.replace(t.pos,t.pos,new pe(s,0,0));return i.setSelection(Le.near(i.doc.resolve(t.pos+1))),n.dispatch(i),!1}function Oj(n){if(!(n.selection instanceof Et))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ot.create(n.doc,[er.widget(n.selection.head,e,{key:"gapcursor"})])}const Dj=Kt.create({name:"gapCursor",addProseMirrorPlugins(){return[Ij()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=qe(ve(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),Nj=Nn.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Rt(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:s,storedMarks:i}=t;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:a}=r.extensionManager,l=i||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&o){const d=l.filter(h=>a.includes(h.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Lj=Nn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Rt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>rm({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var sd=200,Wt=function(){};Wt.prototype.append=function(e){return e.length?(e=Wt.from(e),!this.length&&e||e.length<sd&&this.leafAppend(e)||this.length<sd&&e.leafPrepend(this)||this.appendInner(e)):this};Wt.prototype.prepend=function(e){return e.length?Wt.from(e).append(this):this};Wt.prototype.appendInner=function(e){return new Vj(this,e)};Wt.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?Wt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};Wt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Wt.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};Wt.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(i,o){return s.push(e(i,o))},t,r),s};Wt.from=function(e){return e instanceof Wt?e:e&&e.length?new Fx(e):Wt.empty};var Fx=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,i){return s==0&&i==this.length?this:new e(this.values.slice(s,i))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,i,o,a){for(var l=i;l<o;l++)if(s(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(s,i,o,a){for(var l=i-1;l>=o;l--)if(s(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=sd)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=sd)return new e(s.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(Wt);Wt.empty=new Fx([]);var Vj=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,i,o){var a=this.left.length;if(s<a&&this.left.forEachInner(r,s,Math.min(i,a),o)===!1||i>a&&this.right.forEachInner(r,Math.max(s-a,0),Math.min(this.length,i)-a,o+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,i,o){var a=this.left.length;if(s>a&&this.right.forEachInvertedInner(r,s-a,Math.max(i,a)-a,o+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(s,a),i,o)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var i=this.left.length;return s<=i?this.left.slice(r,s):r>=i?this.right.slice(r-i,s-i):this.left.slice(r,i).append(this.right.slice(0,s-i))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Wt);const $j=500;class lr{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,i;t&&(s=this.remapping(r,this.items.length),i=s.maps.length);let o=e.tr,a,l,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step){s||(s=this.remapping(r,h+1),i=s.maps.length),i--,u.push(d);return}if(s){u.push(new Er(d.map));let p=d.step.map(s.slice(i)),m;p&&o.maybeStep(p).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],c.push(new Er(m,void 0,void 0,c.length+u.length))),i--,m&&s.appendMap(m,i)}else o.maybeStep(d.step);if(d.selection)return a=s?d.selection.map(s.slice(i)):d.selection,l=new lr(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:o,selection:a}}addTransform(e,t,r,s){let i=[],o=this.eventCount,a=this.items,l=!s&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),h=new Er(e.mapping.maps[u],d,t),p;(p=l&&l.merge(h))&&(h=p,u?i.pop():a=a.slice(0,a.length-1)),i.push(h),t&&(o++,t=void 0),s||(l=h)}let c=o-r.depth;return c>Fj&&(a=Bj(a,c),o-=c),new lr(a.append(i),o)}remapping(e,t){let r=new Wl;return this.items.forEach((s,i)=>{let o=s.mirrorOffset!=null&&i-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,o)},e,t),r}addMaps(e){return this.eventCount==0?this:new lr(this.items.append(e.map(t=>new Er(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-t),i=e.mapping,o=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},s);let l=t;this.items.forEach(h=>{let p=i.getMirror(--l);if(p==null)return;o=Math.min(o,p);let m=i.maps[p];if(h.step){let y=e.steps[p].invert(e.docs[p]),v=h.selection&&h.selection.map(i.slice(l+1,p));v&&a++,r.push(new Er(m,y,v))}else r.push(new Er(m))},s);let c=[];for(let h=t;h<o;h++)c.push(new Er(i.maps[h]));let u=this.items.slice(0,s).append(c).append(r),d=new lr(u,a);return d.emptyItemCount()>$j&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,s=[],i=0;return this.items.forEach((o,a)=>{if(a>=e)s.push(o),o.selection&&i++;else if(o.step){let l=o.step.map(t.slice(r)),c=l&&l.getMap();if(r--,c&&t.appendMap(c,r),l){let u=o.selection&&o.selection.map(t.slice(r));u&&i++;let d=new Er(c.invert(),l,u),h,p=s.length-1;(h=s.length&&s[p].merge(d))?s[p]=h:s.push(d)}}else o.map&&r--},this.items.length,0),new lr(Wt.from(s.reverse()),i)}}lr.empty=new lr(Wt.empty,0);function Bj(n,e){let t;return n.forEach((r,s)=>{if(r.selection&&e--==0)return t=s,!1}),n.slice(t)}class Er{constructor(e,t,r,s){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new Er(t.getMap().invert(),t,this.selection)}}}class Os{constructor(e,t,r,s,i){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=s,this.prevComposition=i}}const Fj=20;function zj(n,e,t,r){let s=t.getMeta(Ji),i;if(s)return s.historyState;t.getMeta(Uj)&&(n=new Os(n.done,n.undone,null,0,-1));let o=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(o&&o.getMeta(Ji))return o.getMeta(Ji).redo?new Os(n.done.addTransform(t,void 0,r,hc(e)),n.undone,Iw(t.mapping.maps),n.prevTime,n.prevComposition):new Os(n.done,n.undone.addTransform(t,void 0,r,hc(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let a=t.getMeta("composition"),l=n.prevTime==0||!o&&n.prevComposition!=a&&(n.prevTime<(t.time||0)-r.newGroupDelay||!jj(t,n.prevRanges)),c=o?zh(n.prevRanges,t.mapping):Iw(t.mapping.maps);return new Os(n.done.addTransform(t,l?e.selection.getBookmark():void 0,r,hc(e)),lr.empty,c,t.time,a??n.prevComposition)}else return(i=t.getMeta("rebased"))?new Os(n.done.rebased(t,i),n.undone.rebased(t,i),zh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Os(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),zh(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function jj(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,s)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&s>=e[i]&&(t=!0)}),t}function Iw(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,s,i,o)=>e.push(i,o));return e}function zh(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let s=e.map(n[r],1),i=e.map(n[r+1],-1);s<=i&&t.push(s,i)}return t}function Hj(n,e,t){let r=hc(e),s=Ji.get(e).spec.config,i=(t?n.undone:n.done).popEvent(e,r);if(!i)return null;let o=i.selection.resolve(i.transform.doc),a=(t?n.done:n.undone).addTransform(i.transform,e.selection.getBookmark(),s,r),l=new Os(t?a:i.remaining,t?i.remaining:a,null,0,-1);return i.transform.setSelection(o).setMeta(Ji,{redo:t,historyState:l})}let jh=!1,Mw=null;function hc(n){let e=n.plugins;if(Mw!=e){jh=!1,Mw=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){jh=!0;break}}return jh}const Ji=new Kn("history"),Uj=new Kn("closeHistory");function qj(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new on({key:Ji,state:{init(){return new Os(lr.empty,lr.empty,null,0,-1)},apply(e,t,r){return zj(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,s=r=="historyUndo"?jx:r=="historyRedo"?Hx:null;return s?(t.preventDefault(),s(e.state,e.dispatch)):!1}}}})}function zx(n,e){return(t,r)=>{let s=Ji.getState(t);if(!s||(n?s.undone:s.done).eventCount==0)return!1;if(r){let i=Hj(s,t,n);i&&r(e?i.scrollIntoView():i)}return!0}}const jx=zx(!1,!0),Hx=zx(!0,!0),Wj=Kt.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>jx(n,e),redo:()=>({state:n,dispatch:e})=>Hx(n,e)}},addProseMirrorPlugins(){return[qj(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Gj=Nn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Rt(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{const{selection:t}=e,{$from:r,$to:s}=t,i=n();return r.parentOffset===0?i.insertContentAt({from:Math.max(r.pos-1,0),to:s.pos},{type:this.name}):Az(t)?i.insertContentAt(s.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:o,dispatch:a})=>{var l;if(a){const{$to:c}=o.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(Le.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(Ae.create(o.doc,c.pos)):o.setSelection(Le.create(o.doc,c.pos));else{const d=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();d&&(o.insert(u,d),o.setSelection(Le.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[ij({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Kj=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Jj=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Qj=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Yj=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Xj=ir.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ao({find:Kj,type:this.type}),ao({find:Qj,type:this.type})]},addPasteRules(){return[ci({find:Jj,type:this.type}),ci({find:Yj,type:this.type})]}}),Zj=Nn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Rt(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),e8="listItem",Pw="textStyle",Rw=/^(\d+)\.\s$/,t8=Nn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Rt(this.options.HTMLAttributes,t),0]:["ol",Rt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(e8,this.editor.getAttributes(Pw)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=Xl({find:Rw,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=Xl({find:Rw,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Pw)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),n8=Nn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),r8=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,s8=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,i8=ir.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ao({find:r8,type:this.type})]},addPasteRules(){return[ci({find:s8,type:this.type})]}}),o8=Nn.create({name:"text",group:"inline"}),a8=Kt.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(pj.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(uj.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(gj.configure(this.options.bulletList)),this.options.code!==!1&&n.push(bj.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(Ej.configure(this.options.codeBlock)),this.options.document!==!1&&n.push(Sj.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(Cj.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(Dj.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(Nj.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(Lj.configure(this.options.heading)),this.options.history!==!1&&n.push(Wj.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(Gj.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(Xj.configure(this.options.italic)),this.options.listItem!==!1&&n.push(Zj.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(t8.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(n8.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(i8.configure(this.options.strike)),this.options.text!==!1&&n.push(o8.configure(this.options.text)),n}}),l8=ir.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["u",Rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setUnderline:()=>({commands:n})=>n.setMark(this.name),toggleUnderline:()=>({commands:n})=>n.toggleMark(this.name),unsetUnderline:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),u8=Kt.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:n=>{const e=n.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:n=>n.textAlign?{style:`text-align: ${n.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:n=>({commands:e})=>this.options.alignments.includes(n)?this.options.types.map(t=>e.updateAttributes(t,{textAlign:n})).every(t=>t):!1,unsetTextAlign:()=>({commands:n})=>this.options.types.map(e=>n.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:n=>({editor:e,commands:t})=>this.options.alignments.includes(n)?e.isActive({textAlign:n})?t.unsetTextAlign():t.setTextAlign(n):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),c8="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",d8="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",wa=(n,e)=>{for(const t in e)n[t]=e[t];return n},sm="numeric",im="ascii",om="alpha",Tl="asciinumeric",rl="alphanumeric",am="domain",Ux="emoji",f8="scheme",h8="slashscheme",Hh="whitespace";function p8(n,e){return n in e||(e[n]=[]),e[n]}function ji(n,e,t){e[sm]&&(e[Tl]=!0,e[rl]=!0),e[im]&&(e[Tl]=!0,e[om]=!0),e[Tl]&&(e[rl]=!0),e[om]&&(e[rl]=!0),e[rl]&&(e[am]=!0),e[Ux]&&(e[am]=!0);for(const r in e){const s=p8(r,t);s.indexOf(n)<0&&s.push(n)}}function m8(n,e){const t={};for(const r in e)e[r].indexOf(n)>=0&&(t[r]=!0);return t}function Mn(n=null){this.j={},this.jr=[],this.jd=null,this.t=n}Mn.groups={};Mn.prototype={accepts(){return!!this.t},go(n){const e=this,t=e.j[n];if(t)return t;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],i=e.jr[r][1];if(i&&s.test(n))return i}return e.jd},has(n,e=!1){return e?n in this.j:!!this.go(n)},ta(n,e,t,r){for(let s=0;s<n.length;s++)this.tt(n[s],e,t,r)},tr(n,e,t,r){r=r||Mn.groups;let s;return e&&e.j?s=e:(s=new Mn(e),t&&r&&ji(e,t,r)),this.jr.push([n,s]),s},ts(n,e,t,r){let s=this;const i=n.length;if(!i)return s;for(let o=0;o<i-1;o++)s=s.tt(n[o]);return s.tt(n[i-1],e,t,r)},tt(n,e,t,r){r=r||Mn.groups;const s=this;if(e&&e.j)return s.j[n]=e,e;const i=e;let o,a=s.go(n);if(a?(o=new Mn,wa(o.j,a.j),o.jr.push.apply(o.jr,a.jr),o.jd=a.jd,o.t=a.t):o=new Mn,i){if(r)if(o.t&&typeof o.t=="string"){const l=wa(m8(o.t,r),t);ji(i,l,r)}else t&&ji(i,t,r);o.t=i}return s.j[n]=o,o}};const Ue=(n,e,t,r,s)=>n.ta(e,t,r,s),Tt=(n,e,t,r,s)=>n.tr(e,t,r,s),Ow=(n,e,t,r,s)=>n.ts(e,t,r,s),re=(n,e,t,r,s)=>n.tt(e,t,r,s),es="WORD",lm="UWORD",qx="ASCIINUMERICAL",Wx="ALPHANUMERICAL",Zl="LOCALHOST",um="TLD",cm="UTLD",pc="SCHEME",jo="SLASH_SCHEME",iy="NUM",dm="WS",oy="NL",El="OPENBRACE",Sl="CLOSEBRACE",id="OPENBRACKET",od="CLOSEBRACKET",ad="OPENPAREN",ld="CLOSEPAREN",ud="OPENANGLEBRACKET",cd="CLOSEANGLEBRACKET",dd="FULLWIDTHLEFTPAREN",fd="FULLWIDTHRIGHTPAREN",hd="LEFTCORNERBRACKET",pd="RIGHTCORNERBRACKET",md="LEFTWHITECORNERBRACKET",gd="RIGHTWHITECORNERBRACKET",yd="FULLWIDTHLESSTHAN",vd="FULLWIDTHGREATERTHAN",bd="AMPERSAND",ay="APOSTROPHE",wd="ASTERISK",Ds="AT",Td="BACKSLASH",Ed="BACKTICK",Sd="CARET",Ls="COLON",ly="COMMA",_d="DOLLAR",Sr="DOT",xd="EQUALS",uy="EXCLAMATION",Yn="HYPHEN",_l="PERCENT",Cd="PIPE",Ad="PLUS",kd="POUND",xl="QUERY",cy="QUOTE",Gx="FULLWIDTHMIDDLEDOT",dy="SEMI",_r="SLASH",Cl="TILDE",Id="UNDERSCORE",Kx="EMOJI",Md="SYM";var Jx=Object.freeze({__proto__:null,WORD:es,UWORD:lm,ASCIINUMERICAL:qx,ALPHANUMERICAL:Wx,LOCALHOST:Zl,TLD:um,UTLD:cm,SCHEME:pc,SLASH_SCHEME:jo,NUM:iy,WS:dm,NL:oy,OPENBRACE:El,CLOSEBRACE:Sl,OPENBRACKET:id,CLOSEBRACKET:od,OPENPAREN:ad,CLOSEPAREN:ld,OPENANGLEBRACKET:ud,CLOSEANGLEBRACKET:cd,FULLWIDTHLEFTPAREN:dd,FULLWIDTHRIGHTPAREN:fd,LEFTCORNERBRACKET:hd,RIGHTCORNERBRACKET:pd,LEFTWHITECORNERBRACKET:md,RIGHTWHITECORNERBRACKET:gd,FULLWIDTHLESSTHAN:yd,FULLWIDTHGREATERTHAN:vd,AMPERSAND:bd,APOSTROPHE:ay,ASTERISK:wd,AT:Ds,BACKSLASH:Td,BACKTICK:Ed,CARET:Sd,COLON:Ls,COMMA:ly,DOLLAR:_d,DOT:Sr,EQUALS:xd,EXCLAMATION:uy,HYPHEN:Yn,PERCENT:_l,PIPE:Cd,PLUS:Ad,POUND:kd,QUERY:xl,QUOTE:cy,FULLWIDTHMIDDLEDOT:Gx,SEMI:dy,SLASH:_r,TILDE:Cl,UNDERSCORE:Id,EMOJI:Kx,SYM:Md});const Yr=/[a-z]/,Ka=new RegExp("\\p{L}","u"),Uh=new RegExp("\\p{Emoji}","u"),Xr=/\d/,qh=/\s/,Dw="\r",Wh=`
`,g8="",y8="",Gh="";let qu=null,Wu=null;function v8(n=[]){const e={};Mn.groups=e;const t=new Mn;qu==null&&(qu=Nw(c8)),Wu==null&&(Wu=Nw(d8)),re(t,"'",ay),re(t,"{",El),re(t,"}",Sl),re(t,"[",id),re(t,"]",od),re(t,"(",ad),re(t,")",ld),re(t,"<",ud),re(t,">",cd),re(t,"",dd),re(t,"",fd),re(t,"",hd),re(t,"",pd),re(t,"",md),re(t,"",gd),re(t,"",yd),re(t,"",vd),re(t,"&",bd),re(t,"*",wd),re(t,"@",Ds),re(t,"`",Ed),re(t,"^",Sd),re(t,":",Ls),re(t,",",ly),re(t,"$",_d),re(t,".",Sr),re(t,"=",xd),re(t,"!",uy),re(t,"-",Yn),re(t,"%",_l),re(t,"|",Cd),re(t,"+",Ad),re(t,"#",kd),re(t,"?",xl),re(t,'"',cy),re(t,"/",_r),re(t,";",dy),re(t,"~",Cl),re(t,"_",Id),re(t,"\\",Td),re(t,"",Gx);const r=Tt(t,Xr,iy,{[sm]:!0});Tt(r,Xr,r);const s=Tt(r,Yr,qx,{[Tl]:!0}),i=Tt(r,Ka,Wx,{[rl]:!0}),o=Tt(t,Yr,es,{[im]:!0});Tt(o,Xr,s),Tt(o,Yr,o),Tt(s,Xr,s),Tt(s,Yr,s);const a=Tt(t,Ka,lm,{[om]:!0});Tt(a,Yr),Tt(a,Xr,i),Tt(a,Ka,a),Tt(i,Xr,i),Tt(i,Yr),Tt(i,Ka,i);const l=re(t,Wh,oy,{[Hh]:!0}),c=re(t,Dw,dm,{[Hh]:!0}),u=Tt(t,qh,dm,{[Hh]:!0});re(t,Gh,u),re(c,Wh,l),re(c,Gh,u),Tt(c,qh,u),re(u,Dw),re(u,Wh),Tt(u,qh,u),re(u,Gh,u);const d=Tt(t,Uh,Kx,{[Ux]:!0});re(d,"#"),Tt(d,Uh,d),re(d,g8,d);const h=re(d,y8);re(h,"#"),Tt(h,Uh,d);const p=[[Yr,o],[Xr,s]],m=[[Yr,null],[Ka,a],[Xr,i]];for(let y=0;y<qu.length;y++)As(t,qu[y],um,es,p);for(let y=0;y<Wu.length;y++)As(t,Wu[y],cm,lm,m);ji(um,{tld:!0,ascii:!0},e),ji(cm,{utld:!0,alpha:!0},e),As(t,"file",pc,es,p),As(t,"mailto",pc,es,p),As(t,"http",jo,es,p),As(t,"https",jo,es,p),As(t,"ftp",jo,es,p),As(t,"ftps",jo,es,p),ji(pc,{scheme:!0,ascii:!0},e),ji(jo,{slashscheme:!0,ascii:!0},e),n=n.sort((y,v)=>y[0]>v[0]?1:-1);for(let y=0;y<n.length;y++){const v=n[y][0],T=n[y][1]?{[f8]:!0}:{[h8]:!0};v.indexOf("-")>=0?T[am]=!0:Yr.test(v)?Xr.test(v)?T[Tl]=!0:T[im]=!0:T[sm]=!0,Ow(t,v,v,T)}return Ow(t,"localhost",Zl,{ascii:!0}),t.jd=new Mn(Md),{start:t,tokens:wa({groups:e},Jx)}}function Qx(n,e){const t=b8(e.replace(/[A-Z]/g,a=>a.toLowerCase())),r=t.length,s=[];let i=0,o=0;for(;o<r;){let a=n,l=null,c=0,u=null,d=-1,h=-1;for(;o<r&&(l=a.go(t[o]));)a=l,a.accepts()?(d=0,h=0,u=a):d>=0&&(d+=t[o].length,h++),c+=t[o].length,i+=t[o].length,o++;i-=d,o-=h,c-=d,s.push({t:u.t,v:e.slice(i-c,i),s:i-c,e:i})}return s}function b8(n){const e=[],t=n.length;let r=0;for(;r<t;){let s=n.charCodeAt(r),i,o=s<55296||s>56319||r+1===t||(i=n.charCodeAt(r+1))<56320||i>57343?n[r]:n.slice(r,r+2);e.push(o),r+=o.length}return e}function As(n,e,t,r,s){let i;const o=e.length;for(let a=0;a<o-1;a++){const l=e[a];n.j[l]?i=n.j[l]:(i=new Mn(r),i.jr=s.slice(),n.j[l]=i),n=i}return i=new Mn(t),i.jr=s.slice(),n.j[e[o-1]]=i,i}function Nw(n){const e=[],t=[];let r=0,s="0123456789";for(;r<n.length;){let i=0;for(;s.indexOf(n[r+i])>=0;)i++;if(i>0){e.push(t.join(""));for(let o=parseInt(n.substring(r,r+i),10);o>0;o--)t.pop();r+=i}else t.push(n[r]),r++}return e}const eu={defaultProtocol:"http",events:null,format:Lw,formatHref:Lw,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function fy(n,e=null){let t=wa({},eu);n&&(t=wa(t,n instanceof fy?n.o:n));const r=t.ignoreTags,s=[];for(let i=0;i<r.length;i++)s.push(r[i].toUpperCase());this.o=t,e&&(this.defaultRender=e),this.ignoreTags=s}fy.prototype={o:eu,ignoreTags:[],defaultRender(n){return n},check(n){return this.get("validate",n.toString(),n)},get(n,e,t){const r=e!=null;let s=this.o[n];return s&&(typeof s=="object"?(s=t.t in s?s[t.t]:eu[n],typeof s=="function"&&r&&(s=s(e,t))):typeof s=="function"&&r&&(s=s(e,t.t,t)),s)},getObj(n,e,t){let r=this.o[n];return typeof r=="function"&&e!=null&&(r=r(e,t.t,t)),r},render(n){const e=n.render(this);return(this.get("render",null,n)||this.defaultRender)(e,n.t,n)}};function Lw(n){return n}function Yx(n,e){this.t="token",this.v=n,this.tk=e}Yx.prototype={isLink:!1,toString(){return this.v},toHref(n){return this.toString()},toFormattedString(n){const e=this.toString(),t=n.get("truncate",e,this),r=n.get("format",e,this);return t&&r.length>t?r.substring(0,t)+"":r},toFormattedHref(n){return n.get("formatHref",this.toHref(n.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(n=eu.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(n),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(n){return{type:this.t,value:this.toFormattedString(n),isLink:this.isLink,href:this.toFormattedHref(n),start:this.startIndex(),end:this.endIndex()}},validate(n){return n.get("validate",this.toString(),this)},render(n){const e=this,t=this.toHref(n.get("defaultProtocol")),r=n.get("formatHref",t,this),s=n.get("tagName",t,e),i=this.toFormattedString(n),o={},a=n.get("className",t,e),l=n.get("target",t,e),c=n.get("rel",t,e),u=n.getObj("attributes",t,e),d=n.getObj("events",t,e);return o.href=r,a&&(o.class=a),l&&(o.target=l),c&&(o.rel=c),u&&wa(o,u),{tagName:s,attributes:o,content:i,eventListeners:d}}};function Rf(n,e){class t extends Yx{constructor(s,i){super(s,i),this.t=n}}for(const r in e)t.prototype[r]=e[r];return t.t=n,t}const Vw=Rf("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),$w=Rf("text"),w8=Rf("nl"),Gu=Rf("url",{isLink:!0,toHref(n=eu.defaultProtocol){return this.hasProtocol()?this.v:`${n}://${this.v}`},hasProtocol(){const n=this.tk;return n.length>=2&&n[0].t!==Zl&&n[1].t===Ls}}),Qn=n=>new Mn(n);function T8({groups:n}){const e=n.domain.concat([bd,wd,Ds,Td,Ed,Sd,_d,xd,Yn,iy,_l,Cd,Ad,kd,_r,Md,Cl,Id]),t=[Ls,ly,Sr,uy,_l,xl,cy,dy,ud,cd,El,Sl,od,id,ad,ld,dd,fd,hd,pd,md,gd,yd,vd],r=[bd,ay,wd,Td,Ed,Sd,_d,xd,Yn,El,Sl,_l,Cd,Ad,kd,xl,_r,Md,Cl,Id],s=Qn(),i=re(s,Cl);Ue(i,r,i),Ue(i,n.domain,i);const o=Qn(),a=Qn(),l=Qn();Ue(s,n.domain,o),Ue(s,n.scheme,a),Ue(s,n.slashscheme,l),Ue(o,r,i),Ue(o,n.domain,o);const c=re(o,Ds);re(i,Ds,c),re(a,Ds,c),re(l,Ds,c);const u=re(i,Sr);Ue(u,r,i),Ue(u,n.domain,i);const d=Qn();Ue(c,n.domain,d),Ue(d,n.domain,d);const h=re(d,Sr);Ue(h,n.domain,d);const p=Qn(Vw);Ue(h,n.tld,p),Ue(h,n.utld,p),re(c,Zl,p);const m=re(d,Yn);re(m,Yn,m),Ue(m,n.domain,d),Ue(p,n.domain,d),re(p,Sr,h),re(p,Yn,m);const y=re(p,Ls);Ue(y,n.numeric,Vw);const v=re(o,Yn),S=re(o,Sr);re(v,Yn,v),Ue(v,n.domain,o),Ue(S,r,i),Ue(S,n.domain,o);const T=Qn(Gu);Ue(S,n.tld,T),Ue(S,n.utld,T),Ue(T,n.domain,o),Ue(T,r,i),re(T,Sr,S),re(T,Yn,v),re(T,Ds,c);const b=re(T,Ls),C=Qn(Gu);Ue(b,n.numeric,C);const O=Qn(Gu),N=Qn();Ue(O,e,O),Ue(O,t,N),Ue(N,e,O),Ue(N,t,N),re(T,_r,O),re(C,_r,O);const A=re(a,Ls),x=re(l,Ls),_=re(x,_r),M=re(_,_r);Ue(a,n.domain,o),re(a,Sr,S),re(a,Yn,v),Ue(l,n.domain,o),re(l,Sr,S),re(l,Yn,v),Ue(A,n.domain,O),re(A,_r,O),re(A,xl,O),Ue(M,n.domain,O),Ue(M,e,O),re(M,_r,O);const I=[[El,Sl],[id,od],[ad,ld],[ud,cd],[dd,fd],[hd,pd],[md,gd],[yd,vd]];for(let P=0;P<I.length;P++){const[k,K]=I[P],le=re(O,k);re(N,k,le),re(le,K,O);const J=Qn(Gu);Ue(le,e,J);const ee=Qn();Ue(le,t),Ue(J,e,J),Ue(J,t,ee),Ue(ee,e,J),Ue(ee,t,ee),re(J,K,O),re(ee,K,O)}return re(s,Zl,T),re(s,oy,w8),{start:s,tokens:Jx}}function E8(n,e,t){let r=t.length,s=0,i=[],o=[];for(;s<r;){let a=n,l=null,c=null,u=0,d=null,h=-1;for(;s<r&&!(l=a.go(t[s].t));)o.push(t[s++]);for(;s<r&&(c=l||a.go(t[s].t));)l=null,a=c,a.accepts()?(h=0,d=a):h>=0&&h++,s++,u++;if(h<0)s-=u,s<r&&(o.push(t[s]),s++);else{o.length>0&&(i.push(Kh($w,e,o)),o=[]),s-=h,u-=h;const p=d.t,m=t.slice(s-u,s);i.push(Kh(p,e,m))}}return o.length>0&&i.push(Kh($w,e,o)),i}function Kh(n,e,t){const r=t[0].s,s=t[t.length-1].e,i=e.slice(r,s);return new n(i,t)}const S8=typeof console<"u"&&console&&console.warn||(()=>{}),_8="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",ht={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function x8(){return Mn.groups={},ht.scanner=null,ht.parser=null,ht.tokenQueue=[],ht.pluginQueue=[],ht.customSchemes=[],ht.initialized=!1,ht}function Bw(n,e=!1){if(ht.initialized&&S8(`linkifyjs: already initialized - will not register custom scheme "${n}" ${_8}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(n))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);ht.customSchemes.push([n,e])}function C8(){ht.scanner=v8(ht.customSchemes);for(let n=0;n<ht.tokenQueue.length;n++)ht.tokenQueue[n][1]({scanner:ht.scanner});ht.parser=T8(ht.scanner.tokens);for(let n=0;n<ht.pluginQueue.length;n++)ht.pluginQueue[n][1]({scanner:ht.scanner,parser:ht.parser});return ht.initialized=!0,ht}function hy(n){return ht.initialized||C8(),E8(ht.parser.start,n,Qx(ht.scanner.start,n))}hy.scan=Qx;function Xx(n,e=null,t=null){if(e&&typeof e=="object"){if(t)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);t=e,e=null}const r=new fy(t),s=hy(n),i=[];for(let o=0;o<s.length;o++){const a=s[o];a.isLink&&(!e||a.t===e)&&r.check(a)&&i.push(a.toFormattedObject(r))}return i}function A8(n){return n.length===1?n[0].isLink:n.length===3&&n[1].isLink?["()","[]"].includes(n[0].value+n[2].value):!1}function k8(n){return new on({key:new Kn("autolink"),appendTransaction:(e,t,r)=>{const s=e.some(c=>c.docChanged)&&!t.doc.eq(r.doc),i=e.some(c=>c.getMeta("preventAutolink"));if(!s||i)return;const{tr:o}=r,a=yz(t.doc,[...e]);if(xz(a).forEach(({newRange:c})=>{const u=bz(r.doc,c,p=>p.isTextblock);let d,h;if(u.length>1?(d=u[0],h=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ")):u.length&&r.doc.textBetween(c.from,c.to," "," ").endsWith(" ")&&(d=u[0],h=r.doc.textBetween(d.pos,c.to,void 0," ")),d&&h){const p=h.split(" ").filter(S=>S!=="");if(p.length<=0)return!1;const m=p[p.length-1],y=d.pos+h.lastIndexOf(m);if(!m)return!1;const v=hy(m).map(S=>S.toObject(n.defaultProtocol));if(!A8(v))return!1;v.filter(S=>S.isLink).map(S=>({...S,from:y+S.start+1,to:y+S.end+1})).filter(S=>r.schema.marks.code?!r.doc.rangeHasMark(S.from,S.to,r.schema.marks.code):!0).filter(S=>n.validate(S.value)).filter(S=>n.shouldAutoLink(S.value)).forEach(S=>{ny(S.from,S.to,r.doc).some(T=>T.mark.type===n.type)||o.addMark(S.from,S.to,n.type.create({href:S.href}))})}}),!!o.steps.length)return o}})}function I8(n){return new on({key:new Kn("handleClickLink"),props:{handleClick:(e,t,r)=>{var s,i;if(r.button!==0||!e.editable)return!1;let o=r.target;const a=[];for(;o.nodeName!=="DIV";)a.push(o),o=o.parentNode;if(!a.find(h=>h.nodeName==="A"))return!1;const l=Bx(e.state,n.type.name),c=r.target,u=(s=c==null?void 0:c.href)!==null&&s!==void 0?s:l.href,d=(i=c==null?void 0:c.target)!==null&&i!==void 0?i:l.target;return c&&u?(window.open(u,d),!0):!1}}})}function M8(n){return new on({key:new Kn("handlePasteLink"),props:{handlePaste:(e,t,r)=>{const{state:s}=e,{selection:i}=s,{empty:o}=i;if(o)return!1;let a="";r.content.forEach(c=>{a+=c.textContent});const l=Xx(a,{defaultProtocol:n.defaultProtocol}).find(c=>c.isLink&&c.value===a);return!a||!l?!1:n.editor.commands.setMark(n.type,{href:l.href})}}})}const P8=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function Pi(n,e){const t=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&t.push(s)}),!n||n.replace(P8,"").match(new RegExp(`^(?:(?:${t.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}const R8=ir.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(n=>{if(typeof n=="string"){Bw(n);return}Bw(n.scheme,n.optionalSlashes)})},onDestroy(){x8()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(n,e)=>!!Pi(n,e.protocols),validate:n=>!!n,shouldAutoLink:n=>!!n}},addAttributes(){return{href:{default:null,parseHTML(n){return n.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:n=>{const e=n.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:t=>!!Pi(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:n}){return this.options.isAllowedUri(n.href,{defaultValidate:e=>!!Pi(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Rt(this.options.HTMLAttributes,n),0]:["a",Rt(this.options.HTMLAttributes,{...n,href:""}),0]},addCommands(){return{setLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!Pi(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,n).setMeta("preventAutolink",!0).run():!1},toggleLink:n=>({chain:e})=>{const{href:t}=n;return this.options.isAllowedUri(t,{defaultValidate:r=>!!Pi(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().toggleMark(this.name,n,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run():!1},unsetLink:()=>({chain:n})=>n().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ci({find:n=>{const e=[];if(n){const{protocols:t,defaultProtocol:r}=this.options,s=Xx(n).filter(i=>i.isLink&&this.options.isAllowedUri(i.value,{defaultValidate:o=>!!Pi(o,t),protocols:t,defaultProtocol:r}));s.length&&s.forEach(i=>e.push({text:i.value,data:{href:i.href},index:i.start}))}return e},type:this.type,getAttributes:n=>{var e;return{href:(e=n.data)===null||e===void 0?void 0:e.href}}})]},addProseMirrorPlugins(){const n=[],{protocols:e,defaultProtocol:t}=this.options;return this.options.autolink&&n.push(k8({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!Pi(s,e),protocols:e,defaultProtocol:t}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&n.push(I8({type:this.type})),this.options.linkOnPaste&&n.push(M8({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),n}}),O8=n=>{if(!n.children.length)return;const e=n.querySelectorAll("span");e&&e.forEach(t=>{var r,s;const i=t.getAttribute("style"),o=(s=(r=t.parentElement)===null||r===void 0?void 0:r.closest("span"))===null||s===void 0?void 0:s.getAttribute("style");t.setAttribute("style",`${o};${i}`)})},D8=ir.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:n=>n.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&O8(n),{}):!1}]},renderHTML({HTMLAttributes:n}){return["span",Rt(this.options.HTMLAttributes,n),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:n})=>{const{selection:e}=n;return n.doc.nodesBetween(e.from,e.to,(t,r)=>{if(t.isTextblock)return!0;t.marks.filter(s=>s.type===this.type).some(s=>Object.values(s.attrs).some(i=>!!i))||n.removeMark(r,r+t.nodeSize,this.type)}),!0}}}}),N8=Kt.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:n=>{var e;return(e=n.style.color)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:n=>n.color?{style:`color: ${n.color}`}:{}}}}]},addCommands(){return{setColor:n=>({chain:e})=>e().setMark("textStyle",{color:n}).run(),unsetColor:()=>({chain:n})=>n().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}});var L8=Kt.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:n=>n.style.fontSize,renderHTML:n=>n.fontSize?{style:`font-size: ${n.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:n=>({chain:e})=>e().setMark("textStyle",{fontSize:n}).run(),unsetFontSize:()=>({chain:n})=>n().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),V8=L8;const $8=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,B8=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,F8=ir.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:n=>n.getAttribute("data-color")||n.style.backgroundColor,renderHTML:n=>n.color?{"data-color":n.color,style:`background-color: ${n.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:n}){return["mark",Rt(this.options.HTMLAttributes,n),0]},addCommands(){return{setHighlight:n=>({commands:e})=>e.setMark(this.name,n),toggleHighlight:n=>({commands:e})=>e.toggleMark(this.name,n),unsetHighlight:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[ao({find:$8,type:this.type})]},addPasteRules(){return[ci({find:B8,type:this.type})]}}),z8={class:"tiptap-editor-container"},j8={key:0,class:"tiptap-menu"},H8={class:"menu-row"},U8={class:"dropdown"},q8={class:"dropdown-menu font-size-menu"},W8={class:"dropdown"},G8={class:"dropdown-menu"},K8={class:"menu-row"},J8={class:"dropdown"},Q8={class:"dropdown-menu colors-menu"},Y8={class:"dropdown"},X8={class:"dropdown-menu colors-menu"},Z8={class:"editor-content"},e7={__name:"Editor",props:{modelValue:{type:String,default:""},placeholder:{type:String,default:"Escreva algo..."}},emits:["update:modelValue"],setup(n,{emit:e}){const t=[a8,l8,u8.configure({types:["heading","paragraph"],alignments:["left","center","right","justify"]}),R8.configure({openOnClick:!1,HTMLAttributes:{class:"editor-link"}}),D8,N8,V8.configure({types:["textStyle"]}),F8.configure({multicolor:!0})],r=n,s=e,i=fe(null),o=c=>{i.value&&i.value.chain().focus().setMark("textStyle",{fontSize:c}).run()},a=c=>i.value?i.value.isActive("textStyle",{fontSize:c}):!1,l=()=>{const c=prompt("URL:");if(!c)return;const u=c.startsWith("http")?c:`https://${c}`;i.value.isActive("link")?i.value.chain().focus().extendMarkRange("link").setLink({href:u}).run():i.value.chain().focus().setLink({href:u}).run()};return kt(()=>{i.value=new oj({content:r.modelValue,extensions:t,onUpdate:({editor:c})=>{s("update:modelValue",c.getHTML())},editorProps:{attributes:{class:"prose prose-sm sm:prose focus:outline-none max-w-none",placeholder:r.placeholder}}})}),At(()=>r.modelValue,c=>{i.value&&i.value.getHTML()!==c&&i.value.commands.setContent(c,!1)}),lo(()=>{i.value&&i.value.destroy()}),(c,u)=>(z(),j("div",z8,[i.value?(z(),j("div",j8,[w("div",H8,[w("button",{onClick:u[0]||(u[0]=d=>i.value.chain().focus().toggleBold().run()),class:ye({"is-active":i.value.isActive("bold")}),title:"Negrito"},u[48]||(u[48]=[w("i",{class:"fas fa-bold"},null,-1)]),2),w("button",{onClick:u[1]||(u[1]=d=>i.value.chain().focus().toggleItalic().run()),class:ye({"is-active":i.value.isActive("italic")}),title:"Itlico"},u[49]||(u[49]=[w("i",{class:"fas fa-italic"},null,-1)]),2),w("button",{onClick:u[2]||(u[2]=d=>i.value.chain().focus().toggleUnderline().run()),class:ye({"is-active":i.value.isActive("underline")}),title:"Sublinhado"},u[50]||(u[50]=[w("i",{class:"fas fa-underline"},null,-1)]),2),w("button",{onClick:u[3]||(u[3]=d=>i.value.chain().focus().toggleStrike().run()),class:ye({"is-active":i.value.isActive("strike")}),title:"Tachado"},u[51]||(u[51]=[w("i",{class:"fas fa-strikethrough"},null,-1)]),2),u[69]||(u[69]=w("span",{class:"divider"},null,-1)),w("div",U8,[u[60]||(u[60]=w("button",{class:"dropdown-toggle",title:"Tamanho da fonte"},[w("i",{class:"fas fa-text-height"}),w("i",{class:"fas fa-caret-down"})],-1)),w("div",q8,[w("button",{onClick:u[4]||(u[4]=d=>o("10px")),class:ye({"is-active":a("10px")})},u[52]||(u[52]=[w("span",{style:{"font-size":"10px"}},"Extra pequeno",-1)]),2),w("button",{onClick:u[5]||(u[5]=d=>o("12px")),class:ye({"is-active":a("12px")})},u[53]||(u[53]=[w("span",{style:{"font-size":"12px"}},"Muito pequeno",-1)]),2),w("button",{onClick:u[6]||(u[6]=d=>o("14px")),class:ye({"is-active":a("14px")})},u[54]||(u[54]=[w("span",{style:{"font-size":"14px"}},"Pequeno",-1)]),2),w("button",{onClick:u[7]||(u[7]=d=>o("16px")),class:ye({"is-active":a("16px")})},u[55]||(u[55]=[w("span",{style:{"font-size":"16px"}},"Normal",-1)]),2),w("button",{onClick:u[8]||(u[8]=d=>o("18px")),class:ye({"is-active":a("18px")})},u[56]||(u[56]=[w("span",{style:{"font-size":"18px"}},"Mdio",-1)]),2),w("button",{onClick:u[9]||(u[9]=d=>o("20px")),class:ye({"is-active":a("20px")})},u[57]||(u[57]=[w("span",{style:{"font-size":"20px"}},"Grande",-1)]),2),w("button",{onClick:u[10]||(u[10]=d=>o("24px")),class:ye({"is-active":a("24px")})},u[58]||(u[58]=[w("span",{style:{"font-size":"24px"}},"Muito grande",-1)]),2),w("button",{onClick:u[11]||(u[11]=d=>o("28px")),class:ye({"is-active":a("28px")})},u[59]||(u[59]=[w("span",{style:{"font-size":"28px"}},"Enorme",-1)]),2)])]),w("div",W8,[u[64]||(u[64]=w("button",{class:"dropdown-toggle"},[w("i",{class:"fas fa-heading"}),w("i",{class:"fas fa-caret-down"})],-1)),w("div",G8,[w("button",{onClick:u[12]||(u[12]=d=>i.value.chain().focus().toggleHeading({level:1}).run()),class:ye({"is-active":i.value.isActive("heading",{level:1})})},u[61]||(u[61]=[w("span",{class:"heading-1"},"H1",-1)]),2),w("button",{onClick:u[13]||(u[13]=d=>i.value.chain().focus().toggleHeading({level:2}).run()),class:ye({"is-active":i.value.isActive("heading",{level:2})})},u[62]||(u[62]=[w("span",{class:"heading-2"},"H2",-1)]),2),w("button",{onClick:u[14]||(u[14]=d=>i.value.chain().focus().toggleHeading({level:3}).run()),class:ye({"is-active":i.value.isActive("heading",{level:3})})},u[63]||(u[63]=[w("span",{class:"heading-3"},"H3",-1)]),2)])]),u[70]||(u[70]=w("span",{class:"divider"},null,-1)),w("button",{onClick:u[15]||(u[15]=d=>i.value.chain().focus().setTextAlign("left").run()),class:ye({"is-active":i.value.isActive({textAlign:"left"})}),title:"Alinhar  esquerda"},u[65]||(u[65]=[w("i",{class:"fas fa-align-left"},null,-1)]),2),w("button",{onClick:u[16]||(u[16]=d=>i.value.chain().focus().setTextAlign("center").run()),class:ye({"is-active":i.value.isActive({textAlign:"center"})}),title:"Centralizar"},u[66]||(u[66]=[w("i",{class:"fas fa-align-center"},null,-1)]),2),w("button",{onClick:u[17]||(u[17]=d=>i.value.chain().focus().setTextAlign("right").run()),class:ye({"is-active":i.value.isActive({textAlign:"right"})}),title:"Alinhar  direita"},u[67]||(u[67]=[w("i",{class:"fas fa-align-right"},null,-1)]),2),w("button",{onClick:u[18]||(u[18]=d=>i.value.chain().focus().setTextAlign("justify").run()),class:ye({"is-active":i.value.isActive({textAlign:"justify"})}),title:"Justificar"},u[68]||(u[68]=[w("i",{class:"fas fa-align-justify"},null,-1)]),2)]),w("div",K8,[w("button",{onClick:u[19]||(u[19]=d=>i.value.chain().focus().toggleBulletList().run()),class:ye({"is-active":i.value.isActive("bulletList")}),title:"Lista no ordenada"},u[71]||(u[71]=[w("i",{class:"fas fa-list-ul"},null,-1)]),2),w("button",{onClick:u[20]||(u[20]=d=>i.value.chain().focus().toggleOrderedList().run()),class:ye({"is-active":i.value.isActive("orderedList")}),title:"Lista ordenada"},u[72]||(u[72]=[w("i",{class:"fas fa-list-ol"},null,-1)]),2),u[77]||(u[77]=w("span",{class:"divider"},null,-1)),w("button",{onClick:l,title:"Inserir link"},u[73]||(u[73]=[w("i",{class:"fas fa-link"},null,-1)])),u[78]||(u[78]=w("span",{class:"divider"},null,-1)),w("div",J8,[u[74]||(u[74]=w("button",{class:"dropdown-toggle",title:"Cor do texto"},[w("i",{class:"fas fa-palette"}),w("i",{class:"fas fa-caret-down"})],-1)),w("div",Q8,[w("button",{onClick:u[21]||(u[21]=d=>i.value.chain().focus().setColor("#000000").run()),style:{"background-color":"#000000"}}),w("button",{onClick:u[22]||(u[22]=d=>i.value.chain().focus().setColor("#424242").run()),style:{"background-color":"#424242"}}),w("button",{onClick:u[23]||(u[23]=d=>i.value.chain().focus().setColor("#636363").run()),style:{"background-color":"#636363"}}),w("button",{onClick:u[24]||(u[24]=d=>i.value.chain().focus().setColor("#9C9C9C").run()),style:{"background-color":"#9C9C9C"}}),w("button",{onClick:u[25]||(u[25]=d=>i.value.chain().focus().setColor("#D50000").run()),style:{"background-color":"#D50000"}}),w("button",{onClick:u[26]||(u[26]=d=>i.value.chain().focus().setColor("#E91E63").run()),style:{"background-color":"#E91E63"}}),w("button",{onClick:u[27]||(u[27]=d=>i.value.chain().focus().setColor("#9C27B0").run()),style:{"background-color":"#9C27B0"}}),w("button",{onClick:u[28]||(u[28]=d=>i.value.chain().focus().setColor("#3F51B5").run()),style:{"background-color":"#3F51B5"}}),w("button",{onClick:u[29]||(u[29]=d=>i.value.chain().focus().setColor("#2196F3").run()),style:{"background-color":"#2196F3"}}),w("button",{onClick:u[30]||(u[30]=d=>i.value.chain().focus().setColor("#00BCD4").run()),style:{"background-color":"#00BCD4"}}),w("button",{onClick:u[31]||(u[31]=d=>i.value.chain().focus().setColor("#009688").run()),style:{"background-color":"#009688"}}),w("button",{onClick:u[32]||(u[32]=d=>i.value.chain().focus().setColor("#4CAF50").run()),style:{"background-color":"#4CAF50"}}),w("button",{onClick:u[33]||(u[33]=d=>i.value.chain().focus().setColor("#8BC34A").run()),style:{"background-color":"#8BC34A"}}),w("button",{onClick:u[34]||(u[34]=d=>i.value.chain().focus().setColor("#CDDC39").run()),style:{"background-color":"#CDDC39"}}),w("button",{onClick:u[35]||(u[35]=d=>i.value.chain().focus().setColor("#FFEB3B").run()),style:{"background-color":"#FFEB3B"}}),w("button",{onClick:u[36]||(u[36]=d=>i.value.chain().focus().setColor("#FF9800").run()),style:{"background-color":"#FF9800"}}),w("button",{onClick:u[37]||(u[37]=d=>i.value.chain().focus().setColor("#FF5722").run()),style:{"background-color":"#FF5722"}}),w("button",{onClick:u[38]||(u[38]=d=>i.value.chain().focus().setColor("#795548").run()),style:{"background-color":"#795548"}})])]),w("div",Y8,[u[75]||(u[75]=w("button",{class:"dropdown-toggle",title:"Destaque"},[w("i",{class:"fas fa-highlighter"}),w("i",{class:"fas fa-caret-down"})],-1)),w("div",X8,[w("button",{onClick:u[39]||(u[39]=d=>i.value.chain().focus().toggleHighlight({color:"#FFFF00"}).run()),style:{"background-color":"#FFFF00"}}),w("button",{onClick:u[40]||(u[40]=d=>i.value.chain().focus().toggleHighlight({color:"#FFC107"}).run()),style:{"background-color":"#FFC107"}}),w("button",{onClick:u[41]||(u[41]=d=>i.value.chain().focus().toggleHighlight({color:"#FF8A65"}).run()),style:{"background-color":"#FF8A65"}}),w("button",{onClick:u[42]||(u[42]=d=>i.value.chain().focus().toggleHighlight({color:"#81C784"}).run()),style:{"background-color":"#81C784"}}),w("button",{onClick:u[43]||(u[43]=d=>i.value.chain().focus().toggleHighlight({color:"#80DEEA"}).run()),style:{"background-color":"#80DEEA"}}),w("button",{onClick:u[44]||(u[44]=d=>i.value.chain().focus().toggleHighlight({color:"#90CAF9"}).run()),style:{"background-color":"#90CAF9"}}),w("button",{onClick:u[45]||(u[45]=d=>i.value.chain().focus().toggleHighlight({color:"#B39DDB"}).run()),style:{"background-color":"#B39DDB"}}),w("button",{onClick:u[46]||(u[46]=d=>i.value.chain().focus().toggleHighlight({color:"#F48FB1"}).run()),style:{"background-color":"#F48FB1"}})])]),u[79]||(u[79]=w("span",{class:"divider"},null,-1)),w("button",{onClick:u[47]||(u[47]=d=>i.value.chain().focus().unsetAllMarks().run()),title:"Limpar formatao"},u[76]||(u[76]=[w("i",{class:"fas fa-remove-format"},null,-1)]))])])):he("",!0),w("div",Z8,[Ee(_n(aj),{editor:i.value},null,8,["editor"])])]))}},t7=mr(e7,[["__scopeId","data-v-e9d548d1"]]),n7={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},r7={class:"bg-white rounded-lg p-6 w-full max-w-2xl z-10 max-h-[90vh] flex flex-col"},s7={class:"flex-grow overflow-auto"},i7={__name:"NoteEditorModal",props:{modelValue:{type:Boolean,default:!1},content:{type:String,default:""}},emits:["update:modelValue","update:content","save"],setup(n,{emit:e}){const t=n,r=e,s=fe("");At(()=>t.modelValue,a=>{a&&(s.value=t.content)}),At(()=>t.content,a=>{s.value=a});const i=()=>{r("update:modelValue",!1)},o=()=>{r("update:content",s.value),r("save",s.value),i()};return(a,l)=>(z(),mt(T1,{to:"body"},[n.modelValue?(z(),j("div",n7,[w("div",{class:"fixed inset-0 bg-black opacity-50",onClick:i}),w("div",r7,[w("div",{class:"flex justify-between items-center mb-4"},[l[2]||(l[2]=w("h3",{class:"text-lg font-medium text-gray-900"},"Editar Anotao",-1)),w("button",{onClick:i,class:"text-gray-500 hover:text-gray-700"},l[1]||(l[1]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),w("div",s7,[Ee(t7,{modelValue:s.value,"onUpdate:modelValue":l[0]||(l[0]=c=>s.value=c),placeholder:"Escreva suas anotaes aqui..."},null,8,["modelValue"])]),w("div",{class:"mt-6 flex justify-end space-x-3"},[w("button",{onClick:i,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300"}," Cancelar "),w("button",{onClick:o,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Salvar ")])])])):he("",!0)]))}},o7={class:"mb-4"},a7={class:"mb-4"},l7={class:"mt-8 mb-4"},u7={class:"font-medium text-gray-800 mb-2 flex items-center"},c7=["d"],d7={class:"bg-gray-50 p-3 rounded-md"},f7={class:"flex items-center"},h7={class:"flex-grow"},p7={class:"flex items-center"},m7={key:0,class:"w-6 h-6 rounded-full overflow-hidden flex-shrink-0 mr-2"},g7=["src"],y7={key:1,class:"w-6 h-6 flex items-center justify-center bg-gray-100 rounded-full mr-2 text-lg"},v7={class:"flex items-center"},b7={key:0,class:"w-6 h-6 rounded-full overflow-hidden flex-shrink-0 mr-2"},w7=["src"],T7={key:1,class:"w-6 h-6 flex items-center justify-center bg-gray-100 rounded-full mr-2 text-lg"},E7=["onClick"],S7={class:"mt-2"},_7={class:"relative"},x7=["innerHTML"],C7=["onClick"],A7=["onClick"],k7={class:"mb-6 mt-8"},I7=["onUpdate:modelValue"],M7=["onClick"],P7={class:"flex gap-3 mt-8"},R7={key:0,class:"fixed inset-0 flex items-center justify-center z-50"},O7={class:"bg-white rounded-lg p-6 max-w-md w-full z-10"},D7={class:"mb-4 text-gray-600"},N7={class:"flex justify-end gap-3"},L7={__name:"ItineraryDayForm",setup(n){const e=ka(),t=pf(),r=fe(!1),s=fe([]),i=Oe(()=>{const I=[];return l.forEach(P=>{u.value.schedule[P.id].forEach((k,K)=>{k.activityId&&I.push(k.activityId)})}),I}),o=(I,P)=>{var K;const k=(K=u.value.schedule[I][P])==null?void 0:K.activityId;return s.value.filter(le=>le.id===k||!i.value.includes(le.id)).map(le=>({value:le.id,label:le.title,image:le.images&&le.images.length>0?le.images[0]:null,type:le.type||"default"}))};Oe(()=>s.value.map(I=>({value:I.id,label:I.title,image:I.images&&I.images.length>0?I.images[0]:null,type:I.type||"default"})));const a=I=>{const P={restaurant:"",hotel:"",attraction:"",transport:"",tour:"",museum:"",beach:"",hiking:"",shopping:"",default:""};return P[I]||P.default},l=[{id:"morning",label:"Manh",color:"text-yellow-500",icon:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"},{id:"lunch",label:"Almoo",color:"text-orange-500",icon:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"},{id:"afternoon",label:"Tarde",color:"text-red-500",icon:"M17.657 18.657A8 8 0 016.343 7.343S7 9 9 10c0-2 .5-5 2.986-7C14 5 16.09 5.777 17.656 7.343A7.975 7.975 0 0120 13a7.975 7.975 0 01-2.343 5.657z M9.879 16.121A3 3 0 1012.015 11L11 14H9c0 .768.293 1.536.879 2.121z"},{id:"night",label:"Noite",color:"text-indigo-500",icon:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"}],c=Oe(()=>t.params.id==="novo"),u=fe({title:"",date:new Date().toISOString().split("T")[0],description:"",transport:"",schedule:{morning:[],lunch:[],afternoon:[],night:[]},tips:[]}),d=fe({show:!1,message:"",type:"success"}),h=(I,P="success")=>{d.value={show:!0,message:I,type:P}},p=()=>{d.value.show=!1};kt(async()=>{var I,P,k,K,le,J;try{if(s.value=await vg(),!c.value){const ee=t.params.id,ue=await dD(ee);if(ue){const be=He=>Array.isArray(He)?He.map(Pe=>typeof Pe=="object"&&Pe!==null?{activityId:Pe.activityId||"",note:Pe.note||""}:{activityId:Pe||"",note:""}):[];u.value={title:ue.title||"",date:ue.date?new Date(ue.date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],description:ue.description||"",transport:ue.transport||"",schedule:{morning:be((I=ue.schedule)==null?void 0:I.morning),lunch:be(((P=ue.schedule)==null?void 0:P.lunch)||((k=ue.schedule)==null?void 0:k.midDay)),afternoon:be((K=ue.schedule)==null?void 0:K.afternoon),night:be(((le=ue.schedule)==null?void 0:le.night)||((J=ue.schedule)==null?void 0:J.evening))},tips:Array.isArray(ue.tips)?[...ue.tips]:[]}}else h("Dia no encontrado!","error"),e.push("/admin/itinerario")}}catch(ee){console.error("Erro ao carregar dados:",ee),h("Erro ao carregar dados!","error")}});const m=I=>{u.value.schedule[I].push({activityId:"",note:""})},y=(I,P)=>{u.value.schedule[I].splice(P,1)},v=()=>{u.value.tips.push("")},S=I=>{u.value.tips.splice(I,1)},T=async()=>{try{if(!u.value.title.trim()){h("O ttulo do dia  obrigatrio!","error");return}if(!u.value.date){h("A data  obrigatria!","error");return}let I=c.value?null:t.params.id;if(c.value){const le=(await df()).filter(ee=>ee.id.startsWith("day-")).map(ee=>{const ue=ee.id.match(/day-(\d+)/);return ue?parseInt(ue[1]):0});I=`day-${le.length>0?Math.max(...le)+1:1}`}const P={title:u.value.title.trim(),date:u.value.date,description:u.value.description.trim(),transport:u.value.transport.trim(),schedule:{morning:u.value.schedule.morning.filter(K=>K.activityId.trim()!=="").map(K=>({activityId:K.activityId,note:K.note.trim()})),lunch:u.value.schedule.lunch.filter(K=>K.activityId.trim()!=="").map(K=>({activityId:K.activityId,note:K.note.trim()})),afternoon:u.value.schedule.afternoon.filter(K=>K.activityId.trim()!=="").map(K=>({activityId:K.activityId,note:K.note.trim()})),night:u.value.schedule.night.filter(K=>K.activityId.trim()!=="").map(K=>({activityId:K.activityId,note:K.note.trim()}))},tips:u.value.tips.filter(K=>K.trim()!=="")};if(I){const K=I.match(/day-(\d+)/);K&&(P.dayNumber=parseInt(K[1]))}(await uD("santiago",I,P)).success?(h("Dia salvo com sucesso!","success"),c.value&&e.push(`/admin/itinerario/${I}`)):h("Erro ao salvar dia!","error")}catch(I){console.error("Erro ao salvar dia:",I),h("Erro ao salvar dia!","error")}},b=()=>{r.value=!0},C=async()=>{try{const I=t.params.id;(await yS("trips/santiago/itinerary",I)).success?(h("Dia excludo com sucesso!","success"),e.push("/admin/itinerario")):h("Erro ao excluir dia!","error"),r.value=!1}catch(I){console.error("Erro ao excluir dia:",I),h("Erro ao excluir dia!","error"),r.value=!1}},O=()=>{e.push("/admin/itinerario")},N=fe(!1),A=fe(""),x=fe({periodId:null,activityIndex:null}),_=(I,P)=>{x.value={periodId:I,activityIndex:P},A.value=u.value.schedule[I][P].note,N.value=!0},M=I=>{const{periodId:P,activityIndex:k}=x.value;P!==null&&k!==null&&(u.value.schedule[P][k].note=I)};return(I,P)=>(z(),mt(yi,{title:c.value?"Novo Dia":`Editar Dia: ${u.value.title}`,alert:d.value,onCloseAlert:p},{default:nt(()=>[w("form",{onSubmit:Hs(T,["prevent"])},[Ee(Fn,{id:"title",label:"Ttulo",modelValue:u.value.title,"onUpdate:modelValue":P[0]||(P[0]=k=>u.value.title=k),required:""},null,8,["modelValue"]),w("div",o7,[P[7]||(P[7]=w("label",{for:"date",class:"block text-sm font-medium text-gray-700 mb-1"},"Data",-1)),Dt(w("input",{type:"date",id:"date","onUpdate:modelValue":P[1]||(P[1]=k=>u.value.date=k),class:"w-full px-3 py-2 border border-gray-300 rounded-md",required:""},null,512),[[jt,u.value.date]])]),w("div",a7,[P[8]||(P[8]=w("label",{for:"description",class:"block text-sm font-medium text-gray-700 mb-1"},"Descrio",-1)),Dt(w("textarea",{id:"description","onUpdate:modelValue":P[2]||(P[2]=k=>u.value.description=k),rows:"2",class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Descreva o dia brevemente"},null,512),[[jt,u.value.description]])]),Ee(Fn,{id:"transport",label:"Transporte",modelValue:u.value.transport,"onUpdate:modelValue":P[3]||(P[3]=k=>u.value.transport=k),placeholder:"Ex: Carro alugado, Transporte pblico, etc."},null,8,["modelValue"]),w("div",l7,[P[12]||(P[12]=w("h3",{class:"text-lg font-medium text-gray-900 mb-4 pb-2 border-b border-gray-200"},"Programao do Dia",-1)),(z(),j(Be,null,ot(l,k=>w("div",{key:k.id,class:"mb-6"},[w("h4",u7,[(z(),j("svg",{xmlns:"http://www.w3.org/2000/svg",class:ye(["h-5","w-5","mr-1",k.color]),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:k.icon},null,8,c7)],2)),St(" "+Ce(k.label),1)]),w("div",d7,[(z(!0),j(Be,null,ot(u.value.schedule[k.id],(K,le)=>(z(),j("div",{key:`${k.id}-${le}`,class:"flex flex-col mb-2 p-2 bg-white rounded border border-gray-200"},[w("div",f7,[w("div",h7,[Ee(_n(Rg),{modelValue:u.value.schedule[k.id][le].activityId,"onUpdate:modelValue":J=>u.value.schedule[k.id][le].activityId=J,options:o(k.id,le),placeholder:"Selecione uma atividade",searchable:!0,object:!1,valueProp:"value",label:"label"},{singleLabel:nt(({value:J,label:ee,image:ue,type:be})=>[w("div",p7,[ue?(z(),j("span",m7,[w("img",{src:ue,class:"w-full h-full object-cover",alt:""},null,8,g7)])):(z(),j("span",y7,Ce(a(be)),1)),w("span",null,Ce(ee),1)])]),option:nt(({option:J})=>[w("div",v7,[J.image?(z(),j("span",b7,[w("img",{src:J.image,class:"w-full h-full object-cover",alt:""},null,8,w7)])):(z(),j("span",T7,Ce(a(J.type)),1)),w("span",null,Ce(J.label),1)])]),_:2},1032,["modelValue","onUpdate:modelValue","options"])]),w("button",{type:"button",onClick:J=>y(k.id,le),class:"ml-2 text-red-600 hover:text-red-800"},P[9]||(P[9]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,E7)]),w("div",S7,[w("div",_7,[w("div",{class:"w-full p-2 border border-gray-200 rounded-md text-sm min-h-[66px] bg-gray-50",innerHTML:u.value.schedule[k.id][le].note},null,8,x7),w("button",{type:"button",onClick:J=>_(k.id,le),class:"absolute top-1 right-1 p-1 bg-white rounded-md text-blue-600 hover:text-blue-800 shadow-sm"},P[10]||(P[10]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})],-1)]),8,C7)])])]))),128)),w("button",{type:"button",onClick:K=>m(k.id),class:"w-full mt-2 px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 text-sm flex items-center justify-center"},P[11]||(P[11]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),St(" Adicionar Atividade ")]),8,A7)])])),64))]),w("div",k7,[P[15]||(P[15]=w("h3",{class:"text-lg font-medium text-gray-900 mb-4 pb-2 border-b border-gray-200"},"Dicas do Dia",-1)),(z(!0),j(Be,null,ot(u.value.tips,(k,K)=>(z(),j("div",{key:`tip-${K}`,class:"flex items-start mb-2"},[Dt(w("textarea",{"onUpdate:modelValue":le=>u.value.tips[K]=le,rows:"6",class:"flex-grow p-2 border border-gray-300 rounded-md",placeholder:"Dica ou recomendao para este dia"},null,8,I7),[[jt,u.value.tips[K]]]),w("button",{type:"button",onClick:le=>S(K),class:"ml-2 mt-1 text-red-600 hover:text-red-800"},P[13]||(P[13]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,M7)]))),128)),w("button",{type:"button",onClick:v,class:"w-full mt-3 px-3 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 text-sm flex items-center justify-center"},P[14]||(P[14]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),St(" Adicionar Dica ")]))]),w("div",P7,[c.value?he("",!0):(z(),j("button",{key:0,type:"button",onClick:b,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700"}," Excluir ")),P[16]||(P[16]=w("div",{class:"flex-grow"},null,-1)),Ee(mf,{onCancel:O})])],32),r.value?(z(),j("div",R7,[P[18]||(P[18]=w("div",{class:"fixed inset-0 bg-black opacity-50"},null,-1)),w("div",O7,[P[17]||(P[17]=w("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Confirmar Excluso",-1)),w("p",D7,' Tem certeza de que deseja excluir o dia "'+Ce(u.value.title)+'"? Esta ao no pode ser desfeita. ',1),w("div",N7,[w("button",{onClick:P[4]||(P[4]=k=>r.value=!1),class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300"}," Cancelar "),w("button",{onClick:C,class:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700"}," Excluir ")])])])):he("",!0),Ee(i7,{modelValue:N.value,"onUpdate:modelValue":P[5]||(P[5]=k=>N.value=k),content:A.value,"onUpdate:content":P[6]||(P[6]=k=>A.value=k),onSave:M},null,8,["modelValue","content"])]),_:1},8,["title","alert"]))}},V7={class:"mb-6"},$7={key:0,class:"text-center py-8"},B7={key:1,class:"bg-white shadow rounded-lg overflow-hidden"},F7={class:"divide-y divide-gray-200"},z7={class:"flex items-center justify-between"},j7={class:"text-lg font-medium text-gray-900"},H7={class:"text-sm text-gray-500 mt-1 flex items-center"},U7={class:"text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded"},q7={class:"hover:bg-gray-50 bg-gray-50"},W7={class:"flex items-center justify-between"},G7={class:"text-sm text-gray-500 mt-1 flex items-center"},K7={class:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded"},J7={__name:"TipsForm",setup(n){const e=fe({observations:"",categories:[]}),t=fe(!0),r=fe({show:!1,message:"",type:"success"}),s=(o,a="success")=>{r.value={show:!0,message:o,type:a}},i=()=>{r.value.show=!1};return kt(async()=>{try{t.value=!0;const o=await bg("santiago");o&&(console.clear(),console.log("data"),console.log(JSON.stringify(o)),e.value={observations:o.observations||"",categories:Array.isArray(o.categories)?o.categories:[]})}catch(o){console.error("Erro ao carregar dados:",o),s("Erro ao carregar dados!","error")}finally{t.value=!1}}),(o,a)=>{const l=Ta("router-link");return z(),mt(yi,{title:"Gesto de Dicas e Observaes",alert:r.value,onCloseAlert:i},{default:nt(()=>[w("div",V7,[a[4]||(a[4]=w("p",{class:"text-sm text-gray-600 mb-4"}," Gerencie as dicas e observaes disponveis no sistema. Selecione uma categoria para editar suas dicas. ",-1)),t.value?(z(),j("div",$7,a[0]||(a[0]=[w("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-600"},null,-1),w("p",{class:"mt-2 text-gray-500"},"Carregando dicas...",-1)]))):(z(),j("div",B7,[w("ul",F7,[(z(!0),j(Be,null,ot(e.value.categories,c=>(z(),j("li",{key:c.id,class:"hover:bg-gray-50"},[Ee(l,{to:`/admin/dicas/${c.id}`,class:"block p-4"},{default:nt(()=>[w("div",z7,[w("div",null,[w("h3",j7,Ce(c.title),1),w("p",H7,[w("span",U7,Ce(c.items?c.items.length:0)+" dicas ",1)])]),a[1]||(a[1]=w("div",{class:"text-gray-400"},[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1))])]),_:2},1032,["to"])]))),128)),w("li",q7,[Ee(l,{to:"/admin/dicas/observations",class:"block p-4"},{default:nt(()=>[w("div",W7,[w("div",null,[a[2]||(a[2]=w("h3",{class:"text-lg font-medium text-gray-900"},"Observaes Gerais",-1)),w("p",G7,[w("span",K7,Ce(e.value.observations?"Disponvel":"No definido"),1)])]),a[3]||(a[3]=w("div",{class:"text-gray-400"},[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 5l7 7-7 7"})])],-1))])]),_:1})])])]))])]),_:1},8,["alert"])}}},Q7={class:"mb-6"},Y7={class:"text-sm text-gray-600 mb-4"},X7={key:0,class:"text-center py-8"},Z7={key:1,class:"mt-4"},eH={key:2},tH={class:"mb-3"},nH=["for"],rH=["id","onUpdate:modelValue"],sH={class:"mb-3"},iH=["for"],oH=["id","onUpdate:modelValue"],aH={class:"mb-3"},lH=["for"],uH=["id","onUpdate:modelValue"],cH={class:"flex justify-end"},dH=["onClick"],fH={__name:"TipDetailForm",setup(n){const e=ka(),t=pf(),r=Oe(()=>t.params.category),s=fe([]),i=fe(""),o=fe({observations:"",categories:[]}),a=fe(null),l=fe(!0),c=fe({show:!1,message:"",type:"success"}),u={observations:"Observaes gerais e importantes sobre a viagem."},d=()=>r.value==="observations",h=()=>{var C;return d()?"Editar Observaes Gerais":`Editar ${((C=a.value)==null?void 0:C.title)||"Categoria"}`},p=()=>d()?u.observations:"Edite os itens desta categoria. Cada item deve ter um ttulo, descrio e cone.",m=(C,O="success")=>{c.value={show:!0,message:C,type:O}},y=()=>{c.value.show=!1},v=()=>{s.value.push({title:"",description:"",icon:"fas fa-info-circle"})},S=C=>{s.value.splice(C,1)};kt(async()=>{var C;try{l.value=!0;const O=await bg("santiago");if(O)if(o.value=O,d())i.value=O.observations||"";else{const N=(C=O.categories)==null?void 0:C.find(A=>A.id===r.value);N?(a.value={id:N.id,title:N.title},s.value=Array.isArray(N.items)?JSON.parse(JSON.stringify(N.items)):[]):m("Categoria no encontrada!","error")}}catch(O){console.error("Erro ao carregar dados:",O),m("Erro ao carregar dados!","error")}finally{l.value=!1}});const T=async()=>{try{const C=JSON.parse(JSON.stringify(o.value));if(d())C.observations=i.value;else{const N=C.categories.findIndex(A=>A.id===r.value);if(N!==-1){const A=s.value.filter(x=>x.title.trim()!==""||x.description.trim()!=="");C.categories[N].items=A}else{m("Categoria no encontrada para atualizao!","error");return}}(await aD("santiago",C)).success?(m("Dados salvos com sucesso!","success"),setTimeout(()=>{b()},1500)):m("Erro ao salvar dados!","error")}catch(C){console.error("Erro ao salvar dados:",C),m("Erro ao salvar dados!","error")}},b=()=>{e.push("/admin/dicas")};return(C,O)=>(z(),mt(yi,{title:h(),alert:c.value,onCloseAlert:y},{default:nt(()=>[w("form",{onSubmit:Hs(T,["prevent"])},[w("div",Q7,[w("p",Y7,Ce(p()),1),l.value?(z(),j("div",X7,O[1]||(O[1]=[w("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-blue-600"},null,-1),w("p",{class:"mt-2 text-gray-500"},"Carregando dados...",-1)]))):d()?(z(),j("div",Z7,[Dt(w("textarea",{"onUpdate:modelValue":O[0]||(O[0]=N=>i.value=N),rows:"8",class:"w-full p-3 border border-gray-300 rounded-md",placeholder:"Digite aqui as observaes gerais sobre a viagem"},null,512),[[jt,i.value]])])):(z(),j("div",eH,[(z(!0),j(Be,null,ot(s.value,(N,A)=>(z(),j("div",{key:`item-${A}`,class:"mb-6 p-4 border border-gray-200 rounded-md bg-gray-50"},[w("div",tH,[w("label",{for:`item-title-${A}`,class:"block text-sm font-medium text-gray-700 mb-1"},"Ttulo",8,nH),Dt(w("input",{id:`item-title-${A}`,"onUpdate:modelValue":x=>s.value[A].title=x,type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Ttulo da dica"},null,8,rH),[[jt,s.value[A].title]])]),w("div",sH,[w("label",{for:`item-description-${A}`,class:"block text-sm font-medium text-gray-700 mb-1"},"Descrio",8,iH),Dt(w("textarea",{id:`item-description-${A}`,"onUpdate:modelValue":x=>s.value[A].description=x,rows:"3",class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Descrio detalhada da dica"},null,8,oH),[[jt,s.value[A].description]])]),w("div",aH,[w("label",{for:`item-icon-${A}`,class:"block text-sm font-medium text-gray-700 mb-1"},"cone (FontAwesome)",8,lH),Dt(w("input",{id:`item-icon-${A}`,"onUpdate:modelValue":x=>s.value[A].icon=x,type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md",placeholder:"Ex: fas fa-thermometer-half"},null,8,uH),[[jt,s.value[A].icon]])]),w("div",cH,[w("button",{type:"button",onClick:x=>S(A),class:"px-3 py-1 bg-red-100 text-red-700 rounded-md hover:bg-red-200 text-sm flex items-center"},O[2]||(O[2]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1),St(" Remover Item ")]),8,dH)])]))),128)),w("button",{type:"button",onClick:v,class:"w-full mt-3 px-3 py-2 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 text-sm flex items-center justify-center"},O[3]||(O[3]=[w("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-4 w-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[w("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 4v16m8-8H4"})],-1),St(" Adicionar Novo Item ")]))]))]),w("div",{class:"flex justify-end gap-3 mt-8"},[w("button",{type:"button",onClick:b,class:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300"}," Cancelar "),O[4]||(O[4]=w("button",{type:"submit",class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700"}," Salvar ",-1))])],32)]),_:1},8,["title","alert"]))}},hH={class:"admin-layout p-6 max-w-7xl mx-auto"},pH={key:1,class:"text-red-500"},mH={__name:"AdminLayout",setup(n){return kt(()=>{console.log("AdminLayout component mounted")}),(e,t)=>{const r=Ta("router-view");return z(),j("div",hH,[Ee(r,null,{default:nt(({Component:s})=>[s?(z(),mt(yA(s),{key:0})):(z(),j("p",pH," Nenhum componente carregado para esta rota. Verifique o console para erros. "))]),_:1})])}}},gH=[{path:"/",name:"home"},{path:"/admin",component:mH,children:[{path:"header",name:"admin-header",component:L4,meta:{requiresAuth:!0}},{path:"footer",name:"admin-footer",component:p3,meta:{requiresAuth:!0}},{path:"atividades",name:"admin-atividades",component:M3,meta:{requiresAuth:!0}},{path:"atividades/:id",name:"admin-atividades-detalhes",component:l$,meta:{requiresAuth:!0}},{path:"itinerario",name:"admin-itinerario",component:w$,meta:{requiresAuth:!0}},{path:"itinerario/:id",name:"admin-itinerario-detalhes",component:L7,meta:{requiresAuth:!0}},{path:"dicas",name:"admin-dicas",component:J7,meta:{requiresAuth:!0}},{path:"dicas/:category",name:"admin-dicas-categoria",component:fH,meta:{requiresAuth:!0}}]}],Of=f4({history:zV("/santiago/"),routes:gH});Of.beforeEach((n,e,t)=>{console.log(`Navegando para: ${n.fullPath}`),n.matched.some(r=>r.meta.requiresAuth),t()});Of.afterEach(n=>{console.log(`Navegao concluda: ${n.fullPath}`)});console.log("Starting Vue application");console.log("Routes registered:",Of.getRoutes());const py=Rk(y4);py.config.errorHandler=(n,e,t)=>{console.error("Vue error:",n),console.error("Component:",e),console.error("Info:",t)};py.use(Of);py.mount("#app");console.log("Vue app mounted");
